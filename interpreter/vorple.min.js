!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=92)}([function(e,t,n){var r,i;r=[n(28),n(59),n(35),n(60),n(61),n(44),n(36),n(62),n(45),n(63),n(94),n(20),n(6),n(29),n(64),n(24)],void 0===(i=function(e,t,n,r,i,o,s,a,u,c,l,f,p,d,h,y){"use strict";var g=function(e,t){return new g.fn.init(e,t)};function m(e){var t=!!e&&"length"in e&&e.length,n=y(e);return!p(e)&&!d(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}return g.fn=g.prototype={jquery:"3.5.1",constructor:g,length:0,toArray:function(){return n.call(this)},get:function(e){return null==e?n.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=g.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return g.each(this,e)},map:function(e){return this.pushStack(g.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(g.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(g.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:i,sort:e.sort,splice:e.splice},g.extend=g.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||p(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(e=arguments[a]))for(t in e)r=e[t],"__proto__"!==t&&s!==r&&(c&&r&&(g.isPlainObject(r)||(i=Array.isArray(r)))?(n=s[t],o=i&&!Array.isArray(n)?[]:i||g.isPlainObject(n)?n:{},i=!1,s[t]=g.extend(c,o,r)):void 0!==r&&(s[t]=r));return s},g.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var n,r;return!(!e||"[object Object]"!==a.call(e))&&(!(n=t(e))||"function"==typeof(r=u.call(n,"constructor")&&n.constructor)&&c.call(r)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){h(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(m(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(m(Object(e))?g.merge(n,"string"==typeof e?[e]:e):i.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:o.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,s=!n;i<o;i++)!t(e[i],i)!==s&&r.push(e[i]);return r},map:function(e,t,n){var i,o,s=0,a=[];if(m(e))for(i=e.length;s<i;s++)null!=(o=t(e[s],s,n))&&a.push(o);else for(s in e)null!=(o=t(e[s],s,n))&&a.push(o);return r(a)},guid:1,support:f}),"function"==typeof Symbol&&(g.fn[Symbol.iterator]=e[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){s["[object "+t+"]"]=t.toLowerCase()}),g}.apply(t,r))||(e.exports=i)},function(e,t,n){"use strict";n.r(t),n.d(t,"expectInput",function(){return E}),n.d(t,"get",function(){return k}),n.d(t,"hide",function(){return S}),n.d(t,"history",function(){return x}),n.d(t,"sendCommand",function(){return C}),n.d(t,"init",function(){return A}),n.d(t,"isReady",function(){return I}),n.d(t,"prefix",function(){return L}),n.d(t,"scrollOrFocus",function(){return F}),n.d(t,"setDoScroll",function(){return R}),n.d(t,"show",function(){return D});var r=n(3),i=n(7),o=n(23),s=n(4);let a=[],u=0,c="",l=!1,f=!1,p=null,d=!1,h=null,y=null,g=new CustomEvent("lineinputReady"),m=null,v=null,w=null;function _(e){const t=u,n=t+e,r=a.length;t===r&&(c=p.value),n<r&&n>=0?(p.value=a[n],u=n):n===r&&(p.value=c,u=n)}function b(){const e=Object(s.get)(0),t=Object(s.get)(1),n=function e(t){let n=[];for(t=t.firstChild;t;t=t.nextSibling)3===t.nodeType?n.push(t):n=n.concat(e(t));return n}(e),r=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),i=/\S/;for(let e=0;e<n.length;++e)if(i.test(n[e].textContent)){let i=n[e].parentNode.getBoundingClientRect().top-window.innerHeight/3;return t&&(i+=t.getBoundingClientRect().height),void(r<i&&window.scrollTo(0,i))}}function E(){D();const e=Object(s.get)(0),t=e.querySelector(".turn.previous");t&&t.classList.remove("previous");const n=e.querySelector(".turn.current");n&&(n.classList.remove("current"),n.classList.add("previous")),"function"==typeof m&&setTimeout(m,1)}function k(){return y}function S(){Object(i.setMode)("buffer"),y.parentNode&&y.parentNode.removeChild(y)}const x={add:function(e){return!!e&&(a.push(e),u===a.length-1&&u++,!0)},clear:function(){a=[],u=0},get:function(){return a.slice()},remove:function(e){return 0!==a.length&&("number"!=typeof e?(a.pop(),u>a.length&&(u=a.length),!0):!(e<0||e>=a.length)&&(a.splice(e,1),u>e&&u--,!0))},set:function(e){a=e.slice()}},T=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],O={};for(let e=0;e<T.length;e++){const t=T[e].letters;for(let n=0;n<t.length;n++)O[t[n]]=T[e].base}async function C(e,t){let n=Boolean(e.detail&&e.detail.silent),r=e.detail&&e.detail.userAction;const i=t||p.value;let o=i;const c=a.length>0&&a[a.length-1];if("boolean"!=typeof r&&(r=!0),N||(o=o.replace(/[^\u0000-\u007E]/g,function(e){return O[e]||e})),"function"==typeof w&&"object"==typeof(o=w(o,{silent:n,userAction:r}))&&"function"==typeof o.then)try{o=await Promise.resolve(o)}catch(e){return}if(!1===o)return;const l=t||p.value;r&&(p.value=""),S(),"function"==typeof v&&await v({input:o,original:i,silent:n,userAction:r}),!n&&i!==c&&/\S/.test(i)&&x.add(i),r&&(u=a.length),Object(s.newTurnContainer)(0),f||n||function(e,t,n){const r=s.container.get(n),i=document.createElement("div"),o=document.createElement("span"),a=document.createElement("span"),u=document.querySelector(".lineinput.last");u&&u.classList.remove("last"),i.className="lineinput last",o.className="prompt-prefix",a.className="prompt-input",o.innerHTML=e,a.innerHTML=t,i.appendChild(o),i.appendChild(a),r.appendChild(i)}(L.get(),l,0),window.Glk.sendLine(o)}let N=!0;function A(e){if(y=document.getElementById("lineinput"),h=document.getElementById("lineinput-prefix"),p=document.getElementById("lineinput-field"),y||((y=document.createElement("form")).id="lineinput",document.getElementById("output").appendChild(y)),h||((h=document.createElement("label")).id="lineinput-prefix",h.setAttribute("for","lineinput-field"),y.appendChild(h)),p||((p=document.createElement("input")).id="lineinput-field",p.setAttribute("name","lineinput"),p.setAttribute("type","text"),p.setAttribute("autocapitalize","none"),p.setAttribute("autocomplete","off"),y.appendChild(p)),m=e.expectHook,v=e.submitHook,w=e.inputFilter,f=!!e.enginePrompt,N=!!e.unicode,y.addEventListener("submit",function(e){e.preventDefault(),C(e)},!1),p.addEventListener("keydown",function(e){const t=e.which||e.keyCode;38===t&&(_(-1),e.preventDefault()),40===t&&(_(1),e.preventDefault())},!1),"ontouchstart"in window){let e=!0;p.addEventListener("focus",function(){e?e=!1:document.body.classList.add("safarifix")}),p.addEventListener("blur",function(){document.body.classList.remove("safarifix")})}y.parentNode.removeChild(y)}function I(){return"getline"===Object(i.getMode)()}const L={get:function(){return f?"":h.innerHTML},set:function(e){f||(h.innerHTML=e)}};function F(e){const t=document.documentElement,n=(window.pageYOffset||t.scrollTop)-(t.clientTop||0),r=window.getSelection||function(){return document.selection?document.selection.createRange().text:""},i=!y.parentNode;let o=window.innerHeight;if(Object(s.get)(1)&&(o=window.innerHeight-haven.window.get(1).getBoundingClientRect().height),!e||!(32===e.keycode||e.keyCode>127||e.altKey||e.ctrlKey||e.metaKey)){if(!e||!e.target||"INPUT"!==e.target.nodeName&&""===r().toString())if(i||n+window.innerHeight>document.body.clientHeight-60)y.parentNode&&(p.focus(),e&&e.stopPropagation&&document.activeElement!==p&&e.stopPropagation()),window.scrollTo(0,(document.scrollingElement||document.body).scrollHeight);else if(l?(window.scrollTo(0,n+o-40),y.parentNode&&n+o+window.innerHeight-40>=document.body.clientHeight&&p.focus(),e&&e.preventDefault&&e.preventDefault()):b(),e&&"keydown"===e.type&&8===(e.which||e.keyCode))return!1;d=!1}}function R(e){l=e}function D(){Object(i.setMode)("getline"),Object(r.flush)(),Object(s.get)(0).appendChild(y),F(),l=!0,o.autosave.save(),y.dispatchEvent(g)}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"HANDSHAKE_FILENAME",function(){return c}),n.d(t,"JS_EVAL_FILENAME",function(){return l}),n.d(t,"JS_RETURN_VALUE_FILENAME",function(){return f}),n.d(t,"JS_RETURN_VALUE_TYPE_FILENAME",function(){return p}),n.d(t,"ASYNC_FS_ROOT",function(){return g}),n.d(t,"INFORM_PATH",function(){return m}),n.d(t,"VORPLE_PATH",function(){return v}),n.d(t,"SAVEFILE_PATH",function(){return w}),n.d(t,"TRANSCRIPT_PATH",function(){return _}),n.d(t,"TMP_PATH",function(){return b}),n.d(t,"copy",function(){return x}),n.d(t,"exists",function(){return T}),n.d(t,"filePrompt",function(){return O}),n.d(t,"getFS",function(){return C}),n.d(t,"inAsyncFS",function(){return N}),n.d(t,"info",function(){return A}),n.d(t,"informHeader",function(){return I}),n.d(t,"init",function(){return L}),n.d(t,"isReady",function(){return F}),n.d(t,"markReady",function(){return R}),n.d(t,"mkdir",function(){return D}),n.d(t,"move",function(){return M}),n.d(t,"path",function(){return j}),n.d(t,"read",function(){return P}),n.d(t,"readdir",function(){return U}),n.d(t,"resourceUrl",function(){return B}),n.d(t,"rmdir",function(){return z}),n.d(t,"restoreFilePrompt",function(){return H}),n.d(t,"saveFilePrompt",function(){return q}),n.d(t,"transcriptFilePrompt",function(){return W}),n.d(t,"unlink",function(){return Y}),n.d(t,"write",function(){return G});var r=n(12);const i=n(139),{basename:o,dirname:s,resolve:a}=n(142),u=n(32),c="VpHndshk",l="VpJSEval",f="VpJSRtrn",p="VpJSType",d="Callooh!",h="Callay!",y="/",g="/extended/",m=y+"inform",v=y+"vorple",w=g+"savefiles",_=g+"transcripts",b="/tmp",E=m;let k=null;function S(e){return new RegExp("^[\\-*] //.*// .*\\s+").test(e)}function x(e,t,n={}){const r={cwd:E,replace:!0,...n},i=j(e,r.cwd);if(!T(i))return!1;if(A(i).isDirectory)return!1;const s=j(t,r.cwd);let a=s;if(T(s)&&A(s).isDirectory&&(a=j(o(e),s)),T(a)){if(!r.replace)return!1;if(A(a).isDirectory)return!1}try{return G(a,P(i,{header:!0}),{header:!1}),!0}catch(e){return!1}}function T(e,t={}){const n={cwd:E,...t};return k.existsSync(j(e,n.cwd))}function O(e,t=m){const n=N(t),r=C(),i=async function(e){return new Promise(t=>{try{r.exists(e,e=>t(e))}catch(e){t(!1)}})},o=function(){u.dialog.open({message:"Enter filename:",input:['<input name="filename" type="text" required />'].join(""),buttons:[$.extend({},u.dialog.buttons.YES,{text:"Save"}),$.extend({},u.dialog.buttons.NO,{text:"Cancel"})],callback:async function(r){if(r){const o=j(r.filename,t);n?await i(o)?s(o):e(o):T(o)?s(o):e(o)}else e(null)}})},s=function(t){u.dialog.open({message:"File already exists. Overwrite?",buttons:[$.extend({},u.dialog.buttons.YES,{text:"Overwrite"}),$.extend({},u.dialog.buttons.NO,{text:"Cancel"})],callback:function(n){e(n?t:null)}})};n?async function(){await i(t)||D(t,o),o()}():(T(t)||D(t),o())}function C(){return k}function N(e){return e.startsWith(g)}function A(e,t){const n={cwd:E,...t};try{const t=j(e,n.cwd),r=k.statSync(t).isDirectory();let i;if(null===(i=r?U(e,{cwd:n.cwd}):P(e,{cwd:n.cwd,header:!0})))return!1;const a=S(i)?{project:i.split("//")[1],ready:"*"===i.charAt(0)}:null;return{contents:i,directory:s(t),name:o(t),header:a,isDirectory:r,path:t}}catch(e){return null}}function I(e,t,n=!0){const i=n?"*":"-";return 7===Object(r.getInformVersion)()?`${i} //${e}// ${o(t)}\n`:""}function L(){return new Promise((e,t)=>{if(k)return e(k);i.configure({fs:"MountableFileSystem",options:{[y]:{fs:"LocalStorage",options:{}},[g]:{fs:"IndexedDB",options:{}},[b]:{fs:"InMemory",options:{}}}},async n=>{if(n)return t(n);k=i.BFSRequire("fs"),[v,m].forEach(e=>{T(e)||D(e)}),await Promise.all([w,_].map(e=>new Promise(t=>{k.exists(e,n=>{n?t():k.mkdir(e,t)})})));try{k.writeFileSync(j(c,v),"","utf8")}catch(e){}e(k)})})}function F(e,t={}){const n={cwd:E,...t};if(7!==Object(r.getInformVersion)())return!1;const i=P(e,{cwd:n.cwd,header:!0});return null!==i&&(!!S(i)&&"*"===i.charAt(0))}function R(e,t=!0,n={}){const i={cwd:E,...n};if(7!==Object(r.getInformVersion)())return!1;const o=P(e,{cwd:i.cwd,header:!0});return!!o&&(!!S(o)&&G(e,(t?"*":"-")+o.substr(1),{cwd:i.cwd,header:!1}))}function D(e,t={}){const n=j(e,{cwd:E,...t}.cwd);if(N(n))return k.mkdir(n);try{return k.mkdirSync(n),!0}catch(e){return!1}}function M(e,t,n={}){const r={cwd:E,replace:!0,...n};if(!T(e,{cwd:r.cwd}))return!1;const i=j(e,r.cwd),s=A(i).isDirectory,a=j(t,r.cwd);let u=a;if(T(a)&&A(a).isDirectory&&(u=j(o(e),a)),T(u)){if(!r.replace)return!1;if(s)return!1;if(A(u).isDirectory)return!1}try{return k.renameSync(i,u),!0}catch(e){return!1}}function j(e,t="."){return a(E,t,e)}function P(e,t={}){const n={binary:!1,cwd:E,header:!1,...t},r=n.binary?{}:"utf8";if(e===c)return I("VORPLE",e)+h;try{const t=k.readFileSync(j(e,n.cwd),r,"r");return!n.header&&S(t)?t.substr(t.indexOf("\n")+1):t}catch(e){return null}}function U(e,t={}){const n={cwd:E,...t};try{return k.readdirSync(j(e,n.cwd))}catch(e){return null}}function B(e){if("string"!=typeof e||!e)return e;const t=e.toLowerCase();return t.indexOf("http://")>-1||t.indexOf("https://")>-1?e:window.borogove&&window.borogove.getFileContents?window.borogove.getFileContents(e):e}function z(e,t={}){const n={cwd:E,...t};try{return k.rmdirSync(j(e,n.cwd)),!0}catch(e){return!1}}async function H(e,t){const n=j(e,w),r=C(),i=await new Promise(e=>r.readdir(n,(t,n)=>e(n)));i?u.dialog.open({message:"Choose save file to restore:",input:'<ul style="list-style-type:none">'+i.map((e,t)=>`<li>\n                <label>\n                    <input type="radio" value="${t}" name="fileindex" required>\n                    ${e}\n                </label>\n            </li>`).join("")+"</ul>",buttons:[$.extend({},u.dialog.buttons.YES,{text:"Restore"}),$.extend({},u.dialog.buttons.NO,{text:"Cancel"})],callback:function(e){if(!e)return t(null);{const o=j(i[e.fileindex],n),s=j(i[e.fileindex],b);r.readFile(o,{},(e,n)=>{G(s,n,{binary:!0}),t(s)})}}}):u.dialog.open({message:"There are no save files yet.",buttons:[$.extend({},u.dialog.buttons.YES,{text:"OK"})],callback:function(){t(null)}})}function q(e,t){O(t,j(e,w))}function W(e){const t=prompt("Enter filename");if(!t)return e(null);e(j(t,_))}function Y(e,t={}){const n={cwd:E,...t};try{return k.unlinkSync(j(e,n.cwd)),!0}catch(e){return!1}}function G(t,n,i={}){const o={append:!1,binary:!1,cwd:E,header:!0,project:"VORPLE",ready:!0,...i},s=j(t,o.cwd),a=Object(r.getInformVersion)(),u=o.binary?{}:"utf8";let l="";if(o.binary?n=e.from(n):n instanceof Uint8Array?n=n.toString():Array.isArray(n)&&(n=n.map(e=>String.fromCharCode(e)).join("")),o.header&&!o.binary&&(l=I(o.project,t,o.ready)),t===c&&n.length>0&&!a){const e=n.toString();return e===d?(Object(r.setInformVersion)(6),!0):S(e)?(Object(r.setInformVersion)(7),!0):(console.warn("Unknown handshake initialization from the story file – can't detect Inform version"),!1)}try{if(N(s)){if(0===n.length)return;return o.append?k.appendFile(s,n,u,e=>console.log(e)):k.writeFile(s,n,u,e=>console.log(e)),!0}return o.append?(l&&!T(s)&&k.writeFileSync(s,l,u),k.appendFileSync(s,n,u)):l?k.writeFileSync(s,l+n,u):k.writeFileSync(s,n,u),!0}catch(e){return!1}}}.call(this,n(135).Buffer)},function(e,t,n){"use strict";n.r(t),n.d(t,"append",function(){return u}),n.d(t,"flush",function(){return c}),n.d(t,"init",function(){return l}),n.d(t,"newline",function(){return f});var r=n(7),i=n(5);const o=[""];let s=null;function a(e){let t="";for(let n=0;n<e.length;++n)if(e.charCodeAt(n)>127)t+="&#"+e.charCodeAt(n)+";";else switch(e[n]){case"&":t+="&amp;";break;case"<":t+="&lt;";break;case">":t+="&gt;";break;case"\r":t+="\n";break;default:t+=e[n]}return t}function u(e,t=0){if(o[t]||(o[t]=""),e.indexOf("\n")>-1||e.indexOf("\r")>-1){const n=Math.max(e.lastIndexOf("\n"),e.lastIndexOf("\r"))+1;o[t]+=a(e.substr(0,n)),c(t),o[t]=a(e.substr(n))}else o[t]+=a(e)}function c(e){if(void 0===e)for(var t in o)c(+t);if(!o[e]||!haven.window.get(e))return;let n=o[e];if(0===e&&s&&""!==n){const e=i.c.get()[0],t=s(n,{style:{bold:Boolean(e.bold),italic:Boolean(e.italic)}});"string"==typeof t&&(n=t)}haven.window.append(n,e),o[e]="",0===e&&Object(r.textWasPrinted)(!0)}function l(e){e&&e.outputFilter&&(s=e.outputFilter)}function f(e){o[e]?o[e]+="\n":o[e]="\n",c(e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"append",function(){return d}),n.d(t,"clear",function(){return h}),n.d(t,"create",function(){return y}),n.d(t,"container",function(){return g}),n.d(t,"get",function(){return m}),n.d(t,"getUIState",function(){return v}),n.d(t,"init",function(){return w}),n.d(t,"measureDimensions",function(){return _}),n.d(t,"newTurnContainer",function(){return b}),n.d(t,"position",function(){return E}),n.d(t,"setTitle",function(){return k});var r=n(3),i=n(8),o=n(1),s=n(5);const a=[],u=[],c=[];let l=null,f=[];function p(e,t,n,r){const i=a[r],o=function e(t){let n=[];for(t=t.firstChild;t;t=t.nextSibling)3===t.nodeType?n.push(t):n=n.concat(e(t));return n}(i),s=document.createRange();let u=1,c=1,l=!1,p=0;if(function(){for(let r=0;r<o.length;++r){let i=o[r].textContent;if(u===e)for(let e=0;e<i.length;++e){if(l){if(++p===n.textContent.length||"\n"===i[e])return s.setEnd(o[r],e),!1}else if(c===t){if(s.setStart(o[r],e),l=!0,e===i.length-1)return s.setEnd(o[r],e),!1}else if("\n"===i[e]){const n=document.createTextNode(Array(t-c+1).join(" ")+"\n");return o[r].textContent=i.substr(0,e)+" ",o[r].parentNode.insertBefore(n,o[r].nextSibling),s.setStart(n,t-c-1),s.setEnd(n,t-c-1),!1}c++}else i.indexOf("\n")>-1&&u++}return!0}())return function(e,t,n){for(let t=0;t<e;++t){const e=document.createElement("span");e.className="font-fixed-width",e.innerHTML="\n",a[n].appendChild(e)}if(t>0){const e=document.createElement("span");e.innerHTML=Array(t).join(" "),e.className="font-fixed-width",a[n].appendChild(e)}E.reset(n)}(f[r].line-u,t,r),void i.appendChild(n);n.textContent.indexOf("\n")>-1?(n.textContent=n.textContent.replace("\n",""),f[r].line++,f[r].col=1):f[r].col+=n.textContent.length,s.deleteContents(),s.insertNode(n),n.nextSibling||(f[r].line=null,f[r].col=null)}function d(e,t){const n=document.createElement("span");f[t]||(f[t]={col:null,line:null}),Object(s.a)(n,t),n.innerHTML=e,null!==f[t].col&&null!==f[t].line?p(f[t].line,f[t].col,n,t):u[t].appendChild(n)}function h(e){if(void 0===e)Object(r.flush)(0),l.innerHTML="",l.appendChild(a[0]),Object(s.a)(a[0],0),Object(s.a)(document.body,0),E.reset();else{if(!a[e])return;Object(r.flush)(e),a[e].innerHTML="",Object(s.a)(a[e],e),0===e&&Object(s.a)(document.body,0),E.reset(e)}}function y(e,t,n,r,o){const s=_(),l=s.char.height,f=m(0).parentNode;let p;if(c[e]={left:t,top:n,right:r,bottom:o},!Object(i.a)("windowing"))return!1;0!==e?(m(e)&&f.removeChild(m(e)),(p=document.createElement("div")).id="window"+e,p.className="havenwindow font-fixed-width",p.style.height=l*(o-n+1)+"px",p.style.top=(n-1)*l+"px",p.style.marginLeft=t-1+"px",p.style.width=(r-t+2)*s.char.width+"px",a[e]=p,u[e]=p,g.append(p,f)):m(0).style.paddingTop=(n-1)*s.char.height+"px"}const g={append:function(e,t){"number"==typeof t?a[t].appendChild(e):t.appendChild(e)},get:function(e){return u[e]},set:function(e,t){u[t]=e}};function m(e){return a[e]}function v(){const e=[],t=Object(o.get)(),n=t.parentNode;n&&n.removeChild(t);let r=a[0].lastChild;a[0].removeChild(r);for(let t=0;t<a.length;++t)e[t]=a[t].innerHTML;a[0].appendChild(r),n&&n.appendChild(t);const i=e[0].lastIndexOf("\n");return e[0]=e[0].substring(0,i)+e[0].substring(i+1),{cmdHistory:o.history.get(),currentColors:s.b.get(),font:s.c.get(),position:f,title:document.title,windowDimensions:c,windowContents:e}}function w(){l=document.getElementById("output"),a.push(document.getElementById("window0")),u.push(a[0]),b(0)}function _(){const e=m(0).parentNode,t={window:{width:parseInt(window.getComputedStyle(e).width,10),height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},line:{},char:{}},n=document.createElement("span"),r=t.window;let i;return n.innerHTML="00000<br>00000<br>00000",n.className="font-fixed-width",n.style.display="inline-block",e.appendChild(n),t.char.width=n.offsetWidth/5,t.line.width=Math.floor((r.width-1)/t.char.width),n.style.display="block",i=n.clientHeight,n.innerHTML+="<br>00000<br>00000",t.char.height=(n.clientHeight-i)/2+3,t.line.height=Math.floor(r.height/t.char.height),n.parentNode.removeChild(n),t}function b(e){const t=a[e],n=document.createElement("div");return n.className="turn current",t.appendChild(n),g.set(n,e),n}const E={reset:function(e){void 0===e?f=[{col:null,line:null}]:E.set(null,null,e)},restore:function(e){f=e},set:function(e,t,n){f[n]||(f[n]={}),f[n].col=e,f[n].line=t}};function k(e){document.title=e}},function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return f}),n.d(t,"c",function(){return p}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return h}),n.d(t,"f",function(){return y});var r=n(3),i=(n(8),n(1));let o=[c(0)],s=[{bold:!1,italic:!1,underline:!1,proportional:!0,original:0}],a=!0,u=!1;function c(e){return 1===e?{text:15,background:1}:{text:7,background:0}}function l(e,t){const n=[],r=Object(i.get)().getElementsByTagName("INPUT")[0],l=0===t;o[t]||(o[t]=c(t)),a&&(n.push("textcolor-"+o[t].text),n.push("bgcolor-"+o[t].background)),e.className=e.className.replace(/\b(text|bg)color-\d+/g,""),e.classList.remove("font-fixed-width"),l&&(r.className=r.className.replace(/\b(text|bg)color-\d+/g,""),r.classList.remove("font-fixed-width")),s[t]||(s[t]={bold:!1,italic:!1,underline:!1,proportional:!0,original:0});for(let i in s[t])u&&"proportional"===i||s[t].hasOwnProperty(i)&&(e.classList.remove("font-"+i),l&&r.classList.remove("font-"+i),s[t][i]&&n.push("font-"+i));u||!s[t].hasOwnProperty("proportional")||s[t].proportional||n.push("font-fixed-width");for(let t=0;t<n.length;++t)e.classList.add(n[t]),l&&r.classList.add(n[t])}const f={get:function(){return o},restore:function(e){o=e},set:function(e,t,n){o[n]||(o[n]=c(n)),o[n][e]!==t&&(Object(r.flush)(n),o[n][e]=t)}},p={get:function(){return s}};function d(e){u=!e.engineFontFamily,a=e.engineColors}function h(e){s=e}function y(e,t,n){Object(r.flush)(n),s[n][e]=t}const g=[];g[0]={bold:!1,italic:!1,underline:!1},g[1]={italic:!0},g[2]={},g[3]={bold:!0},g[4]={bold:!0}},function(e,t,n){var r;void 0===(r=function(){"use strict";return function(e){return"function"==typeof e&&"number"!=typeof e.nodeType}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){"use strict";n.r(t),n.d(t,"getMode",function(){return l}),n.d(t,"init",function(){return f}),n.d(t,"keypress",function(){return d}),n.d(t,"setMode",function(){return h}),n.d(t,"textWasPrinted",function(){return y}),n.d(t,"getTextWasPrinted",function(){return g});var r=n(3),i=n(1),o=n(9);let s=null;const a=[];let u=!1,c=null;function l(){return s}function f(e){d.addListener(e.expectHook),c=e.submitHook,document.addEventListener("keydown",d.send,!1),document.addEventListener("click",d.send,!1)}const p=[],d={addListener:function(e){return p.push(e),()=>d.removeListener(e)},init:function(){s||(s="buffer")},isWaiting:function(){return Object(r.flush)(),u&&Object(i.scrollOrFocus)(),a.length>0},removeListener:function(e){const t=p.indexOf(e);return-1!==t&&(p.splice(t,1),!0)},send:function(e){const t=e.keyCode,n=e instanceof MouseEvent,r=document.documentElement,u=(window.pageYOffset||r.scrollTop)-(r.clientTop||0),l=!Object(i.get)().parentNode;let f=!1;if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)){switch(s){case"buffer":a.push(t);break;case"getline":case null:return void Object(i.scrollOrFocus)(e);case"getkey":e.preventDefault&&e.preventDefault(),f=!0;break;case"endgame":return void(window.location=hugojs_options.exit_url);default:Object(o.a)("Interpreter error: unknown input mode "+s)}if((!(u+window.innerHeight<document.body.clientHeight-(l?0:40))||(Object(i.scrollOrFocus)(e),e.force))&&(s="buffer",f)){if("function"==typeof c){const r=c({event:e.force?null:e,input:n?null:t,original:n?null:t,userAction:!e.force,mouseClick:n});if("object"==typeof r&&r.then)return void r.then(()=>window.Glk.sendChar(t))}window.Glk.sendChar(t)}}},wait:function(){s="getkey",Object(r.flush)(),Object(i.scrollOrFocus)(),Object(i.setDoScroll)(),setTimeout(()=>{p.forEach(e=>e()),a.length>0&&d.send({keyCode:a.shift()})},1)}};function h(e){s=e}function y(e=!0){u=e}function g(){return y}},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});const r={autosave:!0,exit_url:"",extra_opcodes:!0,proxy_url:"https://zcode.appspot.com/proxy/?encode=base64&callback=processBase64Zcode&url=%s",use_proxy:"auto",windowing:!0};function i(e,t,n){var r,i=new RegExp("[?&]"+e+"=(.*?)(#|&|$)","i").exec(window.location.href);if(null===i||i.length<2)return n;switch(r=decodeURIComponent(i[1].split("+").join(" ")),t){case"boolean":return"true"===r.toLowerCase()||"on"===r||"1"===r||"false"!==r.toLowerCase()&&"off"!==r&&"0"!==r&&n;case"number":return parseFloat(r)+""===r?parseFloat(r):NaN;default:return 0===r.length?n:r}}function o(e){return r[e]}function s(e){let t;for(t in e=e||{})e.hasOwnProperty(t)&&void 0!==e[t]&&(r[t]=e[t]);if(r.lock_story||(r.story=i("story","string",r.story)||i("storyfile","string",r.story)),!r.lock_options){for(t in r)"story"!==t&&"storyfile"!==t&&r.hasOwnProperty(t)&&(r[t]=i(t,typeof r[t],r[t]));"false"!==r.exit_url&&"0"!==r.exit_url||(r.exit_url=!1)}}},function(e,t,n){"use strict";function r(e){const t=document.createElement("div"),n=document.getElementById("spinner"),r=document.getElementById("loader");throw t.id="fatal-error",t.innerHTML=e,document.body.appendChild(t),n&&n.parentNode.removeChild(n),r&&(r.className="stopped"),new Error(e)}n.d(t,"a",function(){return r})},function(e,t,n){var r;void 0===(r=function(){"use strict";return window.document}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r,i;r=[n(95)],void 0===(i=function(){}.apply(t,r))||(e.exports=i)},function(e,t,n){"use strict";n.r(t),n.d(t,"addEventListener",function(){return h}),n.d(t,"evaluate",function(){return y}),n.d(t,"getInformVersion",function(){return g}),n.d(t,"init",function(){return m}),n.d(t,"removeEventListener",function(){return v}),n.d(t,"requireVersion",function(){return w}),n.d(t,"setInformVersion",function(){return _}),n.d(t,"triggerEvent",function(){return b});var r=n(43),i=n(16),o=n(13),s=n(41),a=n(42),u=n(33),c=n(2),l=n(58);let f;const p={init:[],expectCommand:[],submitCommand:[],expectKeypress:[],submitKeypress:[],quit:[]};function d(e,t,n){if(!e||"function"==typeof e)return Object(o.error)(`Event name missing when trying to ${n} an event listener`);if(!p[e])return Object(o.error)(`Tried to ${n} a listener to an unknown event ${e}`);if("function"!=typeof t)return Object(o.error)(`Missing callback function when trying to ${n} listener for event ${e}`);if("add"===n)return p[e].push(t),!0;{const n=p[e].indexOf(t);return-1!==n&&(p[e].splice(n,1),!0)}}function h(e,t){return Array.isArray(e)||(e=[e]),e.forEach(e=>d(e,t,"add")),()=>v(e,t)}function y(e){const t=function(e){try{return JSON.stringify(e)}catch(e){return null}};let n;const r=function(e){if("*"===e.charAt(0))return e.substr(0,e.indexOf("\n")+1);return""}(e);e=e.substr(r.length),Object(o.log)("Evaluating: "+e);let i="nothing";try{n=new Function("'use strict';\n"+e)()}catch(t){Object(o.error)("JavaScript code from story file threw an error: "+t.message+"\n\n"+e)}const s=typeof n;if("undefined"!==s){if("string"===s)n='"'+n+'"',i="text";else if("function"===s||"symbol"===s)n=n.toString(),i="function";else if("undefined"!=typeof Set&&n instanceof Set)n=t(Array.from(n)),i="list";else if(n===1/0)n="Infinity",i="infinity";else if(n===-1/0)n="-Infinity",i="infinity";else if(n!=n)n="NaN",i="NaN";else if("boolean"===s)n=String(n),i="truth state";else if("number"===s)n=Math.abs(n)>1e20?function(e){let t;return Math.abs(e)<1?(t=parseInt(e.toString().split("e-")[1]))&&(e*=Math.pow(10,t-1),e="0."+new Array(t).join("0")+e.toString().substring(2)):(t=parseInt(e.toString().split("+")[1]))>20&&(t-=20,e/=Math.pow(10,t),e+=new Array(t+1).join("0")),e}(n):""+n,i="number";else if(n=t(n)){const e=n.charAt(0);"["===e?i="list":"{"===e&&(i="object")}Object(o.log)(`Return value (${i}): ${n}`),Object(c.write)(c.JS_RETURN_VALUE_TYPE_FILENAME,i,{cwd:c.VORPLE_PATH}),Object(c.write)(c.JS_RETURN_VALUE_FILENAME,n,{cwd:c.VORPLE_PATH})}else Object(o.log)("The code did not return anything")}function g(){return f}async function m(){Object(i.a)(async e=>{await b("init"),e()}),Object(s.init)(),await Object(c.init)(),Object(r.b)({container:vorple.options.container||"#vorple",enginePrompt:!1,engineFontFamily:!1,filters:{input:s.applyInputFilters,output:l.applyOutputFilters},hooks:{expectCommand:()=>{b("expectCommand")},expectKeypress:()=>{b("expectKeypress")},quit:()=>{b("quit")},submitCommand:e=>b("submitCommand",e),submitKeypress:e=>b("submitKeypress",e)},loadStoryFile:a.loadStoryFile,options:{...vorple.options,autosave:!1,engineColors:!1},startEngine:a.initQuixe,unicode:!0})}function v(e,t){return"function"==typeof e?(t=e,e=Object.keys(p)):Array.isArray(e)||(e=[e]),0===e.length||e.map(e=>d(e,t,"remove")).includes(!0)}function w(e,t){const n=u.a.split(".").map(e=>Number(e)),r=(""+e).split(".").map(e=>Number(e)),i=t||(t=>{t||Object(o.error)(`Vorple version ${e} was requested, but Vorple is at version ${u.a}`)});return n[0]<r[0]?(i(!1),!1):n[0]>r[0]||1===r.length?(i(!0),!0):n[1]<r[1]?(i(!1),!1):n[1]>r[1]||2===r.length||2===n.length?(i(!0),!0):n[2]<r[2]?(i(!1),!1):(i(!0),!0)}function _(e){f=e}async function b(e,t={}){for(let n=0;n<p[e].length;++n)await p[e][n]({...t,type:e})}},function(e,t,n){"use strict";n.r(t),n.d(t,"error",function(){return s}),n.d(t,"log",function(){return a}),n.d(t,"off",function(){return u}),n.d(t,"on",function(){return c}),n.d(t,"status",function(){return l}),n.d(t,"toggle",function(){return f});var r=n(9),i=n(3);let o=!1;function s(e){return console.error(e),Object(r.a)(e),!0}function a(e){return!!o&&(console.log(e),Object(i.append)("["+e+"]\n",0),!0)}function u(){return o=!1,l()}function c(){return o=!0,l()}function l(){return o}function f(){return o=!o,l()}},function(e,t,n){var r,i;r=[n(0),n(10),n(6),n(66),n(67)],void 0===(i=function(e,t,n,r){"use strict";var i,o=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,s=e.fn.init=function(s,a,u){var c,l;if(!s)return this;if(u=u||i,"string"==typeof s){if(!(c="<"===s[0]&&">"===s[s.length-1]&&s.length>=3?[null,s,null]:o.exec(s))||!c[1]&&a)return!a||a.jquery?(a||u).find(s):this.constructor(a).find(s);if(c[1]){if(a=a instanceof e?a[0]:a,e.merge(this,e.parseHTML(c[1],a&&a.nodeType?a.ownerDocument||a:t,!0)),r.test(c[1])&&e.isPlainObject(a))for(c in a)n(this[c])?this[c](a[c]):this.attr(c,a[c]);return this}return(l=t.getElementById(c[2]))&&(this[0]=l,this.length=1),this}return s.nodeType?(this[0]=s,this.length=1,this):n(s)?void 0!==u.ready?u.ready(s):s(e):e.makeArray(s,this)};return s.prototype=e.fn,i=e(t),s}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(69)],void 0===(i=function(e){"use strict";return new e}.apply(t,r))||(e.exports=i)},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return u});const r=["storyfile"],i=[];let o;function s(e){0===r.length&&setTimeout(e,0),i.push(e)}function a(e){o=e}function u(e){const t=r.indexOf(e);return-1!==t&&(r.splice(t,1),0===r.length&&function(){let e=0;const t=function(){++e<i.length?i[e](t):o&&o()};0!==i.length&&i[0](t)}(),!0)}},function(e,t,n){var r;void 0===(r=function(){"use strict";return function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){"use strict";return/[^\x20\t\r\n\f]+/g}.call(t,n,t,e))||(e.exports=r)},function(e,t){e.exports=jQuery},function(e,t,n){var r;void 0===(r=function(){"use strict";return{}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r,i;r=[n(0),n(24),n(6)],void 0===(i=function(e,t,n){"use strict";var r=function(i,o,s,a,u,c,l){var f=0,p=i.length,d=null==s;if("object"===t(s))for(f in u=!0,s)r(i,o,f,s[f],!0,c,l);else if(void 0!==a&&(u=!0,n(a)||(l=!0),d&&(l?(o.call(i,a),o=null):(d=o,o=function(t,n,r){return d.call(e(t),r)})),o))for(;f<p;f++)o(i[f],s,l?a:a.call(i[f],f,o(i[f],s)));return u?i:d?o.call(i):p?o(i[0],s):c};return r}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(10),n(6),n(18),n(114),n(86),n(87),n(14),n(88),n(56),n(26),n(89)],void 0===(i=function(e,t,n,r,i,o,s){"use strict";var a=/%20/g,u=/#.*$/,c=/([?&])_=[^&]*/,l=/^(.*?):[ \t]*([^\r\n]*)$/gm,f=/^(?:GET|HEAD)$/,p=/^\/\//,d={},h={},y="*/".concat("*"),g=t.createElement("a");function m(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var o,s=0,a=t.toLowerCase().match(r)||[];if(n(i))for(;o=a[s++];)"+"===o[0]?(o=o.slice(1)||"*",(e[o]=e[o]||[]).unshift(i)):(e[o]=e[o]||[]).push(i)}}function v(t,n,r,i){var o={},s=t===h;function a(u){var c;return o[u]=!0,e.each(t[u]||[],function(e,t){var u=t(n,r,i);return"string"!=typeof u||s||o[u]?s?!(c=u):void 0:(n.dataTypes.unshift(u),a(u),!1)}),c}return a(n.dataTypes[0])||!o["*"]&&a("*")}function w(t,n){var r,i,o=e.ajaxSettings.flatOptions||{};for(r in n)void 0!==n[r]&&((o[r]?t:i||(i={}))[r]=n[r]);return i&&e.extend(!0,t,i),t}return g.href=i.href,e.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:i.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(i.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":y,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":e.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,n){return n?w(w(t,e.ajaxSettings),n):w(e.ajaxSettings,t)},ajaxPrefilter:m(d),ajaxTransport:m(h),ajax:function(n,m){"object"==typeof n&&(m=n,n=void 0),m=m||{};var w,_,b,E,k,S,x,T,O,C,N=e.ajaxSetup({},m),A=N.context||N,I=N.context&&(A.nodeType||A.jquery)?e(A):e.event,L=e.Deferred(),F=e.Callbacks("once memory"),R=N.statusCode||{},D={},M={},j="canceled",P={readyState:0,getResponseHeader:function(e){var t;if(x){if(!E)for(E={};t=l.exec(b);)E[t[1].toLowerCase()+" "]=(E[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=E[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return x?b:null},setRequestHeader:function(e,t){return null==x&&(e=M[e.toLowerCase()]=M[e.toLowerCase()]||e,D[e]=t),this},overrideMimeType:function(e){return null==x&&(N.mimeType=e),this},statusCode:function(e){var t;if(e)if(x)P.always(e[P.status]);else for(t in e)R[t]=[R[t],e[t]];return this},abort:function(e){var t=e||j;return w&&w.abort(t),U(0,t),this}};if(L.promise(P),N.url=((n||N.url||i.href)+"").replace(p,i.protocol+"//"),N.type=m.method||m.type||N.method||N.type,N.dataTypes=(N.dataType||"*").toLowerCase().match(r)||[""],null==N.crossDomain){S=t.createElement("a");try{S.href=N.url,S.href=S.href,N.crossDomain=g.protocol+"//"+g.host!=S.protocol+"//"+S.host}catch(e){N.crossDomain=!0}}if(N.data&&N.processData&&"string"!=typeof N.data&&(N.data=e.param(N.data,N.traditional)),v(d,N,m,P),x)return P;for(O in(T=e.event&&N.global)&&0==e.active++&&e.event.trigger("ajaxStart"),N.type=N.type.toUpperCase(),N.hasContent=!f.test(N.type),_=N.url.replace(u,""),N.hasContent?N.data&&N.processData&&0===(N.contentType||"").indexOf("application/x-www-form-urlencoded")&&(N.data=N.data.replace(a,"+")):(C=N.url.slice(_.length),N.data&&(N.processData||"string"==typeof N.data)&&(_+=(s.test(_)?"&":"?")+N.data,delete N.data),!1===N.cache&&(_=_.replace(c,"$1"),C=(s.test(_)?"&":"?")+"_="+o.guid+++C),N.url=_+C),N.ifModified&&(e.lastModified[_]&&P.setRequestHeader("If-Modified-Since",e.lastModified[_]),e.etag[_]&&P.setRequestHeader("If-None-Match",e.etag[_])),(N.data&&N.hasContent&&!1!==N.contentType||m.contentType)&&P.setRequestHeader("Content-Type",N.contentType),P.setRequestHeader("Accept",N.dataTypes[0]&&N.accepts[N.dataTypes[0]]?N.accepts[N.dataTypes[0]]+("*"!==N.dataTypes[0]?", "+y+"; q=0.01":""):N.accepts["*"]),N.headers)P.setRequestHeader(O,N.headers[O]);if(N.beforeSend&&(!1===N.beforeSend.call(A,P,N)||x))return P.abort();if(j="abort",F.add(N.complete),P.done(N.success),P.fail(N.error),w=v(h,N,m,P)){if(P.readyState=1,T&&I.trigger("ajaxSend",[P,N]),x)return P;N.async&&N.timeout>0&&(k=window.setTimeout(function(){P.abort("timeout")},N.timeout));try{x=!1,w.send(D,U)}catch(e){if(x)throw e;U(-1,e)}}else U(-1,"No Transport");function U(t,n,r,i){var o,s,a,u,c,l=n;x||(x=!0,k&&window.clearTimeout(k),w=void 0,b=i||"",P.readyState=t>0?4:0,o=t>=200&&t<300||304===t,r&&(u=function(e,t,n){for(var r,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==u[0]&&u.unshift(o),n[o]}(N,P,r)),!o&&e.inArray("script",N.dataTypes)>-1&&(N.converters["text script"]=function(){}),u=function(e,t,n,r){var i,o,s,a,u,c={},l=e.dataTypes.slice();if(l[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=c[u+" "+o]||c["* "+o]))for(i in c)if((a=i.split(" "))[1]===o&&(s=c[u+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[i]:!0!==c[i]&&(o=a[0],l.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(N,u,P,o),o?(N.ifModified&&((c=P.getResponseHeader("Last-Modified"))&&(e.lastModified[_]=c),(c=P.getResponseHeader("etag"))&&(e.etag[_]=c)),204===t||"HEAD"===N.type?l="nocontent":304===t?l="notmodified":(l=u.state,s=u.data,o=!(a=u.error))):(a=l,!t&&l||(l="error",t<0&&(t=0))),P.status=t,P.statusText=(n||l)+"",o?L.resolveWith(A,[s,l,P]):L.rejectWith(A,[P,l,a]),P.statusCode(R),R=void 0,T&&I.trigger(o?"ajaxSuccess":"ajaxError",[P,N,o?s:a]),F.fireWith(A,[P,l]),T&&(I.trigger("ajaxComplete",[P,N]),--e.active||e.event.trigger("ajaxStop")))}return P},getJSON:function(t,n,r){return e.get(t,n,r,"json")},getScript:function(t,n){return e.get(t,void 0,n,"script")}}),e.each(["get","post"],function(t,r){e[r]=function(t,i,o,s){return n(i)&&(s=s||o,o=i,i=void 0),e.ajax(e.extend({url:t,type:r,dataType:s,data:i,success:o},e.isPlainObject(t)&&t))}}),e.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),e}.apply(t,r))||(e.exports=i)},function(e,t,n){"use strict";n.r(t),n.d(t,"autosave",function(){return u}),n.d(t,"restoreUI",function(){return c});var r=n(8),i=n(1),o=n(4),s=n(5);let a="";const u={remove:function(){try{FS.unlink(a)}catch(e){}try{FS.unlink(a+"_uidata")}catch(e){}},restore:function(){try{FS.stat(a),Module.ccall("hugojs_set_autosave_filename","null",["string"],[a])}catch(e){}},save:function(){if(!Object(r.a)("autosave"))return;Module.ccall("haven_save_autosave","int",["string"],[a])&&FS.writeFile(a+"_uidata",JSON.stringify(haven.window.getUIState()),{encoding:"utf8"})},setName:function(e){a=e}};function c(){const e=function(){try{const e=FS.readFile(a+"_uidata",{encoding:"utf8"});return JSON.parse(e)}catch(e){return null}}();let t;if(e){t=Object(r.a)("windowing")?e.windowContents.length:1,Object(o.clear)();for(let n=0;n<t;++n)Object(o.create)(n,e.windowDimensions[n].left,e.windowDimensions[n].top,e.windowDimensions[n].right,e.windowDimensions[n].bottom);s.b.restore(e.currentColors),Object(s.e)(e.font),o.position.restore(e.position),e.title&&(document.title=e.title);for(let t=0;t<e.windowContents.length;++t)Object(o.get)(t).innerHTML=e.windowContents[t],Object(s.a)(haven.window.get(t),t);Object(s.a)(document.body,0),Module.ccall("hugojs_set_font","null",["int"],[e.font[0].original]),Module.ccall("hugojs_set_colors","null",["int","int"],[e.currentColors[0].text,e.currentColors[0].background]),i.history.set(e.cmdHistory||[]),window.scrollTo(0,(document.scrollingElement||document.body).scrollHeight),Object(i.setDoScroll)()}}},function(e,t,n){var r,i;r=[n(36),n(62)],void 0===(i=function(e,t){"use strict";return function(n){return null==n?n+"":"object"==typeof n||"function"==typeof n?e[t.call(n)]||"object":typeof n}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(59),n(44),n(97),n(98),n(65),n(17),n(14),n(67),n(11)],void 0===(i=function(e,t,n,r,i,o,s){"use strict";var a=/^(?:parents|prev(?:Until|All))/,u={children:!0,contents:!0,next:!0,prev:!0};function c(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}return e.fn.extend({has:function(t){var n=e(t,this),r=n.length;return this.filter(function(){for(var t=0;t<r;t++)if(e.contains(this,n[t]))return!0})},closest:function(t,n){var r,i=0,s=this.length,a=[],u="string"!=typeof t&&e(t);if(!o.test(t))for(;i<s;i++)for(r=this[i];r&&r!==n;r=r.parentNode)if(r.nodeType<11&&(u?u.index(r)>-1:1===r.nodeType&&e.find.matchesSelector(r,t))){a.push(r);break}return this.pushStack(a.length>1?e.uniqueSort(a):a)},index:function(t){return t?"string"==typeof t?n.call(e(t),this[0]):n.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,n){return this.pushStack(e.uniqueSort(e.merge(this.get(),e(t,n))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),e.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return r(e,"parentNode")},parentsUntil:function(e,t,n){return r(e,"parentNode",n)},next:function(e){return c(e,"nextSibling")},prev:function(e){return c(e,"previousSibling")},nextAll:function(e){return r(e,"nextSibling")},prevAll:function(e){return r(e,"previousSibling")},nextUntil:function(e,t,n){return r(e,"nextSibling",n)},prevUntil:function(e,t,n){return r(e,"previousSibling",n)},siblings:function(e){return i((e.parentNode||{}).firstChild,e)},children:function(e){return i(e.firstChild)},contents:function(n){return null!=n.contentDocument&&t(n.contentDocument)?n.contentDocument:(s(n,"template")&&(n=n.content||n),e.merge([],n.childNodes))}},function(t,n){e.fn[t]=function(r,i){var o=e.map(this,n,r);return"Until"!==t.slice(-5)&&(i=r),i&&"string"==typeof i&&(o=e.filter(i,o)),this.length>1&&(u[t]||e.uniqueSort(o),a.test(t)&&o.reverse()),this.pushStack(o)}}),e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(6),n(35),n(46)],void 0===(i=function(e,t,n){"use strict";function r(e){return e}function i(e){throw e}function o(e,n,r,i){var o;try{e&&t(o=e.promise)?o.call(e).done(n).fail(r):e&&t(o=e.then)?o.call(e,n,r):n.apply(void 0,[e].slice(i))}catch(e){r.apply(void 0,[e])}}return e.extend({Deferred:function(n){var o=[["notify","progress",e.Callbacks("memory"),e.Callbacks("memory"),2],["resolve","done",e.Callbacks("once memory"),e.Callbacks("once memory"),0,"resolved"],["reject","fail",e.Callbacks("once memory"),e.Callbacks("once memory"),1,"rejected"]],s="pending",a={state:function(){return s},always:function(){return u.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var n=arguments;return e.Deferred(function(r){e.each(o,function(e,i){var o=t(n[i[4]])&&n[i[4]];u[i[1]](function(){var e=o&&o.apply(this,arguments);e&&t(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[i[0]+"With"](this,o?[e]:arguments)})}),n=null}).promise()},then:function(n,s,a){var u=0;function c(n,o,s,a){return function(){var l=this,f=arguments,p=function(){var e,p;if(!(n<u)){if((e=s.apply(l,f))===o.promise())throw new TypeError("Thenable self-resolution");p=e&&("object"==typeof e||"function"==typeof e)&&e.then,t(p)?a?p.call(e,c(u,o,r,a),c(u,o,i,a)):(u++,p.call(e,c(u,o,r,a),c(u,o,i,a),c(u,o,r,o.notifyWith))):(s!==r&&(l=void 0,f=[e]),(a||o.resolveWith)(l,f))}},d=a?p:function(){try{p()}catch(t){e.Deferred.exceptionHook&&e.Deferred.exceptionHook(t,d.stackTrace),n+1>=u&&(s!==i&&(l=void 0,f=[t]),o.rejectWith(l,f))}};n?d():(e.Deferred.getStackHook&&(d.stackTrace=e.Deferred.getStackHook()),window.setTimeout(d))}}return e.Deferred(function(e){o[0][3].add(c(0,e,t(a)?a:r,e.notifyWith)),o[1][3].add(c(0,e,t(n)?n:r)),o[2][3].add(c(0,e,t(s)?s:i))}).promise()},promise:function(t){return null!=t?e.extend(t,a):a}},u={};return e.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){s=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),u[t[0]]=function(){return u[t[0]+"With"](this===u?void 0:this,arguments),this},u[t[0]+"With"]=n.fireWith}),a.promise(u),n&&n.call(u,u),u},when:function(r){var i=arguments.length,s=i,a=Array(s),u=n.call(arguments),c=e.Deferred(),l=function(e){return function(t){a[e]=this,u[e]=arguments.length>1?n.call(arguments):t,--i||c.resolveWith(a,u)}};if(i<=1&&(o(r,c.done(l(s)).resolve,c.reject,!i),"pending"===c.state()||t(u[s]&&u[s].then)))return c.then();for(;s--;)o(u[s],l(s),c.reject);return c.promise()}}),e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(10),n(39),n(6),n(18),n(51),n(35),n(37),n(15),n(17),n(14),n(11)],void 0===(i=function(e,t,n,r,i,o,s,a,u,c){"use strict";var l=/^key/,f=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,p=/^([^.]*)(?:\.(.+)|)/;function d(){return!0}function h(){return!1}function y(e,n){return e===function(){try{return t.activeElement}catch(e){}}()==("focus"===n)}function g(t,n,r,i,o,s){var a,u;if("object"==typeof n){for(u in"string"!=typeof r&&(i=i||r,r=void 0),n)g(t,u,r,i,n[u],s);return t}if(null==i&&null==o?(o=r,i=r=void 0):null==o&&("string"==typeof r?(o=i,i=void 0):(o=i,i=r,r=void 0)),!1===o)o=h;else if(!o)return t;return 1===s&&(a=o,(o=function(t){return e().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=e.guid++)),t.each(function(){e.event.add(this,n,o,i,r)})}function m(t,n,r){r?(u.set(t,n,!1),e.event.add(t,n,{namespace:!1,handler:function(t){var i,o,a=u.get(this,n);if(1&t.isTrigger&&this[n]){if(a.length)(e.event.special[n]||{}).delegateType&&t.stopPropagation();else if(a=s.call(arguments),u.set(this,n,a),i=r(this,n),this[n](),a!==(o=u.get(this,n))||i?u.set(this,n,!1):o={},a!==o)return t.stopImmediatePropagation(),t.preventDefault(),o.value}else a.length&&(u.set(this,n,{value:e.event.trigger(e.extend(a[0],e.Event.prototype),a.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===u.get(t,n)&&e.event.add(t,n,d)}return e.event={global:{},add:function(t,r,o,s,c){var l,f,d,h,y,g,m,v,w,_,b,E=u.get(t);if(a(t))for(o.handler&&(o=(l=o).handler,c=l.selector),c&&e.find.matchesSelector(n,c),o.guid||(o.guid=e.guid++),(h=E.events)||(h=E.events=Object.create(null)),(f=E.handle)||(f=E.handle=function(n){return void 0!==e&&e.event.triggered!==n.type?e.event.dispatch.apply(t,arguments):void 0}),y=(r=(r||"").match(i)||[""]).length;y--;)w=b=(d=p.exec(r[y])||[])[1],_=(d[2]||"").split(".").sort(),w&&(m=e.event.special[w]||{},w=(c?m.delegateType:m.bindType)||w,m=e.event.special[w]||{},g=e.extend({type:w,origType:b,data:s,handler:o,guid:o.guid,selector:c,needsContext:c&&e.expr.match.needsContext.test(c),namespace:_.join(".")},l),(v=h[w])||((v=h[w]=[]).delegateCount=0,m.setup&&!1!==m.setup.call(t,s,_,f)||t.addEventListener&&t.addEventListener(w,f)),m.add&&(m.add.call(t,g),g.handler.guid||(g.handler.guid=o.guid)),c?v.splice(v.delegateCount++,0,g):v.push(g),e.event.global[w]=!0)},remove:function(t,n,r,o,s){var a,c,l,f,d,h,y,g,m,v,w,_=u.hasData(t)&&u.get(t);if(_&&(f=_.events)){for(d=(n=(n||"").match(i)||[""]).length;d--;)if(m=w=(l=p.exec(n[d])||[])[1],v=(l[2]||"").split(".").sort(),m){for(y=e.event.special[m]||{},g=f[m=(o?y.delegateType:y.bindType)||m]||[],l=l[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=a=g.length;a--;)h=g[a],!s&&w!==h.origType||r&&r.guid!==h.guid||l&&!l.test(h.namespace)||o&&o!==h.selector&&("**"!==o||!h.selector)||(g.splice(a,1),h.selector&&g.delegateCount--,y.remove&&y.remove.call(t,h));c&&!g.length&&(y.teardown&&!1!==y.teardown.call(t,v,_.handle)||e.removeEvent(t,m,_.handle),delete f[m])}else for(m in f)e.event.remove(t,m+n[d],r,o,!0);e.isEmptyObject(f)&&u.remove(t,"handle events")}},dispatch:function(t){var n,r,i,o,s,a,c=new Array(arguments.length),l=e.event.fix(t),f=(u.get(this,"events")||Object.create(null))[l.type]||[],p=e.event.special[l.type]||{};for(c[0]=l,n=1;n<arguments.length;n++)c[n]=arguments[n];if(l.delegateTarget=this,!p.preDispatch||!1!==p.preDispatch.call(this,l)){for(a=e.event.handlers.call(this,l,f),n=0;(o=a[n++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,r=0;(s=o.handlers[r++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==s.namespace&&!l.rnamespace.test(s.namespace)||(l.handleObj=s,l.data=s.data,void 0!==(i=((e.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,c))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return p.postDispatch&&p.postDispatch.call(this,l),l.result}},handlers:function(t,n){var r,i,o,s,a,u=[],c=n.delegateCount,l=t.target;if(c&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(s=[],a={},r=0;r<c;r++)void 0===a[o=(i=n[r]).selector+" "]&&(a[o]=i.needsContext?e(o,this).index(l)>-1:e.find(o,this,null,[l]).length),a[o]&&s.push(i);s.length&&u.push({elem:l,handlers:s})}return l=this,c<n.length&&u.push({elem:l,handlers:n.slice(c)}),u},addProp:function(t,n){Object.defineProperty(e.Event.prototype,t,{enumerable:!0,configurable:!0,get:r(n)?function(){if(this.originalEvent)return n(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[e.expando]?t:new e.Event(t)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return o.test(t.type)&&t.click&&c(t,"input")&&m(t,"click",d),!1},trigger:function(e){var t=this||e;return o.test(t.type)&&t.click&&c(t,"input")&&m(t,"click"),!0},_default:function(e){var t=e.target;return o.test(t.type)&&t.click&&c(t,"input")&&u.get(t,"click")||c(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},e.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},e.Event=function(t,n){if(!(this instanceof e.Event))return new e.Event(t,n);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?d:h,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,n&&e.extend(this,n),this.timeStamp=t&&t.timeStamp||Date.now(),this[e.expando]=!0},e.Event.prototype={constructor:e.Event,isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=d,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=d,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=d,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},e.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&l.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&f.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},e.event.addProp),e.each({focus:"focusin",blur:"focusout"},function(t,n){e.event.special[t]={setup:function(){return m(this,t,y),!1},trigger:function(){return m(this,t),!0},delegateType:n}}),e.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,n){e.event.special[t]={delegateType:n,bindType:n,handle:function(t){var r,i=this,o=t.relatedTarget,s=t.handleObj;return o&&(o===i||e.contains(i,o))||(t.type=s.origType,r=s.handler.apply(this,arguments),t.type=n),r}}}),e.fn.extend({on:function(e,t,n,r){return g(this,e,t,n,r)},one:function(e,t,n,r){return g(this,e,t,n,r,1)},off:function(t,n,r){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,e(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,n,t[o]);return this}return!1!==n&&"function"!=typeof n||(r=n,n=void 0),!1===r&&(r=h),this.each(function(){e.event.remove(this,t,r,n)})}}),e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){"use strict";return[]}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){"use strict";return function(e){return null!=e&&e===e.window}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){"use strict";var e=/^-ms-/,t=/-([a-z])/g;function n(e,t){return t.toUpperCase()}return function(r){return r.replace(e,"ms-").replace(t,n)}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(0),n(21),n(30),n(17),n(49),n(52),n(50),n(81),n(104),n(82),n(73),n(83),n(53),n(84),n(14),n(68),n(11)],void 0===(i=function(e,t,n,r,i,o,s,a,u,c,l,f,p,d){"use strict";var h=/^(none|table(?!-c[ea]).+)/,y=/^--/,g={position:"absolute",visibility:"hidden",display:"block"},m={letterSpacing:"0",fontWeight:"400"};function v(e,t,n){var r=i.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function w(t,n,r,i,o,a){var u="width"===n?1:0,c=0,l=0;if(r===(i?"border":"content"))return 0;for(;u<4;u+=2)"margin"===r&&(l+=e.css(t,r+s[u],!0,o)),i?("content"===r&&(l-=e.css(t,"padding"+s[u],!0,o)),"margin"!==r&&(l-=e.css(t,"border"+s[u]+"Width",!0,o))):(l+=e.css(t,"padding"+s[u],!0,o),"padding"!==r?l+=e.css(t,"border"+s[u]+"Width",!0,o):c+=e.css(t,"border"+s[u]+"Width",!0,o));return!i&&a>=0&&(l+=Math.max(0,Math.ceil(t["offset"+n[0].toUpperCase()+n.slice(1)]-a-l-c-.5))||0),l}function _(t,n,i){var s=a(t),u=(!p.boxSizingReliable()||i)&&"border-box"===e.css(t,"boxSizing",!1,s),l=u,f=c(t,n,s),d="offset"+n[0].toUpperCase()+n.slice(1);if(o.test(f)){if(!i)return f;f="auto"}return(!p.boxSizingReliable()&&u||!p.reliableTrDimensions()&&r(t,"tr")||"auto"===f||!parseFloat(f)&&"inline"===e.css(t,"display",!1,s))&&t.getClientRects().length&&(u="border-box"===e.css(t,"boxSizing",!1,s),(l=d in t)&&(f=t[d])),(f=parseFloat(f)||0)+w(t,n,i||(u?"border":"content"),l,s,f)+"px"}return e.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=c(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,r,o,s){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var a,u,c,f=n(r),h=y.test(r),g=t.style;if(h||(r=d(f)),c=e.cssHooks[r]||e.cssHooks[f],void 0===o)return c&&"get"in c&&void 0!==(a=c.get(t,!1,s))?a:g[r];"string"===(u=typeof o)&&(a=i.exec(o))&&a[1]&&(o=l(t,r,a),u="number"),null!=o&&o==o&&("number"!==u||h||(o+=a&&a[3]||(e.cssNumber[f]?"":"px")),p.clearCloneStyle||""!==o||0!==r.indexOf("background")||(g[r]="inherit"),c&&"set"in c&&void 0===(o=c.set(t,o,s))||(h?g.setProperty(r,o):g[r]=o))}},css:function(t,r,i,o){var s,a,u,l=n(r);return y.test(r)||(r=d(l)),(u=e.cssHooks[r]||e.cssHooks[l])&&"get"in u&&(s=u.get(t,!0,i)),void 0===s&&(s=c(t,r,o)),"normal"===s&&r in m&&(s=m[r]),""===i||i?(a=parseFloat(s),!0===i||isFinite(a)?a||0:s):s}}),e.each(["height","width"],function(t,n){e.cssHooks[n]={get:function(t,r,i){if(r)return!h.test(e.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?_(t,n,i):u(t,g,function(){return _(t,n,i)})},set:function(t,r,o){var s,u=a(t),c=!p.scrollboxSize()&&"absolute"===u.position,l=(c||o)&&"border-box"===e.css(t,"boxSizing",!1,u),f=o?w(t,n,o,l,u):0;return l&&c&&(f-=Math.ceil(t["offset"+n[0].toUpperCase()+n.slice(1)]-parseFloat(u[n])-w(t,n,"border",!1,u)-.5)),f&&(s=i.exec(r))&&"px"!==(s[3]||"px")&&(t.style[n]=r,r=e.css(t,n)),v(0,r,f)}}}),e.cssHooks.marginLeft=f(p.reliableMarginLeft,function(e,t){if(t)return(parseFloat(c(e,"marginLeft"))||e.getBoundingClientRect().left-u(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),e.each({margin:"",padding:"",border:"Width"},function(t,n){e.cssHooks[t+n]={expand:function(e){for(var r=0,i={},o="string"==typeof e?e.split(" "):[e];r<4;r++)i[t+s[r]+n]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(e.cssHooks[t+n].set=v)}),e.fn.extend({css:function(n,r){return t(this,function(t,n,r){var i,o,s={},u=0;if(Array.isArray(n)){for(i=a(t),o=n.length;u<o;u++)s[n[u]]=e.css(t,n[u],!1,i);return s}return void 0!==r?e.style(t,n,r):e.css(t,n)},n,r,arguments.length>1)}}),e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;e.exports=function e(t,n,i){function o(a,u){if(!n[a]){if(!t[a]){if(!u&&"function"==typeof r&&r)return r(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n||e)},l,l.exports,e,t,n,i)}return n[a].exports}for(var s="function"==typeof r&&r,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||function(e){"use strict";if("Element"in e){var t=e.Element.prototype,n=Object,r=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},i=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},o=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},s=function(e,t){if(""===t)throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return i.call(e,t)},a=function(e){for(var t=r.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,o=n.length;i<o;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},u=a.prototype=[],c=function(){return new a(this)};if(o.prototype=Error.prototype,u.item=function(e){return this[e]||null},u.contains=function(e){return-1!==s(this,e+="")},u.add=function(){var e,t=arguments,n=0,r=t.length,i=!1;do{e=t[n]+"",-1===s(this,e)&&(this.push(e),i=!0)}while(++n<r);i&&this._updateClassName()},u.remove=function(){var e,t,n=arguments,r=0,i=n.length,o=!1;do{for(e=n[r]+"",t=s(this,e);-1!==t;)this.splice(t,1),o=!0,t=s(this,e)}while(++r<i);o&&this._updateClassName()},u.toggle=function(e,t){e+="";var n=this.contains(e),r=n?!0!==t&&"remove":!1!==t&&"add";return r&&this[r](e),!0===t||!1===t?t:!n},u.toString=function(){return this.join(" ")},n.defineProperty){var l={get:c,enumerable:!0,configurable:!0};try{n.defineProperty(t,"classList",l)}catch(e){void 0!==e.number&&-2146823252!==e.number||(l.enumerable=!1,n.defineProperty(t,"classList",l))}}else n.prototype.__defineGetter__&&t.__defineGetter__("classList",c)}}(window.self),function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,r=arguments.length;for(n=0;n<r;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}e=null}())},{}],2:[function(e,t,n){t.exports=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r)return(i=t.createElement("html")).innerHTML=e,i.removeChild(i.lastChild);var i,s=o[r]||o._default,a=s[0],u=s[1],c=s[2];for((i=t.createElement("div")).innerHTML=u+e+c;a--;)i=i.lastChild;if(i.firstChild==i.lastChild)return i.removeChild(i.firstChild);for(var l=t.createDocumentFragment();i.firstChild;)l.appendChild(i.removeChild(i.firstChild));return l};var r,i=!1;"undefined"!=typeof document&&((r=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',i=!r.getElementsByTagName("link").length,r=void 0);var o={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:i?[1,"X<div>","</div>"]:[0,"",""]};o.td=o.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],o.option=o.optgroup=[1,'<select multiple="multiple">',"</select>"],o.thead=o.tbody=o.colgroup=o.caption=o.tfoot=[1,"<table>","</table>"],o.polyline=o.ellipse=o.polygon=o.circle=o.text=o.line=o.path=o.rect=o.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],3:[function(e,t,n){"use strict";function r(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o=Object.keys(Object(i)),s=0,a=o.length;s<a;s++){var u=o[s],c=Object.getOwnPropertyDescriptor(i,u);void 0!==c&&c.enumerable&&(n[u]=i[u])}}return n}t.exports={assign:r,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r})}}},{}],4:[function(e,t,n){e("classlist-polyfill"),e("es6-object-assign").polyfill();var r=e("domify"),i=function(e){if(void 0!==e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML}return""},o=function(e,t){if("string"==typeof t&&0!==t.length)for(var n=t.split(" "),r=0;r<n.length;r++){var i=n[r];i.length&&e.classList.add(i)}},s=function(){var e=document.createElement("div"),t={animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oanimationend",msAnimation:"MSAnimationEnd"};for(var n in t)if(void 0!==e.style[n])return t[n];return!1}(),a="vex",u="vex-content",c="vex-overlay",l="vex-close",f="vex-closing",p="vex-open",d={},h=1,y=!1,g={open:function(e){var t=function(e){console.warn('The "'+e+'" property is deprecated in vex 3. Use CSS classes and the appropriate "ClassName" options, instead.'),console.warn("See http://github.hubspot.com/vex/api/advanced/#options")};e.css&&t("css"),e.overlayCSS&&t("overlayCSS"),e.contentCSS&&t("contentCSS"),e.closeCSS&&t("closeCSS");var n={};n.id=h++,d[n.id]=n,n.isOpen=!0,n.close=function(){if(!this.isOpen)return!0;var e=this.options;if(y&&!e.escapeButtonCloses)return!1;if(!1===function(){return!e.beforeClose||e.beforeClose.call(this)}.bind(this)())return!1;this.isOpen=!1;var t=window.getComputedStyle(this.contentEl);function n(e){return"none"!==t.getPropertyValue(e+"animation-name")&&"0s"!==t.getPropertyValue(e+"animation-duration")}var r=n("")||n("-webkit-")||n("-moz-")||n("-o-"),i=function t(){this.rootEl.parentNode&&(this.rootEl.removeEventListener(s,t),this.overlayEl.removeEventListener(s,t),delete d[this.id],this.rootEl.parentNode.removeChild(this.rootEl),this.bodyEl.removeChild(this.overlayEl),e.afterClose&&e.afterClose.call(this),0===Object.keys(d).length&&document.body.classList.remove(p))}.bind(this);return s&&r?(this.rootEl.addEventListener(s,i),this.overlayEl.addEventListener(s,i),this.rootEl.classList.add(f),this.overlayEl.classList.add(f)):i(),!0},"string"==typeof e&&(e={content:e}),e.unsafeContent&&!e.content?e.content=e.unsafeContent:e.content&&(e.content=i(e.content));var m=n.options=Object.assign({},g.defaultOptions,e),v=n.bodyEl=document.getElementsByTagName("body")[0],w=n.rootEl=document.createElement("div");w.classList.add(a),o(w,m.className);var _=n.overlayEl=document.createElement("div");_.classList.add(c),o(_,m.overlayClassName),m.overlayClosesOnClick&&w.addEventListener("click",function(e){e.target===w&&n.close()}),v.appendChild(_);var b=n.contentEl=document.createElement("div");if(b.classList.add(u),o(b,m.contentClassName),b.appendChild(m.content instanceof window.Node?m.content:r(m.content)),w.appendChild(b),m.showCloseButton){var E=n.closeEl=document.createElement("div");E.classList.add(l),o(E,m.closeClassName),E.addEventListener("click",n.close.bind(n)),b.appendChild(E)}return document.querySelector(m.appendLocation).appendChild(w),m.afterOpen&&m.afterOpen.call(n),document.body.classList.add(p),n},close:function(e){var t;if(e.id)t=e.id;else{if("string"!=typeof e)throw new TypeError("close requires a vex object or id string");t=e}return!!d[t]&&d[t].close()},closeTop:function(){var e=Object.keys(d);return!!e.length&&d[e[e.length-1]].close()},closeAll:function(){for(var e in d)this.close(e);return!0},getAll:function(){return d},getById:function(e){return d[e]}};window.addEventListener("keyup",function(e){27===e.keyCode&&(y=!0,g.closeTop(),y=!1)}),window.addEventListener("popstate",function(){g.defaultOptions.closeAllOnPopState&&g.closeAll()}),g.defaultOptions={content:"",showCloseButton:!0,escapeButtonCloses:!0,overlayClosesOnClick:!0,appendLocation:"body",className:"",overlayClassName:"",contentClassName:"",closeClassName:"",closeAllOnPopState:!0},Object.defineProperty(g,"_escapeHtml",{configurable:!1,enumerable:!1,writable:!1,value:i}),g.registerPlugin=function(e,t){var n=e(g),r=t||n.name;if(g[r])throw new Error("Plugin "+t+" is already registered.");g[r]=n},t.exports=g},{"classlist-polyfill":1,domify:2,"es6-object-assign":3}]},{},[4])(4)},function(e){e.exports=JSON.parse('{"a":"3.2.5"}')},function(e,t,n){"use strict";n.r(t),n.d(t,"block",function(){return o}),n.d(t,"closeTag",function(){return s}),n.d(t,"focus",function(){return a}),n.d(t,"openTag",function(){return u}),n.d(t,"scrollTo",function(){return c}),n.d(t,"scrollToEnd",function(){return l}),n.d(t,"unblock",function(){return f});var r=n(3),i=n(4);function o(){$(document).on("keydown.vorple.uiblock",function(e){return e.stopImmediatePropagation(),!1}),$('<div class="uiblock">').on("click.vorple.uiblock",function(e){return e.stopImmediatePropagation(),!1}).appendTo("body")}function s(e=0){const t=i.container.get(e);return"window0"!==t.id&&(Object(r.flush)(e),i.container.set(t.parentNode,e),!0)}function a(e,t=0){const n=$(e);return 0!==n.length&&(Object(r.flush)(),i.container.set(n.last().get(0),t),!0)}function u(e,t,n=0){const o=document.createElement(e),s=i.container.get(n);return o.className=t,Object(r.flush)(n),i.container.append(o,s),i.container.set(o,n),!0}function c(e,t=500){const n=$(e);if(0===n.length)return Promise.resolve(!1);const r=$("body").scrollTop(),i=n.offset().top,o=n.height(),s=$(window).height(),a=$(document).height()-s;return i>=r+30&&i<=s/2+r&&i+o<=r+s?Promise.resolve(!1):$("html, body").stop().animate({scrollTop:Math.min(Math.max(i-30,0),a)},t).promise().then(()=>!0)}function l(e=500){return $("html, body").stop().animate({scrollTop:$(document).height()-$(window).height()},e).promise()}function f(){$(".uiblock").remove(),$(document).off("keydown.vorple.uiblock")}},function(e,t,n){var r,i;r=[n(28)],void 0===(i=function(e){"use strict";return e.slice}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){"use strict";return{}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){"use strict";return function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r,i;r=[n(0),n(39),n(11)],void 0===(i=function(e,t){"use strict";var n=function(t){return e.contains(t.ownerDocument,t)},r={composed:!0};return t.getRootNode&&(n=function(t){return e.contains(t.ownerDocument,t)||t.getRootNode(r)===t.ownerDocument}),n}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(10)],void 0===(i=function(e){"use strict";return e.documentElement}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(38),n(60),n(6),n(61),n(51),n(21),n(74),n(75),n(76),n(78),n(79),n(80),n(77),n(15),n(70),n(37),n(64),n(17),n(14),n(25),n(11),n(27)],void 0===(i=function(e,t,n,r,i,o,s,a,u,c,l,f,p,d,h,y,g,m,v){"use strict";var w=/<script|<style|<link/i,_=/checked\s*(?:[^=]|=\s*.checked.)/i,b=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function E(t,n){return v(t,"table")&&v(11!==n.nodeType?n:n.firstChild,"tr")&&e(t).children("tbody")[0]||t}function k(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function S(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function x(t,n){var r,i,o,s,a,u;if(1===n.nodeType){if(h.hasData(t)&&(u=h.get(t).events))for(o in h.remove(n,"handle events"),u)for(r=0,i=u[o].length;r<i;r++)e.event.add(n,o,u[o][r]);y.hasData(t)&&(s=y.access(t),a=e.extend({},s),y.set(n,a))}}function T(e,t){var n=t.nodeName.toLowerCase();"input"===n&&o.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function O(t,i,o,s){i=n(i);var a,c,f,y,g,v,w=0,E=t.length,x=E-1,T=i[0],C=r(T);if(C||E>1&&"string"==typeof T&&!d.checkClone&&_.test(T))return t.each(function(e){var n=t.eq(e);C&&(i[0]=T.call(this,e,n.html())),O(n,i,o,s)});if(E&&(c=(a=p(i,t[0].ownerDocument,!1,t,s)).firstChild,1===a.childNodes.length&&(a=c),c||s)){for(y=(f=e.map(l(a,"script"),k)).length;w<E;w++)g=a,w!==x&&(g=e.clone(g,!0,!0),y&&e.merge(f,l(g,"script"))),o.call(t[w],g,w);if(y)for(v=f[f.length-1].ownerDocument,e.map(f,S),w=0;w<y;w++)g=f[w],u.test(g.type||"")&&!h.access(g,"globalEval")&&e.contains(v,g)&&(g.src&&"module"!==(g.type||"").toLowerCase()?e._evalUrl&&!g.noModule&&e._evalUrl(g.src,{nonce:g.nonce||g.getAttribute("nonce")},v):m(g.textContent.replace(b,""),g,v))}return t}function C(n,r,i){for(var o,s=r?e.filter(r,n):n,a=0;null!=(o=s[a]);a++)i||1!==o.nodeType||e.cleanData(l(o)),o.parentNode&&(i&&t(o)&&f(l(o,"script")),o.parentNode.removeChild(o));return n}return e.extend({htmlPrefilter:function(e){return e},clone:function(n,r,i){var o,s,a,u,c=n.cloneNode(!0),p=t(n);if(!(d.noCloneChecked||1!==n.nodeType&&11!==n.nodeType||e.isXMLDoc(n)))for(u=l(c),o=0,s=(a=l(n)).length;o<s;o++)T(a[o],u[o]);if(r)if(i)for(a=a||l(n),u=u||l(c),o=0,s=a.length;o<s;o++)x(a[o],u[o]);else x(n,c);return(u=l(c,"script")).length>0&&f(u,!p&&l(n,"script")),c},cleanData:function(t){for(var n,r,i,o=e.event.special,s=0;void 0!==(r=t[s]);s++)if(g(r)){if(n=r[h.expando]){if(n.events)for(i in n.events)o[i]?e.event.remove(r,i):e.removeEvent(r,i,n.handle);r[h.expando]=void 0}r[y.expando]&&(r[y.expando]=void 0)}}}),e.fn.extend({detach:function(e){return C(this,e,!0)},remove:function(e){return C(this,e)},text:function(t){return s(this,function(t){return void 0===t?e.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return O(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||E(this,e).appendChild(e)})},prepend:function(){return O(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=E(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return O(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return O(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var t,n=0;null!=(t=this[n]);n++)1===t.nodeType&&(e.cleanData(l(t,!1)),t.textContent="");return this},clone:function(t,n){return t=null!=t&&t,n=null==n?t:n,this.map(function(){return e.clone(this,t,n)})},html:function(t){return s(this,function(t){var n=this[0]||{},r=0,i=this.length;if(void 0===t&&1===n.nodeType)return n.innerHTML;if("string"==typeof t&&!w.test(t)&&!c[(a.exec(t)||["",""])[1].toLowerCase()]){t=e.htmlPrefilter(t);try{for(;r<i;r++)1===(n=this[r]||{}).nodeType&&(e.cleanData(l(n,!1)),n.innerHTML=t);n=0}catch(e){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return O(this,arguments,function(n){var r=this.parentNode;e.inArray(this,t)<0&&(e.cleanData(l(this)),r&&r.replaceChild(n,this))},t)}}),e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(t){for(var r,o=[],s=e(t),a=s.length-1,u=0;u<=a;u++)r=u===a?this:this.clone(!0),e(s[u])[n](r),i.apply(o,r.get());return this.pushStack(o)}}),e}.apply(t,r))||(e.exports=i)},function(e,t,n){"use strict";n.r(t),n.d(t,"addInputFilter",function(){return y}),n.d(t,"applyInputFilters",function(){return g}),n.d(t,"clearCommandQueue",function(){return m}),n.d(t,"clearKeyQueue",function(){return v}),n.d(t,"hide",function(){return w}),n.d(t,"init",function(){return _}),n.d(t,"queueCommand",function(){return b}),n.d(t,"queueKeypress",function(){return E}),n.d(t,"removeInputFilter",function(){return k}),n.d(t,"setPrefix",function(){return S}),n.d(t,"setValue",function(){return x}),n.d(t,"submit",function(){return T}),n.d(t,"unhide",function(){return O});var r=n(19),i=n.n(r),o=n(7),s=n(1),a=n(12),u=n(13),c=n(34);n.d(t,"history",function(){return s.history});const l=[],f=[],p=[];function d(){if(f.length>0){const e=f.shift();return T(e.cmd,e.silent),!1}}function h(){if(p.length>0){const e=p.shift();return o.keypress.send({keyCode:e.charCodeAt(0),force:!0}),!1}return!0}function y(e){return l.push(e),()=>k(e)}async function g(e,t){let n=e;Object(c.block)();for(let r=0;r<l.length;++r){let i=l[r](n,{...t,input:n,original:e,type:"line"});try{i=await Promise.resolve(i)}catch(e){throw e}finally{Object(c.unblock)()}switch(i){case void 0:case null:case!0:break;case!1:return!1;default:const e=typeof i;"object"===e&&i.then&&Object(u.error)("Input filter promise resolved into another promise, which is not allowed"),"string"===e?n=i:Object(u.error)("Input filter returned a value of type "+e)}}return Object(c.unblock)(),n}function m(){f.length=0}function v(){p.length=0}function w(){i()(Object(s.get)()).addClass("force-hidden")}function _(){Object(a.addEventListener)("expectCommand",d),Object(a.addEventListener)("expectKeypress",h)}function b(e,t=!1){f.push({cmd:e,silent:!!t}),Object(s.isReady)()&&d()}function E(e){p.push(e),"getkey"===Object(o.getMode)()&&h()}function k(e){const t=l.indexOf(e);return-1!==t&&(l.splice(t,1),!0)}function S(e,t=!1){let n=e;return t||(n=i()("<div>").text(e).html()),s.prefix.set(n),n}function x(e){i()(Object(s.get)()).find("#lineinput-field").val(e)}function T(e,t=!1){Object(s.sendCommand)(new CustomEvent("submit",{detail:{silent:!!t,userAction:!1}}),e)}function O(){i()(Object(s.get)()).removeClass("force-hidden")}},function(e,t,n){"use strict";n.r(t),n.d(t,"initQuixe",function(){return xe}),n.d(t,"loadStoryFile",function(){return Te}),n.d(t,"setBase64StoryFile",function(){return Oe}),n.d(t,"setStyle",function(){return Ce}),n.d(t,"setStyleHint",function(){return Ne});var r=n(3),i=n(7),o=n(1),s=n(43),a=n(2),u=n(12),c=n(9),l={gestalt_Version:0,gestalt_CharInput:1,gestalt_LineInput:2,gestalt_CharOutput:3,gestalt_CharOutput_CannotPrint:0,gestalt_CharOutput_ApproxPrint:1,gestalt_CharOutput_ExactPrint:2,gestalt_MouseInput:4,gestalt_Timer:5,gestalt_Graphics:6,gestalt_DrawImage:7,gestalt_Sound:8,gestalt_SoundVolume:9,gestalt_SoundNotify:10,gestalt_Hyperlinks:11,gestalt_HyperlinkInput:12,gestalt_SoundMusic:13,gestalt_GraphicsTransparency:14,gestalt_Unicode:15,gestalt_UnicodeNorm:16,gestalt_LineInputEcho:17,gestalt_LineTerminators:18,gestalt_LineTerminatorKey:19,gestalt_DateTime:20,gestalt_Sound2:21,gestalt_ResourceStream:22,gestalt_GraphicsCharInput:23,keycode_Unknown:4294967295,keycode_Left:4294967294,keycode_Right:4294967293,keycode_Up:4294967292,keycode_Down:4294967291,keycode_Return:4294967290,keycode_Delete:4294967289,keycode_Escape:4294967288,keycode_Tab:4294967287,keycode_PageUp:4294967286,keycode_PageDown:4294967285,keycode_Home:4294967284,keycode_End:4294967283,keycode_Func1:4294967279,keycode_Func2:4294967278,keycode_Func3:4294967277,keycode_Func4:4294967276,keycode_Func5:4294967275,keycode_Func6:4294967274,keycode_Func7:4294967273,keycode_Func8:4294967272,keycode_Func9:4294967271,keycode_Func10:4294967270,keycode_Func11:4294967269,keycode_Func12:4294967268,keycode_MAXVAL:28,evtype_None:0,evtype_Timer:1,evtype_CharInput:2,evtype_LineInput:3,evtype_MouseInput:4,evtype_Arrange:5,evtype_Redraw:6,evtype_SoundNotify:7,evtype_Hyperlink:8,evtype_VolumeNotify:9,style_Normal:0,style_Emphasized:1,style_Preformatted:2,style_Header:3,style_Subheader:4,style_Alert:5,style_Note:6,style_BlockQuote:7,style_Input:8,style_User1:9,style_User2:10,style_NUMSTYLES:11,wintype_AllTypes:0,wintype_Pair:1,wintype_Blank:2,wintype_TextBuffer:3,wintype_TextGrid:4,wintype_Graphics:5,winmethod_Left:0,winmethod_Right:1,winmethod_Above:2,winmethod_Below:3,winmethod_DirMask:15,winmethod_Fixed:16,winmethod_Proportional:32,winmethod_DivisionMask:240,winmethod_Border:0,winmethod_NoBorder:256,winmethod_BorderMask:256,fileusage_Data:0,fileusage_SavedGame:1,fileusage_Transcript:2,fileusage_InputRecord:3,fileusage_TypeMask:15,fileusage_TextMode:256,fileusage_BinaryMode:0,filemode_Write:1,filemode_Read:2,filemode_ReadWrite:3,filemode_WriteAppend:5,seekmode_Start:0,seekmode_Current:1,seekmode_End:2,stylehint_Indentation:0,stylehint_ParaIndentation:1,stylehint_Justification:2,stylehint_Size:3,stylehint_Weight:4,stylehint_Oblique:5,stylehint_Proportional:6,stylehint_TextColor:7,stylehint_BackColor:8,stylehint_ReverseColor:9,stylehint_NUMHINTS:10,stylehint_just_LeftFlush:0,stylehint_just_LeftRight:1,stylehint_just_Centered:2,stylehint_just_RightFlush:3,imagealign_InlineUp:1,imagealign_InlineDown:2,imagealign_InlineCenter:3,imagealign_MarginLeft:4,imagealign_MarginRight:5},f={left:l.keycode_Left,right:l.keycode_Right,up:l.keycode_Up,down:l.keycode_Down,return:l.keycode_Return,delete:l.keycode_Delete,escape:l.keycode_Escape,tab:l.keycode_Tab,pageup:l.keycode_PageUp,pagedown:l.keycode_PageDown,home:l.keycode_Home,end:l.keycode_End,func1:l.keycode_Func1,func2:l.keycode_Func2,func3:l.keycode_Func3,func4:l.keycode_Func4,func5:l.keycode_Func5,func6:l.keycode_Func6,func7:l.keycode_Func7,func8:l.keycode_Func8,func9:l.keycode_Func9,func10:l.keycode_Func10,func11:l.keycode_Func11,func12:l.keycode_Func12},p={0:"normal",1:"emphasized",2:"preformatted",3:"header",4:"subheader",5:"alert",6:"note",7:"blockquote",8:"input",9:"user1",10:"user2"},d={0:"data",1:"save",2:"transcript",3:"command"},h={181:924,223:[83,83],255:376,305:73,329:[700,78],383:83,405:502,414:544,447:503,454:452,457:455,460:458,477:398,496:[74,780],499:497,595:385,596:390,598:393,599:394,601:399,603:400,608:403,611:404,616:407,617:406,623:412,626:413,629:415,640:422,643:425,648:430,650:433,651:434,658:439,837:921,912:[921,776,769],940:902,941:904,942:905,943:906,944:[933,776,769],962:931,972:908,973:910,974:911,976:914,977:920,981:934,982:928,1008:922,1010:1017,1013:917,1415:[1333,1362],7830:[72,817],7831:[84,776],7832:[87,778],7833:[89,778],7834:[65,702],7835:7776,8016:[933,787],8018:[933,787,768],8020:[933,787,769],8022:[933,787,834],8048:8122,8049:8123,8050:8136,8051:8137,8052:8138,8053:8139,8054:8154,8055:8155,8056:8184,8057:8185,8058:8170,8059:8171,8060:8186,8061:8187,8064:[7944,921],8065:[7945,921],8066:[7946,921],8067:[7947,921],8068:[7948,921],8069:[7949,921],8070:[7950,921],8071:[7951,921],8072:[7944,921],8073:[7945,921],8074:[7946,921],8075:[7947,921],8076:[7948,921],8077:[7949,921],8078:[7950,921],8079:[7951,921],8080:[7976,921],8081:[7977,921],8082:[7978,921],8083:[7979,921],8084:[7980,921],8085:[7981,921],8086:[7982,921],8087:[7983,921],8088:[7976,921],8089:[7977,921],8090:[7978,921],8091:[7979,921],8092:[7980,921],8093:[7981,921],8094:[7982,921],8095:[7983,921],8096:[8040,921],8097:[8041,921],8098:[8042,921],8099:[8043,921],8100:[8044,921],8101:[8045,921],8102:[8046,921],8103:[8047,921],8104:[8040,921],8105:[8041,921],8106:[8042,921],8107:[8043,921],8108:[8044,921],8109:[8045,921],8110:[8046,921],8111:[8047,921],8114:[8122,921],8115:[913,921],8116:[902,921],8118:[913,834],8119:[913,834,921],8124:[913,921],8126:921,8130:[8138,921],8131:[919,921],8132:[905,921],8134:[919,834],8135:[919,834,921],8140:[919,921],8146:[921,776,768],8147:[921,776,769],8150:[921,834],8151:[921,776,834],8162:[933,776,768],8163:[933,776,769],8164:[929,787],8165:8172,8166:[933,834],8167:[933,776,834],8178:[8186,921],8179:[937,921],8180:[911,921],8182:[937,834],8183:[937,834,921],8188:[937,921],64256:[70,70],64257:[70,73],64258:[70,76],64259:[70,70,73],64260:[70,70,76],64261:[83,84],64262:[83,84],64275:[1348,1350],64276:[1348,1333],64277:[1348,1339],64278:[1358,1350],64279:[1348,1341]};!function(){var e,t,n,r=h;for(e=[7936,7937,7938,7939,7940,7941,7942,7943,7952,7953,7954,7955,7956,7957,7968,7969,7970,7971,7972,7973,7974,7975,7984,7985,7986,7987,7988,7989,7990,7991,8e3,8001,8002,8003,8004,8005,8017,8019,8021,8023,8032,8033,8034,8035,8036,8037,8038,8039,8112,8113,8144,8145,8160,8161],t=0;t<54;t++)r[n=e[t]]=n+8;for(n=257;n<=303;n+=2)r[n]=n-1;for(n=331;n<=375;n+=2)r[n]=n-1;for(n=505;n<=543;n+=2)r[n]=n-1;for(n=1121;n<=1153;n+=2)r[n]=n-1;for(n=1163;n<=1215;n+=2)r[n]=n-1;for(n=1233;n<=1269;n+=2)r[n]=n-1;for(n=7681;n<=7829;n+=2)r[n]=n-1;for(n=7841;n<=7929;n+=2)r[n]=n-1;for(e=[307,309,311,314,316,318,320,322,324,326,328,378,380,382,387,389,392,396,402,409,417,419,421,424,429,432,436,438,441,445,453,456,459,462,464,466,468,470,472,474,476,479,481,483,485,487,489,491,493,495,498,501,547,549,551,553,555,557,559,561,563,985,987,989,991,993,995,997,999,1001,1003,1005,1007,1016,1019,1218,1220,1222,1224,1226,1228,1230,1273,1281,1283,1285,1287,1289,1291,1293,1295],t=0;t<91;t++)r[n=e[t]]=n-1;for(n=8560;n<=8575;n+=1)r[n]=n-16;for(n=9424;n<=9449;n+=1)r[n]=n-26;for(n=97;n<=122;n+=1)r[n]=n-32;for(n=224;n<=246;n+=1)r[n]=n-32;for(n=945;n<=961;n+=1)r[n]=n-32;for(n=1072;n<=1103;n+=1)r[n]=n-32;for(n=65345;n<=65370;n+=1)r[n]=n-32;for(e=[248,249,250,251,252,253,254,963,964,965,966,967,968,969,970,971],t=0;t<16;t++)r[n=e[t]]=n-32;for(n=66600;n<=66639;n+=1)r[n]=n-40;for(n=1377;n<=1414;n+=1)r[n]=n-48;for(n=1104;n<=1119;n+=1)r[n]=n-80;r[1009]=929}();var y={304:[105,775],376:255,385:595,390:596,393:598,394:599,398:477,399:601,400:603,403:608,404:611,406:617,407:616,412:623,413:626,415:629,422:640,425:643,430:648,433:650,434:651,439:658,452:454,455:457,458:460,497:499,502:405,503:447,544:414,902:940,904:941,905:942,906:943,908:972,910:973,911:974,1012:952,1017:1010,8122:8048,8123:8049,8124:8115,8136:8050,8137:8051,8138:8052,8139:8053,8140:8131,8154:8054,8155:8055,8170:8058,8171:8059,8172:8165,8184:8056,8185:8057,8186:8060,8187:8061,8188:8179,8486:969,8490:107,8491:229};!function(){var e,t,n,r=y;for(n=1024;n<=1039;n+=1)r[n]=n+80;for(n=1329;n<=1366;n+=1)r[n]=n+48;for(n=66560;n<=66599;n+=1)r[n]=n+40;for(n=65;n<=90;n+=1)r[n]=n+32;for(n=192;n<=214;n+=1)r[n]=n+32;for(n=913;n<=929;n+=1)r[n]=n+32;for(n=1040;n<=1071;n+=1)r[n]=n+32;for(n=65313;n<=65338;n+=1)r[n]=n+32;for(e=[216,217,218,219,220,221,222,931,932,933,934,935,936,937,938,939],t=0;t<16;t++)r[n=e[t]]=n+32;for(n=9398;n<=9423;n+=1)r[n]=n+26;for(n=8544;n<=8559;n+=1)r[n]=n+16;for(n=256;n<=302;n+=2)r[n]=n+1;for(n=330;n<=374;n+=2)r[n]=n+1;for(n=504;n<=542;n+=2)r[n]=n+1;for(n=1120;n<=1152;n+=2)r[n]=n+1;for(n=1162;n<=1214;n+=2)r[n]=n+1;for(n=1232;n<=1268;n+=2)r[n]=n+1;for(n=7680;n<=7828;n+=2)r[n]=n+1;for(n=7840;n<=7928;n+=2)r[n]=n+1;for(e=[306,308,310,313,315,317,319,321,323,325,327,377,379,381,386,388,391,395,401,408,416,418,420,423,428,431,435,437,440,444,453,456,459,461,463,465,467,469,471,473,475,478,480,482,484,486,488,490,492,494,498,500,546,548,550,552,554,556,558,560,562,984,986,988,990,992,994,996,998,1e3,1002,1004,1006,1015,1018,1217,1219,1221,1223,1225,1227,1229,1272,1280,1282,1284,1286,1288,1290,1292,1294],t=0;t<91;t++)r[n=e[t]]=n+1;for(e=[7944,7945,7946,7947,7948,7949,7950,7951,7960,7961,7962,7963,7964,7965,7976,7977,7978,7979,7980,7981,7982,7983,7992,7993,7994,7995,7996,7997,7998,7999,8008,8009,8010,8011,8012,8013,8025,8027,8029,8031,8040,8041,8042,8043,8044,8045,8046,8047,8072,8073,8074,8075,8076,8077,8078,8079,8088,8089,8090,8091,8092,8093,8094,8095,8104,8105,8106,8107,8108,8109,8110,8111,8120,8121,8152,8153,8168,8169],t=0;t<78;t++)r[n=e[t]]=n-8}();var g={223:[83,115],452:453,453:453,454:453,455:456,456:456,457:456,458:459,459:459,460:459,497:498,498:498,499:498,1415:[1333,1410],8114:[8122,837],8115:8124,8116:[902,837],8119:[913,834,837],8124:8124,8130:[8138,837],8131:8140,8132:[905,837],8135:[919,834,837],8140:8140,8178:[8186,837],8179:8188,8180:[911,837],8183:[937,834,837],8188:8188,64256:[70,102],64257:[70,105],64258:[70,108],64259:[70,102,105],64260:[70,102,108],64261:[83,116],64262:[83,116],64275:[1348,1398],64276:[1348,1381],64277:[1348,1387],64278:[1358,1398],64279:[1348,1389]};!function(){var e,t,n,r=g;for(e=[8072,8073,8074,8075,8076,8077,8078,8079,8072,8073,8074,8075,8076,8077,8078,8079,8088,8089,8090,8091,8092,8093,8094,8095,8088,8089,8090,8091,8092,8093,8094,8095,8104,8105,8106,8107,8108,8109,8110,8111,8104,8105,8106,8107,8108,8109,8110,8111],t=0;t<48;t++)n=e[t],r[t+8064]=n}();var m={192:[65,768],193:[65,769],194:[65,770],195:[65,771],196:[65,776],197:[65,778],199:[67,807],200:[69,768],201:[69,769],202:[69,770],203:[69,776],204:[73,768],205:[73,769],206:[73,770],207:[73,776],209:[78,771],210:[79,768],211:[79,769],212:[79,770],213:[79,771],214:[79,776],217:[85,768],218:[85,769],219:[85,770],220:[85,776],221:[89,769],224:[97,768],225:[97,769],226:[97,770],227:[97,771],228:[97,776],229:[97,778],231:[99,807],232:[101,768],233:[101,769],234:[101,770],235:[101,776],236:[105,768],237:[105,769],238:[105,770],239:[105,776],241:[110,771],242:[111,768],243:[111,769],244:[111,770],245:[111,771],246:[111,776],249:[117,768],250:[117,769],251:[117,770],252:[117,776],253:[121,769],296:[73,771],297:[105,771],298:[73,772],299:[105,772],300:[73,774],301:[105,774],302:[73,808],303:[105,808],304:[73,775],308:[74,770],309:[106,770],310:[75,807],311:[107,807],313:[76,769],314:[108,769],315:[76,807],316:[108,807],317:[76,780],318:[108,780],323:[78,769],324:[110,769],325:[78,807],326:[110,807],327:[78,780],328:[110,780],332:[79,772],333:[111,772],334:[79,774],335:[111,774],336:[79,779],337:[111,779],416:[79,795],417:[111,795],431:[85,795],432:[117,795],478:[65,776,772],479:[97,776,772],480:[65,775,772],481:[97,775,772],482:[198,772],483:[230,772],486:[71,780],487:[103,780],488:[75,780],489:[107,780],490:[79,808],491:[111,808],492:[79,808,772],493:[111,808,772],494:[439,780],495:[658,780],496:[106,780],500:[71,769],501:[103,769],542:[72,780],543:[104,780],550:[65,775],551:[97,775],552:[69,807],553:[101,807],554:[79,776,772],555:[111,776,772],556:[79,771,772],557:[111,771,772],558:[79,775],559:[111,775],560:[79,775,772],561:[111,775,772],562:[89,772],563:[121,772],832:768,833:769,835:787,836:[776,769],884:697,894:59,901:[168,769],902:[913,769],903:183,904:[917,769],905:[919,769],906:[921,769],908:[927,769],910:[933,769],911:[937,769],912:[953,776,769],938:[921,776],939:[933,776],940:[945,769],941:[949,769],942:[951,769],943:[953,769],944:[965,776,769],970:[953,776],971:[965,776],972:[959,769],973:[965,769],974:[969,769],979:[978,769],980:[978,776],1024:[1045,768],1025:[1045,776],1027:[1043,769],1031:[1030,776],1036:[1050,769],1037:[1048,768],1038:[1059,774],1049:[1048,774],1081:[1080,774],1104:[1077,768],1105:[1077,776],1107:[1075,769],1111:[1110,776],1116:[1082,769],1117:[1080,768],1118:[1091,774],1142:[1140,783],1143:[1141,783],1217:[1046,774],1218:[1078,774],1232:[1040,774],1233:[1072,774],1234:[1040,776],1235:[1072,776],1238:[1045,774],1239:[1077,774],1242:[1240,776],1243:[1241,776],1244:[1046,776],1245:[1078,776],1246:[1047,776],1247:[1079,776],1250:[1048,772],1251:[1080,772],1252:[1048,776],1253:[1080,776],1254:[1054,776],1255:[1086,776],1258:[1256,776],1259:[1257,776],1260:[1069,776],1261:[1101,776],1262:[1059,772],1263:[1091,772],1264:[1059,776],1265:[1091,776],1266:[1059,779],1267:[1091,779],1268:[1063,776],1269:[1095,776],1272:[1067,776],1273:[1099,776],1570:[1575,1619],1571:[1575,1620],1572:[1608,1620],1573:[1575,1621],1574:[1610,1620],1728:[1749,1620],1730:[1729,1620],1747:[1746,1620],2345:[2344,2364],2353:[2352,2364],2356:[2355,2364],2392:[2325,2364],2393:[2326,2364],2394:[2327,2364],2395:[2332,2364],2396:[2337,2364],2397:[2338,2364],2398:[2347,2364],2399:[2351,2364],2507:[2503,2494],2508:[2503,2519],2524:[2465,2492],2525:[2466,2492],2527:[2479,2492],2611:[2610,2620],2614:[2616,2620],2649:[2582,2620],2650:[2583,2620],2651:[2588,2620],2654:[2603,2620],2888:[2887,2902],2891:[2887,2878],2892:[2887,2903],2908:[2849,2876],2909:[2850,2876],2964:[2962,3031],3018:[3014,3006],3019:[3015,3006],3020:[3014,3031],3144:[3142,3158],3264:[3263,3285],3271:[3270,3285],3272:[3270,3286],3274:[3270,3266],3275:[3270,3266,3285],3402:[3398,3390],3403:[3399,3390],3404:[3398,3415],3546:[3545,3530],3548:[3545,3535],3549:[3545,3535,3530],3550:[3545,3551],3907:[3906,4023],3917:[3916,4023],3922:[3921,4023],3927:[3926,4023],3932:[3931,4023],3945:[3904,4021],3955:[3953,3954],3957:[3953,3956],3958:[4018,3968],3960:[4019,3968],3969:[3953,3968],3987:[3986,4023],3997:[3996,4023],4002:[4001,4023],4007:[4006,4023],4012:[4011,4023],4025:[3984,4021],4134:[4133,4142],7835:[383,775],7960:[917,787],7961:[917,788],7962:[917,787,768],7963:[917,788,768],7964:[917,787,769],7965:[917,788,769],8008:[927,787],8009:[927,788],8010:[927,787,768],8011:[927,788,768],8012:[927,787,769],8013:[927,788,769],8016:[965,787],8017:[965,788],8018:[965,787,768],8019:[965,788,768],8020:[965,787,769],8021:[965,788,769],8022:[965,787,834],8023:[965,788,834],8025:[933,788],8027:[933,788,768],8029:[933,788,769],8118:[945,834],8119:[945,834,837],8120:[913,774],8121:[913,772],8122:[913,768],8123:[913,769],8124:[913,837],8126:953,8129:[168,834],8130:[951,768,837],8131:[951,837],8132:[951,769,837],8134:[951,834],8135:[951,834,837],8136:[917,768],8137:[917,769],8138:[919,768],8139:[919,769],8140:[919,837],8141:[8127,768],8142:[8127,769],8143:[8127,834],8144:[953,774],8145:[953,772],8146:[953,776,768],8147:[953,776,769],8150:[953,834],8151:[953,776,834],8152:[921,774],8153:[921,772],8154:[921,768],8155:[921,769],8178:[969,768,837],8179:[969,837],8180:[969,769,837],8182:[969,834],8183:[969,834,837],8184:[927,768],8185:[927,769],8186:[937,768],8187:[937,769],8188:[937,837],8189:180,8192:8194,8193:8195,8486:937,8490:75,8491:[65,778],8602:[8592,824],8603:[8594,824],8622:[8596,824],8653:[8656,824],8654:[8660,824],8655:[8658,824],8708:[8707,824],8713:[8712,824],8716:[8715,824],8740:[8739,824],8742:[8741,824],8769:[8764,824],8772:[8771,824],8775:[8773,824],8777:[8776,824],8800:[61,824],8802:[8801,824],8813:[8781,824],8814:[60,824],8815:[62,824],8816:[8804,824],8817:[8805,824],8820:[8818,824],8821:[8819,824],8824:[8822,824],8825:[8823,824],8832:[8826,824],8833:[8827,824],8836:[8834,824],8837:[8835,824],8840:[8838,824],8841:[8839,824],8876:[8866,824],8877:[8872,824],8878:[8873,824],8879:[8875,824],8928:[8828,824],8929:[8829,824],8930:[8849,824],8931:[8850,824],8938:[8882,824],8939:[8883,824],8940:[8884,824],8941:[8885,824],9001:12296,9002:12297,10972:[10973,824],12364:[12363,12441],12366:[12365,12441],12368:[12367,12441],12370:[12369,12441],12372:[12371,12441],12374:[12373,12441],12376:[12375,12441],12378:[12377,12441],12380:[12379,12441],12382:[12381,12441],12384:[12383,12441],12386:[12385,12441],12389:[12388,12441],12391:[12390,12441],12393:[12392,12441],12400:[12399,12441],12401:[12399,12442],12403:[12402,12441],12404:[12402,12442],12406:[12405,12441],12407:[12405,12442],12409:[12408,12441],12410:[12408,12442],12412:[12411,12441],12413:[12411,12442],12436:[12358,12441],12446:[12445,12441],12460:[12459,12441],12462:[12461,12441],12464:[12463,12441],12466:[12465,12441],12468:[12467,12441],12470:[12469,12441],12472:[12471,12441],12474:[12473,12441],12476:[12475,12441],12478:[12477,12441],12480:[12479,12441],12482:[12481,12441],12485:[12484,12441],12487:[12486,12441],12489:[12488,12441],12496:[12495,12441],12497:[12495,12442],12499:[12498,12441],12500:[12498,12442],12502:[12501,12441],12503:[12501,12442],12505:[12504,12441],12506:[12504,12442],12508:[12507,12441],12509:[12507,12442],12532:[12454,12441],12535:[12527,12441],12536:[12528,12441],12537:[12529,12441],12538:[12530,12441],12542:[12541,12441],64016:22618,64018:26228,64021:20958,64022:29482,64023:30410,64024:31036,64025:31070,64026:31077,64027:31119,64028:38742,64029:31934,64030:32701,64032:34322,64034:35576,64037:36920,64038:37117,64042:39151,64043:39164,64044:39208,64045:40372,64285:[1497,1460],64287:[1522,1463],64298:[1513,1473],64299:[1513,1474],64300:[1513,1468,1473],64301:[1513,1468,1474],64302:[1488,1463],64303:[1488,1464],64304:[1488,1468],64305:[1489,1468],64306:[1490,1468],64307:[1491,1468],64308:[1492,1468],64309:[1493,1468],64310:[1494,1468],64312:[1496,1468],64313:[1497,1468],64314:[1498,1468],64315:[1499,1468],64316:[1500,1468],64318:[1502,1468],64320:[1504,1468],64321:[1505,1468],64323:[1507,1468],64324:[1508,1468],64326:[1510,1468],64327:[1511,1468],64328:[1512,1468],64329:[1513,1468],64330:[1514,1468],64331:[1493,1465],64332:[1489,1471],64333:[1499,1471],64334:[1508,1471],119134:[119127,119141],119135:[119128,119141],119136:[119128,119141,119150],119137:[119128,119141,119151],119138:[119128,119141,119152],119139:[119128,119141,119153],119140:[119128,119141,119154],119227:[119225,119141],119228:[119226,119141],119229:[119225,119141,119150],119230:[119226,119141,119150],119231:[119225,119141,119151],119232:[119226,119141,119151]};!function(){var e,t,n,r=m;for(e=[[121,776],[65,772],[97,772],[65,774],[97,774],[65,808],[97,808],[67,769],[99,769],[67,770],[99,770],[67,775],[99,775],[67,780],[99,780],[68,780],[100,780]],t=0;t<17;t++)n=e[t],r[t+255]=n;for(e=[[69,772],[101,772],[69,774],[101,774],[69,775],[101,775],[69,808],[101,808],[69,780],[101,780],[71,770],[103,770],[71,774],[103,774],[71,775],[103,775],[71,807],[103,807],[72,770],[104,770]],t=0;t<20;t++)n=e[t],r[t+274]=n;for(e=[[82,769],[114,769],[82,807],[114,807],[82,780],[114,780],[83,769],[115,769],[83,770],[115,770],[83,807],[115,807],[83,780],[115,780],[84,807],[116,807],[84,780],[116,780]],t=0;t<18;t++)n=e[t],r[t+340]=n;for(e=[[85,771],[117,771],[85,772],[117,772],[85,774],[117,774],[85,778],[117,778],[85,779],[117,779],[85,808],[117,808],[87,770],[119,770],[89,770],[121,770],[89,776],[90,769],[122,769],[90,775],[122,775],[90,780],[122,780]],t=0;t<23;t++)n=e[t],r[t+360]=n;for(e=[[65,780],[97,780],[73,780],[105,780],[79,780],[111,780],[85,780],[117,780],[85,776,772],[117,776,772],[85,776,769],[117,776,769],[85,776,780],[117,776,780],[85,776,768],[117,776,768]],t=0;t<16;t++)n=e[t],r[t+461]=n;for(e=[[78,768],[110,768],[65,778,769],[97,778,769],[198,769],[230,769],[216,769],[248,769],[65,783],[97,783],[65,785],[97,785],[69,783],[101,783],[69,785],[101,785],[73,783],[105,783],[73,785],[105,785],[79,783],[111,783],[79,785],[111,785],[82,783],[114,783],[82,785],[114,785],[85,783],[117,783],[85,785],[117,785],[83,806],[115,806],[84,806],[116,806]],t=0;t<36;t++)n=e[t],r[t+504]=n;for(e=[[65,805],[97,805],[66,775],[98,775],[66,803],[98,803],[66,817],[98,817],[67,807,769],[99,807,769],[68,775],[100,775],[68,803],[100,803],[68,817],[100,817],[68,807],[100,807],[68,813],[100,813],[69,772,768],[101,772,768],[69,772,769],[101,772,769],[69,813],[101,813],[69,816],[101,816],[69,807,774],[101,807,774],[70,775],[102,775],[71,772],[103,772],[72,775],[104,775],[72,803],[104,803],[72,776],[104,776],[72,807],[104,807],[72,814],[104,814],[73,816],[105,816],[73,776,769],[105,776,769],[75,769],[107,769],[75,803],[107,803],[75,817],[107,817],[76,803],[108,803],[76,803,772],[108,803,772],[76,817],[108,817],[76,813],[108,813],[77,769],[109,769],[77,775],[109,775],[77,803],[109,803],[78,775],[110,775],[78,803],[110,803],[78,817],[110,817],[78,813],[110,813],[79,771,769],[111,771,769],[79,771,776],[111,771,776],[79,772,768],[111,772,768],[79,772,769],[111,772,769],[80,769],[112,769],[80,775],[112,775],[82,775],[114,775],[82,803],[114,803],[82,803,772],[114,803,772],[82,817],[114,817],[83,775],[115,775],[83,803],[115,803],[83,769,775],[115,769,775],[83,780,775],[115,780,775],[83,803,775],[115,803,775],[84,775],[116,775],[84,803],[116,803],[84,817],[116,817],[84,813],[116,813],[85,804],[117,804],[85,816],[117,816],[85,813],[117,813],[85,771,769],[117,771,769],[85,772,776],[117,772,776],[86,771],[118,771],[86,803],[118,803],[87,768],[119,768],[87,769],[119,769],[87,776],[119,776],[87,775],[119,775],[87,803],[119,803],[88,775],[120,775],[88,776],[120,776],[89,775],[121,775],[90,770],[122,770],[90,803],[122,803],[90,817],[122,817],[104,817],[116,776],[119,778],[121,778]],t=0;t<154;t++)n=e[t],r[t+7680]=n;for(e=[[65,803],[97,803],[65,777],[97,777],[65,770,769],[97,770,769],[65,770,768],[97,770,768],[65,770,777],[97,770,777],[65,770,771],[97,770,771],[65,803,770],[97,803,770],[65,774,769],[97,774,769],[65,774,768],[97,774,768],[65,774,777],[97,774,777],[65,774,771],[97,774,771],[65,803,774],[97,803,774],[69,803],[101,803],[69,777],[101,777],[69,771],[101,771],[69,770,769],[101,770,769],[69,770,768],[101,770,768],[69,770,777],[101,770,777],[69,770,771],[101,770,771],[69,803,770],[101,803,770],[73,777],[105,777],[73,803],[105,803],[79,803],[111,803],[79,777],[111,777],[79,770,769],[111,770,769],[79,770,768],[111,770,768],[79,770,777],[111,770,777],[79,770,771],[111,770,771],[79,803,770],[111,803,770],[79,795,769],[111,795,769],[79,795,768],[111,795,768],[79,795,777],[111,795,777],[79,795,771],[111,795,771],[79,795,803],[111,795,803],[85,803],[117,803],[85,777],[117,777],[85,795,769],[117,795,769],[85,795,768],[117,795,768],[85,795,777],[117,795,777],[85,795,771],[117,795,771],[85,795,803],[117,795,803],[89,768],[121,768],[89,803],[121,803],[89,777],[121,777],[89,771],[121,771]],t=0;t<90;t++)n=e[t],r[t+7840]=n;for(e=[[945,787],[945,788],[945,787,768],[945,788,768],[945,787,769],[945,788,769],[945,787,834],[945,788,834],[913,787],[913,788],[913,787,768],[913,788,768],[913,787,769],[913,788,769],[913,787,834],[913,788,834],[949,787],[949,788],[949,787,768],[949,788,768],[949,787,769],[949,788,769]],t=0;t<22;t++)n=e[t],r[t+7936]=n;for(e=[[951,787],[951,788],[951,787,768],[951,788,768],[951,787,769],[951,788,769],[951,787,834],[951,788,834],[919,787],[919,788],[919,787,768],[919,788,768],[919,787,769],[919,788,769],[919,787,834],[919,788,834],[953,787],[953,788],[953,787,768],[953,788,768],[953,787,769],[953,788,769],[953,787,834],[953,788,834],[921,787],[921,788],[921,787,768],[921,788,768],[921,787,769],[921,788,769],[921,787,834],[921,788,834],[959,787],[959,788],[959,787,768],[959,788,768],[959,787,769],[959,788,769]],t=0;t<38;t++)n=e[t],r[t+7968]=n;for(e=[[933,788,834],[969,787],[969,788],[969,787,768],[969,788,768],[969,787,769],[969,788,769],[969,787,834],[969,788,834],[937,787],[937,788],[937,787,768],[937,788,768],[937,787,769],[937,788,769],[937,787,834],[937,788,834],[945,768],[945,769],[949,768],[949,769],[951,768],[951,769],[953,768],[953,769],[959,768],[959,769],[965,768],[965,769],[969,768],[969,769]],t=0;t<31;t++)n=e[t],r[t+8031]=n;for(e=[[945,787,837],[945,788,837],[945,787,768,837],[945,788,768,837],[945,787,769,837],[945,788,769,837],[945,787,834,837],[945,788,834,837],[913,787,837],[913,788,837],[913,787,768,837],[913,788,768,837],[913,787,769,837],[913,788,769,837],[913,787,834,837],[913,788,834,837],[951,787,837],[951,788,837],[951,787,768,837],[951,788,768,837],[951,787,769,837],[951,788,769,837],[951,787,834,837],[951,788,834,837],[919,787,837],[919,788,837],[919,787,768,837],[919,788,768,837],[919,787,769,837],[919,788,769,837],[919,787,834,837],[919,788,834,837],[969,787,837],[969,788,837],[969,787,768,837],[969,788,768,837],[969,787,769,837],[969,788,769,837],[969,787,834,837],[969,788,834,837],[937,787,837],[937,788,837],[937,787,768,837],[937,788,768,837],[937,787,769,837],[937,788,769,837],[937,787,834,837],[937,788,834,837],[945,774],[945,772],[945,768,837],[945,837],[945,769,837]],t=0;t<53;t++)n=e[t],r[t+8064]=n;for(e=[[8190,768],[8190,769],[8190,834],[965,774],[965,772],[965,776,768],[965,776,769],[961,787],[961,788],[965,834],[965,776,834],[933,774],[933,772],[933,768],[933,769],[929,788],[168,768],[168,769],96],t=0;t<19;t++)n=e[t],r[t+8157]=n;for(e=[35912,26356,36554,36040,28369,20018,21477,40860,40860,22865,37329,21895,22856,25078,30313,32645,34367,34746,35064,37007,27138,27931,28889,29662,33853,37226,39409,20098,21365,27396,29211,34349,40478,23888,28651,34253,35172,25289,33240,34847,24266,26391,28010,29436,37070,20358,20919,21214,25796,27347,29200,30439,32769,34310,34396,36335,38706,39791,40442,30860,31103,32160,33737,37636,40575,35542,22751,24324,31840,32894,29282,30922,36034,38647,22744,23650,27155,28122,28431,32047,32311,38475,21202,32907,20956,20940,31260,32190,33777,38517,35712,25295,27138,35582,20025,23527,24594,29575,30064,21271,30971,20415,24489,19981,27852,25976,32034,21443,22622,30465,33865,35498,27578,36784,27784,25342,33509,25504,30053,20142,20841,20937,26753,31975,33391,35538,37327,21237,21570,22899,24300,26053,28670,31018,38317,39530,40599,40654,21147,26310,27511,36706,24180,24976,25088,25754,28451,29001,29833,31178,32244,32879,36646,34030,36899,37706,21015,21155,21693,28872,35010,35498,24265,24565,25467,27566,31806,29557,20196,22265,23527,23994,24604,29618,29801,32666,32838,37428,38646,38728,38936,20363,31150,37300,38584,24801,20102,20698,23534,23615,26009,27138,29134,30274,34044,36988,40845,26248,38446,21129,26491,26611,27969,28316,29705,30041,30827,32016,39006,20845,25134,38520,20523,23833,28138,36650,24459,24900,26647,29575,38534,21033,21519,23653,26131,26446,26792,27877,29702,30178,32633,35023,35041,37324,38626,21311,28346,21533,29136,29848,34298,38563,40023,40607,26519,28107,33256,31435,31520,31890,29376,28825,35672,20160,33590,21050,20999,24230,25299,31958,23429,27934,26292,36667,34892,38477,35211,24275,20800,21952],t=0;t<270;t++)n=e[t],r[t+63744]=n;for(e=[20398,20711,20813,21193,21220,21329,21917,22022,22120,22592,22696,23652,23662,24724,24936,24974,25074,25935,26082,26257,26757,28023,28186,28450,29038,29227,29730,30865,31038,31049,31048,31056,31062,31069,31117,31118,31296,31361,31680,32244,32265,32321,32626,32773,33261,33401,33401,33879,35088,35222,35585,35641,36051,36104,36790,36920,38627,38911,38971],t=0;t<59;t++)n=e[t],r[t+64048]=n;for(e=[20029,20024,20033,131362,20320,20398,20411,20482,20602,20633,20711,20687,13470,132666,20813,20820,20836,20855,132380,13497,20839,20877,132427,20887,20900,20172,20908,20917,168415,20981,20995,13535,21051,21062,21106,21111,13589,21191,21193,21220,21242,21253,21254,21271,21321,21329,21338,21363,21373,21375,21375,21375,133676,28784,21450,21471,133987,21483,21489,21510,21662,21560,21576,21608,21666,21750,21776,21843,21859,21892,21892,21913,21931,21939,21954,22294,22022,22295,22097,22132,20999,22766,22478,22516,22541,22411,22578,22577,22700,136420,22770,22775,22790,22810,22818,22882,136872,136938,23020,23067,23079,23e3,23142,14062,14076,23304,23358,23358,137672,23491,23512,23527,23539,138008,23551,23558,24403,23586,14209,23648,23662,23744,23693,138724,23875,138726,23918,23915,23932,24033,24034,14383,24061,24104,24125,24169,14434,139651,14460,24240,24243,24246,24266,172946,24318,140081,140081,33281,24354,24354,14535,144056,156122,24418,24427,14563,24474,24525,24535,24569,24705,14650,14620,24724,141012,24775,24904,24908,24910,24908,24954,24974,25010,24996,25007,25054,25074,25078,25104,25115,25181,25265,25300,25424,142092,25405,25340,25448,25475,25572,142321,25634,25541,25513,14894,25705,25726,25757,25719,14956,25935,25964,143370,26083,26360,26185,15129,26257,15112,15076,20882,20885,26368,26268,32941,17369,26391,26395,26401,26462,26451,144323,15177,26618,26501,26706,26757,144493,26766,26655,26900,15261,26946,27043,27114,27304,145059,27355,15384,27425,145575,27476,15438,27506,27551,27578,27579,146061,138507,146170,27726,146620,27839,27853,27751,27926,27966,28023,27969,28009,28024,28037,146718,27956,28207,28270,15667,28363,28359,147153,28153,28526,147294,147342,28614,28729,28702,28699,15766,28746,28797,28791,28845,132389,28997,148067,29084,148395,29224,29237,29264,149e3,29312,29333,149301,149524,29562,29579,16044,29605,16056,16056,29767,29788,29809,29829,29898,16155,29988,150582,30014,150674,30064,139679,30224,151457,151480,151620,16380,16392,30452,151795,151794,151833,151859,30494,30495,30495,30538,16441,30603,16454,16534,152605,30798,30860,30924,16611,153126,31062,153242,153285,31119,31211,16687,31296,31306,31311,153980,154279,154279,31470,16898,154539,31686,31689,16935,154752,31954,17056,31976,31971,32e3,155526,32099,17153,32199,32258,32325,17204,156200,156231,17241,156377,32634,156478,32661,32762,32773,156890,156963,32864,157096,32880,144223,17365,32946,33027,17419,33086,23221,157607,157621,144275,144284,33281,33284,36766,17515,33425,33419,33437,21171,33457,33459,33469,33510,158524,33509,33565,33635,33709,33571,33725,33767,33879,33619,33738,33740,33756,158774,159083,158933,17707,34033,34035,34070,160714,34148,159532,17757,17761,159665,159954,17771,34384,34396,34407,34409,34473,34440,34574,34530,34681,34600,34667,34694,17879,34785,34817,17913,34912,34915,161383,35031,35038,17973,35066,13499,161966,162150,18110,18119,35488,35565,35722,35925,162984,36011,36033,36123,36215,163631,133124,36299,36284,36336,133342,36564,36664,165330,165357,37012,37105,37137,165678,37147,37432,37591,37592,37500,37881,37909,166906,38283,18837,38327,167287,18918,38595,23986,38691,168261,168474,19054,19062,38880,168970,19122,169110,38923,38923,38953,169398,39138,19251,39209,39335,39362,39422,19406,170800,39698,4e4,40189,19662,19693,40295,172238,19704,172293,172558,172689,40635,19798,40697,40702,40709,40719,40726,40763,173568],t=0;t<542;t++)n=e[t],r[t+194560]=n}();var v={768:230,769:230,770:230,771:230,772:230,773:230,774:230,775:230,776:230,777:230,778:230,779:230,780:230,781:230,782:230,783:230,784:230,785:230,786:230,787:230,788:230,789:232,790:220,791:220,792:220,793:220,794:232,795:216,796:220,797:220,798:220,799:220,800:220,801:202,802:202,803:220,804:220,805:220,806:220,807:202,808:202,809:220,810:220,811:220,812:220,813:220,814:220,815:220,816:220,817:220,818:220,819:220,820:1,821:1,822:1,823:1,824:1,825:220,826:220,827:220,828:220,829:230,830:230,831:230,832:230,833:230,834:230,835:230,836:230,837:240,838:230,839:220,840:220,841:220,842:230,843:230,844:230,845:220,846:220,848:230,849:230,850:230,851:220,852:220,853:220,854:220,855:230,861:234,862:234,863:233,864:234,865:234,866:233,867:230,868:230,869:230,870:230,871:230,872:230,873:230,874:230,875:230,876:230,877:230,878:230,879:230,1155:230,1156:230,1157:230,1158:230,1425:220,1426:230,1427:230,1428:230,1429:230,1430:220,1431:230,1432:230,1433:230,1434:222,1435:220,1436:230,1437:230,1438:230,1439:230,1440:230,1441:230,1443:220,1444:220,1445:220,1446:220,1447:220,1448:230,1449:230,1450:220,1451:230,1452:230,1453:222,1454:228,1455:230,1456:10,1457:11,1458:12,1459:13,1460:14,1461:15,1462:16,1463:17,1464:18,1465:19,1467:20,1468:21,1469:22,1471:23,1473:24,1474:25,1476:230,1552:230,1553:230,1554:230,1555:230,1556:230,1557:230,1611:27,1612:28,1613:29,1614:30,1615:31,1616:32,1617:33,1618:34,1619:230,1620:230,1621:220,1622:220,1623:230,1624:230,1648:35,1750:230,1751:230,1752:230,1753:230,1754:230,1755:230,1756:230,1759:230,1760:230,1761:230,1762:230,1763:220,1764:230,1767:230,1768:230,1770:220,1771:230,1772:230,1773:220,1809:36,1840:230,1841:220,1842:230,1843:230,1844:220,1845:230,1846:230,1847:220,1848:220,1849:220,1850:230,1851:220,1852:220,1853:230,1854:220,1855:230,1856:230,1857:230,1858:220,1859:230,1860:220,1861:230,1862:220,1863:230,1864:220,1865:230,1866:230,2364:7,2381:9,2385:230,2386:220,2387:230,2388:230,2492:7,2509:9,2620:7,2637:9,2748:7,2765:9,2876:7,2893:9,3021:9,3149:9,3157:84,3158:91,3260:7,3277:9,3405:9,3530:9,3640:103,3641:103,3642:9,3656:107,3657:107,3658:107,3659:107,3768:118,3769:118,3784:122,3785:122,3786:122,3787:122,3864:220,3865:220,3893:220,3895:220,3897:216,3953:129,3954:130,3956:132,3962:130,3963:130,3964:130,3965:130,3968:130,3970:230,3971:230,3972:9,3974:230,3975:230,4038:220,4151:7,4153:9,5908:9,5940:9,6098:9,6109:230,6313:228,6457:222,6458:230,6459:220,8400:230,8401:230,8402:1,8403:1,8404:230,8405:230,8406:230,8407:230,8408:1,8409:1,8410:1,8411:230,8412:230,8417:230,8421:1,8422:1,8423:230,8424:220,8425:230,8426:1,12330:218,12331:228,12332:232,12333:222,12334:224,12335:224,12441:8,12442:8,64286:26,65056:230,65057:230,65058:230,65059:230,119141:216,119142:216,119143:1,119144:1,119145:1,119149:226,119150:216,119151:216,119152:216,119153:216,119154:216,119163:220,119164:220,119165:220,119166:220,119167:220,119168:220,119169:220,119170:220,119173:230,119174:230,119175:230,119176:230,119177:230,119178:220,119179:220,119210:230,119211:230,119212:230,119213:230},w={60:{824:8814},61:{824:8800},62:{824:8815},65:{768:192,769:193,770:194,771:195,772:256,774:258,775:550,776:196,777:7842,778:197,780:461,783:512,785:514,803:7840,805:7680,808:260},66:{775:7682,803:7684,817:7686},67:{769:262,770:264,775:266,780:268,807:199},68:{775:7690,780:270,803:7692,807:7696,813:7698,817:7694},69:{768:200,769:201,770:202,771:7868,772:274,774:276,775:278,776:203,777:7866,780:282,783:516,785:518,803:7864,807:552,808:280,813:7704,816:7706},70:{775:7710},71:{769:500,770:284,772:7712,774:286,775:288,780:486,807:290},72:{770:292,775:7714,776:7718,780:542,803:7716,807:7720,814:7722},73:{768:204,769:205,770:206,771:296,772:298,774:300,775:304,776:207,777:7880,780:463,783:520,785:522,803:7882,808:302,816:7724},74:{770:308},75:{769:7728,780:488,803:7730,807:310,817:7732},76:{769:313,780:317,803:7734,807:315,813:7740,817:7738},77:{769:7742,775:7744,803:7746},78:{768:504,769:323,771:209,775:7748,780:327,803:7750,807:325,813:7754,817:7752},79:{768:210,769:211,770:212,771:213,772:332,774:334,775:558,776:214,777:7886,779:336,780:465,783:524,785:526,795:416,803:7884,808:490},80:{769:7764,775:7766},82:{769:340,775:7768,780:344,783:528,785:530,803:7770,807:342,817:7774},83:{769:346,770:348,775:7776,780:352,803:7778,806:536,807:350},84:{775:7786,780:356,803:7788,806:538,807:354,813:7792,817:7790},85:{768:217,769:218,770:219,771:360,772:362,774:364,776:220,777:7910,778:366,779:368,780:467,783:532,785:534,795:431,803:7908,804:7794,808:370,813:7798,816:7796},86:{771:7804,803:7806},87:{768:7808,769:7810,770:372,775:7814,776:7812,803:7816},88:{775:7818,776:7820},89:{768:7922,769:221,770:374,771:7928,772:562,775:7822,776:376,777:7926,803:7924},90:{769:377,770:7824,775:379,780:381,803:7826,817:7828},97:{768:224,769:225,770:226,771:227,772:257,774:259,775:551,776:228,777:7843,778:229,780:462,783:513,785:515,803:7841,805:7681,808:261},98:{775:7683,803:7685,817:7687},99:{769:263,770:265,775:267,780:269,807:231},100:{775:7691,780:271,803:7693,807:7697,813:7699,817:7695},101:{768:232,769:233,770:234,771:7869,772:275,774:277,775:279,776:235,777:7867,780:283,783:517,785:519,803:7865,807:553,808:281,813:7705,816:7707},102:{775:7711},103:{769:501,770:285,772:7713,774:287,775:289,780:487,807:291},104:{770:293,775:7715,776:7719,780:543,803:7717,807:7721,814:7723,817:7830},105:{768:236,769:237,770:238,771:297,772:299,774:301,776:239,777:7881,780:464,783:521,785:523,803:7883,808:303,816:7725},106:{770:309,780:496},107:{769:7729,780:489,803:7731,807:311,817:7733},108:{769:314,780:318,803:7735,807:316,813:7741,817:7739},109:{769:7743,775:7745,803:7747},110:{768:505,769:324,771:241,775:7749,780:328,803:7751,807:326,813:7755,817:7753},111:{768:242,769:243,770:244,771:245,772:333,774:335,775:559,776:246,777:7887,779:337,780:466,783:525,785:527,795:417,803:7885,808:491},112:{769:7765,775:7767},114:{769:341,775:7769,780:345,783:529,785:531,803:7771,807:343,817:7775},115:{769:347,770:349,775:7777,780:353,803:7779,806:537,807:351},116:{775:7787,776:7831,780:357,803:7789,806:539,807:355,813:7793,817:7791},117:{768:249,769:250,770:251,771:361,772:363,774:365,776:252,777:7911,778:367,779:369,780:468,783:533,785:535,795:432,803:7909,804:7795,808:371,813:7799,816:7797},118:{771:7805,803:7807},119:{768:7809,769:7811,770:373,775:7815,776:7813,778:7832,803:7817},120:{775:7819,776:7821},121:{768:7923,769:253,770:375,771:7929,772:563,775:7823,776:255,777:7927,778:7833,803:7925},122:{769:378,770:7825,775:380,780:382,803:7827,817:7829},168:{768:8173,769:901,834:8129},194:{768:7846,769:7844,771:7850,777:7848},196:{772:478},197:{769:506},198:{769:508,772:482},199:{769:7688},202:{768:7872,769:7870,771:7876,777:7874},207:{769:7726},212:{768:7890,769:7888,771:7894,777:7892},213:{769:7756,772:556,776:7758},214:{772:554},216:{769:510},220:{768:475,769:471,772:469,780:473},226:{768:7847,769:7845,771:7851,777:7849},228:{772:479},229:{769:507},230:{769:509,772:483},231:{769:7689},234:{768:7873,769:7871,771:7877,777:7875},239:{769:7727},244:{768:7891,769:7889,771:7895,777:7893},245:{769:7757,772:557,776:7759},246:{772:555},248:{769:511},252:{768:476,769:472,772:470,780:474},258:{768:7856,769:7854,771:7860,777:7858},259:{768:7857,769:7855,771:7861,777:7859},274:{768:7700,769:7702},275:{768:7701,769:7703},332:{768:7760,769:7762},333:{768:7761,769:7763},346:{775:7780},347:{775:7781},352:{775:7782},353:{775:7783},360:{769:7800},361:{769:7801},362:{776:7802},363:{776:7803},383:{775:7835},416:{768:7900,769:7898,771:7904,777:7902,803:7906},417:{768:7901,769:7899,771:7905,777:7903,803:7907},431:{768:7914,769:7912,771:7918,777:7916,803:7920},432:{768:7915,769:7913,771:7919,777:7917,803:7921},439:{780:494},490:{772:492},491:{772:493},550:{772:480},551:{772:481},552:{774:7708},553:{774:7709},558:{772:560},559:{772:561},658:{780:495},776:{769:836},913:{768:8122,769:902,772:8121,774:8120,787:7944,788:7945,837:8124},917:{768:8136,769:904,787:7960,788:7961},919:{768:8138,769:905,787:7976,788:7977,837:8140},921:{768:8154,769:906,772:8153,774:8152,776:938,787:7992,788:7993},927:{768:8184,769:908,787:8008,788:8009},929:{788:8172},933:{768:8170,769:910,772:8169,774:8168,776:939,788:8025},937:{768:8186,769:911,787:8040,788:8041,837:8188},940:{837:8116},942:{837:8132},945:{768:8048,769:940,772:8113,774:8112,787:7936,788:7937,834:8118,837:8115},949:{768:8050,769:941,787:7952,788:7953},951:{768:8052,769:942,787:7968,788:7969,834:8134,837:8131},953:{768:8054,769:943,772:8145,774:8144,776:970,787:7984,788:7985,834:8150},959:{768:8056,769:972,787:8e3,788:8001},961:{787:8164,788:8165},965:{768:8058,769:973,772:8161,774:8160,776:971,787:8016,788:8017,834:8166},969:{768:8060,769:974,787:8032,788:8033,834:8182,837:8179},970:{768:8146,769:912,834:8151},971:{768:8162,769:944,834:8167},974:{837:8180},978:{769:979,776:980},1030:{776:1031},1040:{774:1232,776:1234},1043:{769:1027},1045:{768:1024,774:1238,776:1025},1046:{774:1217,776:1244},1047:{776:1246},1048:{768:1037,772:1250,774:1049,776:1252},1050:{769:1036},1054:{776:1254},1059:{772:1262,774:1038,776:1264,779:1266},1063:{776:1268},1067:{776:1272},1069:{776:1260},1072:{774:1233,776:1235},1075:{769:1107},1077:{768:1104,774:1239,776:1105},1078:{774:1218,776:1245},1079:{776:1247},1080:{768:1117,772:1251,774:1081,776:1253},1082:{769:1116},1086:{776:1255},1091:{772:1263,774:1118,776:1265,779:1267},1095:{776:1269},1099:{776:1273},1101:{776:1261},1110:{776:1111},1140:{783:1142},1141:{783:1143},1240:{776:1242},1241:{776:1243},1256:{776:1258},1257:{776:1259},1488:{1463:64302,1464:64303,1468:64304},1489:{1468:64305,1471:64332},1490:{1468:64306},1491:{1468:64307},1492:{1468:64308},1493:{1465:64331,1468:64309},1494:{1468:64310},1496:{1468:64312},1497:{1460:64285,1468:64313},1498:{1468:64314},1499:{1468:64315,1471:64333},1500:{1468:64316},1502:{1468:64318},1504:{1468:64320},1505:{1468:64321},1507:{1468:64323},1508:{1468:64324,1471:64334},1510:{1468:64326},1511:{1468:64327},1512:{1468:64328},1513:{1468:64329,1473:64298,1474:64299},1514:{1468:64330},1522:{1463:64287},1575:{1619:1570,1620:1571,1621:1573},1608:{1620:1572},1610:{1620:1574},1729:{1620:1730},1746:{1620:1747},1749:{1620:1728},2325:{2364:2392},2326:{2364:2393},2327:{2364:2394},2332:{2364:2395},2337:{2364:2396},2338:{2364:2397},2344:{2364:2345},2347:{2364:2398},2351:{2364:2399},2352:{2364:2353},2355:{2364:2356},2465:{2492:2524},2466:{2492:2525},2479:{2492:2527},2503:{2494:2507,2519:2508},2582:{2620:2649},2583:{2620:2650},2588:{2620:2651},2603:{2620:2654},2610:{2620:2611},2616:{2620:2614},2849:{2876:2908},2850:{2876:2909},2887:{2878:2891,2902:2888,2903:2892},2962:{3031:2964},3014:{3006:3018,3031:3020},3015:{3006:3019},3142:{3158:3144},3263:{3285:3264},3270:{3266:3274,3285:3271,3286:3272},3274:{3285:3275},3398:{3390:3402,3415:3404},3399:{3390:3403},3545:{3530:3546,3535:3548,3551:3550},3548:{3530:3549},3904:{4021:3945},3906:{4023:3907},3916:{4023:3917},3921:{4023:3922},3926:{4023:3927},3931:{4023:3932},3953:{3954:3955,3956:3957,3968:3969},3984:{4021:4025},3986:{4023:3987},3996:{4023:3997},4001:{4023:4002},4006:{4023:4007},4011:{4023:4012},4018:{3968:3958},4019:{3968:3960},4133:{4142:4134},7734:{772:7736},7735:{772:7737},7770:{772:7772},7771:{772:7773},7778:{775:7784},7779:{775:7785},7840:{770:7852,774:7862},7841:{770:7853,774:7863},7864:{770:7878},7865:{770:7879},7884:{770:7896},7885:{770:7897},7936:{768:7938,769:7940,834:7942,837:8064},7937:{768:7939,769:7941,834:7943,837:8065},7938:{837:8066},7939:{837:8067},7940:{837:8068},7941:{837:8069},7942:{837:8070},7943:{837:8071},7944:{768:7946,769:7948,834:7950,837:8072},7945:{768:7947,769:7949,834:7951,837:8073},7946:{837:8074},7947:{837:8075},7948:{837:8076},7949:{837:8077},7950:{837:8078},7951:{837:8079},7952:{768:7954,769:7956},7953:{768:7955,769:7957},7960:{768:7962,769:7964},7961:{768:7963,769:7965},7968:{768:7970,769:7972,834:7974,837:8080},7969:{768:7971,769:7973,834:7975,837:8081},7970:{837:8082},7971:{837:8083},7972:{837:8084},7973:{837:8085},7974:{837:8086},7975:{837:8087},7976:{768:7978,769:7980,834:7982,837:8088},7977:{768:7979,769:7981,834:7983,837:8089},7978:{837:8090},7979:{837:8091},7980:{837:8092},7981:{837:8093},7982:{837:8094},7983:{837:8095},7984:{768:7986,769:7988,834:7990},7985:{768:7987,769:7989,834:7991},7992:{768:7994,769:7996,834:7998},7993:{768:7995,769:7997,834:7999},8e3:{768:8002,769:8004},8001:{768:8003,769:8005},8008:{768:8010,769:8012},8009:{768:8011,769:8013},8016:{768:8018,769:8020,834:8022},8017:{768:8019,769:8021,834:8023},8025:{768:8027,769:8029,834:8031},8032:{768:8034,769:8036,834:8038,837:8096},8033:{768:8035,769:8037,834:8039,837:8097},8034:{837:8098},8035:{837:8099},8036:{837:8100},8037:{837:8101},8038:{837:8102},8039:{837:8103},8040:{768:8042,769:8044,834:8046,837:8104},8041:{768:8043,769:8045,834:8047,837:8105},8042:{837:8106},8043:{837:8107},8044:{837:8108},8045:{837:8109},8046:{837:8110},8047:{837:8111},8048:{837:8114},8052:{837:8130},8060:{837:8178},8118:{837:8119},8127:{768:8141,769:8142,834:8143},8134:{837:8135},8182:{837:8183},8190:{768:8157,769:8158,834:8159},8592:{824:8602},8594:{824:8603},8596:{824:8622},8656:{824:8653},8658:{824:8655},8660:{824:8654},8707:{824:8708},8712:{824:8713},8715:{824:8716},8739:{824:8740},8741:{824:8742},8764:{824:8769},8771:{824:8772},8773:{824:8775},8776:{824:8777},8781:{824:8813},8801:{824:8802},8804:{824:8816},8805:{824:8817},8818:{824:8820},8819:{824:8821},8822:{824:8824},8823:{824:8825},8826:{824:8832},8827:{824:8833},8828:{824:8928},8829:{824:8929},8834:{824:8836},8835:{824:8837},8838:{824:8840},8839:{824:8841},8849:{824:8930},8850:{824:8931},8866:{824:8876},8872:{824:8877},8873:{824:8878},8875:{824:8879},8882:{824:8938},8883:{824:8939},8884:{824:8940},8885:{824:8941},10973:{824:10972},12358:{12441:12436},12363:{12441:12364},12365:{12441:12366},12367:{12441:12368},12369:{12441:12370},12371:{12441:12372},12373:{12441:12374},12375:{12441:12376},12377:{12441:12378},12379:{12441:12380},12381:{12441:12382},12383:{12441:12384},12385:{12441:12386},12388:{12441:12389},12390:{12441:12391},12392:{12441:12393},12399:{12441:12400,12442:12401},12402:{12441:12403,12442:12404},12405:{12441:12406,12442:12407},12408:{12441:12409,12442:12410},12411:{12441:12412,12442:12413},12445:{12441:12446},12454:{12441:12532},12459:{12441:12460},12461:{12441:12462},12463:{12441:12464},12465:{12441:12466},12467:{12441:12468},12469:{12441:12470},12471:{12441:12472},12473:{12441:12474},12475:{12441:12476},12477:{12441:12478},12479:{12441:12480},12481:{12441:12482},12484:{12441:12485},12486:{12441:12487},12488:{12441:12489},12495:{12441:12496,12442:12497},12498:{12441:12499,12442:12500},12501:{12441:12502,12442:12503},12504:{12441:12505,12442:12506},12507:{12441:12508,12442:12509},12527:{12441:12535},12528:{12441:12536},12529:{12441:12537},12530:{12441:12538},12541:{12441:12542},64329:{1473:64300,1474:64301},119127:{119141:119134},119128:{119141:119135},119135:{119150:119136,119151:119137,119152:119138,119153:119139,119154:119140},119225:{119141:119227},119226:{119141:119228},119227:{119150:119229,119151:119231},119228:{119150:119230,119151:119232}};const _={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45};function b(e){return[a.HANDSHAKE_FILENAME,a.JS_EVAL_FILENAME,a.JS_RETURN_VALUE_FILENAME,a.JS_RETURN_VALUE_TYPE_FILENAME].indexOf(e)>-1?a.VORPLE_PATH:a.INFORM_PATH}function E(){}let k,S,x,T,O,C=null,N=!1,A=!1,I=null,L=null,F=0,R=null,D=null;function M(e){if(!A)switch(R=e.partial,e.type){case"init":C.init();break;case"external":case"timer":case"hyperlink":case"mouse":case"arrange":case"redraw":break;case"specialresponse":"fileref_prompt"===e.response&&function(e){var t=e.value,n=L.usage,r=L.rock,i=null;t&&(i=ce(t.filename,n,r,t));I=null,L=null,window.GiDispa&&GiDispa.prepare_resume(i);C.resume(i)}(e);break;case"char":!function(e){var t;if(!te)return;var n=Z;1==e.length?(t=e.charCodeAt(0),n.char_request_uni||(t&=255)):(t=f[e])||(t=l.keycode_Unknown);te.set_field(0,l.evtype_CharInput),te.set_field(1,n),te.set_field(2,t),te.set_field(3,0),n.char_request=!1,n.char_request_uni=!1,n.input_generation=null,window.GiDispa&&GiDispa.prepare_resume(te);te=null,C.resume()}(e.value);break;case"line":!function(e,t){var n;if(!te)return;var r=Z;e.length>r.linebuf.length&&(e=e.slice(0,r.linebuf.length));r.request_echo_line_input&&(n=r.style,ge(r.str,l.style_Input),ie(r,e),r.echostr&&ye(r.echostr,e),ge(r.str,n),ie(r,"\n"),r.echostr&&ye(r.echostr,"\n"));for(n=0;n<e.length;n++)r.linebuf[n]=e.charCodeAt(n);var i=l.keycode_Return;te.set_field(0,l.evtype_LineInput),te.set_field(1,r),te.set_field(2,e.length),te.set_field(3,i),window.GiDispa&&GiDispa.unretain_array(r.linebuf);r.line_request=!1,r.line_request_uni=!1,r.request_echo_line_input=null,r.input_generation=null,r.linebuf=null,window.GiDispa&&GiDispa.prepare_resume(te);te=null,C.resume()}(e.value,e.terminator)}}function j(e){Object(c.a)(e)}function P(e){var t,n,r=e.length;for(t=0;t<r&&!(e[t]<0||e[t]>=256);t++);if(t==r)return e;for(n=Array(r),t=0;t<r;t++)e[t]<0||e[t]>=256?n[t]=63:n[t]=e[t];return n}function U(e){var t,n,r=e.length;if(0==r)return"";for(t=0;t<r&&!(e[t]<0||e[t]>=256);t++);if(t==r)return String.fromCharCode.apply(this,e);for(n=Array(r),t=0;t<r;t++)n[t]=String.fromCharCode(255&e[t]);return n.join("")}function B(e){var t,n,r,i=e.length;if(0==i)return"";for(t=0;t<i&&!(e[t]>=65536);t++);if(t==i)return String.fromCharCode.apply(this,e);for(r=Array(i),t=0;t<i;t++)(n=e[t])<65536?r[t]=String.fromCharCode(n):(n-=65536,r[t]=String.fromCharCode(55296+(n>>10),56320+(1023&n)));return r.join("")}function z(e){for(var t=0,n=0;n<e.length;n++){t+=(i=e[n])<128?1:i<2048?2:i<65536?3:i<2097152?4:1}if(t==e.length)return e;var r=[];for(n=0;n<e.length;n++){var i;(i=e[n])<128?r.push(i):i<2048?(r.push(192|(1984&i)>>6),r.push(128|63&i)):i<65536?(r.push(224|(61440&i)>>12),r.push(128|(4032&i)>>6),r.push(128|63&i)):i<2097152?(r.push(240|(1835008&i)>>18),r.push(128|(258048&i)>>12),r.push(128|(4032&i)>>6),r.push(128|63&i)):r.push(63)}return r}function H(e){for(var t=new Array(4*e.length),n=0;n<e.length;n++){var r=e[n];t[4*n]=r>>24&255,t[4*n+1]=r>>16&255,t[4*n+2]=r>>8&255,t[4*n+3]=255&r}return t}const q={dummy:"Glk call has not yet returned"};const W=1,Y=2,G=3,V=4;let X=null,$=null,Z=null,K=!0,J=null,Q=null,ee=null,te=null,ne=1;function re(e,t){var n={};return n.type=e,n.rock=t,n.disprock=void 0,n.parent=null,n.str=function(e){var t;return(t=se(Y,!1,!0,0)).unicode=!0,t.win=e,t}(n),n.echostr=null,n.style=l.style_Normal,n.hyperlink=0,n.input_generation=null,n.linebuf=null,n.char_request=!1,n.line_request=!1,n.char_request_uni=!1,n.line_request_uni=!1,n.hyperlink_request=!1,n.mouse_request=!1,n.echo_line_input=!1,n.line_input_terminators=[],n.request_echo_line_input=null,n.prev=null,n.next=$,$=n,n.next&&(n.next.prev=n),window.GiDispa?GiDispa.class_register("window",n):n.disprock=ne++,K=!0,n}function ie(e,t){Object(r.append)(t)}function oe(e){var t,n,r,i,o=e.content,s=p[e.accumstyle];if(e.accum.length)for(t=e.accum.join("").split("\n"),n=0;n<t.length;n++)i=void 0,0==n?t[n]&&(0==o.length?(i=[],o.push({content:i,append:!0})):(r=o[o.length-1]).content?i=r.content:(i=[],r.content=i)):t[n]?(i=[],o.push({content:i})):o.push({}),void 0!==i&&(e.accumhyperlink?i.push({style:s,text:t[n],hyperlink:e.accumhyperlink}):(i.push(s),i.push(t[n])));e.accum.length=0,e.accumstyle=e.style,e.accumhyperlink=e.hyperlink}function se(e,t,n,r){let i={};return i.type=e,i.rock=r,i.disprock=void 0,i.unicode=!1,i.isbinary=!1,i.streaming=!1,i.ref=null,i.win=null,i.file=null,i.buf=null,i.bufpos=0,i.buflen=0,i.bufeof=0,i.timer_id=null,i.flush_func=null,i.fstream=null,i.readcount=0,i.writecount=0,i.readable=t,i.writable=n,i.prev=null,i.next=J,J=i,i.next&&(i.next.prev=i),window.GiDispa&&GiDispa.class_register("stream",i),i}function ae(e){var t,n;e===ee&&(ee=null),function(e){var t;for(t=$;t;t=t.next)t.echostr===e&&(t.echostr=null)}(e),e.type==G?window.GiDispa&&GiDispa.unretain_array(e.buf):e.type==W&&e.fstream&&(e.fstream.fclose(),e.fstream=null),window.GiDispa&&GiDispa.class_unregister("stream",e),t=e.prev,n=e.next,e.prev=null,e.next=null,t?t.next=n:J=n,n&&(n.prev=t),e.fstream=null,e.buf=null,e.readable=!1,e.writable=!1,e.ref=null,e.win=null,e.file=null,e.rock=null,e.disprock=null}function ue(e){e.streaming&&GlkOte.log("### gli_stream_dirty_file called for streaming file!"),null===e.timer_id&&(null===e.flush_func&&(e.flush_func=function(){!function(e){e.streaming&&GlkOte.log("### gli_stream_flush_file called for streaming file!");null!==e.timer_id&&clearTimeout(e.timer_id);e.timer_id=null,Object(a.write)(e.ref.filename,e.buf,{append:!0})}(e)}),e.timer_id=setTimeout(e.flush_func,1e4))}function ce(e,t,n,r){var i={};if(i.filename=e,i.rock=n,i.disprock=void 0,i.textmode=0!=(t&l.fileusage_TextMode),i.filetype=t&l.fileusage_TypeMask,i.filetypename=d[i.filetype],i.filetypename||(i.filetypename="xxx"),!r){i.filetype==l.fileusage_SavedGame&&C.get_signature()}return i.ref=r,i.prev=null,i.next=Q,Q=i,i.next&&(i.next.prev=i),window.GiDispa&&GiDispa.class_register("fileref",i),i}function le(e,t){if(!e||!e.writable)throw"gli_put_char: invalid stream";switch(e.unicode||(t<0||t>=256)&&(t=63),e.writecount+=1,e.type){case W:if(ue(e),!e.unicode||t<128&&!e.isbinary)e.bufpos<e.buflen&&(e.buf[e.bufpos]=t,e.bufpos+=1,e.bufpos>e.bufeof&&(e.bufeof=e.bufpos));else{var n,r=(n=e.isbinary?H([t]):z([t])).length;for(r>e.buflen-e.bufpos&&(r=e.buflen-e.bufpos),ix=0;ix<r;ix++)e.buf[e.bufpos+ix]=n[ix];e.bufpos+=r,e.bufpos>e.bufeof&&(e.bufeof=e.bufpos)}break;case G:e.bufpos<e.buflen&&(e.buf[e.bufpos]=t,e.bufpos+=1,e.bufpos>e.bufeof&&(e.bufeof=e.bufpos));break;case Y:if(e.win.line_request)throw"gli_put_char: window has pending line request";ie(e.win,(i=t)<65536?String.fromCharCode(i):(i-=65536,String.fromCharCode(55296+(i>>10),56320+(1023&i)))),e.win.echostr&&le(e.win.echostr,t)}var i}function fe(e,t,n){var r,i;if(!e||!e.writable)throw"gli_put_array: invalid stream";switch(e.unicode||n||(t=P(t),n=!0),e.writecount+=t.length,e.type){case W:if(e.streaming)if(e.unicode)if(e.isbinary){s=new e.fstream.BufferClass(4*t.length);for(r=0;r<t.length;r++)s.writeUInt32BE(t[r],4*r,!0);e.fstream.fwrite(s)}else{var o=z(t),s=new e.fstream.BufferClass(o);e.fstream.fwrite(s)}else{var s=new e.fstream.BufferClass(t);e.fstream.fwrite(s)}else{var a;for(ue(e),(a=(o=e.unicode?e.isbinary?H(t):z(t):t).length)>e.buflen-e.bufpos&&(a=e.buflen-e.bufpos),r=0;r<a;r++)e.buf[e.bufpos+r]=o[r];e.bufpos+=a,e.bufpos>e.bufeof&&(e.bufeof=e.bufpos)}break;case G:for((a=t.length)>e.buflen-e.bufpos&&(a=e.buflen-e.bufpos),r=0;r<a;r++)e.buf[e.bufpos+r]=t[r];e.bufpos+=a,e.bufpos>e.bufeof&&(e.bufeof=e.bufpos);break;case Y:if(e.win.line_request)throw"gli_put_array: window has pending line request";i=n?String.fromCharCode.apply(this,t):B(t),ie(e.win,i),e.win.echostr&&fe(e.win.echostr,t,n)}}function pe(e,t){var n;if(!e||!e.readable)return-1;switch(e.type){case W:if(e.streaming){if(e.unicode){if(e.isbinary){if(e.fstream.fread(e.buffer4,4)<4)return-1;n=e.buffer4[0]<<24,n|=e.buffer4[1]<<16,n|=e.buffer4[2]<<8,n|=e.buffer4[3]}else{if(!e.fstream.fread(e.buffer4,1))return-1;if((r=e.buffer4[0])<128)n=r;else{if(!e.fstream.fread(e.buffer4,1))return-1;if(128!=(192&(i=e.buffer4[0])))return-1;if(192==(224&r))n=(31&r)<<6,n|=63&i;else{if(!e.fstream.fread(e.buffer4,1))return-1;if(128!=(192&(o=e.buffer4[0])))return-1;if(224==(240&r))n=(15&r)<<12&61440,n|=(63&i)<<6&4032,n|=63&o;else{if(240!=(240&r))return-1;if(!e.fstream.fread(e.buffer4,1))return-1;if(128!=(192&(s=e.buffer4[0])))return-1;n=(7&r)<<18&1835008,n|=(63&i)<<12&258048,n|=(63&o)<<6&4032,n|=63&s}}}}return e.readcount++,n>>>=0,!t&&n>=256?63:n}return e.fstream.fread(e.buffer4,1)?(e.readcount++,e.buffer4[0]):-1}case V:if(e.unicode){if(e.isbinary){if(e.bufpos>=e.bufeof)return-1;if(n=e.buf[e.bufpos],e.bufpos++,e.bufpos>=e.bufeof)return-1;if(n=n<<8|255&e.buf[e.bufpos],e.bufpos++,e.bufpos>=e.bufeof)return-1;if(n=n<<8|255&e.buf[e.bufpos],e.bufpos++,e.bufpos>=e.bufeof)return-1;n=n<<8|255&e.buf[e.bufpos],e.bufpos++}else{var r,i,o,s;if(e.bufpos>=e.bufeof)return-1;if(r=e.buf[e.bufpos],e.bufpos++,r<128)n=r;else{if(e.bufpos>=e.bufeof)return-1;if(i=e.buf[e.bufpos],e.bufpos++,128!=(192&i))return-1;if(192==(224&r))n=(31&r)<<6,n|=63&i;else{if(e.bufpos>=e.bufeof)return-1;if(o=e.buf[e.bufpos],e.bufpos++,128!=(192&o))return-1;if(224==(240&r))n=(15&r)<<12&61440,n|=(63&i)<<6&4032,n|=63&o;else{if(240!=(240&r))return-1;if(e.bufpos>=e.bufeof)return-1;if(s=e.buf[e.bufpos],e.bufpos++,128!=(192&s))return-1;n=(7&r)<<18&1835008,n|=(63&i)<<12&258048,n|=(63&o)<<6&4032,n|=63&s}}}}return e.readcount++,n>>>=0,!t&&n>=256?63:n}case G:return e.bufpos<e.bufeof?(n=e.buf[e.bufpos],e.bufpos++,e.readcount++,!t&&n>=256?63:n):-1;default:return-1}}function de(e,t,n){if(!e||!e.readable)return 0;var r,i,o,s=t.length;switch(e.type){case W:if(e.streaming){if(0==s)return 0;for(s-=1,o=!1,r=0;r<s&&!o&&-1!=(i=pe(e,n));r++)t[r]=i,o=10==i;return r}case V:if(e.unicode){if(0==s)return 0;for(s-=1,o=!1,r=0;r<s&&!o&&-1!=(i=pe(e,n));r++)t[r]=i,o=10==i;return r}case G:if(0==s)return 0;if(s-=1,e.bufpos>=e.bufeof?s=0:e.bufpos+s>e.bufeof&&(s=e.bufeof-e.bufpos),o=!1,n)for(r=0;r<s&&!o;r++)i=e.buf[e.bufpos++],t[r]=i,o=10==i;else for(r=0;r<s&&!o;r++)i=e.buf[e.bufpos++],!n&&i>=256&&(i=63),t[r]=i,o=10==i;return e.readcount+=r,r;default:return 0}}function he(e,t,n){if(!e||!e.readable)return 0;var r,i,o=t.length;switch(e.type){case W:if(e.streaming){for(r=0;r<o&&-1!=(i=pe(e,n));r++)t[r]=i;return r}case V:if(e.unicode){for(r=0;r<o&&-1!=(i=pe(e,n));r++)t[r]=i;return r}case G:if(e.bufpos>=e.bufeof?o=0:e.bufpos+o>e.bufeof&&(o=e.bufeof-e.bufpos),n)for(r=0;r<o;r++)t[r]=e.buf[e.bufpos++];else for(r=0;r<o;r++)i=e.buf[e.bufpos++],!n&&i>=256&&(i=63),t[r]=i;return e.readcount+=o,o;default:return 0}}function ye(e,t,n){let r,i;if(!e||!e.writable)throw"glk_put_jstring: invalid stream";switch(e.writecount+=t.length,e.type){case W:if(e.streaming)if(e.unicode)if(e.isbinary){let n=new e.fstream.BufferClass(4*t.length);for(r=0;r<t.length;r++)n.writeUInt32BE(t.charCodeAt(r),4*r,!0);e.fstream.fwrite(n)}else{let n=new e.fstream.BufferClass(t);e.fstream.fwrite(n)}else{let n=new e.fstream.BufferClass(t,"binary");e.fstream.fwrite(n)}else{ue(e);let n,i=[];for(r=0;r<t.length;r++)i.push(t.charCodeAt(r));let o=(n=e.unicode?e.isbinary?H(i):z(i):i).length;for(o>e.buflen-e.bufpos&&(o=e.buflen-e.bufpos),r=0;r<o;r++)e.buf[e.bufpos+r]=n[r];e.bufpos+=o,e.bufpos>e.bufeof&&(e.bufeof=e.bufpos)}break;case G:if((i=t.length)>e.buflen-e.bufpos&&(i=e.buflen-e.bufpos),e.unicode||n)for(r=0;r<i;r++)e.buf[e.bufpos+r]=t.charCodeAt(r);else for(r=0;r<i;r++){let n=t.charCodeAt(r);(n<0||n>=256)&&(n=63),e.buf[e.bufpos+r]=n}e.bufpos+=i,e.bufpos>e.bufeof&&(e.bufeof=e.bufpos);break;case Y:if(e.win.line_request)throw"glk_put_jstring: window has pending line request";ie(e.win,t),e.win.echostr&&ye(e.win.echostr,t,n)}}function ge(e,t){if(!e||!e.writable)throw"gli_set_style: invalid stream";t>=l.style_NUMSTYLES&&(t=0),e.type==Y&&(Ce(t),e.win.echostr&&ge(e.win.echostr,t))}function me(e,t,n){switch(e){case 0:return 1796;case 1:return t<=l.keycode_Left&&t>=l.keycode_End?1:t>=4294967296-l.keycode_MAXVAL?0:t>1114111?0:t>=0&&t<32||t>=127&&t<160?0:1;case 2:return t>1114111?0:t>=0&&t<32||t>=127&&t<160?0:1;case 3:return t>1114111||t>=0&&t<32||t>=127&&t<160?(n&&(n[0]=1),0):(n&&(n[0]=1),2);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:return 0;case 15:case 16:return 1;case 17:return 0;case 18:return 1;case 19:return t==l.keycode_Escape?1:t>=l.keycode_Func12&&t<=l.keycode_Func1?1:0;case 20:return 1;case 21:case 22:case 23:return 0}if(O){let r=O(e,t,n);if(void 0!==r)return r}return 0}let ve=null;function we(e,t){var n,r,i,o,s,a,u,c,l,f=e.slice(0,t);for(n=0,r=0;r<t;r++)if(o=f[r],void 0===(s=m[o]))e[n]=o,n++;else if(s instanceof Array)for(i=0;i<s.length;i++)e[n]=s[i],n++;else e[n]=s,n++;for(r=0;r<n;)if(v[e[r]]){if(r>=n)break;for(a=r;r<n&&v[e[r]];)r++;if((u=r)-a>=2)for(i=u-1;i>a;i--)for(c=a;c<i;c++)v[e[c]]>v[e[c+1]]&&(l=e[c],e[c]=e[c+1],e[c+1]=l)}else r++;return n}const _e={version:"2.2.4",init:function(e){C=e.vm,GiDispa.set_vm(C),e.accept=M,k=e.exit_warning,S=e.do_vm_autosave,x=e.before_select_hook,T=e.extevent_hook,O=e.glk_gestalt_hook,x&&x(),setTimeout(()=>M({type:"init",gen:0}),1)},update:function(){var e,t,n,r,i,o,s={type:"update",gen:F},u=null,c=null;if(n=!1,t={id:(e=Z).disprock},null==u&&(u=[]),oe(e),e.content.length&&(t.text=e.content.slice(0),e.content.length=0,n=!0),e.clearcontent&&(t.clear=!0,e.clearcontent=!1,n=!0,t.text||(t.text=[]),e.reserve.length=0),t.text&&t.text.length)for(i=0;i<t.text.length;i++)e.reserve.push(t.text[i]);if(e.reserve.length>100&&e.reserve.splice(0,e.reserve.length-100),n&&u.push(t),c=[],t=null,e.char_request&&(t={id:e.disprock,type:"char",gen:e.input_generation}),e.line_request&&(o="",D&&(r=D[e.disprock])&&(o=r),t={id:e.disprock,type:"line",gen:e.input_generation,maxlen:e.linebuf.length,initial:o},e.line_input_terminators.length&&(t.terminators=e.line_input_terminators)),t&&c.push(t),s.windows=null,s.content=u,s.input=c,I){const e=function(e){M({type:"specialresponse",response:"fileref_prompt",value:e?{filename:e}:null})};switch(s.specialinput=I,I.filetype){case"save":"write"===I.filemode?Object(a.saveFilePrompt)(I.gameid,e):Object(a.restoreFilePrompt)(I.gameid,e);break;case"transcript":Object(a.transcriptFilePrompt)(e);break;default:Object(a.filePrompt)(e)}}if(A&&(s.disable=!0),D=null,X&&(s.autorestore=X),X=null,x&&x(),S)if(N)C.do_autosave(-1);else{var l=GiDispa.check_autosave();l&&C.do_autosave(l)}},fatal_error:j,fatal_error:j,byte_array_to_string:U,uni_array_to_string:B,Const:l,RefBox:function(){this.value=void 0,this.set_value=function(e){this.value=e},this.get_value=function(){return this.value}},RefStruct:function(){this.fields=[],this.push_field=function(e){this.fields.push(e)},this.set_field=function(e,t){this.fields[e]=t},this.get_field=function(e){return this.fields[e]},this.get_fields=function(){return this.fields}},DidNotReturn:q,call_may_not_return:function(e){return 1==e||192==e||98==e},glk_put_jstring:function(e,t){ye(ee,e,t)},glk_put_jstring_stream:ye,glk_exit:function(){return N=!0,A=!0,te=null,Object(s.a)(),q},glk_tick:function(){},glk_gestalt:function(e,t){return me(e,t,null)},glk_gestalt_ext:me,glk_window_iterate:function(e,t){return(e=e?e.next:$)?(t&&t.set_value(e.rock),e):(t&&t.set_value(0),null)},glk_window_get_rock:function(e){if(!e)throw"glk_window_get_rock: invalid window";return e.rock},glk_window_get_root:function(){return Z},glk_window_open:function(e,t,n,r,i){var o,s,a,u;if(Z)return null;if(e)throw"glk_window_open: splitwin must be null for first window";switch((o=re(r,i)).type){case l.wintype_TextBuffer:o.accum=[],o.accumstyle=null,o.accumhyperlink=0,o.content=[],o.clearcontent=!1,o.reserve=[];break;default:return s=o,window.GiDispa&&GiDispa.class_unregister("window",s),K=!0,s.echostr=null,s.str&&(ae(s.str),s.str=null),a=s.prev,u=s.next,s.prev=null,s.next=null,a?a.next=u:$=u,u&&(u.prev=a),s.parent=null,s.rock=null,s.disprock=null,null}return Z=o,o},glk_window_get_type:function(e){if(!e)throw"glk_window_get_type: invalid window";return e.type},glk_window_get_parent:function(e){if(!e)throw"glk_window_get_parent: invalid window";return e.parent},glk_window_get_stream:function(e){if(!e)throw"glk_window_get_stream: invalid window";return e.str},glk_window_set_echo_stream:function(e,t){if(!e)throw"glk_window_set_echo_stream: invalid window";e.echostr=t},glk_window_get_echo_stream:function(e){if(!e)throw"glk_window_get_echo_stream: invalid window";return e.echostr},glk_set_window:function(e){ee=e?e.str:null},glk_window_get_sibling:function(e){var t;if(!e)throw"glk_window_get_sibling: invalid window";if(!(t=e.parent))return null;if(e===t.child1)return t.child2;if(e===t.child2)return t.child1;throw"glk_window_get_sibling: window tree is corrupted"},glk_stream_iterate:function(e,t){return(e=e?e.next:J)?(t&&t.set_value(e.rock),e):(t&&t.set_value(0),null)},glk_stream_get_rock:function(e){if(!e)throw"glk_stream_get_rock: invalid stream";return e.rock},glk_stream_open_file:function(e,t,n){if(!e||!e.filename)throw"glk_stream_open_file: invalid fileref";const{filename:r}=e;var i=null;t!==l.filemode_Write&&(i=Object(a.read)(r,{binary:!e.textmode,cwd:b(r),header:e.textmode})),null===i&&(i="",t!==l.filemode_Read&&Object(a.write)(r,"",{cwd:b(r),binary:!e.textmode}));const o=se(W,t!=l.filemode_Write,t!=l.filemode_Read,n);return o.unicode=!1,o.isbinary=!e.textmode,o.ref=e.ref,o.filename=r,o.origfmode=t,o.streaming=!1,o.buf="string"==typeof i?i.split("").map(e=>e.charCodeAt(0)):i,o.buflen=4294967295,t==l.filemode_Write?o.bufeof=0:o.bufeof=i.length,t==l.filemode_WriteAppend?o.bufpos=o.bufeof:o.bufpos=0,o},glk_stream_open_memory:function(e,t,n){var r;if(t!=l.filemode_Read&&t!=l.filemode_Write&&t!=l.filemode_ReadWrite)throw"glk_stream_open_memory: illegal filemode";return(r=se(G,t!=l.filemode_Write,t!=l.filemode_Read,n)).unicode=!1,e&&(r.buf=e,r.buflen=e.length,r.bufpos=0,t==l.filemode_Write?r.bufeof=0:r.bufeof=r.buflen,window.GiDispa&&GiDispa.retain_array(e)),r},glk_stream_close:function(e,t){if(!e)throw"glk_stream_close: invalid stream";if(e.type==Y)throw"glk_stream_close: cannot close window stream";if(e.type==W&&e.writable&&!e.streaming){null!==e.timer_id&&(clearTimeout(e.timer_id),e.timer_id=null);const t=e.buf.map(e=>String.fromCharCode(e)).join(""),n=t.substring(t.indexOf("\n")+1);"VpJSEval"===e.filename&&n.length>1?Object(u.evaluate)(n):Object(a.write)(e.filename,e.buf,{binary:e.isbinary,cwd:b(e.filename)})}!function(e,t){t&&(t.set_field(0,e.readcount),t.set_field(1,e.writecount))}(e,t),ae(e)},glk_stream_set_position:function(e,t,n){if(!e)throw"glk_stream_set_position: invalid stream";switch(e.type){case W:if(e.streaming){e.fstream.fseek(t,n);break}case V:case G:n==l.seekmode_Current?t=e.bufpos+t:n==l.seekmode_End&&(t=e.bufeof+t),t<0&&(t=0),t>e.bufeof&&(t=e.bufeof),e.bufpos=t}},glk_stream_get_position:function(e){if(!e)throw"glk_stream_get_position: invalid stream";switch(e.type){case W:if(e.streaming)return e.fstream.ftell();case V:case G:return e.bufpos;default:return 0}},glk_stream_set_current:function(e){ee=e},glk_stream_get_current:function(e){return ee},glk_fileref_create_by_name:function(e,t,n){return ce(t,e,n,null)},glk_fileref_create_by_prompt:function(e,t,n){var r,i=e&l.fileusage_TypeMask,o=d[i];switch(o||(o="xxx"),t){case l.filemode_Write:r="write";break;case l.filemode_ReadWrite:r="readwrite";break;case l.filemode_WriteAppend:r="writeappend";break;case l.filemode_Read:default:r="read"}var s={type:"fileref_prompt",filetype:o,filemode:r},a={usage:e,rock:n};return i==l.fileusage_SavedGame&&(s.gameid=C.get_signature()),I=s,L=a,te=null,q},glk_fileref_destroy:function(e){if(!e)throw"glk_fileref_destroy: invalid fileref";!function(e){var t,n;window.GiDispa&&GiDispa.class_unregister("fileref",e),t=e.prev,n=e.next,e.prev=null,e.next=null,t?t.next=n:Q=n,n&&(n.prev=t),e.filename=null,e.ref=null,e.rock=null,e.disprock=null}(e)},glk_fileref_iterate:function(e,t){return(e=e?e.next:Q)?(t&&t.set_value(e.rock),e):(t&&t.set_value(0),null)},glk_fileref_get_rock:function(e){if(!e)throw"glk_fileref_get_rock: invalid fileref";return e.rock},glk_fileref_does_file_exist:function(e){if(!e||"string"!=typeof e.filename)throw"glk_fileref_does_file_exist: invalid fileref";return Object(a.exists)(e.filename,{cwd:b(e.filename)})?1:0},glk_fileref_create_from_fileref:function(e,t,n){if(!t)throw"glk_fileref_create_from_fileref: invalid fileref";return ce(t.filename,e,n,null)},glk_put_char:function(e){le(ee,255&e)},glk_put_char_stream:function(e,t){le(e,255&t)},glk_put_string:function(e){ye(ee,e,!0)},glk_put_string_stream:function(e,t){ye(e,t,!0)},glk_put_buffer:function(e){e=P(e),fe(ee,e,!0)},glk_put_buffer_stream:function(e,t){fe(e,t=P(t),!0)},glk_set_style:function(e){ge(ee,e)},glk_set_style_stream:function(e,t){ge(e,t)},glk_get_char_stream:function(e){if(!e)throw"glk_get_char_stream: invalid stream";return pe(e,!1)},glk_get_line_stream:function(e,t){if(!e)throw"glk_get_line_stream: invalid stream";return de(e,t,!1)},glk_get_buffer_stream:function(e,t){if(!e)throw"glk_get_buffer_stream: invalid stream";return he(e,t,!1)},glk_char_to_lower:function(e){return e>=65&&e<=90?e+32:e>=192&&e<=222&&215!=e?e+32:e},glk_char_to_upper:function(e){return e>=97&&e<=122?e-32:e>=224&&e<=254&&247!=e?e-32:e},glk_stylehint_set:E,glk_stylehint_clear:E,glk_select:function(e){return te=e,q},glk_request_line_event:function(e,t,n){const i=Z;if(n){var s=t.slice(0,n);D||(D={}),D[i.disprock]=U(s)}i.line_request=!0,i.line_request_uni=!1,i.type==l.wintype_TextBuffer?i.request_echo_line_input=i.echo_line_input:i.request_echo_line_input=!0,i.input_generation=F,i.linebuf=t,window.GiDispa&&GiDispa.retain_array(t),Object(r.flush)(),Object(o.expectInput)()},glk_request_char_event:function(e){const t=Z;if(t.char_request||t.line_request)throw"glk_request_char_event: window already has keyboard request";t.char_request=!0,t.char_request_uni=!1,t.input_generation=F,Object(r.flush)(),i.keypress.wait()},glk_cancel_char_event:function(e){if(!e)throw"glk_cancel_char_event: invalid window";e.char_request=!1,e.char_request_uni=!1},glk_schannel_iterate:E,glk_buffer_to_lower_case_uni:function(e,t){var n,r,i,o,s,a=e.length,u=e.slice(0,t);if(a<t)throw"buffer_to_lower_case_uni: numchars exceeds array length";for(i=0,n=0;n<t;n++)if(s=u[n],void 0===(o=y[s]))e[i]=s,i++;else if(o instanceof Array)for(r=0;r<o.length;r++)e[i]=o[r],i++;else e[i]=o,i++;return e.length=a,i},glk_buffer_to_upper_case_uni:function(e,t){var n,r,i,o,s,a=e.length,u=e.slice(0,t);if(a<t)throw"buffer_to_upper_case_uni: numchars exceeds array length";for(i=0,n=0;n<t;n++)if(s=u[n],void 0===(o=h[s]))e[i]=s,i++;else if(o instanceof Array)for(r=0;r<o.length;r++)e[i]=o[r],i++;else e[i]=o,i++;return e.length=a,i},glk_buffer_to_title_case_uni:function(e,t,n){var r,i,o,s,a,u=e.length,c=e.slice(0,t);if(u<t)throw"buffer_to_title_case_uni: numchars exceeds array length";if(o=0,0==t)return 0;if(a=c[r=0],void 0===(s=g[a])&&(s=h[a]),void 0===s)e[o]=a,o++;else if(s instanceof Array)for(i=0;i<s.length;i++)e[o]=s[i],o++;else e[o]=s,o++;if(n)for(r=1;r<t;r++)if(a=c[r],void 0===(s=y[a]))e[o]=a,o++;else if(s instanceof Array)for(i=0;i<s.length;i++)e[o]=s[i],o++;else e[o]=s,o++;else for(r=1;r<t;r++)a=c[r],e[o]=a,o++;return e.length=u,o},glk_buffer_canon_decompose_uni:function(e,t){var n,r=e.length;return n=we(e,t),e.length=r,n},glk_buffer_canon_normalize_uni:function(e,t){var n,r=e.length;return n=function(e,t){var n,r,i,o,s,a,u,c;if(0==t)return 0;for(c=0,i=e[0],(s=v[i])&&(s=999),r=n=1;;){if(r>=t){e[c]=i,c=n;break}o=e[r],a=v[o],void 0!==(u=w[i])&&void 0!==u[o]&&(!s||a&&s<a)?(i=u[o],e[c]=i):(a||(c=n,i=o),s=a,e[n]=o,n++),r++}return c}(e,n=we(e,t)),e.length=r,n},glk_put_char_uni:function(e){le(ee,e)},glk_put_string_uni:function(e){ye(ee,e,!1)},glk_put_buffer_uni:function(e){fe(ee,e,!1)},glk_put_char_stream_uni:function(e,t){le(e,t)},glk_put_string_stream_uni:function(e,t){ye(e,t,!1)},glk_put_buffer_stream_uni:function(e,t){fe(e,t,!1)},glk_get_char_stream_uni:function(e){if(!e)throw"glk_get_char_stream_uni: invalid stream";return pe(e,!0)},glk_get_buffer_stream_uni:function(e,t){if(!e)throw"glk_get_buffer_stream_uni: invalid stream";return he(e,t,!0)},glk_get_line_stream_uni:function(e,t){if(!e)throw"glk_get_line_stream_uni: invalid stream";return de(e,t,!0)},glk_stream_open_memory_uni:function(e,t,n){let r;if(t!=l.filemode_Read&&t!=l.filemode_Write&&t!=l.filemode_ReadWrite)throw"glk_stream_open_memory: illegal filemode";return(r=se(G,t!=l.filemode_Write,t!=l.filemode_Read,n)).unicode=!0,e&&(r.buf=e,r.buflen=e.length,r.bufpos=0,t==l.filemode_Write?r.bufeof=0:r.bufeof=r.buflen,window.GiDispa&&GiDispa.retain_array(e)),r},glk_request_char_event_uni:function(e){if(!e)throw"glk_request_char_event: invalid window";if(e.char_request||e.line_request)throw"glk_request_char_event: window already has keyboard request";e.char_request=!0,e.char_request_uni=!0,e.input_generation=F,Object(r.flush)(),i.keypress.wait()},glk_request_line_event_uni:function(e,t,n){if(!e)throw"glk_request_line_event: invalid window";if(e.char_request||e.line_request)throw"glk_request_line_event: window already has keyboard request";if(n){var i=t.slice(0,n);D||(D={}),D[e.disprock]=B(i)}e.line_request=!0,e.line_request_uni=!0,e.type==l.wintype_TextBuffer?e.request_echo_line_input=e.echo_line_input:e.request_echo_line_input=!0,e.input_generation=F,e.linebuf=t,window.GiDispa&&GiDispa.retain_array(t),Object(r.flush)(),Object(o.expectInput)()},glk_set_echo_line_event:function(e,t){if(!e)throw"glk_set_echo_line_event: invalid window";e.echo_line_input=0!=t},glk_set_terminators_line_event:function(e,t){if(!e)throw"glk_set_terminators_line_event: invalid window";if(null===ve)for(var n in ve={},f)ve[f[n]]=n;var r=[];if(t)for(var i=0;i<t.length;i++){(n=ve[t[i]])&&r.push(n)}e.line_input_terminators=r},glk_current_time:function(e){var t,n=(new Date).getTime();e.set_field(0,Math.floor(n/4294967296e3)),e.set_field(1,Math.floor(n/1e3)>>>0),(t=Math.floor(n%1e3*1e3))<0&&(t=1e6+t),e.set_field(2,t)},glk_current_simple_time:function(e){var t=(new Date).getTime();return Math.floor(t/(1e3*e))},glk_time_to_date_utc:function(e,t){var n=4294967296e3*e.get_field(0)+1e3*e.get_field(1)+e.get_field(2)/1e3,r=new Date(n);t.set_field(0,r.getUTCFullYear()),t.set_field(1,1+r.getUTCMonth()),t.set_field(2,r.getUTCDate()),t.set_field(3,r.getUTCDay()),t.set_field(4,r.getUTCHours()),t.set_field(5,r.getUTCMinutes()),t.set_field(6,r.getUTCSeconds()),t.set_field(7,1e3*r.getUTCMilliseconds())},glk_time_to_date_local:function(e,t){var n=4294967296e3*e.get_field(0)+1e3*e.get_field(1)+e.get_field(2)/1e3,r=new Date(n);t.set_field(0,r.getFullYear()),t.set_field(1,1+r.getMonth()),t.set_field(2,r.getDate()),t.set_field(3,r.getDay()),t.set_field(4,r.getHours()),t.set_field(5,r.getMinutes()),t.set_field(6,r.getSeconds()),t.set_field(7,1e3*r.getMilliseconds())},glk_simple_time_to_date_utc:function(e,t,n){var r=new Date(e*(1e3*t));n.set_field(0,r.getUTCFullYear()),n.set_field(1,1+r.getUTCMonth()),n.set_field(2,r.getUTCDate()),n.set_field(3,r.getUTCDay()),n.set_field(4,r.getUTCHours()),n.set_field(5,r.getUTCMinutes()),n.set_field(6,r.getUTCSeconds()),n.set_field(7,1e3*r.getUTCMilliseconds())},glk_simple_time_to_date_local:function(e,t,n){var r=new Date(e*(1e3*t));n.set_field(0,r.getFullYear()),n.set_field(1,1+r.getMonth()),n.set_field(2,r.getDate()),n.set_field(3,r.getDay()),n.set_field(4,r.getHours()),n.set_field(5,r.getMinutes()),n.set_field(6,r.getSeconds()),n.set_field(7,1e3*r.getMilliseconds())},glk_date_to_time_utc:function(e,t){var n=new Date(0);n.setUTCFullYear(e.get_field(0)),n.setUTCMonth(e.get_field(1)-1),n.setUTCDate(e.get_field(2)),n.setUTCHours(e.get_field(4)),n.setUTCMinutes(e.get_field(5)),n.setUTCSeconds(e.get_field(6)),n.setUTCMilliseconds(e.get_field(7)/1e3);var r,i=n.getTime();t.set_field(0,Math.floor(i/4294967296e3)),t.set_field(1,Math.floor(i/1e3)>>>0),(r=Math.floor(i%1e3*1e3))<0&&(r=1e6+r),t.set_field(2,r)},glk_date_to_time_local:function(e,t){var n,r=new Date(e.get_field(0),e.get_field(1)-1,e.get_field(2),e.get_field(4),e.get_field(5),e.get_field(6),e.get_field(7)/1e3).getTime();t.set_field(0,Math.floor(r/4294967296e3)),t.set_field(1,Math.floor(r/1e3)>>>0),(n=Math.floor(r%1e3*1e3))<0&&(n=1e6+n),t.set_field(2,n)},glk_date_to_simple_time_utc:function(e,t){var n=new Date(0);n.setUTCFullYear(e.get_field(0)),n.setUTCMonth(e.get_field(1)-1),n.setUTCDate(e.get_field(2)),n.setUTCHours(e.get_field(4)),n.setUTCMinutes(e.get_field(5)),n.setUTCSeconds(e.get_field(6)),n.setUTCMilliseconds(e.get_field(7)/1e3);var r=n.getTime();return Math.floor(r/(1e3*t))},glk_date_to_simple_time_local:function(e,t){var n=new Date(e.get_field(0),e.get_field(1)-1,e.get_field(2),e.get_field(4),e.get_field(5),e.get_field(6),e.get_field(7)/1e3).getTime();return Math.floor(n/(1e3*t))},sendChar:function(e){let t=String.fromCharCode(e);switch(e){case _.KEY_RETURN:t="return";break;case _.KEY_LEFT:t="left";break;case _.KEY_RIGHT:t="right";break;case _.KEY_UP:t="up";break;case _.KEY_DOWN:t="down";break;case _.KEY_BACKSPACE:t="delete";break;case _.KEY_ESC:t="escape";break;case _.KEY_TAB:t="tab";break;case _.KEY_PAGEUP:t="pageup";break;case _.KEY_PAGEDOWN:t="pagedown";break;case _.KEY_HOME:t="home";break;case _.KEY_END:t="end";break;case 112:t="func1";break;case 113:t="func2";break;case 114:t="func3";break;case 115:t="func4";break;case 116:t="func5";break;case 117:t="func6";break;case 118:t="func7";break;case 119:t="func8";break;case 120:t="func9";break;case 121:t="func10";break;case 122:t="func11";break;case 123:t="func12"}M({type:"char",value:t})},sendLine:function(e){M({type:"line",value:e})}};window.Glk=new Proxy(_e,{get:function(e,t){return t in e?e[t]:function(){console.log("GLK: "+t+" called")}}});var be=n(5),Ee=n(8);let ke=null;const Se=[];function xe(e){window.Quixe||Object(c.a)("Can't find Quixe"),window.GiDispa||Object(c.a)("Can't find GiDispa"),window.GlkOte={log:()=>{}},GiLoad.load_run(null,e,"string"==typeof e?"base64":void 0)}function Te(){const e=Object(Ee.a)("storyfile")||Object(Ee.a)("story");if(ke){const e=ke;return ke=null,e}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState==XMLHttpRequest.DONE)switch(r.status){case 200:t(Array.from(new Uint8Array(r.response)));break;default:n(Object(c.a)("Error loading game file. Server returned status code "+r.status+" ("+r.statusText+")"))}},r.open("GET",e,!0),r.responseType="arraybuffer",r.send()})}function Oe(e){ke=e}function Ce(e){if(Se[e])for(let t in Se[e])Object(be.f)(t,Se[e][t],0)}function Ne(e,t,n){Se[e]||(Se[e]={bold:!1,italic:!1,underline:!1});const r=Se[e];switch(t){case 4:r.bold=1===n;break;case 5:r.italic=1===n}}Se[0]={bold:!1,italic:!1,underline:!1},Se[1]={italic:!0},Se[2]={},Se[3]={bold:!0},Se[4]={bold:!0}},function(e,t,n){"use strict";n.d(t,"b",function(){return x}),n.d(t,"a",function(){return T});var r={};n.r(r),n.d(r,"em_init",function(){return _}),n.d(r,"prompt",function(){return b}),n.d(r,"readUIState",function(){return E}),n.d(r,"syncfs",function(){return k});var i=n(16),o=n(7),s=n(3);var a=n(8),u=n(1),c=n(5),l=n(4),f=(n(134),n(9)),p=n(23);let d,h,y,g,m=!1,v=!1;function w(e){document.getElementById("loader").style.display="block",m&&v||(document.getElementById("loader-message").innerHTML=m?"Loading game file":"Loading interpreter"),document.getElementById("loader-message").innerHTML="Starting game",FS.writeFile(g,d,{encoding:"binary"}),y="/gamedata_"+h,FS.analyzePath(y).exists||FS.mkdir(y),FS.mount(IDBFS,{root:"."},y),FS.analyzePath("gamedata").exists||FS.mkdir("gamedata"),FS.mount(IDBFS,{root:"."},"gamedata"),FS.chdir("gamedata"),FS.syncfs(!0,function(){Object(a.a)("autosave")&&(p.autosave.setName("/gamedata_"+h+"/autosave"),p.autosave.restore()),o.keypress.init(),e()})}function _(e){const t=Object(a.a)("story"),n=Object(a.a)("uploadedFile"),r=Object(a.a)("use_proxy");let o,s;const u=function(e){v=!0,d=new Uint8Array(e),h=function(e){const t=e.length;let n=0;for(let r=0;r<t;r++)n=n+((n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24)>>>0)^255&e[r];return n>>>0}(d).toString(16),Object(i.c)("storyfile")};if(g=e,window.onbeforeunload=function(){FS.syncfs(!1,function(){})},n){const e=new FileReader;return e.onload=function(e){const t=document.getElementById("uploadContainer");t&&t.parentNode.removeChild(t),u(e.target.result)},Object(i.a)(w),void e.readAsArrayBuffer(n)}t||Object(f.a)("No story file specified");const c=new XMLHttpRequest;switch(""+r){case"always":case"true":case"1":s=!0;break;case"never":case"false":case"0":s=!1;break;default:s=/^https?:\/\//.test(t)&&0!==t.indexOf(window.location.protocol+"//"+window.location.host),"auto"!==r&&console.warn('Unknown use_proxy option "'+r+'", using "auto"')}o=s?Object(a.a)("proxy_url").split("%s").join(encodeURIComponent(t)):t,Object(i.a)(w),c.onreadystatechange=function(){if(c.readyState==XMLHttpRequest.DONE)switch(c.status){case 200:u(c.response);break;case 404:Object(f.a)("Game file not found");break;case 415:s?Object(f.a)(String.fromCharCode.apply(null,new Uint8Array(c.response))):Object(f.a)("Unsupported Media Type error encountered when loading game file");break;case 0:Object(f.a)("Unspecified error loading game file (possibly cross-origin restriction)");break;default:Object(f.a)("Error loading game file. Server returned status code "+c.status+" ("+c.statusText+")")}},c.open("GET",o,!0),c.responseType="arraybuffer",c.send()}function b(e){let t=window.prompt("Enter filename "+e);t=t&&/\S/.test(t)?y+"/"+t.split("/").join("-"):"",Module.ccall("haven_getfilename","null",["string"],[t+"\n"])}function E(){try{const e=FS.readFile(autosaveFilename+"_haven_uidata",{encoding:"utf8"});return JSON.parse(e)}catch(e){return null}}function k(){FS.syncfs(!1,function(){})}let S=null;async function x(e){let t,n="haven";if(e.container instanceof Element)t=e.container;else if(e.container&&"string"==typeof e.container){if(!(t=document.querySelector(e.container))){if("#"!==e.container.charAt(0)||-1!==e.container.indexOf(" "))throw new Error(`Can't find element "${e.container}" to use as the main container`);n=e.container.substr(1)}}else t=document.getElementById("haven");t||((t=document.createElement("main")).id=n,document.body.appendChild(t));let r=document.getElementById("output");r||((r=document.createElement("div")).id="output",t.appendChild(r));let f=document.getElementById("window0");f||((f=document.createElement("div")).id="window0",f.setAttribute("aria-live","polite"),f.setAttribute("aria-atomic","false"),f.setAttribute("aria-relevant","additions"),r.appendChild(f));let p=document.getElementById("loader");p||((p=document.createElement("div")).id="loader",t.appendChild(p));let d=document.getElementById("loader-message");d||((d=document.createElement("h2")).id="loader-message",p.appendChild(d));let h=document.getElementById("spinner");h||((h=document.createElement("h2")).id="spinner",h.innerText=".",p.appendChild(h)),d.innerText="Loading interpreter and game file",Object(a.b)(e.options);const y=await e.loadStoryFile(e.virtualStoryfile);Object(l.init)(),Object(o.init)({expectHook:e.hooks&&e.hooks.expectKeypress,submitHook:e.hooks&&e.hooks.submitKeypress}),Object(s.init)({outputFilter:e.hooks&&e.filters.output}),Object(u.init)({enginePrompt:!!e.enginePrompt,expectHook:e.hooks&&e.hooks.expectCommand,inputFilter:e.filters&&e.filters.input,submitHook:e.hooks&&e.hooks.submitCommand,unicode:!!e.unicode}),Object(c.d)({engineColors:!!e.engineColors,engineFontFamily:!!e.engineFontFamily}),Object(i.a)(function(e){!function(){const e=document.getElementById("loader");e&&e.parentNode.removeChild(e)}(),e()}),S=e.hooks.quit,Object(i.b)(()=>e.startEngine(y)),Object(i.c)("storyfile")}function T(){"function"==typeof S&&S()}window.haven={buffer:s,file:r,input:o,prompt:u,state:p,window:l}},function(e,t,n){var r,i;r=[n(28)],void 0===(i=function(e){"use strict";return e.indexOf}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(36)],void 0===(i=function(e){"use strict";return e.hasOwnProperty}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(24),n(6),n(18)],void 0===(i=function(e,t,n,r){"use strict";return e.Callbacks=function(i){i="string"==typeof i?function(t){var n={};return e.each(t.match(r)||[],function(e,t){n[t]=!0}),n}(i):e.extend({},i);var o,s,a,u,c=[],l=[],f=-1,p=function(){for(u=u||i.once,a=o=!0;l.length;f=-1)for(s=l.shift();++f<c.length;)!1===c[f].apply(s[0],s[1])&&i.stopOnFalse&&(f=c.length,s=!1);i.memory||(s=!1),o=!1,u&&(c=s?[]:"")},d={add:function(){return c&&(s&&!o&&(f=c.length-1,l.push(s)),function r(o){e.each(o,function(e,o){n(o)?i.unique&&d.has(o)||c.push(o):o&&o.length&&"string"!==t(o)&&r(o)})}(arguments),s&&!o&&p()),this},remove:function(){return e.each(arguments,function(t,n){for(var r;(r=e.inArray(n,c,r))>-1;)c.splice(r,1),r<=f&&f--}),this},has:function(t){return t?e.inArray(t,c)>-1:c.length>0},empty:function(){return c&&(c=[]),this},disable:function(){return u=l=[],c=s="",this},disabled:function(){return!c},lock:function(){return u=l=[],s||o||(c=s=""),this},locked:function(){return!!u},fireWith:function(e,t){return u||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),o||p()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!a}};return d},e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(15),n(26),n(46)],void 0===(i=function(e,t){"use strict";return e.extend({queue:function(n,r,i){var o;if(n)return r=(r||"fx")+"queue",o=t.get(n,r),i&&(!o||Array.isArray(i)?o=t.access(n,r,e.makeArray(i)):o.push(i)),o||[]},dequeue:function(t,n){n=n||"fx";var r=e.queue(t,n),i=r.length,o=r.shift(),s=e._queueHooks(t,n);"inprogress"===o&&(o=r.shift(),i--),o&&("fx"===n&&r.unshift("inprogress"),delete s.stop,o.call(t,function(){e.dequeue(t,n)},s)),!i&&s&&s.empty.fire()},_queueHooks:function(n,r){var i=r+"queueHooks";return t.get(n,i)||t.access(n,i,{empty:e.Callbacks("once memory").add(function(){t.remove(n,[r+"queue",i])})})}}),e.fn.extend({queue:function(t,n){var r=2;return"string"!=typeof t&&(n=t,t="fx",r--),arguments.length<r?e.queue(this[0],t):void 0===n?this:this.each(function(){var r=e.queue(this,t,n);e._queueHooks(this,t),"fx"===t&&"inprogress"!==r[0]&&e.dequeue(this,t)})},dequeue:function(t){return this.each(function(){e.dequeue(this,t)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(n,r){var i,o=1,s=e.Deferred(),a=this,u=this.length,c=function(){--o||s.resolveWith(a,[a])};for("string"!=typeof n&&(r=n,n=void 0),n=n||"fx";u--;)(i=t.get(a[u],n+"queueHooks"))&&i.empty&&(o++,i.empty.add(c));return c(),s.promise(r)}}),e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(30),n(10),n(6),n(49),n(18),n(50),n(72),n(73),n(15),n(103),n(14),n(47),n(26),n(25),n(40),n(31),n(106)],void 0===(i=function(e,t,n,r,i,o,s,a,u,c,l){"use strict";var f,p,d=/^(?:toggle|show|hide)$/,h=/queueHooks$/;function y(){p&&(!1===n.hidden&&window.requestAnimationFrame?window.requestAnimationFrame(y):window.setTimeout(y,e.fx.interval),e.fx.tick())}function g(){return window.setTimeout(function(){f=void 0}),f=Date.now()}function m(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=s[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function v(e,t,n){for(var r,i=(w.tweeners[t]||[]).concat(w.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,t,e))return r}function w(n,i,o){var s,a,u=0,c=w.prefilters.length,l=e.Deferred().always(function(){delete p.elem}),p=function(){if(a)return!1;for(var e=f||g(),t=Math.max(0,d.startTime+d.duration-e),r=1-(t/d.duration||0),i=0,o=d.tweens.length;i<o;i++)d.tweens[i].run(r);return l.notifyWith(n,[d,r,t]),r<1&&o?t:(o||l.notifyWith(n,[d,1,0]),l.resolveWith(n,[d]),!1)},d=l.promise({elem:n,props:e.extend({},i),opts:e.extend(!0,{specialEasing:{},easing:e.easing._default},o),originalProperties:i,originalOptions:o,startTime:f||g(),duration:o.duration,tweens:[],createTween:function(t,r){var i=e.Tween(n,d.opts,t,r,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(i),i},stop:function(e){var t=0,r=e?d.tweens.length:0;if(a)return this;for(a=!0;t<r;t++)d.tweens[t].run(1);return e?(l.notifyWith(n,[d,1,0]),l.resolveWith(n,[d,e])):l.rejectWith(n,[d,e]),this}}),h=d.props;for(!function(n,r){var i,o,s,a,u;for(i in n)if(s=r[o=t(i)],a=n[i],Array.isArray(a)&&(s=a[1],a=n[i]=a[0]),i!==o&&(n[o]=a,delete n[i]),(u=e.cssHooks[o])&&"expand"in u)for(i in a=u.expand(a),delete n[o],a)i in n||(n[i]=a[i],r[i]=s);else r[o]=s}(h,d.opts.specialEasing);u<c;u++)if(s=w.prefilters[u].call(d,n,h,d.opts))return r(s.stop)&&(e._queueHooks(d.elem,d.opts.queue).stop=s.stop.bind(s)),s;return e.map(h,v,d),r(d.opts.start)&&d.opts.start.call(n,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),e.fx.timer(e.extend(p,{elem:n,anim:d,queue:d.opts.queue})),d}return e.Animation=e.extend(w,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return u(n.elem,e,i.exec(t),n),n}]},tweener:function(e,t){r(e)?(t=e,e=["*"]):e=e.match(o);for(var n,i=0,s=e.length;i<s;i++)n=e[i],w.tweeners[n]=w.tweeners[n]||[],w.tweeners[n].unshift(t)},prefilters:[function(t,n,r){var i,o,s,u,f,p,h,y,g="width"in n||"height"in n,m=this,w={},_=t.style,b=t.nodeType&&a(t),E=c.get(t,"fxshow");for(i in r.queue||(null==(u=e._queueHooks(t,"fx")).unqueued&&(u.unqueued=0,f=u.empty.fire,u.empty.fire=function(){u.unqueued||f()}),u.unqueued++,m.always(function(){m.always(function(){u.unqueued--,e.queue(t,"fx").length||u.empty.fire()})})),n)if(o=n[i],d.test(o)){if(delete n[i],s=s||"toggle"===o,o===(b?"hide":"show")){if("show"!==o||!E||void 0===E[i])continue;b=!0}w[i]=E&&E[i]||e.style(t,i)}if((p=!e.isEmptyObject(n))||!e.isEmptyObject(w))for(i in g&&1===t.nodeType&&(r.overflow=[_.overflow,_.overflowX,_.overflowY],null==(h=E&&E.display)&&(h=c.get(t,"display")),"none"===(y=e.css(t,"display"))&&(h?y=h:(l([t],!0),h=t.style.display||h,y=e.css(t,"display"),l([t]))),("inline"===y||"inline-block"===y&&null!=h)&&"none"===e.css(t,"float")&&(p||(m.done(function(){_.display=h}),null==h&&(y=_.display,h="none"===y?"":y)),_.display="inline-block")),r.overflow&&(_.overflow="hidden",m.always(function(){_.overflow=r.overflow[0],_.overflowX=r.overflow[1],_.overflowY=r.overflow[2]})),p=!1,w)p||(E?"hidden"in E&&(b=E.hidden):E=c.access(t,"fxshow",{display:h}),s&&(E.hidden=!b),b&&l([t],!0),m.done(function(){for(i in b||l([t]),c.remove(t,"fxshow"),w)e.style(t,i,w[i])})),p=v(b?E[i]:0,i,m),i in E||(E[i]=p.start,b&&(p.end=p.start,p.start=0))}],prefilter:function(e,t){t?w.prefilters.unshift(e):w.prefilters.push(e)}}),e.speed=function(t,n,i){var o=t&&"object"==typeof t?e.extend({},t):{complete:i||!i&&n||r(t)&&t,duration:t,easing:i&&n||n&&!r(n)&&n};return e.fx.off?o.duration=0:"number"!=typeof o.duration&&(o.duration in e.fx.speeds?o.duration=e.fx.speeds[o.duration]:o.duration=e.fx.speeds._default),null!=o.queue&&!0!==o.queue||(o.queue="fx"),o.old=o.complete,o.complete=function(){r(o.old)&&o.old.call(this),o.queue&&e.dequeue(this,o.queue)},o},e.fn.extend({fadeTo:function(e,t,n,r){return this.filter(a).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,n,r,i){var o=e.isEmptyObject(t),s=e.speed(n,r,i),a=function(){var n=w(this,e.extend({},t),s);(o||c.get(this,"finish"))&&n.stop(!0)};return a.finish=a,o||!1===s.queue?this.each(a):this.queue(s.queue,a)},stop:function(t,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof t&&(r=n,n=t,t=void 0),n&&this.queue(t||"fx",[]),this.each(function(){var n=!0,o=null!=t&&t+"queueHooks",s=e.timers,a=c.get(this);if(o)a[o]&&a[o].stop&&i(a[o]);else for(o in a)a[o]&&a[o].stop&&h.test(o)&&i(a[o]);for(o=s.length;o--;)s[o].elem!==this||null!=t&&s[o].queue!==t||(s[o].anim.stop(r),n=!1,s.splice(o,1));!n&&r||e.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var n,r=c.get(this),i=r[t+"queue"],o=r[t+"queueHooks"],s=e.timers,a=i?i.length:0;for(r.finish=!0,e.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),n=s.length;n--;)s[n].elem===this&&s[n].queue===t&&(s[n].anim.stop(!0),s.splice(n,1));for(n=0;n<a;n++)i[n]&&i[n].finish&&i[n].finish.call(this);delete r.finish})}}),e.each(["toggle","show","hide"],function(t,n){var r=e.fn[n];e.fn[n]=function(e,t,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(m(n,!0),e,t,i)}}),e.each({slideDown:m("show"),slideUp:m("hide"),slideToggle:m("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){e.fn[t]=function(e,t,r){return this.animate(n,e,t,r)}}),e.timers=[],e.fx.tick=function(){var t,n=0,r=e.timers;for(f=Date.now();n<r.length;n++)(t=r[n])()||r[n]!==t||r.splice(n--,1);r.length||e.fx.stop(),f=void 0},e.fx.timer=function(t){e.timers.push(t),e.fx.start()},e.fx.interval=13,e.fx.start=function(){p||(p=!0,y())},e.fx.stop=function(){p=null},e.fx.speeds={slow:600,fast:200,_default:400},e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(71)],void 0===(i=function(e){"use strict";return new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i")}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){"use strict";return["Top","Right","Bottom","Left"]}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){"use strict";return/^(?:checkbox|radio)$/i}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r,i;r=[n(71)],void 0===(i=function(e){"use strict";return new RegExp("^("+e+")(?!px)[a-z%]+$","i")}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(10),n(39),n(20)],void 0===(i=function(e,t,n,r){"use strict";return function(){function i(){if(d){p.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",n.appendChild(p).appendChild(d);var e=window.getComputedStyle(d);s="1%"!==e.top,f=12===o(e.marginLeft),d.style.right="60%",c=36===o(e.right),a=36===o(e.width),d.style.position="absolute",u=12===o(d.offsetWidth/3),n.removeChild(p),d=null}}function o(e){return Math.round(parseFloat(e))}var s,a,u,c,l,f,p=t.createElement("div"),d=t.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",r.clearCloneStyle="content-box"===d.style.backgroundClip,e.extend(r,{boxSizingReliable:function(){return i(),a},pixelBoxStyles:function(){return i(),c},pixelPosition:function(){return i(),s},reliableMarginLeft:function(){return i(),f},scrollboxSize:function(){return i(),u},reliableTrDimensions:function(){var e,r,i,o;return null==l&&(e=t.createElement("table"),r=t.createElement("tr"),i=t.createElement("div"),e.style.cssText="position:absolute;left:-11111px",r.style.height="1px",i.style.height="9px",n.appendChild(e).appendChild(r).appendChild(i),o=window.getComputedStyle(r),l=parseInt(o.height)>3,n.removeChild(e)),l}}))}(),r}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(10),n(20)],void 0===(i=function(e,t){"use strict";var n,r;return n=e.createElement("input"),r=e.createElement("select").appendChild(e.createElement("option")),n.type="checkbox",t.checkOn=""!==n.value,t.optSelected=r.selected,(n=e.createElement("input")).value="t",n.type="radio",t.radioValue="t"===n.value,t}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(18)],void 0===(i=function(e){"use strict";return function(t){return(t.match(e)||[]).join(" ")}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(10),n(15),n(37),n(45),n(6),n(29),n(27)],void 0===(i=function(e,t,n,r,i,o,s){"use strict";var a=/^(?:focusinfocus|focusoutblur)$/,u=function(e){e.stopPropagation()};return e.extend(e.event,{trigger:function(c,l,f,p){var d,h,y,g,m,v,w,_,b=[f||t],E=i.call(c,"type")?c.type:c,k=i.call(c,"namespace")?c.namespace.split("."):[];if(h=_=y=f=f||t,3!==f.nodeType&&8!==f.nodeType&&!a.test(E+e.event.triggered)&&(E.indexOf(".")>-1&&(k=E.split("."),E=k.shift(),k.sort()),m=E.indexOf(":")<0&&"on"+E,(c=c[e.expando]?c:new e.Event(E,"object"==typeof c&&c)).isTrigger=p?2:3,c.namespace=k.join("."),c.rnamespace=c.namespace?new RegExp("(^|\\.)"+k.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=void 0,c.target||(c.target=f),l=null==l?[c]:e.makeArray(l,[c]),w=e.event.special[E]||{},p||!w.trigger||!1!==w.trigger.apply(f,l))){if(!p&&!w.noBubble&&!s(f)){for(g=w.delegateType||E,a.test(g+E)||(h=h.parentNode);h;h=h.parentNode)b.push(h),y=h;y===(f.ownerDocument||t)&&b.push(y.defaultView||y.parentWindow||window)}for(d=0;(h=b[d++])&&!c.isPropagationStopped();)_=h,c.type=d>1?g:w.bindType||E,(v=(n.get(h,"events")||Object.create(null))[c.type]&&n.get(h,"handle"))&&v.apply(h,l),(v=m&&h[m])&&v.apply&&r(h)&&(c.result=v.apply(h,l),!1===c.result&&c.preventDefault());return c.type=E,p||c.isDefaultPrevented()||w._default&&!1!==w._default.apply(b.pop(),l)||!r(f)||m&&o(f[E])&&!s(f)&&((y=f[m])&&(f[m]=null),e.event.triggered=E,c.isPropagationStopped()&&_.addEventListener(E,u),f[E](),c.isPropagationStopped()&&_.removeEventListener(E,u),e.event.triggered=void 0,y&&(f[m]=y)),c.result}},simulate:function(t,n,r){var i=e.extend(new e.Event,r,{type:t,isSimulated:!0});e.event.trigger(i,null,n)}}),e.fn.extend({trigger:function(t,n){return this.each(function(){e.event.trigger(t,n,this)})},triggerHandler:function(t,n){var r=this[0];if(r)return e.event.trigger(t,n,r,!0)}}),e}.apply(t,r))||(e.exports=i)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"addOutputFilter",function(){return i}),n.d(t,"applyOutputFilters",function(){return o}),n.d(t,"removeOutputFilter",function(){return s});const r=[];function i(e){return r.push(e),()=>s(e)}function o(e,t){let n=e;for(let i=0;i<r.length;++i){let o=r[i](n,{...t,output:n,original:e});if(!1===o)break;"string"==typeof o&&(n=o)}return n}function s(e){const t=r.indexOf(e);return-1!==t&&(r.splice(t,1),!0)}},function(e,t,n){var r;void 0===(r=function(){"use strict";return Object.getPrototypeOf}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r,i;r=[n(28)],void 0===(i=function(e){"use strict";return e.flat?function(t){return e.flat.call(t)}:function(t){return e.concat.apply([],t)}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(28)],void 0===(i=function(e){"use strict";return e.push}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(36)],void 0===(i=function(e){"use strict";return e.toString}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(45)],void 0===(i=function(e){"use strict";return e.toString}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(10)],void 0===(i=function(e){"use strict";var t={type:!0,src:!0,nonce:!0,noModule:!0};return function(n,r,i){var o,s,a=(i=i||e).createElement("script");if(a.text=n,r)for(o in t)(s=r[o]||r.getAttribute&&r.getAttribute(o))&&a.setAttribute(o,s);i.head.appendChild(a).parentNode.removeChild(a)}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(11)],void 0===(i=function(e){"use strict";return e.expr.match.needsContext}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){"use strict";return/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r,i;r=[n(0),n(44),n(6),n(65),n(11)],void 0===(i=function(e,t,n,r){"use strict";function i(r,i,o){return n(i)?e.grep(r,function(e,t){return!!i.call(e,t,e)!==o}):i.nodeType?e.grep(r,function(e){return e===i!==o}):"string"!=typeof i?e.grep(r,function(e){return t.call(i,e)>-1!==o}):e.filter(i,r,o)}e.filter=function(t,n,r){var i=n[0];return r&&(t=":not("+t+")"),1===n.length&&1===i.nodeType?e.find.matchesSelector(i,t)?[i]:[]:e.find.matches(t,e.grep(n,function(e){return 1===e.nodeType}))},e.fn.extend({find:function(t){var n,r,i=this.length,o=this;if("string"!=typeof t)return this.pushStack(e(t).filter(function(){for(n=0;n<i;n++)if(e.contains(o[n],this))return!0}));for(r=this.pushStack([]),n=0;n<i;n++)e.find(t,o[n],r);return i>1?e.uniqueSort(r):r},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&r.test(t)?e(t):t||[],!1).length}})}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(10),n(100),n(26)],void 0===(i=function(e,t){"use strict";var n=e.Deferred();function r(){t.removeEventListener("DOMContentLoaded",r),window.removeEventListener("load",r),e.ready()}e.fn.ready=function(t){return n.then(t).catch(function(t){e.readyException(t)}),this},e.extend({isReady:!1,readyWait:1,ready:function(r){(!0===r?--e.readyWait:e.isReady)||(e.isReady=!0,!0!==r&&--e.readyWait>0||n.resolveWith(t,[e]))}}),e.ready.then=n.then,"complete"===t.readyState||"loading"!==t.readyState&&!t.documentElement.doScroll?window.setTimeout(e.ready):(t.addEventListener("DOMContentLoaded",r),window.addEventListener("load",r))}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(30),n(18),n(37)],void 0===(i=function(e,t,n,r){"use strict";function i(){this.expando=e.expando+i.uid++}return i.uid=1,i.prototype={cache:function(e){var t=e[this.expando];return t||(t={},r(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,n,r){var i,o=this.cache(e);if("string"==typeof n)o[t(n)]=r;else for(i in n)o[t(i)]=n[i];return o},get:function(e,n){return void 0===n?this.cache(e):e[this.expando]&&e[this.expando][t(n)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(r,i){var o,s=r[this.expando];if(void 0!==s){if(void 0!==i){o=(i=Array.isArray(i)?i.map(t):(i=t(i))in s?[i]:i.match(n)||[]).length;for(;o--;)delete s[i[o]]}(void 0===i||e.isEmptyObject(s))&&(r.nodeType?r[this.expando]=void 0:delete r[this.expando])}},hasData:function(t){var n=t[this.expando];return void 0!==n&&!e.isEmptyObject(n)}},i}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(69)],void 0===(i=function(e){"use strict";return new e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){"use strict";return/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r,i;r=[n(0),n(38)],void 0===(i=function(e,t){"use strict";return function(n,r){return"none"===(n=r||n).style.display||""===n.style.display&&t(n)&&"none"===e.css(n,"display")}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(49)],void 0===(i=function(e,t){"use strict";return function(n,r,i,o){var s,a,u=20,c=o?function(){return o.cur()}:function(){return e.css(n,r,"")},l=c(),f=i&&i[3]||(e.cssNumber[r]?"":"px"),p=n.nodeType&&(e.cssNumber[r]||"px"!==f&&+l)&&t.exec(e.css(n,r));if(p&&p[3]!==f){for(l/=2,f=f||p[3],p=+l||1;u--;)e.style(n,r,p+f),(1-a)*(1-(a=c()/l||.5))<=0&&(u=0),p/=a;p*=2,e.style(n,r,p+f),i=i||[]}return i&&(p=+p||+l||0,s=i[1]?p+(i[1]+1)*i[2]:+i[2],o&&(o.unit=f,o.start=p,o.end=s)),s}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){"use strict";return/<([a-z][^\/\0>\x20\t\r\n\f]*)/i}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){"use strict";return/^$|^module$|\/(?:java|ecma)script/i}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r,i;r=[n(77)],void 0===(i=function(e){"use strict";var t={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};return t.tbody=t.tfoot=t.colgroup=t.caption=t.thead,t.th=t.td,e.option||(t.optgroup=t.option=[1,"<select multiple='multiple'>","</select>"]),t}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(10),n(20)],void 0===(i=function(e,t){"use strict";var n,r;return n=e.createDocumentFragment().appendChild(e.createElement("div")),(r=e.createElement("input")).setAttribute("type","radio"),r.setAttribute("checked","checked"),r.setAttribute("name","t"),n.appendChild(r),t.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked,n.innerHTML="<textarea>x</textarea>",t.noCloneChecked=!!n.cloneNode(!0).lastChild.defaultValue,n.innerHTML="<option></option>",t.option=!!n.lastChild,t}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(17)],void 0===(i=function(e,t){"use strict";return function(n,r){var i;return i=void 0!==n.getElementsByTagName?n.getElementsByTagName(r||"*"):void 0!==n.querySelectorAll?n.querySelectorAll(r||"*"):[],void 0===r||r&&t(n,r)?e.merge([n],i):i}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(15)],void 0===(i=function(e){"use strict";return function(t,n){for(var r=0,i=t.length;r<i;r++)e.set(t[r],"globalEval",!n||e.get(n[r],"globalEval"))}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(24),n(38),n(74),n(75),n(76),n(78),n(79)],void 0===(i=function(e,t,n,r,i,o,s,a){"use strict";var u=/<|&#?\w+;/;return function(c,l,f,p,d){for(var h,y,g,m,v,w,_=l.createDocumentFragment(),b=[],E=0,k=c.length;E<k;E++)if((h=c[E])||0===h)if("object"===t(h))e.merge(b,h.nodeType?[h]:h);else if(u.test(h)){for(y=y||_.appendChild(l.createElement("div")),g=(r.exec(h)||["",""])[1].toLowerCase(),m=o[g]||o._default,y.innerHTML=m[1]+e.htmlPrefilter(h)+m[2],w=m[0];w--;)y=y.lastChild;e.merge(b,y.childNodes),(y=_.firstChild).textContent=""}else b.push(l.createTextNode(h));for(_.textContent="",E=0;h=b[E++];)if(p&&e.inArray(h,p)>-1)d&&d.push(h);else if(v=n(h),y=s(_.appendChild(h),"script"),v&&a(y),f)for(w=0;h=y[w++];)i.test(h.type||"")&&f.push(h);return _}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){"use strict";return function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=window),t.getComputedStyle(e)}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r,i;r=[n(0),n(38),n(105),n(52),n(81),n(53)],void 0===(i=function(e,t,n,r,i,o){"use strict";return function(s,a,u){var c,l,f,p,d=s.style;return(u=u||i(s))&&(""!==(p=u.getPropertyValue(a)||u[a])||t(s)||(p=e.style(s,a)),!o.pixelBoxStyles()&&r.test(p)&&n.test(a)&&(c=d.width,l=d.minWidth,f=d.maxWidth,d.minWidth=d.maxWidth=d.width=p,p=u.width,d.width=c,d.minWidth=l,d.maxWidth=f)),void 0!==p?p+"":p}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){"use strict";return function(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r,i;r=[n(10),n(0)],void 0===(i=function(e,t){"use strict";var n=["Webkit","Moz","ms"],r=e.createElement("div").style,i={};return function(e){var o=t.cssProps[e]||i[e];return o||(e in r?e:i[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=n.length;i--;)if((e=n[i]+t)in r)return e}(e)||e)}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(21),n(54),n(11)],void 0===(i=function(e,t,n){"use strict";var r=/^(?:input|select|textarea|button)$/i,i=/^(?:a|area)$/i;e.fn.extend({prop:function(n,r){return t(this,e.prop,n,r,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[e.propFix[t]||t]})}}),e.extend({prop:function(t,n,r){var i,o,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&e.isXMLDoc(t)||(n=e.propFix[n]||n,o=e.propHooks[n]),void 0!==r?o&&"set"in o&&void 0!==(i=o.set(t,r,n))?i:t[n]=r:o&&"get"in o&&null!==(i=o.get(t,n))?i:t[n]},propHooks:{tabIndex:{get:function(t){var n=e.find.attr(t,"tabindex");return n?parseInt(n,10):r.test(t.nodeName)||i.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),n.optSelected||(e.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),e.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){e.propFix[this.toLowerCase()]=this})}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){"use strict";return{guid:Date.now()}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){"use strict";return/\?/}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r,i;r=[n(0)],void 0===(i=function(e){"use strict";return e.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new window.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||e.error("Invalid XML: "+t),n},e.parseXML}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(24),n(51),n(6),n(14),n(25),n(85)],void 0===(i=function(e,t,n,r){"use strict";var i=/\[\]$/,o=/\r?\n/g,s=/^(?:submit|button|image|reset|file)$/i,a=/^(?:input|select|textarea|keygen)/i;function u(n,r,o,s){var a;if(Array.isArray(r))e.each(r,function(e,t){o||i.test(n)?s(n,t):u(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,o,s)});else if(o||"object"!==t(r))s(n,r);else for(a in r)u(n+"["+a+"]",r[a],o,s)}return e.param=function(t,n){var i,o=[],s=function(e,t){var n=r(t)?t():t;o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!e.isPlainObject(t))e.each(t,function(){s(this.name,this.value)});else for(i in t)u(i,t[i],n,s);return o.join("&")},e.fn.extend({serialize:function(){return e.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=e.prop(this,"elements");return t?e.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!e(this).is(":disabled")&&a.test(this.nodeName)&&!s.test(t)&&(this.checked||!n.test(t))}).map(function(t,n){var r=e(this).val();return null==r?null:Array.isArray(r)?e.map(r,function(e){return{name:n.name,value:e.replace(o,"\r\n")}}):{name:n.name,value:r.replace(o,"\r\n")}}).get()}}),e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(10),n(66),n(80),n(121)],void 0===(i=function(e,t,n,r,i){"use strict";return e.parseHTML=function(o,s,a){return"string"!=typeof o?[]:("boolean"==typeof s&&(a=s,s=!1),s||(i.createHTMLDocument?((u=(s=t.implementation.createHTMLDocument("")).createElement("base")).href=t.location.href,s.head.appendChild(u)):s=t),l=!a&&[],(c=n.exec(o))?[s.createElement(c[1])]:(c=r([o],s,l),l&&l.length&&e(l).remove(),e.merge([],c.childNodes)));var u,c,l},e.parseHTML}.apply(t,r))||(e.exports=i)},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,f=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=a(p);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){n(93),e.exports=n(130)},function(e,t,n){var r,i;r=[n(0),n(11),n(25),n(46),n(26),n(99),n(68),n(101),n(47),n(102),n(107),n(27),n(111),n(40),n(113),n(115),n(31),n(116),n(89),n(22),n(117),n(118),n(119),n(120),n(88),n(90),n(48),n(122),n(123),n(124),n(125),n(128),n(129)],void 0===(i=function(e){"use strict";return e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(63)],void 0===(i=function(e){"use strict";return e.call(Object)}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(96)],void 0===(i=function(e,t){"use strict";e.find=t,e.expr=t.selectors,e.expr[":"]=e.expr.pseudos,e.uniqueSort=e.unique=t.uniqueSort,e.text=t.getText,e.isXMLDoc=t.isXML,e.contains=t.contains,e.escapeSelector=t.escape}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;
/*!
 * Sizzle CSS Selector Engine v2.3.5
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2020-03-14
 */
/*!
 * Sizzle CSS Selector Engine v2.3.5
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2020-03-14
 */
!function(i){var o,s,a,u,c,l,f,p,d,h,y,g,m,v,w,_,b,E,k,S="sizzle"+1*new Date,x=i.document,T=0,O=0,C=pe(),N=pe(),A=pe(),I=pe(),L=function(e,t){return e===t&&(y=!0),0},F={}.hasOwnProperty,R=[],D=R.pop,M=R.push,j=R.push,P=R.slice,U=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",z="[\\x20\\t\\r\\n\\f]",H="(?:\\\\[\\da-fA-F]{1,6}"+z+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",q="\\["+z+"*("+H+")(?:"+z+"*([*^$|!~]?=)"+z+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+H+"))|)"+z+"*\\]",W=":("+H+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",Y=new RegExp(z+"+","g"),G=new RegExp("^"+z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+z+"+$","g"),V=new RegExp("^"+z+"*,"+z+"*"),X=new RegExp("^"+z+"*([>+~]|"+z+")"+z+"*"),$=new RegExp(z+"|>"),Z=new RegExp(W),K=new RegExp("^"+H+"$"),J={ID:new RegExp("^#("+H+")"),CLASS:new RegExp("^\\.("+H+")"),TAG:new RegExp("^("+H+"|[*])"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+z+"*(even|odd|(([+-]|)(\\d*)n|)"+z+"*(?:([+-]|)"+z+"*(\\d+)|))"+z+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+z+"*((?:-\\d)?\\d*)"+z+"*\\)|)(?=[^-]|$)","i")},Q=/HTML$/i,ee=/^(?:input|select|textarea|button)$/i,te=/^h\d$/i,ne=/^[^{]+\{\s*\[native \w/,re=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ie=/[+~]/,oe=new RegExp("\\\\[\\da-fA-F]{1,6}"+z+"?|\\\\([^\\r\\n\\f])","g"),se=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},ae=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ue=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ce=function(){g()},le=Se(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{j.apply(R=P.call(x.childNodes),x.childNodes),R[x.childNodes.length].nodeType}catch(e){j={apply:R.length?function(e,t){M.apply(e,P.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function fe(e,t,n,r){var i,o,a,u,c,f,d,h=t&&t.ownerDocument,y=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==y&&9!==y&&11!==y)return n;if(!r&&(g(t),t=t||m,w)){if(11!==y&&(c=re.exec(e)))if(i=c[1]){if(9===y){if(!(a=t.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(h&&(a=h.getElementById(i))&&k(t,a)&&a.id===i)return n.push(a),n}else{if(c[2])return j.apply(n,t.getElementsByTagName(e)),n;if((i=c[3])&&s.getElementsByClassName&&t.getElementsByClassName)return j.apply(n,t.getElementsByClassName(i)),n}if(s.qsa&&!I[e+" "]&&(!_||!_.test(e))&&(1!==y||"object"!==t.nodeName.toLowerCase())){if(d=e,h=t,1===y&&($.test(e)||X.test(e))){for((h=ie.test(e)&&be(t.parentNode)||t)===t&&s.scope||((u=t.getAttribute("id"))?u=u.replace(ae,ue):t.setAttribute("id",u=S)),o=(f=l(e)).length;o--;)f[o]=(u?"#"+u:":scope")+" "+ke(f[o]);d=f.join(",")}try{return j.apply(n,h.querySelectorAll(d)),n}catch(t){I(e,!0)}finally{u===S&&t.removeAttribute("id")}}}return p(e.replace(G,"$1"),t,n,r)}function pe(){var e=[];return function t(n,r){return e.push(n+" ")>a.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function de(e){return e[S]=!0,e}function he(e){var t=m.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ye(e,t){for(var n=e.split("|"),r=n.length;r--;)a.attrHandle[n[r]]=t}function ge(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function me(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ve(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function we(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&le(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function _e(e){return de(function(t){return t=+t,de(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function be(e){return e&&void 0!==e.getElementsByTagName&&e}for(o in s=fe.support={},c=fe.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Q.test(t||n&&n.nodeName||"HTML")},g=fe.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:x;return r!=m&&9===r.nodeType&&r.documentElement?(v=(m=r).documentElement,w=!c(m),x!=m&&(n=m.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ce,!1):n.attachEvent&&n.attachEvent("onunload",ce)),s.scope=he(function(e){return v.appendChild(e).appendChild(m.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),s.attributes=he(function(e){return e.className="i",!e.getAttribute("className")}),s.getElementsByTagName=he(function(e){return e.appendChild(m.createComment("")),!e.getElementsByTagName("*").length}),s.getElementsByClassName=ne.test(m.getElementsByClassName),s.getById=he(function(e){return v.appendChild(e).id=S,!m.getElementsByName||!m.getElementsByName(S).length}),s.getById?(a.filter.ID=function(e){var t=e.replace(oe,se);return function(e){return e.getAttribute("id")===t}},a.find.ID=function(e,t){if(void 0!==t.getElementById&&w){var n=t.getElementById(e);return n?[n]:[]}}):(a.filter.ID=function(e){var t=e.replace(oe,se);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},a.find.ID=function(e,t){if(void 0!==t.getElementById&&w){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),a.find.TAG=s.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):s.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},a.find.CLASS=s.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&w)return t.getElementsByClassName(e)},b=[],_=[],(s.qsa=ne.test(m.querySelectorAll))&&(he(function(e){var t;v.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&_.push("[*^$]="+z+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||_.push("\\["+z+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+S+"-]").length||_.push("~="),(t=m.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||_.push("\\["+z+"*name"+z+"*="+z+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||_.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||_.push(".#.+[+~]"),e.querySelectorAll("\\\f"),_.push("[\\r\\n\\f]")}),he(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=m.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&_.push("name"+z+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&_.push(":enabled",":disabled"),v.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&_.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),_.push(",.*:")})),(s.matchesSelector=ne.test(E=v.matches||v.webkitMatchesSelector||v.mozMatchesSelector||v.oMatchesSelector||v.msMatchesSelector))&&he(function(e){s.disconnectedMatch=E.call(e,"*"),E.call(e,"[s!='']:x"),b.push("!=",W)}),_=_.length&&new RegExp(_.join("|")),b=b.length&&new RegExp(b.join("|")),t=ne.test(v.compareDocumentPosition),k=t||ne.test(v.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},L=t?function(e,t){if(e===t)return y=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!s.sortDetached&&t.compareDocumentPosition(e)===n?e==m||e.ownerDocument==x&&k(x,e)?-1:t==m||t.ownerDocument==x&&k(x,t)?1:h?U(h,e)-U(h,t):0:4&n?-1:1)}:function(e,t){if(e===t)return y=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!i||!o)return e==m?-1:t==m?1:i?-1:o?1:h?U(h,e)-U(h,t):0;if(i===o)return ge(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?ge(s[r],a[r]):s[r]==x?-1:a[r]==x?1:0},m):m},fe.matches=function(e,t){return fe(e,null,null,t)},fe.matchesSelector=function(e,t){if(g(e),s.matchesSelector&&w&&!I[t+" "]&&(!b||!b.test(t))&&(!_||!_.test(t)))try{var n=E.call(e,t);if(n||s.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){I(t,!0)}return fe(t,m,null,[e]).length>0},fe.contains=function(e,t){return(e.ownerDocument||e)!=m&&g(e),k(e,t)},fe.attr=function(e,t){(e.ownerDocument||e)!=m&&g(e);var n=a.attrHandle[t.toLowerCase()],r=n&&F.call(a.attrHandle,t.toLowerCase())?n(e,t,!w):void 0;return void 0!==r?r:s.attributes||!w?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},fe.escape=function(e){return(e+"").replace(ae,ue)},fe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},fe.uniqueSort=function(e){var t,n=[],r=0,i=0;if(y=!s.detectDuplicates,h=!s.sortStable&&e.slice(0),e.sort(L),y){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return h=null,e},u=fe.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=u(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=u(t);return n},(a=fe.selectors={cacheLength:50,createPseudo:de,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(oe,se),e[3]=(e[3]||e[4]||e[5]||"").replace(oe,se),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||fe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&fe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return J.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Z.test(n)&&(t=l(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(oe,se).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+z+")"+e+"("+z+"|$)"))&&C(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=fe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(Y," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var c,l,f,p,d,h,y=o!==s?"nextSibling":"previousSibling",g=t.parentNode,m=a&&t.nodeName.toLowerCase(),v=!u&&!a,w=!1;if(g){if(o){for(;y;){for(p=t;p=p[y];)if(a?p.nodeName.toLowerCase()===m:1===p.nodeType)return!1;h=y="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?g.firstChild:g.lastChild],s&&v){for(w=(d=(c=(l=(f=(p=g)[S]||(p[S]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&c[1])&&c[2],p=d&&g.childNodes[d];p=++d&&p&&p[y]||(w=d=0)||h.pop();)if(1===p.nodeType&&++w&&p===t){l[e]=[T,d,w];break}}else if(v&&(w=d=(c=(l=(f=(p=t)[S]||(p[S]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&c[1]),!1===w)for(;(p=++d&&p&&p[y]||(w=d=0)||h.pop())&&((a?p.nodeName.toLowerCase()!==m:1!==p.nodeType)||!++w||(v&&((l=(f=p[S]||(p[S]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[T,w]),p!==t)););return(w-=i)===r||w%r==0&&w/r>=0}}},PSEUDO:function(e,t){var n,r=a.pseudos[e]||a.setFilters[e.toLowerCase()]||fe.error("unsupported pseudo: "+e);return r[S]?r(t):r.length>1?(n=[e,e,"",t],a.setFilters.hasOwnProperty(e.toLowerCase())?de(function(e,n){for(var i,o=r(e,t),s=o.length;s--;)e[i=U(e,o[s])]=!(n[i]=o[s])}):function(e){return r(e,0,n)}):r}},pseudos:{not:de(function(e){var t=[],n=[],r=f(e.replace(G,"$1"));return r[S]?de(function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:de(function(e){return function(t){return fe(e,t).length>0}}),contains:de(function(e){return e=e.replace(oe,se),function(t){return(t.textContent||u(t)).indexOf(e)>-1}}),lang:de(function(e){return K.test(e||"")||fe.error("unsupported lang: "+e),e=e.replace(oe,se).toLowerCase(),function(t){var n;do{if(n=w?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=i.location&&i.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===v},focus:function(e){return e===m.activeElement&&(!m.hasFocus||m.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:we(!1),disabled:we(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!a.pseudos.empty(e)},header:function(e){return te.test(e.nodeName)},input:function(e){return ee.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:_e(function(){return[0]}),last:_e(function(e,t){return[t-1]}),eq:_e(function(e,t,n){return[n<0?n+t:n]}),even:_e(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:_e(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:_e(function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e}),gt:_e(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=a.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})a.pseudos[o]=me(o);for(o in{submit:!0,reset:!0})a.pseudos[o]=ve(o);function Ee(){}function ke(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function Se(e,t,n){var r=t.dir,i=t.next,o=i||r,s=n&&"parentNode"===o,a=O++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||s)return e(t,n,i);return!1}:function(t,n,u){var c,l,f,p=[T,a];if(u){for(;t=t[r];)if((1===t.nodeType||s)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||s)if(l=(f=t[S]||(t[S]={}))[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=l[o])&&c[0]===T&&c[1]===a)return p[2]=c[2];if(l[o]=p,p[2]=e(t,n,u))return!0}return!1}}function xe(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Te(e,t,n,r,i){for(var o,s=[],a=0,u=e.length,c=null!=t;a<u;a++)(o=e[a])&&(n&&!n(o,r,i)||(s.push(o),c&&t.push(a)));return s}function Oe(e,t,n,r,i,o){return r&&!r[S]&&(r=Oe(r)),i&&!i[S]&&(i=Oe(i,o)),de(function(o,s,a,u){var c,l,f,p=[],d=[],h=s.length,y=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)fe(e,t[r],n);return n}(t||"*",a.nodeType?[a]:a,[]),g=!e||!o&&t?y:Te(y,p,e,a,u),m=n?i||(o?e:h||r)?[]:s:g;if(n&&n(g,m,a,u),r)for(c=Te(m,d),r(c,[],a,u),l=c.length;l--;)(f=c[l])&&(m[d[l]]=!(g[d[l]]=f));if(o){if(i||e){if(i){for(c=[],l=m.length;l--;)(f=m[l])&&c.push(g[l]=f);i(null,m=[],c,u)}for(l=m.length;l--;)(f=m[l])&&(c=i?U(o,f):p[l])>-1&&(o[c]=!(s[c]=f))}}else m=Te(m===s?m.splice(h,m.length):m),i?i(null,s,m,u):j.apply(s,m)})}function Ce(e){for(var t,n,r,i=e.length,o=a.relative[e[0].type],s=o||a.relative[" "],u=o?1:0,c=Se(function(e){return e===t},s,!0),l=Se(function(e){return U(t,e)>-1},s,!0),f=[function(e,n,r){var i=!o&&(r||n!==d)||((t=n).nodeType?c(e,n,r):l(e,n,r));return t=null,i}];u<i;u++)if(n=a.relative[e[u].type])f=[Se(xe(f),n)];else{if((n=a.filter[e[u].type].apply(null,e[u].matches))[S]){for(r=++u;r<i&&!a.relative[e[r].type];r++);return Oe(u>1&&xe(f),u>1&&ke(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(G,"$1"),n,u<r&&Ce(e.slice(u,r)),r<i&&Ce(e=e.slice(r)),r<i&&ke(e))}f.push(n)}return xe(f)}Ee.prototype=a.filters=a.pseudos,a.setFilters=new Ee,l=fe.tokenize=function(e,t){var n,r,i,o,s,u,c,l=N[e+" "];if(l)return t?0:l.slice(0);for(s=e,u=[],c=a.preFilter;s;){for(o in n&&!(r=V.exec(s))||(r&&(s=s.slice(r[0].length)||s),u.push(i=[])),n=!1,(r=X.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(G," ")}),s=s.slice(n.length)),a.filter)!(r=J[o].exec(s))||c[o]&&!(r=c[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?fe.error(e):N(e,u).slice(0)},f=fe.compile=function(e,t){var n,r=[],i=[],o=A[e+" "];if(!o){for(t||(t=l(e)),n=t.length;n--;)(o=Ce(t[n]))[S]?r.push(o):i.push(o);(o=A(e,function(e,t){var n=t.length>0,r=e.length>0,i=function(i,o,s,u,c){var l,f,p,h=0,y="0",v=i&&[],_=[],b=d,E=i||r&&a.find.TAG("*",c),k=T+=null==b?1:Math.random()||.1,S=E.length;for(c&&(d=o==m||o||c);y!==S&&null!=(l=E[y]);y++){if(r&&l){for(f=0,o||l.ownerDocument==m||(g(l),s=!w);p=e[f++];)if(p(l,o||m,s)){u.push(l);break}c&&(T=k)}n&&((l=!p&&l)&&h--,i&&v.push(l))}if(h+=y,n&&y!==h){for(f=0;p=t[f++];)p(v,_,o,s);if(i){if(h>0)for(;y--;)v[y]||_[y]||(_[y]=D.call(u));_=Te(_)}j.apply(u,_),c&&!i&&_.length>0&&h+t.length>1&&fe.uniqueSort(u)}return c&&(T=k,d=b),v};return n?de(i):i}(i,r))).selector=e}return o},p=fe.select=function(e,t,n,r){var i,o,s,u,c,p="function"==typeof e&&e,d=!r&&l(e=p.selector||e);if(n=n||[],1===d.length){if((o=d[0]=d[0].slice(0)).length>2&&"ID"===(s=o[0]).type&&9===t.nodeType&&w&&a.relative[o[1].type]){if(!(t=(a.find.ID(s.matches[0].replace(oe,se),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=J.needsContext.test(e)?0:o.length;i--&&(s=o[i],!a.relative[u=s.type]);)if((c=a.find[u])&&(r=c(s.matches[0].replace(oe,se),ie.test(o[0].type)&&be(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&ke(o)))return j.apply(n,r),n;break}}return(p||f(e,d))(r,t,!w,n,!t||ie.test(e)&&be(t.parentNode)||t),n},s.sortStable=S.split("").sort(L).join("")===S,s.detectDuplicates=!!y,g(),s.sortDetached=he(function(e){return 1&e.compareDocumentPosition(m.createElement("fieldset"))}),he(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ye("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),s.attributes&&he(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ye("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),he(function(e){return null==e.getAttribute("disabled")})||ye(B,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null});var Ne=i.Sizzle;fe.noConflict=function(){return i.Sizzle===fe&&(i.Sizzle=Ne),fe},void 0===(r=function(){return fe}.call(t,n,t,e))||(e.exports=r)}(window)},function(e,t,n){var r,i;r=[n(0)],void 0===(i=function(e){"use strict";return function(t,n,r){for(var i=[],o=void 0!==r;(t=t[n])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&e(t).is(r))break;i.push(t)}return i}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){"use strict";return function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r,i;r=[n(0),n(26)],void 0===(i=function(e){"use strict";var t=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;e.Deferred.exceptionHook=function(e,n){window.console&&window.console.warn&&e&&t.test(e.name)&&window.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0)],void 0===(i=function(e){"use strict";e.readyException=function(e){window.setTimeout(function(){throw e})}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(21),n(30),n(15),n(70)],void 0===(i=function(e,t,n,r,i){"use strict";var o=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,s=/[A-Z]/g;function a(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(s,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:o.test(e)?JSON.parse(e):e)}(n)}catch(e){}i.set(e,t,n)}else n=void 0;return n}return e.extend({hasData:function(e){return i.hasData(e)||r.hasData(e)},data:function(e,t,n){return i.access(e,t,n)},removeData:function(e,t){i.remove(e,t)},_data:function(e,t,n){return r.access(e,t,n)},_removeData:function(e,t){r.remove(e,t)}}),e.fn.extend({data:function(e,o){var s,u,c,l=this[0],f=l&&l.attributes;if(void 0===e){if(this.length&&(c=i.get(l),1===l.nodeType&&!r.get(l,"hasDataAttrs"))){for(s=f.length;s--;)f[s]&&0===(u=f[s].name).indexOf("data-")&&(u=n(u.slice(5)),a(l,u,c[u]));r.set(l,"hasDataAttrs",!0)}return c}return"object"==typeof e?this.each(function(){i.set(this,e)}):t(this,function(t){var n;if(l&&void 0===t)return void 0!==(n=i.get(l,e))?n:void 0!==(n=a(l,e))?n:void 0;this.each(function(){i.set(this,e,t)})},null,o,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){i.remove(this,e)})}}),e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(47),n(48)],void 0===(i=function(e){"use strict";return e.fn.delay=function(t,n){return t=e.fx&&e.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(e,n){var r=window.setTimeout(e,t);n.stop=function(){window.clearTimeout(r)}})},e.fn.delay}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(15),n(72)],void 0===(i=function(e,t,n){"use strict";var r={};function i(t){var n,i=t.ownerDocument,o=t.nodeName,s=r[o];return s||(n=i.body.appendChild(i.createElement(o)),s=e.css(n,"display"),n.parentNode.removeChild(n),"none"===s&&(s="block"),r[o]=s,s)}function o(e,r){for(var o,s,a=[],u=0,c=e.length;u<c;u++)(s=e[u]).style&&(o=s.style.display,r?("none"===o&&(a[u]=t.get(s,"display")||null,a[u]||(s.style.display="")),""===s.style.display&&n(s)&&(a[u]=i(s))):"none"!==o&&(a[u]="none",t.set(s,"display",o)));for(u=0;u<c;u++)null!=a[u]&&(e[u].style.display=a[u]);return e}return e.fn.extend({show:function(){return o(this,!0)},hide:function(){return o(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){n(this)?e(this).show():e(this).hide()})}}),o}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){"use strict";return function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r,i;r=[n(50)],void 0===(i=function(e){"use strict";return new RegExp(e.join("|"),"i")}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(84),n(31)],void 0===(i=function(e,t){"use strict";function n(e,t,r,i,o){return new n.prototype.init(e,t,r,i,o)}e.Tween=n,n.prototype={constructor:n,init:function(t,n,r,i,o,s){this.elem=t,this.prop=r,this.easing=o||e.easing._default,this.options=n,this.start=this.now=this.cur(),this.end=i,this.unit=s||(e.cssNumber[r]?"":"px")},cur:function(){var e=n.propHooks[this.prop];return e&&e.get?e.get(this):n.propHooks._default.get(this)},run:function(t){var r,i=n.propHooks[this.prop];return this.options.duration?this.pos=r=e.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=r=t,this.now=(this.end-this.start)*r+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):n.propHooks._default.set(this),this}},n.prototype.init.prototype=n.prototype,n.propHooks={_default:{get:function(t){var n;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(n=e.css(t.elem,t.prop,""))&&"auto"!==n?n:0},set:function(n){e.fx.step[n.prop]?e.fx.step[n.prop](n):1!==n.elem.nodeType||!e.cssHooks[n.prop]&&null==n.elem.style[t(n.prop)]?n.elem[n.prop]=n.now:e.style(n.elem,n.prop,n.now+n.unit)}}},n.propHooks.scrollTop=n.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},e.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},e.fx=n.prototype.init,e.fx.step={}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(108),n(85),n(109),n(110)],void 0===(i=function(e){"use strict";return e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(21),n(17),n(54),n(18),n(11)],void 0===(i=function(e,t,n,r,i){"use strict";var o,s=e.expr.attrHandle;e.fn.extend({attr:function(n,r){return t(this,e.attr,n,r,arguments.length>1)},removeAttr:function(t){return this.each(function(){e.removeAttr(this,t)})}}),e.extend({attr:function(t,n,r){var i,s,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===t.getAttribute?e.prop(t,n,r):(1===a&&e.isXMLDoc(t)||(s=e.attrHooks[n.toLowerCase()]||(e.expr.match.bool.test(n)?o:void 0)),void 0!==r?null===r?void e.removeAttr(t,n):s&&"set"in s&&void 0!==(i=s.set(t,r,n))?i:(t.setAttribute(n,r+""),r):s&&"get"in s&&null!==(i=s.get(t,n))?i:null==(i=e.find.attr(t,n))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!r.radioValue&&"radio"===t&&n(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var n,r=0,o=t&&t.match(i);if(o&&1===e.nodeType)for(;n=o[r++];)e.removeAttribute(n)}}),o={set:function(t,n,r){return!1===n?e.removeAttr(t,r):t.setAttribute(r,r),r}},e.each(e.expr.match.bool.source.match(/\w+/g),function(t,n){var r=s[n]||e.find.attr;s[n]=function(e,t,n){var i,o,a=t.toLowerCase();return n||(o=s[a],s[a]=i,i=null!=r(e,t,n)?a:null,s[a]=o),i}})}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(55),n(6),n(18),n(15),n(14)],void 0===(i=function(e,t,n,r,i){"use strict";function o(e){return e.getAttribute&&e.getAttribute("class")||""}function s(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(r)||[]}e.fn.extend({addClass:function(r){var i,a,u,c,l,f,p,d=0;if(n(r))return this.each(function(t){e(this).addClass(r.call(this,t,o(this)))});if((i=s(r)).length)for(;a=this[d++];)if(c=o(a),u=1===a.nodeType&&" "+t(c)+" "){for(f=0;l=i[f++];)u.indexOf(" "+l+" ")<0&&(u+=l+" ");c!==(p=t(u))&&a.setAttribute("class",p)}return this},removeClass:function(r){var i,a,u,c,l,f,p,d=0;if(n(r))return this.each(function(t){e(this).removeClass(r.call(this,t,o(this)))});if(!arguments.length)return this.attr("class","");if((i=s(r)).length)for(;a=this[d++];)if(c=o(a),u=1===a.nodeType&&" "+t(c)+" "){for(f=0;l=i[f++];)for(;u.indexOf(" "+l+" ")>-1;)u=u.replace(" "+l+" "," ");c!==(p=t(u))&&a.setAttribute("class",p)}return this},toggleClass:function(t,r){var a=typeof t,u="string"===a||Array.isArray(t);return"boolean"==typeof r&&u?r?this.addClass(t):this.removeClass(t):n(t)?this.each(function(n){e(this).toggleClass(t.call(this,n,o(this),r),r)}):this.each(function(){var n,r,c,l;if(u)for(r=0,c=e(this),l=s(t);n=l[r++];)c.hasClass(n)?c.removeClass(n):c.addClass(n);else void 0!==t&&"boolean"!==a||((n=o(this))&&i.set(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||!1===t?"":i.get(this,"__className__")||""))})},hasClass:function(e){var n,r,i=0;for(n=" "+e+" ";r=this[i++];)if(1===r.nodeType&&(" "+t(o(r))+" ").indexOf(n)>-1)return!0;return!1}})}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(55),n(54),n(17),n(6),n(14)],void 0===(i=function(e,t,n,r,i){"use strict";var o=/\r/g;e.fn.extend({val:function(t){var n,r,s,a=this[0];return arguments.length?(s=i(t),this.each(function(r){var i;1===this.nodeType&&(null==(i=s?t.call(this,r,e(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=e.map(i,function(e){return null==e?"":e+""})),(n=e.valHooks[this.type]||e.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,i,"value")||(this.value=i))})):a?(n=e.valHooks[a.type]||e.valHooks[a.nodeName.toLowerCase()])&&"get"in n&&void 0!==(r=n.get(a,"value"))?r:"string"==typeof(r=a.value)?r.replace(o,""):null==r?"":r:void 0}}),e.extend({valHooks:{option:{get:function(n){var r=e.find.attr(n,"value");return null!=r?r:t(e.text(n))}},select:{get:function(t){var n,i,o,s=t.options,a=t.selectedIndex,u="select-one"===t.type,c=u?null:[],l=u?a+1:s.length;for(o=a<0?l:u?a:0;o<l;o++)if(((i=s[o]).selected||o===a)&&!i.disabled&&(!i.parentNode.disabled||!r(i.parentNode,"optgroup"))){if(n=e(i).val(),u)return n;c.push(n)}return c},set:function(t,n){for(var r,i,o=t.options,s=e.makeArray(n),a=o.length;a--;)((i=o[a]).selected=e.inArray(e.valHooks.option.get(i),s)>-1)&&(r=!0);return r||(t.selectedIndex=-1),s}}}}),e.each(["radio","checkbox"],function(){e.valHooks[this]={set:function(t,n){if(Array.isArray(n))return t.checked=e.inArray(e(t).val(),n)>-1}},n.checkOn||(e.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(15),n(112),n(27),n(56)],void 0===(i=function(e,t,n){"use strict";return n.focusin||e.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(t){e.event.simulate(r,t.target,e.event.fix(t))};e.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,o=t.access(e,r);o||e.addEventListener(n,i,!0),t.access(e,r,(o||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,o=t.access(e,r)-1;o?t.access(e,r,o):(e.removeEventListener(n,i,!0),t.remove(e,r))}}}),e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(20)],void 0===(i=function(e){"use strict";return e.focusin="onfocusin"in window,e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(22)],void 0===(i=function(e){"use strict";return e._evalUrl=function(t,n,r){return e.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){e.globalEval(t,n,r)}})},e._evalUrl}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){"use strict";return window.location}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r,i;r=[n(0),n(6),n(14),n(40),n(25)],void 0===(i=function(e,t){"use strict";return e.fn.extend({wrapAll:function(n){var r;return this[0]&&(t(n)&&(n=n.call(this[0])),r=e(n,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&r.insertBefore(this[0]),r.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return t(n)?this.each(function(t){e(this).wrapInner(n.call(this,t))}):this.each(function(){var t=e(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){var r=t(n);return this.each(function(t){e(this).wrapAll(r?n.call(this,t):n)})},unwrap:function(t){return this.parent(t).not("body").each(function(){e(this).replaceWith(this.childNodes)}),this}}),e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(11)],void 0===(i=function(e){"use strict";e.expr.pseudos.hidden=function(t){return!e.expr.pseudos.visible(t)},e.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(20),n(22)],void 0===(i=function(e,t){"use strict";e.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest}catch(e){}};var n={0:200,1223:204},r=e.ajaxSettings.xhr();t.cors=!!r&&"withCredentials"in r,t.ajax=r=!!r,e.ajaxTransport(function(e){var i,o;if(t.cors||r&&!e.crossDomain)return{send:function(t,r){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)a.setRequestHeader(s,t[s]);i=function(e){return function(){i&&(i=o=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(n[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),o=a.onerror=a.ontimeout=i("error"),void 0!==a.onabort?a.onabort=o:a.onreadystatechange=function(){4===a.readyState&&window.setTimeout(function(){i&&o()})},i=i("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}})}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(10),n(22)],void 0===(i=function(e,t){"use strict";e.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),e.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return e.globalEval(t),t}}}),e.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),e.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(o,s){r=e("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&s("error"===e.type?404:200,e.type)}),t.head.appendChild(r[0])},abort:function(){i&&i()}}})}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(6),n(86),n(87),n(22)],void 0===(i=function(e,t,n,r){"use strict";var i=[],o=/(=)\?(?=&|$)|\?\?/;e.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=i.pop()||e.expando+"_"+n.guid++;return this[t]=!0,t}}),e.ajaxPrefilter("json jsonp",function(n,s,a){var u,c,l,f=!1!==n.jsonp&&(o.test(n.url)?"url":"string"==typeof n.data&&0===(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&o.test(n.data)&&"data");if(f||"jsonp"===n.dataTypes[0])return u=n.jsonpCallback=t(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,f?n[f]=n[f].replace(o,"$1"+u):!1!==n.jsonp&&(n.url+=(r.test(n.url)?"&":"?")+n.jsonp+"="+u),n.converters["script json"]=function(){return l||e.error(u+" was not called"),l[0]},n.dataTypes[0]="json",c=window[u],window[u]=function(){l=arguments},a.always(function(){void 0===c?e(window).removeProp(u):window[u]=c,n[u]&&(n.jsonpCallback=s.jsonpCallback,i.push(u)),l&&t(c)&&c(l[0]),l=c=void 0}),"script"})}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(55),n(6),n(90),n(22),n(25),n(40),n(11)],void 0===(i=function(e,t,n){"use strict";e.fn.load=function(r,i,o){var s,a,u,c=this,l=r.indexOf(" ");return l>-1&&(s=t(r.slice(l)),r=r.slice(0,l)),n(i)?(o=i,i=void 0):i&&"object"==typeof i&&(a="POST"),c.length>0&&e.ajax({url:r,type:a||"GET",dataType:"html",data:i}).done(function(t){u=arguments,c.html(s?e("<div>").append(e.parseHTML(t)).find(s):t)}).always(o&&function(e,t){c.each(function(){o.apply(this,u||[e.responseText,t,e])})}),this}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(10),n(20)],void 0===(i=function(e,t){"use strict";var n;return t.createHTMLDocument=((n=e.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===n.childNodes.length),t}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(11),n(48)],void 0===(i=function(e){"use strict";e.expr.pseudos.animated=function(t){return e.grep(e.timers,function(e){return t===e.elem}).length}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(21),n(39),n(6),n(52),n(82),n(83),n(53),n(29),n(14),n(31),n(11)],void 0===(i=function(e,t,n,r,i,o,s,a,u){"use strict";return e.offset={setOffset:function(t,n,i){var o,s,a,u,c,l,f=e.css(t,"position"),p=e(t),d={};"static"===f&&(t.style.position="relative"),c=p.offset(),a=e.css(t,"top"),l=e.css(t,"left"),("absolute"===f||"fixed"===f)&&(a+l).indexOf("auto")>-1?(u=(o=p.position()).top,s=o.left):(u=parseFloat(a)||0,s=parseFloat(l)||0),r(n)&&(n=n.call(t,i,e.extend({},c))),null!=n.top&&(d.top=n.top-c.top+u),null!=n.left&&(d.left=n.left-c.left+s),"using"in n?n.using.call(t,d):("number"==typeof d.top&&(d.top+="px"),"number"==typeof d.left&&(d.left+="px"),p.css(d))}},e.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(n){e.offset.setOffset(this,t,n)});var n,r,i=this[0];return i?i.getClientRects().length?(n=i.getBoundingClientRect(),r=i.ownerDocument.defaultView,{top:n.top+r.pageYOffset,left:n.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,n,r,i=this[0],o={top:0,left:0};if("fixed"===e.css(i,"position"))n=i.getBoundingClientRect();else{for(n=this.offset(),r=i.ownerDocument,t=i.offsetParent||r.documentElement;t&&(t===r.body||t===r.documentElement)&&"static"===e.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((o=e(t).offset()).top+=e.css(t,"borderTopWidth",!0),o.left+=e.css(t,"borderLeftWidth",!0))}return{top:n.top-o.top-e.css(i,"marginTop",!0),left:n.left-o.left-e.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===e.css(t,"position");)t=t.offsetParent;return t||n})}}),e.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,r){var i="pageYOffset"===r;e.fn[n]=function(e){return t(this,function(e,t,n){var o;if(u(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===n)return o?o[r]:e[t];o?o.scrollTo(i?o.pageXOffset:n,i?n:o.pageYOffset):e[t]=n},n,e,arguments.length)}}),e.each(["top","left"],function(t,n){e.cssHooks[n]=s(a.pixelPosition,function(t,r){if(r)return r=o(t,n),i.test(r)?e(t).position()[n]+"px":r})}),e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(21),n(29),n(31)],void 0===(i=function(e,t,n){"use strict";return e.each({Height:"height",Width:"width"},function(r,i){e.each({padding:"inner"+r,content:i,"":"outer"+r},function(o,s){e.fn[s]=function(a,u){var c=arguments.length&&(o||"boolean"!=typeof a),l=o||(!0===a||!0===u?"margin":"border");return t(this,function(t,i,o){var a;return n(t)?0===s.indexOf("outer")?t["inner"+r]:t.document.documentElement["client"+r]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+r],a["scroll"+r],t.body["offset"+r],a["offset"+r],a["client"+r])):void 0===o?e.css(t,i,l):e.style(t,i,o,l)},i,c?a:void 0,c)}})}),e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(17),n(30),n(24),n(6),n(29),n(35),n(126),n(127)],void 0===(i=function(e,t,n,r,i,o,s){"use strict";var a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;e.proxy=function(t,n){var r,o,a;if("string"==typeof n&&(r=t[n],n=t,t=r),i(t))return o=s.call(arguments,2),(a=function(){return t.apply(n||this,o.concat(s.call(arguments)))}).guid=t.guid=t.guid||e.guid++,a},e.holdReady=function(t){t?e.readyWait++:e.ready(!0)},e.isArray=Array.isArray,e.parseJSON=JSON.parse,e.nodeName=t,e.isFunction=i,e.isWindow=o,e.camelCase=n,e.type=r,e.now=Date.now,e.isNumeric=function(t){var n=e.type(t);return("number"===n||"string"===n)&&!isNaN(t-parseFloat(t))},e.trim=function(e){return null==e?"":(e+"").replace(a,"")}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(22),n(27)],void 0===(i=function(e){"use strict";e.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,n){e.fn[n]=function(e){return this.on(n,e)}})}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(27),n(56)],void 0===(i=function(e){"use strict";e.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),e.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){e.fn[n]=function(e,t){return arguments.length>0?this.on(n,null,e,t):this.trigger(n)}})}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0)],void 0===(i=function(n){"use strict";void 0===(i=function(){return n}.apply(t,r=[]))||(e.exports=i)}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0)],void 0===(i=function(e){"use strict";var t=window.jQuery,n=window.$;e.noConflict=function(r){return window.$===e&&(window.$=n),r&&window.jQuery===e&&(window.jQuery=t),e},"undefined"==typeof noGlobal&&(window.jQuery=window.$=e)}.apply(t,r))||(e.exports=i)},function(e,t,n){"use strict";n.r(t);n(131),n(132),n(133);var r=n(32),i=n.n(r),o=n(33);window.vorple={...n(12),audio:n(143),debug:n(13),file:n(2),haven:n(42),layout:n(34),output:n(58),prompt:n(41),options:{},version:o.a},i.a.registerPlugin(n(144)),i.a.defaultOptions.className="vex-theme-plain",n(145),window.jQuery=window.$=n(19),window.toastr=n(146),window.vex=i.a,t.default=window.vorple},function(e,t){Quixe=function(){var e={};function t(e){if("string"==typeof e)return e;var t=e.toString();return e.message&&(t=t+" "+e.message),e.fileName&&(t=t+" "+e.fileName),e.lineNumber&&(t=t+" line:"+e.lineNumber),e.name&&(t=t+" "+e.name),e.number&&(t=t+" "+e.number),t}function n(e){window.console&&console.log?console.log(e):window.opera&&opera.postError&&opera.postError(e)}function r(){if(Ee&&Ee.length){var e,t,r,i,o=[];for(e=0;e<Ee.length;e++)(i=Ee[e]).vmfunc.funcaddr?(t="0x"+i.vmfunc.funcaddr.toString(16),(r=st.functionmap[i.vmfunc.funcaddr])&&(t=t+' "'+r.name+'"'),o.push(t)):o.push("(anonymous)");n("VM stack dump: "+o.join(", "))}}void 0===Math.imul&&(n("Polyfilling Math.imul()."),Math.imul=function(e,t){var n=65535&e,r=65535&t;return n*r+((e>>>16&65535)*r+n*(t>>>16&65535)<<16>>>0)|0});var i=Array(256),o=Array(256);function s(e,t){return 16777216*e[t]+65536*e[t+1]+256*e[t+2]+e[t+3]}function a(e,t){return 256*e[t]+e[t+1]}function u(e,t){return e[t]}function c(e){return be[e]}function l(e){return 256*be[e]+be[e+1]}function f(e){return 16777216*be[e]+65536*be[e+1]+256*be[e+2]+be[e+3]}function p(e,t){return be.slice(e,e+t)}function d(e,t){be[e]=255&t}function h(e,t){be[e]=t>>8&255,be[e+1]=255&t}function y(e,t){be[e]=t>>24&255,be[e+1]=t>>16&255,be[e+2]=t>>8&255,be[e+3]=255&t}function g(e,t){for(var n=0;n<t.length;n++)e.push(t.charCodeAt(n))}function m(e,t){e.push(t>>24&255),e.push(t>>16&255),e.push(t>>8&255),e.push(255&t)}function v(e,t){e.push(t>>8&255),e.push(255&t)}function w(e,t){e.push(255&t)}function _(e,t,n){return String.fromCharCode.apply(this,e.slice(t,t+n))}function b(e){return be[e]>=128?"0xffffff"+i[be[e]]:"0x"+i[be[e]]}function E(e){return be[e]>=128?"0xffff"+i[be[e]]+i[be[e+1]]:be[e]?"0x"+i[be[e]]+i[be[e+1]]:"0x"+i[be[e+1]]}function k(e){return be[e]?"0x"+i[be[e]]+i[be[e+1]]+i[be[e+2]]+i[be[e+3]]:be[e+1]?"0x"+i[be[e+1]]+i[be[e+2]]+i[be[e+3]]:be[e+2]?"0x"+i[be[e+2]]+i[be[e+3]]:"0x"+i[be[e+3]]}function S(e){return e<65536?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function x(e){return function(e){if(e<256)return o[e];if(e<65536){for(e=e.toString(16);e.length<4;)e="0"+e;return"\\u"+e}var t;return t=55296+((e-=65536)>>10),e=56320+(1023&e),"\\u"+t.toString(16)+"\\u"+e.toString(16)}(e.charCodeAt(0))}e.Mem1=c,e.Mem2=l,e.Mem4=f,e.MemSlice=p,e.MemW1=d,e.MemW2=h,e.MemW4=y;var T=/[^a-zA-Z0-9 .,;:?!=_+()-]/g;function O(e){return'"'+(e=e.replace(T,x))+'"'}function C(e){var t,r;if(arguments.length>1){for(e+=" (",t=1;t<arguments.length;t++)1!=t&&(e+=" "),e+=r="number"==typeof(r=arguments[t])?r.toString(16):""+r;e+=")"}throw n(e),new Error(e)}function N(e,t,n,r){return void 0===t&&(t="_func"),void 0===n?new Function("self",e):void 0===r?new Function("self",n,e):new Function("self",n,r,e)}function A(e,t,n,r){var i,o;e?(this.funcaddr=e,this.startpc=t,this.functype=c(e)):(this.funcaddr=null,this.startpc=null,this.functype=null),this.pathaddrs={},this[0]={},this[1]={},this[2]={},this.locallen=null,this.localsformat=n,this.rawformat=r,this.localsindex=[];var s=0;for(i=0;i<this.localsformat.length;i++){var a=this.localsformat[i];if(4==a.size)for(;3&s;)s++;else if(2==a.size)for(;1&s;)s++;for(o=0;o<a.count;o++)this.localsindex.push({size:a.size,pos:s}),s+=a.size}for(;3&s;)s++;this.locallen=s}function I(e){var t;for(this.vmfunc=e,this.depth=null,this.framestart=null,this.framelen=null,this.valstack=[],this.localspos=null,this.localsindex=e.localsindex,this.locals=[],t=0;t<this.localsindex.length;t++){var n=this.localsindex[t];this.locals[n.pos]=0}this.framelen=8+e.rawformat.length+e.locallen}function L(e,t){m(t,e.framelen);var n=e.vmfunc.rawformat;m(t,8+n.length);for(var r=0;r<n.length;r++)t.push(n[r]);for(r=0;r<e.vmfunc.localsindex.length;r++){var i=e.vmfunc.localsindex[r];if(4==i.size){for(;3&t.length;)t.push(0);m(t,e.locals[i.pos])}else if(2==i.size){for(;1&t.length;)t.push(0);v(t,e.locals[i.pos])}else w(t,e.locals[i.pos])}for(;3&t.length;)t.push(0);for(r=0;r<e.valstack.length;r++)m(t,e.valstack[r])}function F(e){var t=s(e,e.length-4);if(!(t<0||t>=e.length)){for(var r=s(e=e.splice(t,e.length),0),i=s(e,4),o=e.slice(8,i),c=[],l=8;;){var f=u(e,l),p=u(e,++l);if(l++,0==f)break;1!=f&&2!=f&&4!=f&&C("Invalid local variable size in function header.",f),c.push({size:f,count:p})}var d=new I(new A(null,null,c,o));d.framestart=t;for(var h=0;h<d.vmfunc.localsindex.length;h++){var y=d.vmfunc.localsindex[h];4==y.size?d.locals[y.pos]=s(e,i+y.pos):2==y.size?d.locals[y.pos]=a(e,i+y.pos):d.locals[y.pos]=u(e,i+y.pos)}for(var g=r;g<e.length;g+=4)d.valstack.push(s(e,g));return d}n("Bad frameptr in serialized stack frame")}function R(e,t){0==e&&C("Tried to create a VMTextEnv for address zero."),this.addr=e,this.cacheable=void 0!==t,this.decoding_tree=t,this.vmstring_tables=[],this.cacheable&&(this.vmstring_tables[0]={},this.vmstring_tables[1]={},this.vmstring_tables[2]={})}e.fatal_error=C;var D=null;function M(e,t,n){switch(t.mode){case 8:if(4==t.argsize){if("0"===(r=n[0]))return e.offstack.push(n),void e.code.push("// push to offstack: "+n);if("_"===r)return function(e,t){e.offstack.push(t);var n=e.holduse[t];n&&!0!==n?n++:n=1;e.holduse[t]=n}(e,n),void e.code.push("// re-push to offstack: "+n)}return holdvar=Y(e,!0),e.offstack.push(holdvar),void(4==t.argsize?e.code.push(holdvar+"=("+n+");"):2==t.argsize?e.code.push(holdvar+"=0xffff&("+n+");"):e.code.push(holdvar+"=0xff&("+n+");"));case 0:return void e.code.push("("+n+");");case 11:if(4==t.argsize){var r;if("0"===(r=n[0]))return V(e,t.addr,n,!1),void e.code.push("// store to offloc["+t.addr+"]: "+n);if("_"===r)return V(e,t.addr,n,!0),void e.code.push("// re-store to offloc["+t.addr+"]: "+n)}return V(e,t.addr,void 0),void(4==t.argsize?e.code.push("self.frame.locals["+t.addr+"]=("+n+");"):2==t.argsize?e.code.push("self.frame.locals["+t.addr+"]=(0xffff &"+n+");"):e.code.push("self.frame.locals["+t.addr+"]=(0xff &"+n+");"));case 15:return void(4==t.argsize?e.code.push("self.MemW4("+t.addr+","+n+");"):2==t.argsize?e.code.push("self.MemW2("+t.addr+","+n+");"):e.code.push("self.MemW1("+t.addr+","+n+");"));default:C("Unknown addressing mode in store func operand.")}}function j(e,t,n){void 0===n&&(n=e.cp),e.code.push("self.frame.valstack.push("+t+","+n+",self.frame.framestart);")}function P(e){e.code.push("if (!substring) { substring=true;"),e.code.push("self.frame.valstack.push(0x11,0,nextcp,self.frame.framestart);"),e.code.push("}")}function U(e,t){var n;if(e.code.push("// unload offstate: "+e.offstack.length+" stack"+(e.offloc.length?", plus locs":"")+(t?" (conditional)":"")),e.offstack.length&&e.code.push("self.frame.valstack.push("+e.offstack.join(",")+");"),e.offloc.length)for(n=0;n<e.offloc.length;n++)void 0!==e.offloc[n]&&e.offlocdirty[n]&&e.code.push("self.frame.locals["+n+"]="+e.offloc[n]+";");if(!t){var r;for(n=0;n<e.offloc.length;n++)void 0!==(r=e.offloc[n])&&void 0!==e.holduse[r]&&(e.holduse[r]=!1);for(e.offloc.length=0,e.offlocdirty.length=0;e.offstack.length;)r=e.offstack.pop(),void 0!==e.holduse[r]&&(e.holduse[r]=!1)}}function B(e){if(0!=e.buffer.length){var t=e.buffer.join("");e.buffer.length=0,e.code.push("Glk.glk_put_jstring("+O(t)+");")}}function z(e,t,n){var r;if(X(t))return 2147483648&(r=Number(t))?""+(r-4294967296):t;if(r="("+t+"&0xffffffff)",n){var i=Y(e);return e.code.push(i+"="+r+";"),i}return r}function H(e,t,n){var r;if(X(t))return 2147483648==(r=Number(t))?"-0":""+we(r);if(r="self.decode_float("+t+")",n){var i=Y(e);return e.code.push(i+"="+r+";"),i}return r}function q(e,t,n){if(X(t)){var r=Number(t);if(0==r||1==r)n?(e.code.push("// quashing offstack for unconditional return: "+e.offstack.length),e.offstack.length=0,e.offloc.length=0,e.offlocdirty.length=0):e.code.push("// ignoring offstack for conditional return: "+e.offstack.length),e.code.push("if (self.leave_function()) return self.VMStopped;"),e.code.push("self.pop_callstub("+r+");");else{U(e,!n);var i=e.cp+r-2>>>0;e.code.push("self.pc = "+i+";"),e.vmfunc.pathaddrs[i]=!0}}else U(e,!n),e.code.push("if (("+t+")==0 || ("+t+")==1) {"),e.code.push("if (self.leave_function()) return self.VMStopped;"),e.code.push("self.pop_callstub("+t+");"),e.code.push("}"),e.code.push("else {"),e.code.push("self.pc = ("+e.cp+"+("+t+")-2) >>>0;"),e.code.push("}");e.code.push("return;")}e.funcop_cache={};var W={0:function(e,t){},16:function(e,t){e.code.push(t[2]+"(("+t[0]+")+("+t[1]+")) >>>0);")},17:function(e,t){e.code.push(t[2]+"(("+t[0]+")-("+t[1]+")) >>>0);")},18:function(e,t){var n=z(e,t[0]),r=z(e,t[1]);e.code.push(t[2]+"(Math.imul(("+n+"),("+r+"))) >>>0);")},19:function(e,t){var n=z(e,t[0]),r=z(e,t[1]),i=Y(e);e.code.push(i+"=(("+n+")/("+r+"));"),e.code.push("if (!isFinite("+i+")) self.fatal_error('Division by zero.');"),e.code.push(t[2]+"("+i+">=0)?Math.floor("+i+"):(-Math.floor(-"+i+") >>>0));")},20:function(e,t){var n=z(e,t[0]),r=z(e,t[1]),i=Y(e);e.code.push(i+"=(("+n+")%("+r+"));"),e.code.push("if (!isFinite("+i+")) self.fatal_error('Modulo division by zero.');"),e.code.push(t[2]+i+" >>>0);")},21:function(e,t){e.code.push(t[1]+"(-("+t[0]+")) >>>0);")},24:function(e,t){e.code.push(t[2]+"(("+t[0]+")&("+t[1]+")) >>>0);")},25:function(e,t){e.code.push(t[2]+"(("+t[0]+")|("+t[1]+")) >>>0);")},26:function(e,t){e.code.push(t[2]+"(("+t[0]+")^("+t[1]+")) >>>0);")},27:function(e,t){e.code.push(t[1]+"(~("+t[0]+")) >>>0);")},28:function(e,t){if(X(t[1])){var n=Number(t[1]);n<32?e.code.push(t[2]+"(("+t[0]+")<<"+n+") >>>0);"):e.code.push(t[2]+"0);")}else e.code.push(t[2]+"("+t[1]+"<32) ? (("+t[0]+"<<"+t[1]+") >>>0) : 0);")},29:function(e,t){if(X(t[1])){var n=Number(t[1]);n<32?e.code.push(t[2]+"(("+t[0]+")>>"+n+") >>>0);"):e.code.push(t[2]+"(("+t[0]+")&0x80000000) ? 0xffffffff : 0);")}else e.code.push("if ("+t[0]+" & 0x80000000) {"),e.code.push(t[2]+"("+t[1]+"<32) ? (("+t[0]+">>"+t[1]+") >>>0) : 0xffffffff);"),e.code.push("} else {"),e.code.push(t[2]+"("+t[1]+"<32) ? (("+t[0]+">>"+t[1]+") >>>0) : 0);"),e.code.push("}")},30:function(e,t){if(X(t[1])){var n=Number(t[1]);n<32?e.code.push(t[2]+"("+t[0]+")>>>"+n+");"):e.code.push(t[2]+"0);")}else e.code.push(t[2]+"("+t[1]+"<32) ? ("+t[0]+">>>"+t[1]+") : 0);")},32:function(e,t){q(e,t[0],!0),e.path_ends=!0},260:function(e,t){if(X(t[0])){var n=Number(t[0]);e.code.push("self.pc = "+n+";"),e.vmfunc.pathaddrs[n]=!0}else e.code.push("self.pc = "+t[0]+";");U(e),e.code.push("return;"),e.path_ends=!0},34:function(e,t){e.code.push("if (("+t[0]+")==0) {"),q(e,t[1]),e.code.push("}")},35:function(e,t){e.code.push("if (("+t[0]+")!=0) {"),q(e,t[1]),e.code.push("}")},36:function(e,t){e.code.push("if (("+t[0]+")==("+t[1]+")) {"),q(e,t[2]),e.code.push("}")},37:function(e,t){e.code.push("if (("+t[0]+")!=("+t[1]+")) {"),q(e,t[2]),e.code.push("}")},38:function(e,t){var n=z(e,t[0]),r=z(e,t[1]);e.code.push("if (("+n+")<("+r+")) {"),q(e,t[2]),e.code.push("}")},39:function(e,t){var n=z(e,t[0]),r=z(e,t[1]);e.code.push("if (("+n+")>=("+r+")) {"),q(e,t[2]),e.code.push("}")},40:function(e,t){var n=z(e,t[0]),r=z(e,t[1]);e.code.push("if (("+n+")>("+r+")) {"),q(e,t[2]),e.code.push("}")},41:function(e,t){var n=z(e,t[0]),r=z(e,t[1]);e.code.push("if (("+n+")<=("+r+")) {"),q(e,t[2]),e.code.push("}")},42:function(e,t){e.code.push("if (("+t[0]+")<("+t[1]+")) {"),q(e,t[2]),e.code.push("}")},43:function(e,t){e.code.push("if (("+t[0]+")>=("+t[1]+")) {"),q(e,t[2]),e.code.push("}")},44:function(e,t){e.code.push("if (("+t[0]+")>("+t[1]+")) {"),q(e,t[2]),e.code.push("}")},45:function(e,t){e.code.push("if (("+t[0]+")<=("+t[1]+")) {"),q(e,t[2]),e.code.push("}")},48:function(e,t){if(X(t[1])){var n,r=Number(t[1]);for(n=0;n<r;n++)if(e.offstack.length){var i=G(e);e.code.push("self.tempcallargs["+n+"]="+i+";")}else e.code.push("self.tempcallargs["+n+"]=self.frame.valstack.pop();");U(e)}else e.varsused.ix=!0,U(e),e.code.push("for (ix=0; ix<"+t[1]+"; ix++) { self.tempcallargs[ix]=self.frame.valstack.pop(); }");j(e,t[2]),e.code.push("self.enter_function("+t[0]+", "+t[1]+");"),e.code.push("return;"),e.path_ends=!0},52:function(e,t){if(X(t[1])){var n,r=Number(t[1]);for(n=0;n<r;n++)if(e.offstack.length){var i=G(e);e.code.push("self.tempcallargs["+n+"]="+i+";")}else e.code.push("self.tempcallargs["+n+"]=self.frame.valstack.pop();");U(e)}else e.varsused.ix=!0,U(e),e.code.push("for (ix=0; ix<"+t[1]+"; ix++) { self.tempcallargs[ix]=self.frame.valstack.pop(); }");e.code.push("if (self.leave_function()) return self.VMStopped;"),e.code.push("self.enter_function("+t[0]+", "+t[1]+");"),e.code.push("return;"),e.path_ends=!0},352:function(e,t){U(e),j(e,t[1]),e.code.push("self.enter_function("+t[0]+", 0);"),e.code.push("return;"),e.path_ends=!0},353:function(e,t){U(e),e.code.push("self.tempcallargs[0]=("+t[1]+");"),j(e,t[2]),e.code.push("self.enter_function("+t[0]+", 1);"),e.code.push("return;"),e.path_ends=!0},354:function(e,t){U(e),e.code.push("self.tempcallargs[0]=("+t[1]+");"),e.code.push("self.tempcallargs[1]=("+t[2]+");"),j(e,t[3]),e.code.push("self.enter_function("+t[0]+", 2);"),e.code.push("return;"),e.path_ends=!0},355:function(e,t){U(e),e.code.push("self.tempcallargs[0]=("+t[1]+");"),e.code.push("self.tempcallargs[1]=("+t[2]+");"),e.code.push("self.tempcallargs[2]=("+t[3]+");"),j(e,t[4]),e.code.push("self.enter_function("+t[0]+", 3);"),e.code.push("return;"),e.path_ends=!0},49:function(e,t){e.code.push("// quashing offstack for return: "+e.offstack.length),e.offstack.length=0,e.offloc.length=0,e.offlocdirty.length=0,e.code.push("if (self.leave_function()) return self.VMStopped;"),e.code.push("self.pop_callstub("+t[0]+");"),e.code.push("return;"),e.path_ends=!0},50:function(e,t){U(e),j(e,t[0]),e.code.push("self.store_operand("+t[0]+",self.frame.framestart+self.frame.framelen+4*self.frame.valstack.length);"),q(e,t[1],!0),e.path_ends=!0},51:function(e,t){e.code.push("// quashing offstack for throw: "+e.offstack.length),e.offstack.length=0,e.offloc.length=0,e.offlocdirty.length=0,e.code.push("self.pop_stack_to("+t[1]+");"),e.code.push("self.pop_callstub("+t[0]+");"),e.code.push("return;"),e.path_ends=!0},64:function(e,t){M(e,t[1],t[0])},65:function(e,t){M(e,t[1],t[0])},66:function(e,t){M(e,t[1],t[0])},68:function(e,t){var n;X(t[0])?(n=32768&(n=Number(t[0]))?(4294901760|n)>>>0:65535&n,e.code.push(t[1]+n+");")):e.code.push(t[1]+"("+t[0]+" & 0x8000) ? (("+t[0]+" | 0xffff0000) >>> 0) : ("+t[0]+" & 0xffff));")},69:function(e,t){var n;X(t[0])?(n=128&(n=Number(t[0]))?(4294967040|n)>>>0:255&n,e.code.push(t[1]+n+");")):e.code.push(t[1]+"("+t[0]+" & 0x80) ? (("+t[0]+" | 0xffffff00) >>> 0) : ("+t[0]+" & 0xff));")},72:function(e,t){var n,r;X(t[1])?n=X(t[0])?"self.Mem4("+((r=Number(t[0])+4*Number(t[1]))>>>0)+")":(r=4*Number(t[1]))?"self.Mem4(("+t[0]+"+"+r+") >>>0)":"self.Mem4("+t[0]+")":n="self.Mem4(("+t[0]+"+4*"+t[1]+") >>>0)";e.code.push(t[2]+n+");")},73:function(e,t){var n,r;X(t[1])?n=X(t[0])?"self.Mem2("+((r=Number(t[0])+2*Number(t[1]))>>>0)+")":(r=2*Number(t[1]))?"self.Mem2(("+t[0]+"+"+r+") >>>0)":"self.Mem2("+t[0]+")":n="self.Mem2(("+t[0]+"+2*"+t[1]+") >>>0)";e.code.push(t[2]+n+");")},74:function(e,t){var n,r;X(t[1])?n=X(t[0])?"self.Mem1("+((r=Number(t[0])+Number(t[1]))>>>0)+")":(r=Number(t[1]))?"self.Mem1(("+t[0]+"+"+r+") >>>0)":"self.Mem1("+t[0]+")":n="self.Mem1(("+t[0]+"+"+t[1]+") >>>0)";e.code.push(t[2]+n+");")},76:function(e,t){var n,r;X(t[1])?n=X(t[0])?((r=Number(t[0])+4*Number(t[1]))>>>0)+",":(r=4*Number(t[1]))?"("+t[0]+"+"+r+") >>>0,":t[0]+",":n="("+t[0]+"+4*"+t[1]+") >>>0,";e.code.push("self.MemW4("+n+t[2]+");")},77:function(e,t){var n,r;X(t[1])?n=X(t[0])?((r=Number(t[0])+2*Number(t[1]))>>>0)+",":(r=2*Number(t[1]))?"("+t[0]+"+"+r+") >>>0,":t[0]+",":n="("+t[0]+"+2*"+t[1]+") >>>0,";e.code.push("self.MemW2("+n+t[2]+");")},78:function(e,t){var n,r;X(t[1])?n=X(t[0])?((r=Number(t[0])+Number(t[1]))>>>0)+",":(r=Number(t[1]))?"("+t[0]+"+"+r+") >>>0,":t[0]+",":n="("+t[0]+"+"+t[1]+") >>>0,";e.code.push("self.MemW1("+n+t[2]+");")},75:function(e,t){if(X(t[1])){var n,r,i;n=7&(i=4294967295&Number(t[1])),X(t[0])?(r=Number(t[0]),i>=0?r+=i>>3:r-=1+(-1-i>>3)):r=i>=0?i<=7?t[0]:t[0]+"+"+(i>>3):t[0]+"-"+(1+(-1-i>>3)),e.code.push(t[2]+"(self.Mem1("+r+") & "+(1<<n)+")?1:0);")}else{e.varsused.bitx=!0,e.varsused.addrx=!0;var o=z(e,t[1],!0);e.code.push("bitx = "+o+"&7;"),e.code.push("if ("+o+">=0) addrx = "+t[0]+" + ("+o+">>3);"),e.code.push("else addrx = "+t[0]+" - (1+((-1-("+o+"))>>3));"),e.code.push(t[2]+"(self.Mem1(addrx) & (1<<bitx))?1:0);")}},79:function(e,t){var n,r,i,o;if(X(t[1]))n=7&(o=4294967295&Number(t[1])),X(t[0])?(r=Number(t[0]),o>=0?r+=o>>3:r-=1+(-1-o>>3)):r=o>=0?o<=7?t[0]:t[0]+"+"+(o>>3):t[0]+"-"+(1+(-1-o>>3)),i=1<<n;else{e.varsused.bitx=!0,e.varsused.addrx=!0;var s=z(e,t[1],!0);e.code.push("bitx = "+s+"&7;"),e.code.push("if ("+s+">=0) addrx = "+t[0]+" + ("+s+">>3);"),e.code.push("else addrx = "+t[0]+" - (1+((-1-("+s+"))>>3));"),r="addrx",i="(1<<bitx)"}X(t[2])?Number(t[2])?e.code.push("self.MemW1("+r+", self.Mem1("+r+") | "+i+");"):e.code.push("self.MemW1("+r+", self.Mem1("+r+") & ~("+i+"));"):(e.code.push("if ("+t[2]+") self.MemW1("+r+", self.Mem1("+r+") | "+i+");"),e.code.push("else self.MemW1("+r+", self.Mem1("+r+") & ~("+i+"));"))},80:function(e,t){var n,r=e.offstack.length;n=r?"self.frame.valstack.length+"+r:"self.frame.valstack.length",M(e,t[0],n)},81:function(e,t){var n;if(X(t[0])){var r=Number(t[0]);n=r<e.offstack.length?e.offstack[e.offstack.length-(r+1)]:"self.frame.valstack[self.frame.valstack.length-"+(r+1-e.offstack.length)+"]"}else U(e),n="self.frame.valstack[self.frame.valstack.length-("+t[0]+"+1)]";M(e,t[1],n)},82:function(e,t){var n,r;e.offstack.length<2&&function(e,t){var n;for(;e.offstack.length<t;)n=Y(e,!0),e.offstack.unshift(n),e.code.push(n+"=self.frame.valstack.pop();")}(e,2),r=e.offstack.length,n=e.offstack[r-1],e.offstack[r-1]=e.offstack[r-2],e.offstack[r-2]=n},83:function(e,t){U(e),e.varsused.ix=!0,e.varsused.pos=!0,e.varsused.roll=!0,e.varsused.vals1=!0;var n=z(e,t[0],!0),r=z(e,t[1],!0);e.code.push("if ("+n+" > 0) {"),e.code.push("if ("+r+" > 0) {"),e.code.push("vals1 = "+r+" % "+n+";"),e.code.push("} else {"),e.code.push("vals1 = "+n+" - (-("+r+")) % "+n+";"),e.code.push("}"),e.code.push("if (vals1) {"),e.code.push("pos = self.frame.valstack.length - "+n+";"),e.code.push("roll = self.frame.valstack.slice(self.frame.valstack.length-vals1, self.frame.valstack.length).concat(self.frame.valstack.slice(pos, self.frame.valstack.length-vals1));"),e.code.push("for (ix=0; ix<"+n+"; ix++) { self.frame.valstack[pos+ix] = roll[ix]; }"),e.code.push("roll = undefined;"),e.code.push("}"),e.code.push("}")},84:function(e,t){if(U(e),X(t[0])){var n,r,i=Number(t[0]);for(n=0;n<i;n++)r=Y(e,!0),e.offstack.push(r),e.code.push(r+"=self.frame.valstack[self.frame.valstack.length-"+(i-n)+"];")}else e.varsused.ix=!0,e.varsused.jx=!0,e.code.push("jx = self.frame.valstack.length-("+t[0]+");"),e.code.push("for (ix=0; ix<"+t[0]+"; ix++) { self.frame.valstack.push(self.frame.valstack[jx+ix]); }")},256:function(e,t){var n="self.do_gestalt(("+t[0]+"),("+t[1]+"))";e.code.push(t[2]+n+");")},257:function(e,t){e.code.push("self.fatal_error('User debugtrap encountered.', "+t[0]+");")},258:function(e,t){e.code.push(t[0]+"self.endmem);")},259:function(e,t){e.code.push("self.change_memsize("+t[0]+",false);"),e.code.push(t[1]+"0);")},272:function(e,t){var n;if(X(t[0])){var r=4294967295&Number(t[0]);n=0==r?"(Math.floor(self.random_func() * 0x10000) | (Math.floor(self.random_func() * 0x10000) << 16)) >>>0":r>0?"Math.floor(self.random_func() * "+r+")":"-Math.floor(self.random_func() * "+-r+")"}else{var i=z(e,t[0],!0),o=Y(e);n=o,e.code.push("if ("+i+" > 0)"),e.code.push(o+" = Math.floor(self.random_func() * "+i+");"),e.code.push("else if ("+i+" < 0)"),e.code.push(o+" = -Math.floor(self.random_func() * -"+i+");"),e.code.push("else"),e.code.push(o+" = (Math.floor(self.random_func() * 0x10000) | (Math.floor(self.random_func() * 0x10000) << 16)) >>>0;")}e.code.push(t[1]+n+");")},273:function(e,t){e.code.push("self.set_random("+t[0]+");")},288:function(e,t){e.code.push("// quashing offstack for quit: "+e.offstack.length),e.offstack.length=0,e.offloc.length=0,e.offlocdirty.length=0,e.code.push("return self.VMStopped;"),e.path_ends=!0},289:function(e,t){e.code.push(t[0]+"self.perform_verify());")},290:function(e,t){e.code.push("// quashing offstack for quit: "+e.offstack.length),e.offstack.length=0,e.offloc.length=0,e.offlocdirty.length=0,e.code.push("self.vm_restart();"),e.code.push("return;"),e.path_ends=!0},291:function(e,t){U(e),e.varsused.ix=!0,j(e,t[1]),e.code.push("ix = self.vm_save("+t[0]+");"),e.code.push("self.pop_callstub(ix ? 0 : 1);"),e.code.push("return;"),e.path_ends=!0},292:function(e,t){U(e),e.code.push("if (self.vm_restore("+t[0]+")) {"),e.code.push("self.pop_callstub((-1)>>>0);"),e.code.push("} else {"),M(e,t[1],"1"),U(e),e.code.push("self.pc = "+e.cp+";"),e.code.push("}"),e.code.push("return;"),e.path_ends=!0},293:function(e,t){U(e),j(e,t[0]),e.code.push("self.vm_saveundo();"),e.code.push("self.pop_callstub(0);"),e.code.push("return;"),e.path_ends=!0},294:function(e,t){U(e),e.code.push("if (self.vm_restoreundo()) {"),e.code.push("self.pop_callstub((-1)>>>0);"),e.code.push("} else {"),M(e,t[0],"1"),U(e),e.code.push("self.pc = "+e.cp+";"),e.code.push("}"),e.code.push("return;"),e.path_ends=!0},295:function(e,t){e.code.push("self.protectstart="+t[0]+";"),e.code.push("self.protectend=self.protectstart+("+t[1]+");"),e.code.push("if (self.protectstart==self.protectend) {"),e.code.push("  self.protectstart=0; self.protectend=0;"),e.code.push("}")},368:function(e,t){e.varsused.maddr=!0,e.varsused.mlen=!0,e.varsused.ix=!0,e.code.push("mlen="+t[0]+";"),e.code.push("maddr="+t[1]+";"),e.code.push("for (ix=0; ix<mlen; ix++, maddr++) self.MemW1(maddr, 0);")},369:function(e,t){e.varsused.msrc=!0,e.varsused.mdest=!0,e.varsused.mlen=!0,e.varsused.ix=!0,e.code.push("mlen="+t[0]+";"),e.code.push("msrc="+t[1]+";"),e.code.push("mdest="+t[2]+";"),e.code.push("if (mdest < msrc) {"),e.code.push("for (ix=0; ix<mlen; ix++, msrc++, mdest++) self.MemW1(mdest, self.Mem1(msrc));"),e.code.push("} else {"),e.code.push("msrc += (mlen-1); mdest += (mlen-1);"),e.code.push("for (ix=0; ix<mlen; ix++, msrc--, mdest--) self.MemW1(mdest, self.Mem1(msrc));"),e.code.push("}")},376:function(e,t){var n="self.heap_malloc("+t[0]+")";e.code.push(t[1]+n+");"),e.code.push("self.assert_heap_valid();")},377:function(e,t){e.code.push("self.heap_free("+t[0]+");"),e.code.push("self.assert_heap_valid();")},384:function(e,t){e.code.push("self.accel_funcnum_map["+t[1]+"] = "+t[0]+";"),e.code.push("self.accel_address_map["+t[1]+"] = self.accel_func_map["+t[0]+"];")},385:function(e,t){e.code.push("if ("+t[0]+" < 9) {"),e.code.push("  self.accel_params["+t[0]+"] = "+t[1]+";"),e.code.push("}")},336:function(e,t){var n="self.linear_search(("+t[0]+"),("+t[1]+"),("+t[2]+"),("+t[3]+"),("+t[4]+"),("+t[5]+"),("+t[6]+"))";e.code.push(t[7]+n+");")},337:function(e,t){var n="self.binary_search(("+t[0]+"),("+t[1]+"),("+t[2]+"),("+t[3]+"),("+t[4]+"),("+t[5]+"),("+t[6]+"))";e.code.push(t[7]+n+");")},338:function(e,t){var n="self.linked_search(("+t[0]+"),("+t[1]+"),("+t[2]+"),("+t[3]+"),("+t[4]+"),("+t[5]+"))";e.code.push(t[6]+n+");")},112:function(e,t){switch(e.curiosys){case 2:if(X(t[0])){var n=255&Number(t[0]);e.code.push("Glk.glk_put_char("+n+");")}else e.code.push("Glk.glk_put_char(("+t[0]+")&0xff);");break;case 1:U(e),e.code.push("self.tempcallargs[0]=(("+t[0]+")&0xff);"),j(e,"0,0"),e.code.push("self.enter_function(self.iosysrock, 1);"),e.code.push("return;"),e.path_ends=!0;break;case 0:e.code.push("// null streamchar "+t[0])}},113:function(e,t){switch(e.curiosys){case 2:var n=z(e,t[0]);if(X(t[0])){var r=Number(n).toString(10);e.code.push("Glk.glk_put_jstring("+O(r)+", true);")}else e.code.push("Glk.glk_put_jstring(("+n+").toString(10), true);");break;case 1:U(e),e.code.push("self.stream_num("+e.cp+","+t[0]+", false, 0);"),e.code.push("return;"),e.path_ends=!0;break;case 0:e.code.push("// null streamnum "+t[0])}},114:function(e,t){U(e),e.code.push("if (self.stream_string("+e.cp+","+t[0]+", 0, 0)) return;")},115:function(e,t){switch(e.curiosys){case 2:if(X(t[0])){var n=Number(t[0]);e.code.push("Glk.glk_put_char_uni("+n+");")}else e.code.push("Glk.glk_put_char_uni("+t[0]+");");break;case 1:U(e),e.code.push("self.tempcallargs[0]=("+t[0]+");"),j(e,"0,0"),e.code.push("self.enter_function(self.iosysrock, 1);"),e.code.push("return;"),e.path_ends=!0;break;case 0:e.code.push("// null streamchar "+t[0])}},320:function(e,t){e.code.push(t[0]+"self.stringtable)")},321:function(e,t){e.code.push("self.set_string_table("+t[0]+");")},328:function(e,t){e.code.push(t[0]+"self.iosysmode)"),e.code.push(t[1]+"self.iosysrock)")},329:function(e,t){if(e.code.push("self.set_iosys("+t[0]+","+t[1]+");"),X(t[0])){var n=Number(t[0]);e.curiosys=n}else U(e),e.code.push("self.pc = "+e.cp+";"),e.code.push("return;"),e.path_ends=!0},400:function(e,t){var n=z(e,t[0]);if(X(t[0])){var r=Number(n);e.code.push(t[1]+_e(r)+");")}else e.code.push(t[1]+"self.encode_float("+n+"));")},401:function(e,t){e.varsused.valf=!0,e.varsused.res=!0,e.code.push("valf = "+H(e,t[0])+";"),e.code.push("if (!("+t[0]+" & 0x80000000)) {"),e.code.push("  if (isNaN(valf) || !isFinite(valf) || (valf > 0x7fffffff))"),e.code.push("    res = 0x7fffffff;"),e.code.push("  else"),e.code.push("    res = Math.floor(valf);"),e.code.push("} else {"),e.code.push("  if (isNaN(valf) || !isFinite(valf) || (valf < -0x80000000))"),e.code.push("    res = -0x80000000;"),e.code.push("  else"),e.code.push("    res = Math.ceil(valf);"),e.code.push("}"),e.code.push(t[1]+"res>>>0);")},402:function(e,t){e.varsused.valf=!0,e.varsused.res=!0,e.code.push("valf = "+H(e,t[0])+";"),e.code.push("if (!("+t[0]+" & 0x80000000)) {"),e.code.push("  if (isNaN(valf) || !isFinite(valf))"),e.code.push("    res = 0x7fffffff;"),e.code.push("  else"),e.code.push("    res = Math.round(valf);"),e.code.push("  if (res > 0x7fffffff) res = 0x7fffffff;"),e.code.push("} else {"),e.code.push("  if (isNaN(valf) || !isFinite(valf))"),e.code.push("    res = -0x80000000;"),e.code.push("  else"),e.code.push("    res = Math.round(valf);"),e.code.push("  if (res < -0x80000000) res = -0x80000000;"),e.code.push("}"),e.code.push(t[1]+"res>>>0);")},408:function(e,t){var n=H(e,t[0]);e.code.push(t[1]+"self.encode_float(Math.ceil("+n+")));")},409:function(e,t){var n=H(e,t[0]);e.code.push(t[1]+"self.encode_float(Math.floor("+n+")));")},416:function(e,t){var n=H(e,t[0]),r=H(e,t[1]);e.code.push(t[2]+"self.encode_float("+n+" + "+r+"));")},417:function(e,t){var n=H(e,t[0]),r=H(e,t[1]);e.code.push(t[2]+"self.encode_float("+n+" - "+r+"));")},418:function(e,t){var n=H(e,t[0]),r=H(e,t[1]);e.code.push(t[2]+"self.encode_float("+n+" * "+r+"));")},419:function(e,t){var n=H(e,t[0]),r=H(e,t[1]);e.code.push(t[2]+"self.encode_float("+n+" / "+r+"));")},420:function(e,t){var n=H(e,t[0],!0),r=H(e,t[1],!0);e.varsused.modv=!0,e.varsused.quov=!0,e.code.push("modv=("+n+" % "+r+");"),e.code.push("quov=self.encode_float(("+n+" - modv) / "+r+");"),e.code.push("if (quov == 0x0 || quov == 0x80000000) {"),e.code.push("  quov = (("+t[0]+" ^ "+t[1]+") & 0x80000000) >>>0;"),e.code.push("}"),e.code.push(t[2]+"self.encode_float(modv));"),e.code.push(t[3]+"quov);")},424:function(e,t){var n=H(e,t[0]);e.code.push(t[1]+"self.encode_float(Math.sqrt("+n+")));")},425:function(e,t){var n=H(e,t[0]);e.code.push(t[1]+"self.encode_float(Math.exp("+n+")));")},426:function(e,t){var n=H(e,t[0]);e.code.push(t[1]+"self.encode_float(Math.log("+n+")));")},427:function(e,t){e.varsused.valf=!0;var n=H(e,t[0],!0),r=H(e,t[1],!0);e.code.push("if ("+t[0]+" == 0x3f800000) {"),e.code.push("  valf = 0x3f800000;"),e.code.push("} else if ("+t[0]+" == 0xbf800000 && ("+t[1]+" == 0xff800000 || "+t[1]+" == 0x7f800000)) {"),e.code.push("  valf = 0x3f800000;"),e.code.push("} else {"),e.code.push("  valf=self.encode_float(Math.pow("+n+", "+r+"));"),e.code.push("}"),e.code.push(t[2]+"valf);")},432:function(e,t){var n=H(e,t[0]);e.code.push(t[1]+"self.encode_float(Math.sin("+n+")));")},433:function(e,t){var n=H(e,t[0]);e.code.push(t[1]+"self.encode_float(Math.cos("+n+")));")},434:function(e,t){var n=H(e,t[0]);e.code.push(t[1]+"self.encode_float(Math.tan("+n+")));")},435:function(e,t){var n=H(e,t[0]);e.code.push(t[1]+"self.encode_float(Math.asin("+n+")));")},436:function(e,t){var n=H(e,t[0]);e.code.push(t[1]+"self.encode_float(Math.acos("+n+")));")},437:function(e,t){var n=H(e,t[0]);e.code.push(t[1]+"self.encode_float(Math.atan("+n+")));")},438:function(e,t){var n=H(e,t[0]),r=H(e,t[1]);e.code.push(t[2]+"self.encode_float(Math.atan2("+n+", "+r+")));")},448:function(e,t){var n,r,i,o;e.varsused.fequal=!0,e.varsused.fdiff=!0,e.code.push("if (("+t[2]+" & 0x7f800000) == 0x7f800000 && ("+t[2]+" & 0x007fffff) != 0) {"),e.code.push("  fequal = 0;"),e.code.push("} else if (("+t[0]+" == 0xff800000 || "+t[0]+" == 0x7f800000) && ("+t[1]+" == 0xff800000 || "+t[1]+" == 0x7f800000)) {"),e.code.push("  fequal = ("+t[0]+" == "+t[1]+");"),e.code.push("} else {"),X(t[2])?o=""+we(2147483647&(n=Number(t[2]))):(n="self.decode_float(("+t[2]+") & 0x7fffffff)",o=Y(e),e.code.push(o+"="+n+";")),r=H(e,t[0]),i=H(e,t[1]),e.code.push("  fdiff = "+i+" - "+r+";"),e.code.push("  fequal = (fdiff <= "+o+" && fdiff >= -("+o+"));"),e.code.push("}"),e.code.push("if (fequal) {"),q(e,t[3]),e.code.push("}")},449:function(e,t){var n,r,i,o;e.varsused.fequal=!0,e.varsused.fdiff=!0,e.code.push("if (("+t[2]+" & 0x7f800000) == 0x7f800000 && ("+t[2]+" & 0x007fffff) != 0) {"),e.code.push("  fequal = 0;"),e.code.push("} else if (("+t[0]+" == 0xff800000 || "+t[0]+" == 0x7f800000) && ("+t[1]+" == 0xff800000 || "+t[1]+" == 0x7f800000)) {"),e.code.push("  fequal = ("+t[0]+" == "+t[1]+");"),e.code.push("} else {"),X(t[2])?o=""+we(2147483647&(n=Number(t[2]))):(n="self.decode_float(("+t[2]+") & 0x7fffffff)",o=Y(e),e.code.push(o+"="+n+";")),r=H(e,t[0]),i=H(e,t[1]),e.code.push("  fdiff = "+i+" - "+r+";"),e.code.push("  fequal = (fdiff <= "+o+" && fdiff >= -("+o+"));"),e.code.push("}"),e.code.push("if (!fequal) {"),q(e,t[3]),e.code.push("}")},450:function(e,t){valf0=H(e,t[0]),valf1=H(e,t[1]),e.code.push("if ("+valf0+" < "+valf1+") {"),q(e,t[2]),e.code.push("}")},451:function(e,t){valf0=H(e,t[0]),valf1=H(e,t[1]),e.code.push("if ("+valf0+" <= "+valf1+") {"),q(e,t[2]),e.code.push("}")},452:function(e,t){valf0=H(e,t[0]),valf1=H(e,t[1]),e.code.push("if ("+valf0+" > "+valf1+") {"),q(e,t[2]),e.code.push("}")},453:function(e,t){valf0=H(e,t[0]),valf1=H(e,t[1]),e.code.push("if ("+valf0+" >= "+valf1+") {"),q(e,t[2]),e.code.push("}")},456:function(e,t){e.code.push("if (("+t[0]+" & 0x7f800000) == 0x7f800000 && ("+t[0]+" & 0x007fffff) != 0) {"),q(e,t[1]),e.code.push("}")},457:function(e,t){e.code.push("if ("+t[0]+" == 0xff800000 || "+t[0]+" == 0x7f800000) {"),q(e,t[1]),e.code.push("}")},304:function(t,n){var r;if((r=!X(n[0])||Glk.call_may_not_return(Number(n[0])))&&(t.code.push("  self.prevpc = "+t.prevcp+";"),t.code.push("  self.pc = "+t.cp+";")),t.code.push("self.tempglkargs.length = "+n[1]+";"),X(n[1])){var i,o=Number(n[1]);for(i=0;i<o;i++)if(t.offstack.length){var s=G(t);t.code.push("self.tempglkargs["+i+"]="+s+";")}else t.code.push("self.tempglkargs["+i+"]=self.frame.valstack.pop();");U(t)}else t.varsused.ix=!0,U(t),t.code.push("for (ix=0; ix<"+n[1]+"; ix++) { self.tempglkargs[ix]=self.frame.valstack.pop(); }");t.varsused.glkret=!0,t.code.push("glkret = GiDispa.get_function("+n[0]+")(self.tempglkargs);"),r&&(t.code.push("if (glkret === Glk.DidNotReturn) {"),t.code.push("  self.resumefuncop = "+function(t){if(0==t.mode)return"null";var n="m"+t.mode;if(null!=t.argsize&&(n=n+"s"+t.argsize),null!=t.addr&&(n=n+"a"+t.addr),e.funcop_cache.key)return"self.funcop_cache."+n;var r={key:n,mode:t.mode,argsize:t.argsize,addr:t.addr};return e.funcop_cache[n]=r,"self.funcop_cache."+n}(n[2])+";"),t.code.push("  self.resumevalue = 0;"),t.code.push("  self.pc = "+t.cp+";"),t.code.push("  self.done_executing = true;"),t.code.push("  return;"),t.code.push("}")),M(t,n[2],"glkret")}};function Y(e,t){for(var n,r=0;;){if(n="_hold"+r,!e.holduse[n])return e.holduse[n]=!t||1,n;r++}}function G(e){var t=e.offstack.pop();if(X(t))return t;var n=e.holduse[t];return(isNaN(n)||!1===n||!0===n)&&C("Offstack variable not marked as stack.",t),0==--n&&(n=!0),e.holduse[t]=n,t}function V(e,t,n,r){var i=e.offloc[t];if(i&&"_"===i[0]){var o=e.holduse[i];0==--o&&(o=!0),e.holduse[i]=o}if(void 0===n)return e.offloc[t]=void 0,void(e.offlocdirty[t]=!1);if(e.offloc[t]=n,e.offlocdirty[t]=!0,r){var s=n;(o=e.holduse[s])&&!0!==o?o++:o=1,e.holduse[s]=o}}function X(e){return"0"===e[0]}function $(e,t,n,r){var i,o,s,a,u,p,d;for(r.desttype=0,r.numops=n.numops,i=t,t+=n.numops+1>>1,o=0;o<n.numops;o++){0==(1&o)?a=15&(s=c(i)):(a=s>>4&15,i++);var h=n.formlist[o];if("L"!=h)if("E"!=h)if("S"!=h)if("F"!=h)if("C"!=h)C("Unknown operand type.",h);else{switch(a){case 8:r[o]="3,0";continue;case 0:r[o]="0,0";continue}if(a>=9&&a<=11){9==a?(p=c(t),t++):10==a?(p=l(t),t+=2):11==a&&(p=f(t),t+=4),r[o]="2,"+p;continue}switch(a){case 15:p=f(t)+Oe,t+=4;break;case 14:p=l(t)+Oe,t+=2;break;case 13:p=c(t)+Oe,t++;break;case 7:p=f(t),t+=4;break;case 6:p=l(t),t+=2;break;case 5:p=c(t),t++;break;default:C("Unknown addressing mode in store operand.")}r[o]="1,"+p}else{var y=r.func_store;switch(a){case 8:y.mode=8,y.argsize=n.argsize,r[o]=y;continue;case 0:y.mode=0,y.argsize=n.argsize,r[o]=y;continue}if(a>=9&&a<=11){9==a?(p=c(t),t++):10==a?(p=l(t),t+=2):11==a&&(p=f(t),t+=4),y.mode=11,y.addr=p,y.argsize=n.argsize,r[o]=y;continue}switch(a){case 15:p=f(t)+Oe,t+=4;break;case 14:p=l(t)+Oe,t+=2;break;case 13:p=c(t)+Oe,t++;break;case 7:p=f(t),t+=4;break;case 6:p=l(t),t+=2;break;case 5:p=c(t),t++;break;default:C("Unknown addressing mode in store operand.")}y.mode=15,y.addr=p,y.argsize=n.argsize,r[o]=y}else{switch(a){case 8:d=Y(e,!0),e.offstack.push(d),r[o]=d+"=(";continue;case 0:r[o]="(";continue}if(a>=9&&a<=11){9==a?(p=c(t),t++):10==a?(p=l(t),t+=2):11==a&&(p=f(t),t+=4),4==n.argsize?(V(e,p,d=Y(e,!0),!1),r[o]=d+"=("):2==n.argsize?(V(e,p,void 0),r[o]="self.frame.locals["+p+"]=(0xffff &"):(V(e,p,void 0),r[o]="self.frame.locals["+p+"]=(0xff &");continue}switch(a){case 15:p=f(t)+Oe,t+=4;break;case 14:p=l(t)+Oe,t+=2;break;case 13:p=c(t)+Oe,t++;break;case 7:p=f(t),t+=4;break;case 6:p=l(t),t+=2;break;case 5:p=c(t),t++;break;default:C("Unknown addressing mode in store operand.")}u=4==n.argsize?"self.MemW4("+p+",":2==n.argsize?"self.MemW2("+p+",":"self.MemW1("+p+",",r[o]=u}else{switch(a){case 8:e.offstack.length?r[o]=G(e):r[o]="self.frame.valstack.pop()";continue;case 0:r[o]="0";continue;case 1:u=b(t),t++,r[o]=u;continue;case 2:u=E(t),t+=2,r[o]=u;continue;case 3:u=k(t),t+=4,r[o]=u;continue}if(a>=9&&a<=11){if(9==a?(p=c(t),t++):10==a?(p=l(t),t+=2):11==a&&(p=f(t),t+=4),void 0!==e.offloc[p]){r[o]=e.offloc[p];continue}u=4==n.argsize?"self.frame.locals["+p+"]":2==n.argsize?"self.frame.locals["+p+"] & 0xffff":"self.frame.locals["+p+"] & 0xff",d=Y(e,!0),e.code.push(d+"=("+u+");"),e.offloc[p]=d,e.offlocdirty[p]=!1,r[o]=d;continue}switch(a){case 15:p=f(t)+Oe,t+=4;break;case 14:p=l(t)+Oe,t+=2;break;case 13:p=c(t)+Oe,t++;break;case 7:p=f(t),t+=4;break;case 6:p=l(t),t+=2;break;case 5:p=c(t),t++;break;default:C("Unknown addressing mode in load operand.")}u=4==n.argsize?"self.Mem4("+p+")":2==n.argsize?"self.Mem2("+p+")":"self.Mem1("+p+")",r[o]=u}else{switch(a){case 8:e.offstack.length?r[o]=G(e):(d=Y(e),e.code.push(d+"=self.frame.valstack.pop();"),r[o]=d);continue;case 0:r[o]="0";continue;case 1:u=b(t),t++,r[o]=u;continue;case 2:u=E(t),t+=2,r[o]=u;continue;case 3:u=k(t),t+=4,r[o]=u;continue}if(a>=9&&a<=11){if(9==a?(p=c(t),t++):10==a?(p=l(t),t+=2):11==a&&(p=f(t),t+=4),void 0!==e.offloc[p]){r[o]=e.offloc[p];continue}u=4==n.argsize?"self.frame.locals["+p+"]":2==n.argsize?"self.frame.locals["+p+"] & 0xffff":"self.frame.locals["+p+"] & 0xff",d=Y(e,!0),e.code.push(d+"=("+u+");"),e.offloc[p]=d,e.offlocdirty[p]=!1,r[o]=d;continue}switch(a){case 15:p=f(t)+Oe,t+=4;break;case 14:p=l(t)+Oe,t+=2;break;case 13:p=c(t)+Oe,t++;break;case 7:p=f(t),t+=4;break;case 6:p=l(t),t+=2;break;case 5:p=c(t),t++;break;default:C("Unknown addressing mode in load operand.")}u=4==n.argsize?"self.Mem4("+p+")":2==n.argsize?"self.Mem2("+p+")":"self.Mem1("+p+")",d=Y(e),e.code.push(d+"=("+u+");"),r[o]=d}}return t}function Z(e,t,n){var r,i,o,s=t,a={vmfunc:e,cp:null,prevcp:null,curiosys:n,code:[],holduse:{},varsused:{},offstack:[],offloc:[],offlocdirty:[],path_ends:!1},u={func_store:{}};for(a.code.push("");!a.path_ends;){a.prevcp=s,i=s,void 0===(r=c(s))&&C("Tried to compile nonexistent address",s),s++,128&r&&(64&r?(r=256*(r=256*(r=256*(r&=63)|c(s))|c(++s))|c(++s),s++):(r=256*(r&=127)|c(s),s++)),a.code.push("// "+i.toString(16)+": opcode "+r.toString(16));var l=D[r];l||C("Encountered unknown opcode.",r),s=$(a,s,l,u),a.cp=s;var f=W[r];for(o in f||C("Encountered unhandled opcode.",r),f(a,u),a.holduse)!0===a.holduse[o]&&(a.holduse[o]=!1);a.offstack.length&&a.code.push("// offstack: "+a.offstack.join(",")),a.offloc.length&&a.code.push("// offloc: "+a.offloc.join(",")+"; dirty: "+a.offlocdirty.join(",")),e.pathaddrs[s]&&!a.path_ends&&(a.code.push("// reached jump-in point"),a.code.push("self.pc="+s+";"),U(a),a.code.push("return;"),a.path_ends=!0)}a.offstack.length&&C("Path compilation ended with nonempty offstack.",a.offstack.length),a.offloc.length&&C("Path compilation ended with nonempty offloc.",a.offloc.length);var p=[];for(o in a.holduse)p.push(o);for(o in a.varsused)p.push(o);return p.length&&(a.code[0]="var "+p.join(",")+";"),N(a.code.join("\n"),"_func_path_"+t)}function K(t,n){var r;He++;var i=ie[t];if(void 0!==i)return qe++,void J(i(n,e.tempcallargs));var o=ke[t];void 0===o&&(o=function(e){var t=e,n=c(t);192!=n&&193!=n&&C(n>=192&&n<=223?"Call to unknown type of function.":"Call to non-function.",t);for(var r=[],i=++t;;){var o=c(t),s=c(++t);if(t++,0==o)break;1!=o&&2!=o&&4!=o&&C("Invalid local variable size in function header.",o),r.push({size:o,count:s})}for(var a=be.slice(i,t);a.length%4;)a.push(0);return new A(e,t,r,a)}(t),t<Oe&&(ke[t]=o)),e.pc=o.startpc;var s=new I(o);if(s.depth=Ee.length,0==Ee.length?s.framestart=0:s.framestart=e.frame.framestart+e.frame.framelen+4*e.frame.valstack.length,Ee.push(s),e.frame=s,192==o.functype){for(r=n-1;r>=0;r--)e.frame.valstack.push(e.tempcallargs[r]);e.frame.valstack.push(n)}else for(r=0;r<n;r++){var a=o.localsindex[r];if(void 0===a)break;4==a.size?e.frame.locals[a.pos]=e.tempcallargs[r]:2==a.size?e.frame.locals[a.pos]=65535&e.tempcallargs[r]:1==a.size&&(e.frame.locals[a.pos]=255&e.tempcallargs[r])}}function J(t){var n,r;isNaN(t)&&C("Function returned undefined value.");var i=e.frame.valstack,o=i.length,s=i[o-1];switch(s!=e.frame.framestart&&(i.length-=1,C("Call stub frameptr ("+s+") does not match frame ("+e.frame.framestart+")")),e.pc=i[o-2],n=i[o-3],r=i[o-4],i.length-=4,r){case 0:return;case 1:return void y(n,t);case 2:return void(e.frame.locals[n]=t);case 3:return void e.frame.valstack.push(t);case 17:return void C("String-terminator call stub at end of function call.");case 16:return void ye(0,e.pc,225,n);case 18:return void he(0,e.pc,!0,n);case 19:return void ye(0,e.pc,224,n);case 20:return void ye(0,e.pc,226,n);default:C("Unrecognized desttype in callstub.",r)}}function Q(t){0==t?e.random_func=Math.random:(!function(e){var t,n,r,i,o;void 0===ne&&(ne=Array(55));for(ne[54]=e,ee=0,te=31,r=1,t=0;t<55;t++)ne[n=21*t%55]=r,r=e-r>>>0,e=ne[n];for(o=0;o<4;o++)for(t=0;t<55;t++)i=ne[t]-ne[(1+t+30)%55],ne[t]=i>>>0}(t),e.random_func=re)}e.enter_function=K,e.leave_function=function(){var t=e.frame.depth;if(Ee.pop(),0==Ee.length)return e.frame=null,!0;e.frame=Ee[Ee.length-1],e.frame.depth!=t-1&&C("Stack inconsistent after function exit.")},e.pop_stack_to=function(t){for(;Ee.length&&Ee[Ee.length-1].framestart>t;)Ee.pop();0==Ee.length&&C("Stack evaporated during throw."),e.frame=Ee[Ee.length-1],(t-=e.frame.framestart+e.frame.framelen)<0&&C("Attempted to throw below the frame value stack."),3&t&&C("Attempted to throw to an unaligned address."),(t>>>=2)>e.frame.valstack.length&&C("Attempted to throw beyond the frame value stack."),e.frame.valstack.length=t},e.pop_callstub=J,e.store_operand=function(t,n,r){switch(t){case 0:return;case 1:return void y(n,r);case 2:return void(e.frame.locals[n]=r);case 3:return void e.frame.valstack.push(r);default:C("Unrecognized desttype in callstub.",t)}},e.set_random=Q;var ee,te,ne=void 0;function re(){return te=(te+1)%55,ne[ee=(ee+1)%55]=ne[ee]-ne[te]>>>0,ne[ee]/4294967296}var ie={},oe={};e.accel_address_map=ie,e.accel_funcnum_map=oe;var se=[0,0,0,0,0,0,0,0,0];e.accel_params=se;var ae={1:function(t,n){if(t<1)return 0;var r=n[0];if(r<36)return 0;if(r>=e.endmem)return 0;var i=c(r);return i>=224?3:i>=192?2:i>=112&&i<=127&&r>=Oe?1:0},2:function(e,t){var n=e>0?t[0]:0,r=e>1?t[1]:0;if(1!=ae[1](e,t))return Glk.glk_put_jstring('\n[** Programming error: tried to find the "." of (something) **]\n'),0;var i=f(n+16);if(!i)return 0;var o=f(i);return ve(r,2,i+=4,10,o,0,0)},3:function(e,t){var n=le(e>0?t[0]:0,e>1?t[1]:0);return 0==n?0:f(n+4)},4:function(e,t){var n=le(e>0?t[0]:0,e>1?t[1]:0);return 0==n?0:4*l(n+2)},5:function(e,t){var n,r,i,o,s,a=e>0?t[0]:0,u=e>1?t[1]:0;if(3==(n=ae[1](e,t)))return u==se[5]?1:0;if(2==n)return u==se[4]?1:0;if(1!=n)return 0;if(u==se[2])return ce(a)?1:a==se[2]?1:a==se[5]?1:a==se[4]?1:a==se[3]?1:0;if(u==se[3])return ce(a)?0:a==se[2]?0:a==se[5]?0:a==se[4]?0:a==se[3]?0:1;if(u==se[5]||u==se[4])return 0;if(!ce(u))return Glk.glk_put_jstring("\n[** Programming error: tried to apply 'ofclass' with non-class **]\n"),0;if(0==(r=le(a,2)))return 0;if(0==(i=f(r+4)))return 0;for(o=l(r+2),s=0;s<o;s++)if(f(i+4*s)==u)return 1;return 0},6:function(e,t){var n,r=e>1?t[1]:0;return 0==(n=ae[3](e,t))?r>0&&r<se[1]?f(se[8]+4*r):(Glk.glk_put_jstring("\n[** Programming error: tried to read (something) **]\n"),0):f(n)},7:function(e,t){var n=e>0?t[0]:0,r=e>1?t[1]:0,i=se[1],o=ae[1](e,t);return 3==o?r==i+6?1:r==i+7?1:0:2==o?r==i+5?1:0:1!=o?0:r>=i&&r<i+8&&ce(n)?1:ae[3](e,t)?1:0},8:function(e,t){var n=e>0?t[0]:0,r=e>1?t[1]:0;if(1!=ae[1](e,t))return Glk.glk_put_jstring('\n[** Programming error: tried to find the "." of (something) **]\n'),0;var i=f(n+4*(3+(se[7]>>2)));if(!i)return 0;var o=f(i);return ve(r,2,i+=4,10,o,0,0)},9:function(e,t){var n=fe(e>0?t[0]:0,e>1?t[1]:0);return 0==n?0:f(n+4)},10:function(e,t){var n=fe(e>0?t[0]:0,e>1?t[1]:0);return 0==n?0:4*l(n+2)},11:function(e,t){var n,r,i,o,s,a=e>0?t[0]:0,u=e>1?t[1]:0;if(3==(n=ae[1](e,t)))return u==se[5]?1:0;if(2==n)return u==se[4]?1:0;if(1!=n)return 0;if(u==se[2])return ce(a)?1:a==se[2]?1:a==se[5]?1:a==se[4]?1:a==se[3]?1:0;if(u==se[3])return ce(a)?0:a==se[2]?0:a==se[5]?0:a==se[4]?0:a==se[3]?0:1;if(u==se[5]||u==se[4])return 0;if(!ce(u))return Glk.glk_put_jstring("\n[** Programming error: tried to apply 'ofclass' with non-class **]\n"),0;if(0==(r=fe(a,2)))return 0;if(0==(i=f(r+4)))return 0;for(o=l(r+2),s=0;s<o;s++)if(f(i+4*s)==u)return 1;return 0},12:function(e,t){var n,r=e>1?t[1]:0;return 0==(n=ae[9](e,t))?r>0&&r<se[1]?f(se[8]+4*r):(Glk.glk_put_jstring("\n[** Programming error: tried to read (something) **]\n"),0):f(n)},13:function(e,t){var n=e>0?t[0]:0,r=e>1?t[1]:0,i=se[1],o=ae[1](e,t);return 3==o?r==i+6?1:r==i+7?1:0:2==o?r==i+5?1:0:1!=o?0:r>=i&&r<i+8&&ce(n)?1:ae[9](e,t)?1:0}};e.accel_func_map=ae;var ue=[0,0];function ce(e){return f(e+13+se[7])==se[2]}function le(e,t){var n,r=0;if(4294901760&t){if(r=f(se[0]+4*(65535&t)),ue[0]=e,ue[1]=r,0==ae[5](2,ue))return 0;t>>=16,e=r}return ue[0]=e,ue[1]=t,0==(n=ae[2](2,ue))?0:ce(e)&&0==r&&(t<se[1]||t>=se[1]+8)?0:f(se[6])!=e&&1&c(n+9)?0:n}function fe(e,t){var n,r=0;if(4294901760&t){if(r=f(se[0]+4*(65535&t)),ue[0]=e,ue[1]=r,0==ae[11](2,ue))return 0;t>>=16,e=r}return ue[0]=e,ue[1]=t,0==(n=ae[8](2,ue))?0:ce(e)&&0==r&&(t<se[1]||t>=se[1]+8)?0:f(se[6])!=e&&1&c(n+9)?0:n}function pe(t){if(e.stringtable!=t&&(xe=void 0,Te=void 0,e.stringtable=t,0!=e.stringtable)){var n=Se[e.stringtable];if(void 0===n){var r=void 0,i=f(e.stringtable),o=f(e.stringtable+8);if(e.stringtable+i<=Oe){var s=Array(1);!function e(t,n,r,i){var o,s,a;var u;s=c(n);if(0==s&&4==r)return(a=Array(16)).type=0,a.depth=4,t[i]=a,void e(a,n,0,0);if(0==s){var l=f(n+1),p=f(n+5);return e(t,l,r+1,i),void e(t,p,r+1,i|1<<r)}n++;a={};a.type=s;a.depth=r;switch(s){case 2:a.value=c(n),a.cchar=S(a.value);break;case 4:a.value=f(n),a.cchar=S(a.value);break;case 3:case 5:a.addr=n;break;case 8:case 9:a.addr=f(n);break;case 10:case 11:a.addr=n;break;case 1:break;default:C("Unknown node type in string table.",s)}u=1<<r;for(o=i;o<16;o+=u)t[o]=a}(s,o,4,0),void 0===(r=s[0])&&C("Failed to create decoding tree.")}n=new R(e.stringtable,r),Se[e.stringtable]=n}xe=n.decoding_tree,Te=n.vmstring_tables[e.iosysmode]}}function de(t,n){switch(t){case 0:n=0;break;case 1:break;case 2:n=0;break;default:t=0,n=0}e.iosysmode=t,e.iosysrock=n;var r=Se[e.stringtable];Te=void 0===r?void 0:r.vmstring_tables[e.iosysmode]}function he(t,n,r,i){var o=(4294967295&n).toString(10);switch(e.iosysmode){case 2:i&&(o=o.slice(i)),Glk.glk_put_jstring(o,!0);break;case 1:if(r||(e.frame.valstack.push(17,0,t,e.frame.framestart),r=!0),i<o.length){var s=o.charCodeAt(i);return e.frame.valstack.push(18,i+1,n,e.frame.framestart),e.tempcallargs[0]=s,K(e.iosysrock,1),!0}}r&&(e.frame.valstack.pop()!=e.frame.framestart&&C("Call stub frameptr does not match frame."),e.pc=e.frame.valstack.pop(),e.frame.valstack.pop(),17!=e.frame.valstack.pop()&&C("String-on-string call stub while printing number."))}function ye(t,n,r,i){for(var o,s,a,u,c,l=0!=r;;){if(s=void 0,o=0==r?n:n+"/"+r+"/"+i,void 0!==Te&&n<Oe?void 0===(s=Te[o])&&(s=ge(e.iosysmode,n,r,i),Te[o]=s,Xe++,Ve++):(s=ge(e.iosysmode,n,r,i),Xe++),s instanceof Function){if((a=s(e,t,l))instanceof Array){l=!0,n=a[0],r=a[1],i=a[2];continue}if(a)return!0}else if(Glk.glk_put_jstring(s),!l)return!1;if(e.frame.valstack.pop()!=e.frame.framestart&&C("Call stub frameptr does not match frame."),e.pc=e.frame.valstack.pop(),c=e.frame.valstack.pop(),17==(u=e.frame.valstack.pop()))return!0;16==u?(l=!0,i=c,r=225,n=e.pc):C("Function-terminator call stub at end of string.")}}function ge(t,n,r,i){var o,s=n,a=i,u=void 0;s||C("Called compile_string with null address.");var l={startaddr:n,startbitnum:i,buffer:[],code:[]};if(0==r?(226==(o=c(s))?s+=4:s++,a=0):o=r,225==o)if(xe){var p,d,h,y,g,m,v=!1;for(p=c(s),a&&(p>>=a),d=8-a,h=!1,xe instanceof Array||(v=!0),g=xe;!v;){if(d<4)p|=c(s+1)<<d,d+=8,h=!0;if(d-=(m=g[15&p]).depth,p>>=m.depth,(a+=m.depth)>=8)if(s+=1,a-=8,h)h=!1;else p|=c(s)<<d,d+=8;if(m instanceof Array)g=m;else switch(m.type){case 1:v=!0;break;case 2:case 4:switch(t){case 2:l.buffer.push(m.cchar);break;case 1:B(l),P(l),j(l,"0x10,"+a,s),l.code.push("self.tempcallargs[0]="+m.value+";"),l.code.push("self.enter_function(self.iosysrock, 1);"),u=!0,v=!0}g=xe;break;case 3:switch(t){case 2:for(y=m.addr;0!=(x=c(y));)l.buffer.push(S(x)),y++;break;case 1:B(l),P(l),j(l,"0x10,"+a,s),u="["+m.addr+", 0xE0, 0]",v=!0}g=xe;break;case 5:switch(t){case 2:for(y=m.addr;0!=(x=f(y));)l.buffer.push(S(x)),y+=4;break;case 1:B(l),P(l),j(l,"0x10,"+a,s),u="["+m.addr+", 0xE2, 0]",v=!0}g=xe;break;case 8:case 9:case 10:case 11:B(l),P(l),l.code.push("var otype, retval;"),l.code.push("var oaddr = "+m.addr+";"),m.type>=9&&l.code.push("oaddr = self.Mem4(oaddr);"),11==m.type&&l.code.push("oaddr = self.Mem4(oaddr);"),l.code.push("otype = self.Mem1(oaddr);"),u="retval",v=!0,j(l,"0x10,"+a,s),l.code.push("if (otype >= 0xE0 && otype <= 0xFF) {"),l.code.push("retval = [oaddr, 0, 0];"),l.code.push("}"),l.code.push("else if (otype >= 0xC0 && otype <= 0xDF) {");var w=0;if(10==m.type||11==m.type){w=f(m.addr+4);for(var _=0;_<w;_++)l.code.push("self.tempcallargs["+_+"]="+f(m.addr+8+4*_)+";")}l.code.push("self.enter_function(oaddr, "+w+");"),l.code.push("retval = true;"),l.code.push("}"),l.code.push("else {"),l.code.push("self.fatal_error('Unknown object while decoding string indirect reference.', otype);"),l.code.push("}");break;default:C("Unknown entity in string decoding (cached).")}}}else{var b,E,k;v=!1;for(e.stringtable||C("Attempted to print a compressed string with no table set."),E=c(s),a&&(E>>=a),b=f(e.stringtable+8);!v;)switch(k=c(b),b++,k){case 0:b=f(1&E?b+4:b+0),7==a?(a=0,E=c(++s)):(a++,E>>=1);break;case 1:u=!1,v=!0;break;case 2:switch(x=c(b),t){case 2:l.buffer.push(S(x));break;case 1:B(l),P(l),j(l,"0x10,"+a,s),l.code.push("self.tempcallargs[0]="+x+";"),l.code.push("self.enter_function(self.iosysrock, 1);"),u=!0,v=!0}b=f(e.stringtable+8);break;case 4:switch(x=f(b),t){case 2:l.buffer.push(S(x));break;case 1:B(l),P(l),j(l,"0x10,"+a,s),l.code.push("self.tempcallargs[0]="+x+";"),l.code.push("self.enter_function(self.iosysrock, 1);"),u=!0,v=!0}b=f(e.stringtable+8);break;case 3:switch(t){case 2:for(;0!=(x=c(b));)l.buffer.push(S(x)),b++;break;case 1:B(l),P(l),j(l,"0x10,"+a,s),u="["+b+", 0xE0, 0]",v=!0}b=f(e.stringtable+8);break;case 5:switch(t){case 2:for(;0!=(x=f(b));)l.buffer.push(S(x)),b+=4;break;case 1:B(l),P(l),j(l,"0x10,"+a,s),u="["+b+", 0xE2, 0]",v=!0}b=f(e.stringtable+8);break;case 8:case 9:case 10:case 11:B(l),P(l),l.code.push("var otype, retval;"),l.code.push("var oaddr = "+f(b)+";"),9!=k&&11!=k||l.code.push("oaddr = self.Mem4(oaddr);"),l.code.push("otype = self.Mem1(oaddr);"),u="retval",v=!0,j(l,"0x10,"+a,s),l.code.push("if (otype >= 0xE0 && otype <= 0xFF) {"),l.code.push("retval = [oaddr, 0, 0];"),l.code.push("}"),l.code.push("else if (otype >= 0xC0 && otype <= 0xDF) {");w=0;if(10==k||11==k){w=f(b+4);for(_=0;_<w;_++)l.code.push("self.tempcallargs["+_+"]="+f(b+8+4*_)+";")}l.code.push("self.enter_function(oaddr, "+w+");"),l.code.push("retval = true;"),l.code.push("}"),l.code.push("else {"),l.code.push("self.fatal_error('Unknown object while decoding string indirect reference.', otype);"),l.code.push("}");break;default:C("Unknown entity in string decoding.",k)}}else if(224==o){switch(t){case 2:for(;x=c(s),s++,0!=x;)l.buffer.push(S(x));break;case 1:B(l),P(l),x=c(s),s++,0!=x?(j(l,"0x13,0",s),l.code.push("self.tempcallargs[0]="+x+";"),l.code.push("self.enter_function(self.iosysrock, 1);"),u=!0):u="false"}}else if(226==o){var x;switch(t){case 2:for(;x=f(s),s+=4,0!=x;)l.buffer.push(S(x));break;case 1:B(l),P(l),x=f(s),s+=4,0!=x?(j(l,"0x14,0",s),l.code.push("self.tempcallargs[0]="+x+";"),l.code.push("self.enter_function(self.iosysrock, 1);"),u=!0):u="false"}}else C(o>=224&&o<=255?"Attempt to print unknown type of string.":"Attempt to print non-string.");return u?(B(l),l.code.push("return "+u+";"),N(l.code.join("\n"),"_func_str_"+n,"nextcp","substring")):(l.code.length>1&&C("Simple-case string generated code."),l.buffer.join(""))}function me(e,t,n){if(1&n)return p(e,t);switch(t){case 4:return[e>>24&255,e>>16&255,e>>8&255,255&e];case 2:return[e>>8&255,255&e];case 1:return[255&e];default:C("Direct search key must hold one, two, or four bytes.")}}function ve(e,t,n,r,i,o,s){var a,u,l,f,p,d,h,y,g=0!=(4&s),m=me(e,t,s);for(u=0,a=i;u<a;){for(p=0,l=n+(f=a+u>>1)*r,d=0;!p&&d<t;d++)(h=c(l+o+d))<(y=m[d])?p=-1:h>y&&(p=1);if(!p)return g?f:l;p<0?u=f+1:a=f}return g?4294967295:0}function we(e){var t,n,r;return 2147483648&e?(t=!0,e&=2147483647):t=!1,0==e?t?-0:0:2139095040==(2139095040&e)?0==(8388607&e)?t?-1/0:1/0:NaN:(n=(r=e>>23&255)?(8388607&e|8388608)/8388608*Math.pow(2,r-127):(8388607&e)/8388608*Math.pow(2,-126),t?-n:n)}function _e(e){var t,n,r,i,o;return isNaN(e)?2139095041:isFinite(e)?0==e?1/e<0?2147483648:0:(e<0?(o=!0,t=-e):(o=!1,t=e),i=Math.floor(Math.log(t)/Math.log(2)),r=t/Math.pow(2,i),i>=128?o?4286578688:2139095040:(i<-126?(r*=Math.pow(2,126+i),i=0):0==i&&0==r||(i+=127,r-=1),(n=(r*=8388608)+.4999999999999999<<0)>=8388608&&(n=0,++i>=255)?o?4286578688:2139095040:o?(2147483648|i<<23|n)>>>0:i<<23|n)):e<0?4286578688:2139095040}e.set_string_table=pe,e.set_iosys=de,e.stream_num=he,e.stream_string=ye,e.do_gestalt=function(e,t){switch(e){case 0:return 196866;case 1:return 131334;case 2:case 3:return 1;case 4:switch(t){case 0:case 1:case 2:return 1;default:return 0}break;case 5:case 6:case 7:return 1;case 8:return Fe;case 9:return 1;case 10:return ae[t]?1:0;case 11:return 1;default:return 0}},e.linear_search=function(e,t,n,r,i,o,s){var a,u,c,l,f=0!=(4&s),d=0!=(2&s),h=me(e,t,s);for(u=0;u<i;u++,n+=r){for(c=!0,l=p(n+o,t),a=0;c&&a<t;a++)l[a]!=h[a]&&(c=!1);if(c)return f?u:n;if(d){for(c=!0,l=p(n+o,t),a=0;c&&a<t;a++)0!=l[a]&&(c=!1);if(c)break}}return f?4294967295:0},e.binary_search=ve,e.linked_search=function(e,t,n,r,i,o){for(var s,a,u=0!=(2&o),l=me(e,t,o);0!=n;){for(a=!0,s=0;a&&s<t;s++)c(n+r+s)!=l[s]&&(a=!1);if(a)return n;if(u){for(a=!0,s=0;a&&s<t;s++)0!=c(n+r+s)&&(a=!1);if(a)break}n=f(n+i)}return 0},e.decode_float=we,e.encode_float=_e;var be,Ee,ke,Se,xe,Te,Oe,Ce,Ne,Ae,Ie,Le,Fe,Re,De,Me=null,je=null,Pe=null,Ue=null,Be=null;e.frame=null,e.vm_started=!1,e.vm_stopped=!1,e.tempcallargs=null,e.tempglkargs=null,e.done_executing=null,e.random_func=null,e.pc=null,e.stringtable=null,e.endmem=null,e.protectstart=null,e.protectend=null,e.iosysmode=null,e.iosysrock=null,e.prevpc=null,e.resumefuncop=null,e.resumevalue=null;var ze=0,He=0,qe=0,We=0,Ye=0,Ge=0,Ve=0,Xe=0;function $e(){tt();var t=Qe();be=null,be=Me.slice(0,Ce),e.endmem=be.length,Je(Ne,!1),et(t),Ee=[],e.frame=null,e.pc=0,e.prevpc=0,e.iosysmode=0,e.iosysrock=0,pe(Ie),K(Ae,0)}function Ze(e){bytes=[];for(var t=0;t<e.length;t++){var n=e[t].key,r=e[t].chunk;4!=n.length&&C("Bad chunk ID (must be exactly 4 chars): "+n),null==r&&C("Missing chunk data: "+n),g(bytes,n),m(bytes,r.length),bytes=bytes.concat(r),1&bytes.length&&bytes.push(0)}return bytes}function Ke(e){chunks={};for(var t=0;t<e.length;){if(t+8>e.length)return void n("IFF chunk header is truncated");var r=_(e,t,4),i=s(e,t+4);if((t+=8)+i>e.length)return void n(r+" chunk is truncated ("+i+" bytes needed, "+(e.length-t)+" available");chunks[r]=e.slice(t,t+i),1&(t+=i)&&(t+=1)}return chunks}function Je(t,n){var r;if(t!=e.endmem){if(!n&&nt()&&C("Cannot resize Glulx memory space while heap is active."),t<Ne&&C("Cannot resize Glulx memory space smaller than it started."),255&t&&C("Can only resize Glulx memory space to a 256-byte boundary."),be.length=t,t>e.endmem)for(r=e.endmem;r<t;r++)be[r]=0;e.endmem=t}}function Qe(){if(e.protectstart>=e.protectend)return null;for(var t=e.protectend-e.protectstart,n={start:e.protectstart,end:e.protectend,len:t},r=be.slice(e.protectstart,e.protectend);r.length<t;)r.push(0);return n.mem=r,n}function et(t){if(t){var n,r,i=t.mem,o=t.start,s=t.end;for(s>e.endmem&&(s=e.endmem),n=0,r=o;r<s;n++,r++)be[r]=i[n]}}function tt(){Fe=0,Re=[],De=[]}function nt(){return Re.length>0}function rt(e,t){this.addr=e,this.size=t,this.end=e+t}function it(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>1;e[i].addr<t?n=i+1:r=i}return n}function ot(){if(!nt())return 0!=Fe&&C("Heap inconsistency: heapstart nonzero"),Re.length>0&&C("Heap inconsistency: usedlist nonempty"),void(De.length>0&&C("Heap inconsistency: usedlist nonempty"));0==Fe&&C("Heap inconsistency: heapstart is zero");for(var t=Fe,n=0,r=0;n<Re.length||r<De.length;){var i=Re[n],o=De[r];i&&i.addr==t?(t+=i.size,n++):o&&o.addr==t?(t+=o.size,r++):C("Heap inconsistency: no block at address "+t)}t!=e.endmem&&C("Heap inconsistency: overrun at end of heap")}e.vm_restart=$e,e.vm_save=function(t){be.length!=e.endmem&&C("Memory length was incorrect before save."),2!=e.iosysmode&&C("Streams are only available in Glk I/O system.");var n=GiDispa.class_obj_from_id("stream",t);if(!n)return!1;chunks=[],chunks.push({key:"IFhd",chunk:Me.slice(0,128)});for(var r,i,o,s=be.slice(Oe),a=Oe;a<Me.length;a++)s[a-Oe]^=Me[a];(s=function(e){result=[];for(var t=0;t<e.length;){for(var n=0;t<e.length&&0==e[t]&&n<=255;)n++,t++;for(n>0&&(result.push(0),result.push(n-1));t<e.length&&0!=e[t];)result.push(e[t]),t++}return result}(s)).splice(0,0,0,0,0,0),r=s,i=0,o=e.endmem,r[i]=o>>24&255,r[i+1]=o>>16&255,r[i+2]=o>>8&255,r[i+3]=255&o,chunks.push({key:"CMem",chunk:s});var u=[];for(chunks.push({key:"Stks",chunk:u}),a=0;a<Ee.length;a++)L(Ee[a],u);if(nt()){var c=[];chunks.push({key:"MAll",chunk:c}),m(c,Fe),m(c,Re.length);for(a=0;a<Re.length;a++)m(c,Re[a].addr),m(c,Re[a].size)}var l=[];g(l,"IFZS"),l=l.concat(Ze(chunks));var f=Ze([{key:"FORM",chunk:l}]);return Glk.glk_put_buffer_stream(n,f),!0},e.vm_restore=function(t){2!=e.iosysmode&&C("Streams are only available in Glk I/O system.");var r=GiDispa.class_obj_from_id("stream",t);if(!r)return!1;for(var i=new Array(0),o=new Array(1024),a=1;a>0;)a=Glk.glk_get_buffer_stream(r,o),i=i.concat(o.slice(0,a));if(!(i=Ke(i)))return n("vm_restore failed: file is not Quetzal"),!1;if(!(i=i.FORM)||"IFZS"!=_(i,0,4))return n("vm_restore failed: file doesn't start with FORM/IFZS header"),!1;var u=Ke(i.slice(4));if(!u.IFhd)return n("vm_restore failed: missing required IFhd chunk"),!1;for(var c=0;c<128;c++)if(u.IFhd[c]!=Me[c])return n("vm_restore failed: this save image is for a different game"),!1;if(!u.CMem)return n("vm_restore failed: missing required CMem chunk"),!1;if(!u.Stks)return n("vm_restore failed: missing required Stks chunk"),!1;var l=Qe();tt();var f=s(u.CMem,0),p=u.CMem.slice(4);for(p=function(e){result=[];for(var t=0;t<e.length;){var n=e[t++];if(0==n)for(var r=e[t++]+1,i=0;i<r;i++)result.push(0);else result.push(n)}return result}(p);p.length<f-Oe;)p.push(0);for(Je(f,!1),be=Me.slice(0,Oe).concat(p),c=Oe;c<Me.length;c++)be[c]^=Me[c];be.length!=e.endmem&&C("Memory length was incorrect after restore.");var d=u.Stks;for(Ee=[];d.length;)e.frame=F(d),e.frame||C("vm_restore failed: bad stack frame"),Ee.unshift(e.frame);for(c=0;c<Ee.length;c++)Ee[c].depth=c;e.frame=Ee[Ee.length-1];var h=u.MAll;if(h&&h.length>=8){Fe=s(h,0);var y=s(h,4);for(c=0;c<y;c++){var g=s(h,8+8*c),m=s(h,12+8*c);Re.push(new rt(g,m))}Re.sort(function(e,t){return e.addr-t.addr});var v=Fe;for(c=0;c<Re.length;c++){g=Re[c].addr,m=Re[c].size;(g<v||g+m>e.endmem)&&C("vm_restore failed: corrupt dynamic heap"),g>v&&De.push(new rt(v,g-v)),v=g+m}v<e.endmem&&De.push(new rt(v,e.endmem-v))}return ot(),et(l),!0},e.vm_saveundo=function(){be.length!=e.endmem&&C("Memory length was incorrect before saveundo.");var t,n,r={};r.ram=be.slice(Oe),r.endmem=e.endmem,r.pc=e.pc,r.stack=[];for(var i=0;i<Ee.length;i++)r.stack[i]=(t=Ee[i],n=void 0,(n=new I(t.vmfunc)).depth=t.depth,n.framestart=t.framestart,n.framelen=t.framelen,n.valstack=t.valstack.slice(0),n.localspos=t.localspos,n.locals=t.locals.slice(0),n.framelen=t.framelen,n);r.heapstart=Fe,r.usedlist=Re.slice(0),r.freelist=De.slice(0),Le.push(r),Le.length>10&&Le.shift()},e.vm_restoreundo=function(){if(0==Le.length)return!1;var t=Le.pop(),n=Qe();return be=be.slice(0,Oe).concat(t.ram),e.endmem=t.endmem,Ee=t.stack,e.frame=Ee[Ee.length-1],e.pc=t.pc,Fe=t.heapstart,Re=t.usedlist,De=t.freelist,et(n),be.length!=e.endmem&&C("Memory length was incorrect after undo."),ot(),!0},e.change_memsize=Je,e.perform_verify=function(){var e,t,n,r=Me.length;if(r<256||0!=(255&r))return 1;if(r!=s(Me,12))return 1;for(t=-(n=s(Me,32))>>>0,e=0;e<r;e+=4)t=t+s(Me,e)>>>0;return t!=n?1:0},e.heap_malloc=function(t){nt()||(Fe=e.endmem);for(var n=0,r=De.length;n<r;n++){var i=De[n];if(i.size>=t){i.size>t?De[n]=new rt(i.addr+t,i.size-t):De.splice(n,1);var o=it(Re,i.addr);return Re.splice(o,0,new rt(i.addr,t)),i.addr}}var s=e.endmem,a=t+255&4294967040;return Je(e.endmem+a,!0),a>t&&De.push(new rt(s+t,a-t)),Re.push(new rt(s,t)),s},e.heap_free=function(e){var t=it(Re,e),n=Re[t];if(n&&n.addr==e||C("Tried to free non-existent block"),Re.splice(t,1),0==Re.length)return Je(Fe,!0),void tt();t=it(De,e);var r=De[t];r&&r.addr==n.end&&(n=new rt(e,n.size+r.size),De.splice(t,1));var i=De[t-1];i&&i.end==n.addr&&(n=new rt(i.addr,i.size+n.size),De.splice(t-1,1),t-=1),De.splice(t,0,n)},e.assert_heap_valid=ot;var st={map:{},functions:[],functionmap:{}};function at(){var t,r,i,o,s;for(e.resumefuncop&&(!function(t,n){if(t)switch(t.mode){case 8:return void e.frame.valstack.push(n);case 0:return;case 11:return void(4==t.argsize?e.frame.locals[t.addr]=n:2==t.argsize?e.frame.locals[t.addr]=65535&n:e.frame.locals[t.addr]=255&n);case 15:return void(4==t.argsize?y(t.addr,n):2==t.argsize?h(t.addr,n):d(t.addr,n));default:C("Unknown addressing mode in store func by operand.")}}(e.resumefuncop,e.resumevalue),e.resumefuncop=null,e.resumevalue=0),o=(new Date).getTime();!e.done_executing;){void 0===(i=(r=(t=e.frame.vmfunc)[e.iosysmode])[e.pc])&&(t.pathaddrs[e.pc]=!0,i=Z(t,e.pc,e.iosysmode),Ge++,e.pc<Oe&&(r[e.pc]=i,Ye++)),We++,i(e)===e.VMStopped&&(e.done_executing=!0,e.vm_stopped=!0)}s=(new Date).getTime(),ze+=(s-o)/1e3,e.vm_stopped&&Glk.glk_exit(),Glk.update(),n("### done executing; path time = "+(s-o)+" ms")}return e.VMStopped={dummy:"The top-level function has returned."},{version:"2.1.6",prepare:function(e,t){var r,i,o=(Me=e).slice(0,64);for(r=0;r<o.length;r++)(i=o[r].toString(16)).length<2&&(i="0"+i),o[r]=i;je=o.join(""),t&&(Pe=t.rethrow_exceptions,Ue=t.do_vm_autosave,Be=t.clear_vm_autosave),t&&t.debug_info_chunk&&function(){var e,t,r,i=GiLoad.get_debug_info();if(!i)return;if(222!=i[0]||191!=i[1]||0!=i[2]||0!=i[3])return void n("Dbug chunk did not contain an (old-style) Inform gameinfo.dbg file");i[4],i[5];t=6,e=!1;for(;!e;){var o=i[t++];switch(o){case 0:case void 0:e=!0;break;case 1:i[t++];for(r=t;i[t];)t++;String.fromCharCode.apply(this,i.slice(r,t));for(r=++t;i[t];)t++;String.fromCharCode.apply(this,i.slice(r,t));t++;break;case 2:for(r=t;i[t];)t++;String.fromCharCode.apply(this,i.slice(r,t));t++;i.slice(t,t+4);t+=4;i.slice(t,t+4);t+=4;break;case 3:i[t++],i[t++];for(r=t;i[t];)t++;String.fromCharCode.apply(this,i.slice(r,t));t++;i.slice(t,t+4);t+=4;i.slice(t,t+4);t+=4;break;case 4:i[t++];for(r=t;i[t];)t++;var s=String.fromCharCode.apply(this,i.slice(r,t));t++;break;case 5:case 6:case 7:case 8:i[t++],i[t++];for(r=t;i[t];)t++;s=String.fromCharCode.apply(this,i.slice(r,t));t++;break;case 9:t+=64;break;case 10:var a=i[t++]<<8|i[t++],u=i[t++]<<8|i[t++];t+=6*u;break;case 11:a=i[t++]<<8|i[t++],i.slice(t,t+4);t+=4;var c=i[t++]<<16|i[t++]<<8|i[t++];for(r=t;i[t];)t++;var l=String.fromCharCode.apply(this,i.slice(r,t));t++;for(var f=[];i[t];){for(r=t;i[t];)t++;var p=String.fromCharCode.apply(this,i.slice(r,t));t++,f.push(p)}t++,st.functions.push({num:a,name:l,addr:c,locals:f});break;case 12:i[t++],i[t++];for(r=t;i[t];)t++;s=String.fromCharCode.apply(this,i.slice(r,t));t++;break;case 13:for(;i[t];){for(r=t;i[t];)t++;s=String.fromCharCode.apply(this,i.slice(r,t));t++;var d=i[t++]<<16|i[t++]<<8|i[t++];st.map[s]=d}t++;break;case 14:a=i[t++]<<8|i[t++],i.slice(t,t+4);t+=4;i[t++],i[t++],i[t++];break;default:n("Unknown record type in debug data: "+o),e=!0}}var h,y=st.map["code area"];if(y)for(h=0;h<st.functions.length;h++){var g=st.functions[h];st.functionmap[y+g.addr]=g}}()},init:function(){if(e.vm_started)Glk.fatal_error("Quixe was inited twice!");else try{!function(){var e,t;for(e=0;e<256;e++)t=e.toString(16),e<16&&(t="0"+t),i[e]=t;for(e=0;e<256;e++)t=e>=32&&e<127?34==e||39==e||92==e?"\\"+String.fromCharCode(e):String.fromCharCode(e):10==e?"\\n":"\\x"+i[e],o[e]=t}(),function(){function e(e,t){this.argsize=t||4,this.numops=e.length;for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r));this.formlist=n}var t=new e(""),n=new e("L"),r=new e("LL"),i=new e("LLL"),o=new e("LLLL"),s=new e("LS"),a=new e("LLS"),u=new e("LLLLLLS"),c=new e("LLLLLLLS"),l=new e("LLSS"),f=new e("LC"),p=new e("LLC"),d=new e("LLLC"),h=new e("LLLLC"),y=new e("ES"),g=new e("LES"),m=new e("EES"),v=new e("F"),w=new e("LF"),_=new e("LLF"),b=new e("EF"),E=new e("EF",1),k=new e("EF",2),S=new e("S"),x=new e("SS"),T=new e("CL"),O=new e("C");D={0:t,16:m,17:g,18:a,19:a,20:a,21:y,24:m,25:m,26:m,27:y,28:a,29:a,30:a,32:n,34:r,35:r,36:i,37:i,38:i,39:i,40:i,41:i,42:i,43:i,44:i,45:i,48:p,49:n,50:T,51:r,52:r,64:b,65:k,66:E,68:s,69:s,72:a,73:a,74:a,75:a,76:i,77:i,78:i,79:i,80:v,81:w,82:t,83:r,84:n,112:n,113:n,114:n,115:n,256:a,257:n,258:S,259:s,260:n,272:s,273:n,288:t,289:S,290:t,291:f,292:w,293:O,294:v,295:r,304:_,320:S,321:n,328:x,329:r,336:c,337:c,338:u,352:f,353:p,354:d,355:h,368:r,369:i,376:s,377:n,384:r,385:r,400:s,401:s,402:s,408:s,409:s,416:a,417:a,418:a,419:a,420:l,424:s,425:s,426:s,427:a,432:s,433:s,434:s,435:s,436:s,437:s,438:a,448:o,449:o,450:i,451:i,452:i,453:i,456:r,457:r}}(),function(){var r;Me||C("There is no Glulx game file loaded.");e.vm_started=!0,e.resumefuncop=null,e.resumevalue=0,be=null,Ee=[],e.frame=null,e.pc=0,e.prevpc=0,Me.length<36&&C("This is too short to be a valid Glulx file.");1198290284!=s(Me,0)&&C("This is not a valid Glulx file.");(r=s(Me,4))<131072&&C("This Glulx file is too old a version to execute.");r>=197120&&C("This Glulx file is too new a version to execute.");Oe=s(Me,8),Ce=s(Me,12),Ne=s(Me,16),s(Me,20),Ae=s(Me,24),Ie=s(Me,28),s(Me,32),e.protectstart=0,e.protectend=0,(Oe<256||Ce<Oe||Ne<Ce)&&C("The segment boundaries in the header are in an impossible order.");Ce!=Me.length&&C("The game file length does not agree with the header.");e.done_executing=!1,ke={},Se={},xe=void 0,Te=void 0,e.tempcallargs=Array(8),e.tempglkargs=Array(8),Q(0),e.endmem=Ne,e.stringtable=0,Le=[],Fe=0,Re=[],De=[],Be&&Dialog.autosave_write(je,null);if(Ue&&!Be)try{var i=Dialog.autosave_read(je);if(i)return n("Found autosave..."),void function(t){be=(be=Me.slice(0,Ce)).slice(0,Oe).concat(t.ram),e.endmem=t.endmem,e.pc=t.pc,Ee=[];var n=t.stack.slice(0);for(;n.length;){var r=F(n);r||C("vm_autorestore failed: bad stack frame"),Ee.unshift(r)}for(var i=0;i<Ee.length;i++)Ee[i].depth=i;if(e.frame=Ee[Ee.length-1],void 0===t.heapstart)Fe=0,Re=[],De=[];else{Fe=t.heapstart,Re=[];for(var o=0;o<t.usedlist.length;o+=2){var s=t.usedlist[o],a=t.usedlist[o+1];Re.push(new rt(s,a))}Re.sort(function(e,t){return e.addr-t.addr}),De=[];var u=Fe;for(i=0;i<Re.length;i++){s=Re[i].addr,a=Re[i].size;(s<u||s+a>e.endmem)&&C("vm_autorestore failed: corrupt dynamic heap"),s>u&&De.push(new rt(u,s-u)),u=s+a}u<e.endmem&&De.push(new rt(u,e.endmem-u))}ot(),pe(t.stringtable),de(t.iosysmode,t.iosysrock),e.protectstart=t.protectstart,e.protectend=t.protectend,void 0===t.srand_table?Q(0):(Q(1),ne=t.srand_table.slice(0),ee=t.srand_index1,te=t.srand_index2);for(var o in se=t.accel_params.slice(0),t.accel_funcnum_map)oe[o]=t.accel_funcnum_map[o],ie[o]=e.accel_func_map[oe[o]];Glk.restore_allstate(t.glk),J(0)}(i)}catch(e){n("Autorestore failed, deleting it: "+t(e)),e.stack&&n("JS stack dump:\n"+e.stack),Dialog.autosave_write(je,null)}$e()}(),at()}catch(e){if(e.stack&&n("JS stack dump:\n"+e.stack),r(),Glk.fatal_error("Quixe init: "+t(e)),Pe)throw e}},resume:function(i){try{e.done_executing=e.vm_stopped,at()}catch(e){if(e.stack&&n("JS stack dump:\n"+e.stack),r(),Glk.fatal_error("Quixe run: "+t(e)),Pe)throw e}},get_signature:function(){return je},get_vm_internals:function(){return e},get_statistics:function(){return{game_image_length:Me.length,total_execution_time:ze,total_function_calls:He,accel_function_calls:qe,total_path_calls:We,paths_cached:Ye,paths_compiled:Ge,strings_cached:Ve,strings_compiled:Xe}},get_debuginfo:function(){return st},ReadByte:function(t){return 4294967295==t?255&e.frame.valstack.pop():c(t)},WriteByte:function(t,n){4294967295==t?e.frame.valstack.push(255&n):d(t,n)},ReadWord:function(t){return 4294967295==t?e.frame.valstack.pop():f(t)},WriteWord:function(t,n){4294967295==t?e.frame.valstack.push(n):y(t,n)},ReadStructField:function(t,n){return 4294967295==t?e.frame.valstack.pop():f(t+4*n)},WriteStructField:function(t,n,r){4294967295==t?e.frame.valstack.push(r):y(t+4*n,r)},SetResumeStore:function(t){e.resumevalue=t},do_autosave:function(t){if(t<0)Dialog.autosave_write(je,null);else{var r,i,o=(r=e.prevpc,i=c(r),r++,128&i&&(64&i?(i=(i=(i=(i&=63)<<8|c(r))<<8|c(++r))<<8|c(++r),r++):(i=(i&=127)<<8|c(r),r++)),304!=i?(n("parse_partial_operand: parsed wrong opcode: "+i),null):{selop:15&c(r),argsop:c(r)>>4&15,resop:15&c(r+1)});if(o){var s={},a=e.frame.valstack,u=a.length;a.push(t),8==o.argsop&&a.push(1),8==o.selop&&a.push(192),a.push(0,0,e.prevpc,e.frame.framestart),s.ram=be.slice(Oe),s.endmem=e.endmem,s.pc=e.pc,s.stack=[];for(var l=0;l<Ee.length;l++)L(Ee[l],s.stack);if(nt()){s.heapstart=Fe,s.usedlist=[];for(l=0;l<Re.length;l++)s.usedlist.push(Re[l].addr),s.usedlist.push(Re[l].size)}for(var f in a.length=u,s.stringtable=e.stringtable,s.iosysmode=e.iosysmode,s.iosysrock=e.iosysrock,s.protectstart=e.protectstart,s.protectend=e.protectend,e.random_func==re&&ne&&(s.srand_table=ne.slice(0),s.srand_index1=ee,s.srand_index2=te),s.accel_params=se.slice(0),s.accel_funcnum_map={},oe)s.accel_funcnum_map[f]=oe[f];s.glk=Glk.save_allstate(),Dialog.autosave_write(je,s)}}}}}()},function(e,t){GiDispa=function(){var e={};e.VM=null;var t={0:"window",1:"stream",2:"fileref",3:"schannel"};function n(e,t,n){this.id=e,this.name=t,this.proto=n}function r(e,t){this.args=e,this.retarg=t}function i(){this.macro="Byte",this.refsize=1,this.serialize=function(){return{type:"ArgString"}}}function o(){this.macro="Word",this.refsize=4,this.serialize=function(){return{type:"ArgUnicode"}}}function s(e){this.signed=e,this.macro="Byte",this.refsize=1,this.literal=e?"arg_char_signed":"arg_char_unsigned",this.serialize=function(){return{type:"ArgChar",signed:e}}}function a(e){this.signed=e,this.macro="Word",this.refsize=4,this.literal=e?"arg_int_signed":"arg_int_unsigned",this.serialize=function(){return{type:"ArgInt",signed:e}}}function u(e){this.name=e,this.macro="Word",this.refsize=4}function c(e){this.form=e}function l(e,t,n,r){this.arg=e,this.passin=t,this.passout=n,this.nonnull=r}function f(e,t,n,r,i){this.arg=e,this.retained=t,this.passin=n,this.passout=r,this.nonnull=i}function p(e){switch(e.type){case"ArgString":return new i;case"ArgUnicode":return new o;case"ArgInt":return e.signed?h:d;case"ArgChar":return null===e.signed?g:e.signed?m:y}throw new Error("arg_deserialize: unknown type: "+e.type)}var d=new a(!1),h=new a(!0),y=new s(!1),g=new s(null),m=new s(!0),v=new u("window"),w=new u("stream"),_=new u("fileref"),b=new u("schannel"),E={1:new n(1,"exit",new r([],null)),3:new n(3,"tick",new r([],null)),4:new n(4,"gestalt",new r([d,d],new l(d,!1,!0,!0))),5:new n(5,"gestalt_ext",new r([d,d,new f(d,!1,!0,!0,!1)],new l(d,!1,!0,!0))),32:new n(32,"window_iterate",new r([v,new l(d,!1,!0,!1)],new l(v,!1,!0,!0))),33:new n(33,"window_get_rock",new r([v],new l(d,!1,!0,!0))),34:new n(34,"window_get_root",new r([],new l(v,!1,!0,!0))),35:new n(35,"window_open",new r([v,d,d,d,d],new l(v,!1,!0,!0))),36:new n(36,"window_close",new r([v,new l(new c(new r([d,d],null)),!1,!0,!1)],null)),37:new n(37,"window_get_size",new r([v,new l(d,!1,!0,!1),new l(d,!1,!0,!1)],null)),38:new n(38,"window_set_arrangement",new r([v,d,d,v],null)),39:new n(39,"window_get_arrangement",new r([v,new l(d,!1,!0,!1),new l(d,!1,!0,!1),new l(v,!1,!0,!1)],null)),40:new n(40,"window_get_type",new r([v],new l(d,!1,!0,!0))),41:new n(41,"window_get_parent",new r([v],new l(v,!1,!0,!0))),42:new n(42,"window_clear",new r([v],null)),43:new n(43,"window_move_cursor",new r([v,d,d],null)),44:new n(44,"window_get_stream",new r([v],new l(w,!1,!0,!0))),45:new n(45,"window_set_echo_stream",new r([v,w],null)),46:new n(46,"window_get_echo_stream",new r([v],new l(w,!1,!0,!0))),47:new n(47,"set_window",new r([v],null)),48:new n(48,"window_get_sibling",new r([v],new l(v,!1,!0,!0))),64:new n(64,"stream_iterate",new r([w,new l(d,!1,!0,!1)],new l(w,!1,!0,!0))),65:new n(65,"stream_get_rock",new r([w],new l(d,!1,!0,!0))),66:new n(66,"stream_open_file",new r([_,d,d],new l(w,!1,!0,!0))),67:new n(67,"stream_open_memory",new r([new f(g,!0,!0,!0,!1),d,d],new l(w,!1,!0,!0))),68:new n(68,"stream_close",new r([w,new l(new c(new r([d,d],null)),!1,!0,!1)],null)),69:new n(69,"stream_set_position",new r([w,h,d],null)),70:new n(70,"stream_get_position",new r([w],new l(d,!1,!0,!0))),71:new n(71,"stream_set_current",new r([w],null)),72:new n(72,"stream_get_current",new r([],new l(w,!1,!0,!0))),73:new n(73,"stream_open_resource",new r([d,d],new l(w,!1,!0,!0))),96:new n(96,"fileref_create_temp",new r([d,d],new l(_,!1,!0,!0))),97:new n(97,"fileref_create_by_name",new r([d,new i,d],new l(_,!1,!0,!0))),98:new n(98,"fileref_create_by_prompt",new r([d,d,d],new l(_,!1,!0,!0))),99:new n(99,"fileref_destroy",new r([_],null)),100:new n(100,"fileref_iterate",new r([_,new l(d,!1,!0,!1)],new l(_,!1,!0,!0))),101:new n(101,"fileref_get_rock",new r([_],new l(d,!1,!0,!0))),102:new n(102,"fileref_delete_file",new r([_],null)),103:new n(103,"fileref_does_file_exist",new r([_],new l(d,!1,!0,!0))),104:new n(104,"fileref_create_from_fileref",new r([d,_,d],new l(_,!1,!0,!0))),128:new n(128,"put_char",new r([y],null)),129:new n(129,"put_char_stream",new r([w,y],null)),130:new n(130,"put_string",new r([new i],null)),131:new n(131,"put_string_stream",new r([w,new i],null)),132:new n(132,"put_buffer",new r([new f(g,!1,!0,!1,!0)],null)),133:new n(133,"put_buffer_stream",new r([w,new f(g,!1,!0,!1,!0)],null)),134:new n(134,"set_style",new r([d],null)),135:new n(135,"set_style_stream",new r([w,d],null)),144:new n(144,"get_char_stream",new r([w],new l(h,!1,!0,!0))),145:new n(145,"get_line_stream",new r([w,new f(g,!1,!1,!0,!0)],new l(d,!1,!0,!0))),146:new n(146,"get_buffer_stream",new r([w,new f(g,!1,!1,!0,!0)],new l(d,!1,!0,!0))),160:new n(160,"char_to_lower",new r([y],new l(y,!1,!0,!0))),161:new n(161,"char_to_upper",new r([y],new l(y,!1,!0,!0))),176:new n(176,"stylehint_set",new r([d,d,d,h],null)),177:new n(177,"stylehint_clear",new r([d,d,d],null)),178:new n(178,"style_distinguish",new r([v,d,d],new l(d,!1,!0,!0))),179:new n(179,"style_measure",new r([v,d,d,new l(d,!1,!0,!1)],new l(d,!1,!0,!0))),192:new n(192,"select",new r([new l(new c(new r([d,v,d,d],null)),!1,!0,!0)],null)),193:new n(193,"select_poll",new r([new l(new c(new r([d,v,d,d],null)),!1,!0,!0)],null)),208:new n(208,"request_line_event",new r([v,new f(g,!0,!0,!0,!0),d],null)),209:new n(209,"cancel_line_event",new r([v,new l(new c(new r([d,v,d,d],null)),!1,!0,!1)],null)),210:new n(210,"request_char_event",new r([v],null)),211:new n(211,"cancel_char_event",new r([v],null)),212:new n(212,"request_mouse_event",new r([v],null)),213:new n(213,"cancel_mouse_event",new r([v],null)),214:new n(214,"request_timer_events",new r([d],null)),224:new n(224,"image_get_info",new r([d,new l(d,!1,!0,!1),new l(d,!1,!0,!1)],new l(d,!1,!0,!0))),225:new n(225,"image_draw",new r([v,d,h,h],new l(d,!1,!0,!0))),226:new n(226,"image_draw_scaled",new r([v,d,h,h,d,d],new l(d,!1,!0,!0))),232:new n(232,"window_flow_break",new r([v],null)),233:new n(233,"window_erase_rect",new r([v,h,h,d,d],null)),234:new n(234,"window_fill_rect",new r([v,d,h,h,d,d],null)),235:new n(235,"window_set_background_color",new r([v,d],null)),240:new n(240,"schannel_iterate",new r([b,new l(d,!1,!0,!1)],new l(b,!1,!0,!0))),241:new n(241,"schannel_get_rock",new r([b],new l(d,!1,!0,!0))),242:new n(242,"schannel_create",new r([d],new l(b,!1,!0,!0))),243:new n(243,"schannel_destroy",new r([b],null)),244:new n(244,"schannel_create_ext",new r([d,d],new l(b,!1,!0,!0))),247:new n(247,"schannel_play_multi",new r([new f(b,!1,!0,!1,!0),new f(d,!1,!0,!1,!0),d],new l(d,!1,!0,!0))),248:new n(248,"schannel_play",new r([b,d],new l(d,!1,!0,!0))),249:new n(249,"schannel_play_ext",new r([b,d,d,d],new l(d,!1,!0,!0))),250:new n(250,"schannel_stop",new r([b],null)),251:new n(251,"schannel_set_volume",new r([b,d],null)),252:new n(252,"sound_load_hint",new r([d,d],null)),253:new n(253,"schannel_set_volume_ext",new r([b,d,d,d],null)),254:new n(254,"schannel_pause",new r([b],null)),255:new n(255,"schannel_unpause",new r([b],null)),256:new n(256,"set_hyperlink",new r([d],null)),257:new n(257,"set_hyperlink_stream",new r([w,d],null)),258:new n(258,"request_hyperlink_event",new r([v],null)),259:new n(259,"cancel_hyperlink_event",new r([v],null)),288:new n(288,"buffer_to_lower_case_uni",new r([new f(d,!1,!0,!0,!0),d],new l(d,!1,!0,!0))),289:new n(289,"buffer_to_upper_case_uni",new r([new f(d,!1,!0,!0,!0),d],new l(d,!1,!0,!0))),290:new n(290,"buffer_to_title_case_uni",new r([new f(d,!1,!0,!0,!0),d,d],new l(d,!1,!0,!0))),291:new n(291,"buffer_canon_decompose_uni",new r([new f(d,!1,!0,!0,!0),d],new l(d,!1,!0,!0))),292:new n(292,"buffer_canon_normalize_uni",new r([new f(d,!1,!0,!0,!0),d],new l(d,!1,!0,!0))),296:new n(296,"put_char_uni",new r([d],null)),297:new n(297,"put_string_uni",new r([new o],null)),298:new n(298,"put_buffer_uni",new r([new f(d,!1,!0,!1,!0)],null)),299:new n(299,"put_char_stream_uni",new r([w,d],null)),300:new n(300,"put_string_stream_uni",new r([w,new o],null)),301:new n(301,"put_buffer_stream_uni",new r([w,new f(d,!1,!0,!1,!0)],null)),304:new n(304,"get_char_stream_uni",new r([w],new l(h,!1,!0,!0))),305:new n(305,"get_buffer_stream_uni",new r([w,new f(d,!1,!1,!0,!0)],new l(d,!1,!0,!0))),306:new n(306,"get_line_stream_uni",new r([w,new f(d,!1,!1,!0,!0)],new l(d,!1,!0,!0))),312:new n(312,"stream_open_file_uni",new r([_,d,d],new l(w,!1,!0,!0))),313:new n(313,"stream_open_memory_uni",new r([new f(d,!0,!0,!0,!1),d,d],new l(w,!1,!0,!0))),314:new n(314,"stream_open_resource_uni",new r([d,d],new l(w,!1,!0,!0))),320:new n(320,"request_char_event_uni",new r([v],null)),321:new n(321,"request_line_event_uni",new r([v,new f(d,!0,!0,!0,!0),d],null)),336:new n(336,"set_echo_line_event",new r([v,d],null)),337:new n(337,"set_terminators_line_event",new r([v,new f(d,!1,!0,!1,!1)],null)),352:new n(352,"current_time",new r([new l(new c(new r([h,d,h],null)),!1,!0,!0)],null)),353:new n(353,"current_simple_time",new r([d],new l(h,!1,!0,!0))),360:new n(360,"time_to_date_utc",new r([new l(new c(new r([h,d,h],null)),!0,!1,!0),new l(new c(new r([h,h,h,h,h,h,h,h],null)),!1,!0,!0)],null)),361:new n(361,"time_to_date_local",new r([new l(new c(new r([h,d,h],null)),!0,!1,!0),new l(new c(new r([h,h,h,h,h,h,h,h],null)),!1,!0,!0)],null)),362:new n(362,"simple_time_to_date_utc",new r([h,d,new l(new c(new r([h,h,h,h,h,h,h,h],null)),!1,!0,!0)],null)),363:new n(363,"simple_time_to_date_local",new r([h,d,new l(new c(new r([h,h,h,h,h,h,h,h],null)),!1,!0,!0)],null)),364:new n(364,"date_to_time_utc",new r([new l(new c(new r([h,h,h,h,h,h,h,h],null)),!0,!1,!0),new l(new c(new r([h,d,h],null)),!1,!0,!0)],null)),365:new n(365,"date_to_time_local",new r([new l(new c(new r([h,h,h,h,h,h,h,h],null)),!0,!1,!0),new l(new c(new r([h,d,h],null)),!1,!0,!0)],null)),366:new n(366,"date_to_simple_time_utc",new r([new l(new c(new r([h,h,h,h,h,h,h,h],null)),!0,!1,!0),d],new l(h,!1,!0,!0))),367:new n(367,"date_to_simple_time_local",new r([new l(new c(new r([h,h,h,h,h,h,h,h],null)),!0,!1,!0),d],new l(h,!1,!0,!0)))};function k(e,t,n){return e instanceof a?t?e.signed?n+" & 0xFFFFFFFF":n:"0":e instanceof s?t?e.signed?"self.cast_signed_char("+n+")":n+" & 0xFF":"0":e instanceof u?t?'self.class_obj_from_id("'+e.name+'", '+n+")":"null":"???"}function S(e,t){return e instanceof a?t+" >>> 0":e instanceof s?e.signed?"self.uncast_signed_char("+t+")":t+" & 0xFF":e instanceof u?'self.class_obj_to_id("'+e.name+'", '+t+")":"???"}function x(e){return 128&(e&=255)&&(e+=4294967040),e}function T(e,t){return t?t.disprock:0}function O(e,t){return 0!=t&&t?D[e][t]:null}e.arg_int_unsigned=d,e.arg_int_signed=h,e.arg_char_unsigned=y,e.arg_char_native=g,e.arg_char_signed=m,e.cast_signed_char=function(e){return 128&(e&=255)&&(e-=256),e},e.uncast_signed_char=x,e.class_obj_to_id=T,e.class_obj_from_id=O;var C={};var N=null,A=null,I=-1;e.set_blocked_selector=function(e,t){N=e,A=t.slice(0)};var L=[];e.temp_arg_arrays=L;var F=[];e.retained_arrays=F,e.make_arg_array=function(e,t,n,r){var i;e&&(i={arr:e,addr:t,len:n,arg:r},L.push(i))};var R,D={};return function(){var e,n;for(e in R=1+Math.round(1e3*Math.random()),t)n=t[e],D[n]={}}(),{set_vm:function(t){e.VM=t},get_function:function(t){var n,r=C[t];if(void 0===r){if(void 0===(n=E[t]))throw new Error("dispatch: unknown Glk function: "+t);r=function(t){var n,r,p,d,h,y,g,m,v,w,_,b,E,x,T=[],O={},C=0;for(T.push("// no local vars"),T.push("// "+t.id+": "+t.name),d=null,(p=t.proto).retarg&&(d=p.retarg.arg),T.push("var self = this;"),x=Glk.call_may_not_return(t.id),h=0,y=[],n=0;n<p.args.length;n++)if(m=p.args[n],w="glka"+n,y.push(w),O[w]=!0,m instanceof a||m instanceof s||m instanceof u)_=k(m,!0,"callargs["+h+"]"),T.push(w+" = "+_+";"),h+=1;else if(m instanceof l){if(v=m.arg,T.push("if (callargs["+h+"] == 0) {"),m.nonnull?T.push('  throw new Error("glk '+t.name+': null argument");'):T.push("  "+w+" = null;"),T.push("} else {"),v instanceof a||v instanceof s||v instanceof u)T.push("  "+w+" = new Glk.RefBox();"),_=k(v,m.passin,"self.VM.ReadWord(callargs["+h+"])"),T.push("  "+w+".set_value("+_+");");else{if(!(v instanceof c))throw new Error("buildfunc: unsupported refarg type: "+t.name);for(g=v.form.args,T.push("  "+w+" = new Glk.RefStruct("+g.length+");"),r=0;r<g.length;r++)_=k(g[r],m.passin,"self.VM.ReadStructField(callargs["+h+"], "+r+")"),T.push("  "+w+".push_field("+_+");")}T.push("}"),h+=1}else if(m instanceof f)O.glklen=!0,v=m.arg,T.push("if (callargs["+h+"] == 0) {"),m.nonnull?T.push('  throw new Error("glk '+t.name+': null argument");'):T.push("  "+w+" = null;"),T.push("} else {"),T.push("  glklen = callargs["+(h+1)+"];"),T.push("  "+w+" = Array(glklen);"),m.passin&&(O.ix=!0,O.jx=!0,T.push("  for (ix=0, jx=callargs["+h+"]; ix<glklen; ix++, jx+="+v.refsize+") {"),_=k(v,!0,"self.VM.Read"+v.macro+"(jx)"),T.push("    "+w+"[ix] = "+_+";"),T.push("  }")),m.retained&&(0==C&&T.push("  self.temp_arg_arrays.length = 0;"),C+=1,T.push("  self.make_arg_array("+w+", callargs["+h+"], glklen, self."+v.literal+");")),T.push("}"),h+=2;else{if(!(m instanceof i||m instanceof o))throw new Error("buildfunc: unsupported arg type: "+t.name);var N,A;O.ix=!0,O.jx=!0,m instanceof i?(A="0xE0",N="byte_array_to_string"):(A="0xE2",N="uni_array_to_string"),T.push(w+" = Array();"),T.push("jx = callargs["+h+"];"),T.push("if (self.VM.ReadByte(jx) != "+A+') throw new Error("glk '+t.name+': string argument must be unencoded");'),T.push("for (jx+="+m.refsize+"; true; jx+="+m.refsize+") {"),T.push("  ix = self.VM.Read"+m.macro+"(jx);"),T.push("  if (ix == 0) break;"),T.push("  "+w+".push(ix);"),T.push("}"),T.push(w+" = Glk."+N+"("+w+");"),h+=1}for(T.push("if (callargs.length != "+h+') throw "glk '+t.name+': wrong number of arguments";'),d||x?(O.glkret=!0,b="glkret = "):b="",T.push(b+"Glk.glk_"+t.name+"("+y.join(", ")+");"),x&&(T.push("if (glkret === Glk.DidNotReturn) {"),T.push("  self.set_blocked_selector("+t.id+", callargs);"),T.push("  return glkret;"),T.push("}")),h=0,n=0;n<p.args.length;n++)if(w="glka"+n,(m=p.args[n])instanceof a||m instanceof s||m instanceof u)h+=1;else if(m instanceof l){if(v=m.arg,m.passout){if(T.push("if ("+w+") {"),v instanceof a||v instanceof s||v instanceof u)_=S(v,w+".get_value()"),T.push("  self.VM.WriteWord(callargs["+h+"], "+_+");");else{if(!(v instanceof c))throw new Error("buildfunc: unsupported refarg type: "+t.name);for(g=v.form.args,r=0;r<g.length;r++)_=S(g[r],w+".get_field("+r+")"),T.push("  self.VM.WriteStructField(callargs["+h+"], "+r+", "+_+");")}T.push("}")}h+=1}else if(m instanceof f)v=m.arg,m.passout&&!m.retained&&(T.push("if ("+w+") {"),O.ix=!0,O.jx=!0,T.push("  for (ix=0, jx=callargs["+h+"]; ix<glklen; ix++, jx+="+v.refsize+") {"),_=S(v,w+"[ix]"),T.push("    self.VM.Write"+v.macro+"(jx, "+_+")"),T.push("  }"),T.push("}")),h+=2;else{if(!(m instanceof i||m instanceof o))throw new Error("buildfunc: unsupported arg type: "+t.name);h+=1}for(_ in 0!=C&&T.push("self.temp_arg_arrays.length = 0;"),d?(_=S(d,"glkret"),T.push("return "+_+";")):T.push("return 0;"),E=[],O)E.push(_);return E.length&&(T[0]="var "+E.join(", ")+";"),_=T.join("\n"),new Function("callargs",_).bind(e)}(n),C[t]=r}return r},prepare_resume:function(t){192==N?0!=A[0]&&(I=t.get_field(0)>>>0,e.VM.WriteStructField(A[0],0,t.get_field(0)>>>0),e.VM.WriteStructField(A[0],1,T(0,t.get_field(1))),e.VM.WriteStructField(A[0],2,t.get_field(2)>>>0),e.VM.WriteStructField(A[0],3,t.get_field(3)>>>0)):98==N&&e.VM.SetResumeStore(T(0,t)),N=null,A=null},check_autosave:function(){return 192==N&&A&&A.length>0&&(2==I||3==I||4==I||8==I)?A[0]:null},class_register:function(e,t,n){if(void 0===n){if(t.disprock)throw new Error("class_register: object is already registered");t.disprock=R,R++}else{if(t.disprock!=n)throw new Error("class_register: object is not already registered");R<=n&&(R=n+1)}D[e][t.disprock]=t},class_unregister:function(e,t){if(!t.disprock||void 0===D[e][t.disprock])throw new Error("class_unregister: object is not registered");delete D[e][t.disprock],t.disprock=void 0},class_obj_to_id:T,class_obj_from_id:O,retain_array:function(e,t){var n,r;if(e){if(void 0!==t){if(e!==t.arr)throw new Error("retain_array: array does not match useobj");if((r={addr:t.addr,len:t.len,arr:e,arg:p(t.arg)}).len!=e.length)throw new Error("retain_array: array length from useobj does not match")}else for(r=void 0,n=0;n<L.length;n++)if(L[n].arr===e){r=L[n];break}if(void 0===r)throw new Error("retain_array: array is not an argument");for(n=0;void 0!==F[n];n++);F[n]=r}},unretain_array:function(t){var n,r,i;if(t){for(i=void 0,n=0;n<F.length;n++)if(void 0!==F[n]&&F[n].arr===t){i=F[n],delete F[n];break}if(void 0===i)throw new Error("unretain_array: array was never retained");if(i.arg instanceof a)for(n=0,r=i.addr;n<i.len;n++,r+=4)e.VM.WriteWord(r,i.arr[n]>>>0);else{if(!(i.arg instanceof s))throw new Error("unretain_array: unsupported refarg type");if(i.arg.signed)for(n=0,r=i.addr;n<i.len;n++,r++)e.VM.WriteByte(r,x(i.arr[n]));else for(n=0,r=i.addr;n<i.len;n++,r++)e.VM.WriteByte(r,255&i.arr[n])}}},get_retained_array:function(e){var t;for(t=0;t<F.length;t++)if(void 0!==F[t]&&F[t].arr===e)return F[t];return null}}}()},function(e,t){GiLoad=function(){var e,t,n={vm:null,io:null,spacing:4,use_query_story:!0,default_story:null,set_page_title:!0,default_page_title:"Game",game_format_name:"",exit_warning:"The game session has ended.",image_info_map:null,proxy_url:"https://zcode.appspot.com/proxy/"},r=null,i={},o=null,s={},a={};function u(e){if(e.match(/^(file|data|http|https):/i))return e;var t=document.createElement("div");return t.innerHTML="<a></a>",t.firstChild.href=e,t.innerHTML=t.innerHTML,t.firstChild.href}function c(e){if(null!=n.image_info_map&&(r=n.image_info_map[e]))return r;var t=s["Pict:"+e];if(t){var r={image:e};if("JPEG"==t.type?r.type="jpeg":"PNG "==t.type?r.type="png":r.type="????",void 0===t.imagesize){var i=void 0;"JPEG"==t.type?i=function(e){var t=0;for(;t<e.length;){if(255!=e[t])return void GlkOte.log("find_dimensions_jpeg: marker is not 0xFF");for(;255==e[t];)t+=1;var n=e[t];if(t+=1,!(1==n||n>=208&&n<=217)){var r=e[t+0]<<8|e[t+1];if(n>=192&&n<=207&&200!=n){if(r<7)return void GlkOte.log("find_dimensions_jpeg: SOF block is too small");var i={};return i.height=e[t+3]<<8|e[t+4],i.width=e[t+5]<<8|e[t+6],i}t+=r}}return void GlkOte.log("find_dimensions_jpeg: no SOF marker found")}(t.content):"PNG "==t.type&&(i=function(e){var t=0;if(137!=e[0]||"PNG"!=String.fromCharCode.apply(this,e.slice(1,4)))return void GlkOte.log("find_dimensions_png: PNG signature does not match");t+=8;for(;t<e.length;){var n=e[t+0]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];t+=4;var r=String.fromCharCode.apply(this,e.slice(t,t+4));if(t+=4,"IHDR"==r){var i={};return i.width=e[t+0]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4,i.height=e[t+0]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4,i}t+=n,t+=4}return void GlkOte.log("find_dimensions_png: no PNG header block found")}(t.content)),i&&(t.imagesize=i)}t.imagesize&&(r.width=t.imagesize.width,r.height=t.imagesize.height);var o=a["Pict:"+e];return o&&(r.alttext=o),r}}function l(e){for(var t,n=[],r=0;r<e.length;){var i,o,s,a;if(r>=e.length)break;if(i=e[r],r++,i<128)t=i;else{if(r>=e.length)break;if(o=e[r],r++,128!=(192&o))break;if(192==(224&i))t=(31&i)<<6,t|=63&o;else{if(r>=e.length)break;if(s=e[r],r++,128!=(192&s))break;if(224==(240&i))t=(15&i)<<12&61440,t|=(63&o)<<6&4032,t|=63&s;else{if(240!=(240&i))break;if(r>=e.length)break;if(a=e[r],r++,128!=(192&a))break;t=(7&i)<<18&1835008,t|=(63&o)<<12&258048,t|=(63&s)<<6&4032,t|=63&a}}}n.push(t)}return String.fromCharCode.apply(this,n)}if(window.atob)t=function(e){var t,n=atob(e),r=Array(n.length);for(t=0;t<n.length;t++)r[t]=n.charCodeAt(t);return r};else{var f=function(){var e,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=[];for(e=0;e<t.length;e++)n[t.charAt(e)]=e;return n}();t=function(e){for(var t,n,r,i,o,s,a=[],u=0,c=e.length;u<c;)t=(f[e.charAt(u++)]<<2)+((i=f[e.charAt(u++)])>>4),n=((15&i)<<4)+((o=f[e.charAt(u++)])>>2),r=((3&o)<<6)+(s=f[e.charAt(u++)]),a.push(t,n,r);return 64==s&&a.pop(),64==o&&a.pop(),a}}function p(e){if(0!=e.length){if(70==e[0]&&79==e[1]&&82==e[2]&&77==e[3]){var t=String.fromCharCode(e[8],e[9],e[10],e[11]);if("IFZS"==t)return void n.io.fatal_error("This is a saved-game file, not a "+n.game_format_name+" game file. You must launch the game first, then restore your save.");if("IFRS"!=t)return void n.io.fatal_error("This IFF file is not a Blorb file!");if(n.blorb_gamechunk_type)try{e=function(e,t){for(var r,u=e.length,c=[],f=null,p=12;p<u;){var d=String.fromCharCode(e[p+0],e[p+1],e[p+2],e[p+3]),h=e[(p+=4)+0]<<24|e[p+1]<<16|e[p+2]<<8|e[p+3];if(p+=4,"RIdx"==d){var y=e[(E=p)+0]<<24|e[E+1]<<16|e[E+2]<<8|e[E+3];for(E+=4,r=0;r<y;r++){var g=String.fromCharCode(e[E+0],e[E+1],e[E+2],e[E+3]),m=e[(E+=4)+0]<<24|e[E+1]<<16|e[E+2]<<8|e[E+3],v=e[(E+=4)+0]<<24|e[E+1]<<16|e[E+2]<<8|e[E+3];E+=4,c.push({usage:g,num:m,pos:v})}}if("IFmd"==d){var w=l(b=e.slice(p,p+h)),_=$("<metadata>").html(w).find("bibliographic").children();if(_.length)for(r=0;r<_.length;r++)C=_[r],i[C.tagName.toLowerCase()]=C.textContent}if("Dbug"==d&&n.debug_info_chunk){var b=e.slice(p,p+h);o=b}if("RDes"==d){var E,k=e[(E=p)+0]<<24|e[E+1]<<16|e[E+2]<<8|e[E+3];for(E+=4,r=0;r<k;r++){var S=String.fromCharCode.apply(this,e.slice(E,E+4)),x=e[(E+=4)+0]<<24|e[E+1]<<16|e[E+2]<<8|e[E+3],T=e[(E+=4)+0]<<24|e[E+1]<<16|e[E+2]<<8|e[E+3];E+=4;var O=l(e.slice(E,E+T));E+=T,a[S+":"+x]=O}}1&(p+=h)&&p++}for(r=0;r<c.length;r++){var C;p=(C=c[r]).pos;d=String.fromCharCode(e[p+0],e[p+1],e[p+2],e[p+3]),h=e[(p+=4)+0]<<24|e[p+1]<<16|e[p+2]<<8|e[p+3];p+=4,C.type=d,C.len=h,C.content=null,"Exec"==C.usage&&0==C.num&&d==t?f=e.slice(p,p+h):(C.content="FORM"==d?e.slice(p-8,p+h):e.slice(p,p+h),s[C.usage+":"+C.num]=C)}return f}(e,n.blorb_gamechunk_type)}catch(e){return void n.io.fatal_error("Blorb file could not be parsed: "+e)}if(!e)return void n.io.fatal_error("Blorb file contains no "+n.game_format_name+" game!")}var u=null;i&&(u=i.title),!u&&r&&(u=r.slice(r.lastIndexOf("/")+1)),u||(u=n.default_page_title),u||(u="Game"),n.recording_label||(n.recording_label=u),n.set_page_title&&(document.title=u+" - "+n.engine_name),n.vm.prepare(e,n),n.io.init(n)}else n.io.fatal_error("No game file was loaded. (Zero-length response.)")}return e=window.btoa?function(e){for(var t=[],n=e.length,r=0;r<n;r+=16384)t.push(String.fromCharCode.apply(String,e.slice(r,r+16384)));return btoa(t.join(""))}:function(e){for(var t,n,r,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=[],s=0;s<e.length;s+=3)t=e[s],n=e[s+1],r=e[s+2],o.push(i.charAt(t>>2&63)),o.push(i.charAt(t<<4&48|n>>4&15)),o.push(i.charAt(n<<2&60|r>>6&3)),o.push(i.charAt(63&r));return void 0===n&&o.length>=2&&(o[o.length-2]="="),void 0===r&&o.length>=1&&(o[o.length-1]="="),o.join("")},{load_run:function(e,i,o){o?"string"==typeof o&&(o={format:o}):o={};var s=o.format;if(s||(s="array"),n.io=window.Glk,n.vm=window.Quixe,e||(e=window.game_options),!e||!window.Quixe||e.vm&&e.vm!==window.Quixe||(n.engine_name="Quixe",n.blorb_gamechunk_type="GLUL",n.game_format_name="Glulx"),e&&jQuery.extend(n,e),null!=n.image_info_map&&"string"===jQuery.type(n.image_info_map)&&(window[n.image_info_map]?n.image_info_map=window[n.image_info_map]:delete n.image_info_map),r=null,n.use_query_story){var a=function(){var e={},t=location.search.substring(1,location.search.length);if(t.length){var n=t.split("&");t=t.replace(/\+/g," ");for(var r=0;r<n.length;r++){var i=n[r].split("="),o=decodeURIComponent(i[0]),s=2==i.length?decodeURIComponent(i[1]):o;e[o]=s}}return e}();r=a.story}if(r||!i)if(r||(r=n.default_story),r){i=null;var c=new XMLHttpRequest,l=void 0!==c.overrideMimeType,f=void 0!==c.withCredentials;c=null;var d=/^(file:|(\w+:)?\/\/[^\/?#]+)/,h=d.exec(location)[0],y=d.exec(r),g=!y,m=y?y[0]:h,v=h==m;navigator.userAgent.match(/chrome/i)&&"file:"==m&&(v=!1);var w=r.match(/[.]js$/i);if(GlkOte.log("GiLoad: is_relative="+g+", same_origin="+v+", binary_supported="+l+", crossorigin_supported="+f),w&&v)return GlkOte.log("GiLoad: trying old-fashioned load..."),window.processBase64Zcode=function(e){p(t(e))},void jQuery.ajax(r,{type:"GET",dataType:"script",cache:!0,error:function(e,t,i){n.io.fatal_error("The story could not be loaded. ("+r+"): Error "+t+": "+i)}});if(w){if(GlkOte.log("GiLoad: trying script load..."),window.processBase64Zcode=function(e){p(t(e))},!(E=$("head")).length)return void n.io.fatal_error("This page has no <head> element!");var _=$("<script>",{src:r,type:"text/javascript"});E.get(0).appendChild(_.get(0))}else{if(l&&v)return GlkOte.log("GiLoad: trying binary load..."),void jQuery.ajax(r,{type:"GET",beforeSend:function(e,t){e.overrideMimeType("text/plain; charset=x-user-defined")},success:function(e,t,n){p(function(e){var t,n=Array(e.length);for(t=0;t<e.length;t++)n[t]=255&e.charCodeAt(t);return n}(e))},error:function(e,t,i){n.io.fatal_error("The story could not be loaded. ("+r+"): Error "+t+": "+i)}});if("file:"!=m){var b=r;if(g&&(b=u(r),GlkOte.log("GiLoad: absolutize "+r+" to "+b)),f)return GlkOte.log("GiLoad: trying proxy load... ("+n.proxy_url+")"),void jQuery.ajax(n.proxy_url,{type:"GET",data:{encode:"base64",url:b},error:function(e,t,i){n.io.fatal_error("The story could not be loaded. ("+r+"): Error "+t+": "+i)},success:function(e,n,r){p(t(e))}});var E,k=n.proxy_url+"?encode=base64&callback=processBase64Zcode&url="+b;if(GlkOte.log("GiLoad: trying proxy-script load... ("+k+")"),window.processBase64Zcode=function(e){p(t(e))},(E=$("head")).length){_=$("<script>",{src:k,type:"text/javascript"});E.append(_)}else n.io.fatal_error("This page has no <head> element!")}else n.io.fatal_error("The story could not be loaded. ("+r+"): A local file cannot be sent to the proxy.")}}else n.io.fatal_error("No story file specified!");else{switch(GlkOte.log("GiLoad: trying pre-loaded load ("+s+")..."),s){case"base64":i=t(i);break;case"raw":i=decode_text(i);break;case"array":break;default:return void n.io.fatal_error("Could not decode story file data: "+s)}p(i)}},find_data_chunk:function(e){var t=s["Data:"+e];if(!t)return null;var n=t.type;return"FORM"==n&&(n="BINA"),{data:t.content,type:n}},get_metadata:function(e){return i[e]},get_debug_info:function(){return o},get_image_info:c,get_image_url:function(t){if(n.image_info_map){var r=n.image_info_map[t];if(r&&r.url)return u(r.url)}var i=s["Pict:"+t];if(i){if(i.dataurl)return i.dataurl;if(c(t)&&i.content){var o="application/octet-stream";"JPEG"==i.type?o="image/jpeg":"PNG "==i.type&&(o="image/png");var a=e(i.content);return i.dataurl="data:"+o+";base64,"+a,i.dataurl}}}}}()},function(e,t){try{var n=new window.CustomEvent("test");if(n.preventDefault(),!0!==n.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var r=function(e,t){var n,r;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r=n.preventDefault,n.preventDefault=function(){r.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},n};r.prototype=window.Event.prototype,window.CustomEvent=r}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(136),i=n(137),o=n(138);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=p(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=a(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|d(t.length);return 0===(e=a(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):p(e,t);if("Buffer"===t.type&&o(t.data))return p(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=a(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|d(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function h(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(r)return z(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return N(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){var o,s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var f=!0,p=0;p<u;p++)if(c(e,o+p)!==c(t,p)){f=!1;break}if(f)return o}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function _(e,t,n,r){return q(z(t,e.length-n),e,n,r)}function b(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return b(e,t,n,r)}function k(e,t,n,r){return q(H(t),e,n,r)}function S(e,t,n,r){return q(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(e){var t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=O));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=h,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):y.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),f=0;f<a;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function N(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=B(e[o]);return i}function I(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function L(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function F(e,t,n,r,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function M(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,r,o){return o||M(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function P(e,t,n,r,o){return o||M(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||F(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||F(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);F(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);F(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||F(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return P(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return P(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=u.isBuffer(e)?e:z(new u(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(57))},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){for(var t,n=c(e),r=n[0],s=n[1],a=new o(function(e,t,n){return 3*(t+n)/4-n}(0,r,s)),u=0,l=s>0?r-4:r,f=0;f<l;f+=4)t=i[e.charCodeAt(f)]<<18|i[e.charCodeAt(f+1)]<<12|i[e.charCodeAt(f+2)]<<6|i[e.charCodeAt(f+3)],a[u++]=t>>16&255,a[u++]=t>>8&255,a[u++]=255&t;2===s&&(t=i[e.charCodeAt(f)]<<2|i[e.charCodeAt(f+1)]>>4,a[u++]=255&t);1===s&&(t=i[e.charCodeAt(f)]<<10|i[e.charCodeAt(f+1)]<<4|i[e.charCodeAt(f+2)]>>2,a[u++]=t>>8&255,a[u++]=255&t);return a},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(e,s,s+16383>a?a:s+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,p=n?-1:1,d=e[t+f];for(f+=p,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=p,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+f],f+=p,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=c}return(d?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,h=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+f>=1?p/u:p*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+d]=255&a,d+=h,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+d]=255&s,d+=h,s/=256,c-=8);e[n+d-h]|=128*y}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(t){var n;n=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,r){(function(e,i,o,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a,u=r(2),c=r(9);!function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EIO=5]="EIO",e[e.EBADF=9]="EBADF",e[e.EACCES=13]="EACCES",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.EROFS=30]="EROFS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ENOTSUP=95]="ENOTSUP"}(a||(a={}));var l={};l[a.EPERM]="Operation not permitted.",l[a.ENOENT]="No such file or directory.",l[a.EIO]="Input/output error.",l[a.EBADF]="Bad file descriptor.",l[a.EACCES]="Permission denied.",l[a.EBUSY]="Resource busy or locked.",l[a.EEXIST]="File exists.",l[a.ENOTDIR]="File is not a directory.",l[a.EISDIR]="File is a directory.",l[a.EINVAL]="Invalid argument.",l[a.EFBIG]="File is too big.",l[a.ENOSPC]="No space left on disk.",l[a.EROFS]="Cannot modify a read-only file system.",l[a.ENOTEMPTY]="Directory is not empty.",l[a.ENOTSUP]="Operation is not supported.";var f,p=function(t){function n(e,n,r){void 0===n&&(n=l[e]),t.call(this,n),this.syscall="",this.errno=e,this.code=a[e],this.path=r,this.stack=(new t).stack,this.message="Error: "+this.code+": "+n+(this.path?", '"+this.path+"'":"")}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.fromJSON=function(e){var t=new n(0);return t.errno=e.errno,t.code=e.code,t.path=e.path,t.stack=e.stack,t.message=e.message,t},n.fromBuffer=function(e,t){return void 0===t&&(t=0),n.fromJSON(JSON.parse(e.toString("utf8",t+4,t+4+e.readUInt32LE(t))))},n.FileError=function(e,t){return new n(e,l[e],t)},n.ENOENT=function(e){return this.FileError(a.ENOENT,e)},n.EEXIST=function(e){return this.FileError(a.EEXIST,e)},n.EISDIR=function(e){return this.FileError(a.EISDIR,e)},n.ENOTDIR=function(e){return this.FileError(a.ENOTDIR,e)},n.EPERM=function(e){return this.FileError(a.EPERM,e)},n.ENOTEMPTY=function(e){return this.FileError(a.ENOTEMPTY,e)},n.prototype.toString=function(){return this.message},n.prototype.toJSON=function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},n.prototype.writeToBuffer=function(t,n){void 0===t&&(t=e.alloc(this.bufferSize())),void 0===n&&(n=0);var r=t.write(JSON.stringify(this.toJSON()),n+4);return t.writeUInt32LE(r,n),t},n.prototype.bufferSize=function(){return 4+e.byteLength(JSON.stringify(this.toJSON()))},n}(Error),d=Object.freeze({get ErrorCode(){return a},ErrorStrings:l,ApiError:p});!function(e){e[e.NOP=0]="NOP",e[e.THROW_EXCEPTION=1]="THROW_EXCEPTION",e[e.TRUNCATE_FILE=2]="TRUNCATE_FILE",e[e.CREATE_FILE=3]="CREATE_FILE"}(f||(f={}));var h,y=function e(t){if(this.flagStr=t,e.validFlagStrs.indexOf(t)<0)throw new p(a.EINVAL,"Invalid flag: "+t)};y.getFileFlag=function(e){return y.flagCache.hasOwnProperty(e)?y.flagCache[e]:y.flagCache[e]=new y(e)},y.prototype.getFlagString=function(){return this.flagStr},y.prototype.isReadable=function(){return-1!==this.flagStr.indexOf("r")||-1!==this.flagStr.indexOf("+")},y.prototype.isWriteable=function(){return-1!==this.flagStr.indexOf("w")||-1!==this.flagStr.indexOf("a")||-1!==this.flagStr.indexOf("+")},y.prototype.isTruncating=function(){return-1!==this.flagStr.indexOf("w")},y.prototype.isAppendable=function(){return-1!==this.flagStr.indexOf("a")},y.prototype.isSynchronous=function(){return-1!==this.flagStr.indexOf("s")},y.prototype.isExclusive=function(){return-1!==this.flagStr.indexOf("x")},y.prototype.pathExistsAction=function(){return this.isExclusive()?f.THROW_EXCEPTION:this.isTruncating()?f.TRUNCATE_FILE:f.NOP},y.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&"r+"!==this.flagStr?f.CREATE_FILE:f.THROW_EXCEPTION},y.flagCache={},y.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"],function(e){e[e.FILE=32768]="FILE",e[e.DIRECTORY=16384]="DIRECTORY",e[e.SYMLINK=40960]="SYMLINK"}(h||(h={}));var g=function(e,t,n,r,i,o){if(void 0===r&&(r=new Date),void 0===i&&(i=new Date),void 0===o&&(o=new Date),this.size=t,this.atime=r,this.mtime=i,this.ctime=o,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,n)this.mode=n;else switch(e){case h.FILE:this.mode=420;break;case h.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(t/512),this.mode<4096&&(this.mode|=e)};g.fromBuffer=function(e){var t=e.readUInt32LE(0),n=e.readUInt32LE(4),r=e.readDoubleLE(8),i=e.readDoubleLE(16),o=e.readDoubleLE(24);return new g(61440&n,t,4095&n,new Date(r),new Date(i),new Date(o))},g.prototype.toBuffer=function(){var t=e.alloc(32);return t.writeUInt32LE(this.size,0),t.writeUInt32LE(this.mode,4),t.writeDoubleLE(this.atime.getTime(),8),t.writeDoubleLE(this.mtime.getTime(),16),t.writeDoubleLE(this.ctime.getTime(),24),t},g.prototype.clone=function(){return new g(61440&this.mode,this.size,4095&this.mode,this.atime,this.mtime,this.ctime)},g.prototype.isFile=function(){return(61440&this.mode)===h.FILE},g.prototype.isDirectory=function(){return(61440&this.mode)===h.DIRECTORY},g.prototype.isSymbolicLink=function(){return(61440&this.mode)===h.SYMLINK},g.prototype.chmod=function(e){this.mode=61440&this.mode|e},g.prototype.isSocket=function(){return!1},g.prototype.isBlockDevice=function(){return!1},g.prototype.isCharacterDevice=function(){return!1},g.prototype.isFIFO=function(){return!1};var m=function(e,t){return e};function v(e){if(e)return e;throw new p(a.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}function w(e,t){switch(typeof e){case"number":return e;case"string":var n=parseInt(e,8);return isNaN(n)?t:n;default:return t}}function _(e){if(e instanceof Date)return e;if("number"==typeof e)return new Date(1e3*e);throw new p(a.EINVAL,"Invalid time.")}function b(e){if(e.indexOf("\0")>=0)throw new p(a.EINVAL,"Path must be a string without null bytes.");if(""===e)throw new p(a.EINVAL,"Path must not be empty.");return c.resolve(e)}function E(e,t,n,r){switch(typeof e){case"object":return{encoding:void 0!==e.encoding?e.encoding:t,flag:void 0!==e.flag?e.flag:n,mode:w(e.mode,r)};case"string":return{encoding:e,flag:n,mode:r};default:return{encoding:t,flag:n,mode:r}}}function k(){}var S=function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100};S.prototype.initialize=function(e){if(!e.constructor.isAvailable())throw new p(a.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=e},S.prototype._toUnixTimestamp=function(e){if("number"==typeof e)return e;if(e instanceof Date)return e.getTime()/1e3;throw new Error("Cannot parse time: "+e)},S.prototype.getRootFS=function(){return this.root?this.root:null},S.prototype.rename=function(e,t,n){void 0===n&&(n=k);var r=m(n,1);try{v(this.root).rename(b(e),b(t),r)}catch(e){r(e)}},S.prototype.renameSync=function(e,t){v(this.root).renameSync(b(e),b(t))},S.prototype.exists=function(e,t){void 0===t&&(t=k);var n=m(t,1);try{return v(this.root).exists(b(e),n)}catch(e){return n(!1)}},S.prototype.existsSync=function(e){try{return v(this.root).existsSync(b(e))}catch(e){return!1}},S.prototype.stat=function(e,t){void 0===t&&(t=k);var n=m(t,2);try{return v(this.root).stat(b(e),!1,n)}catch(e){return n(e)}},S.prototype.statSync=function(e){return v(this.root).statSync(b(e),!1)},S.prototype.lstat=function(e,t){void 0===t&&(t=k);var n=m(t,2);try{return v(this.root).stat(b(e),!0,n)}catch(e){return n(e)}},S.prototype.lstatSync=function(e){return v(this.root).statSync(b(e),!0)},S.prototype.truncate=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=k);var r=0;"function"==typeof t?n=t:"number"==typeof t&&(r=t);var i=m(n,1);try{if(r<0)throw new p(a.EINVAL);return v(this.root).truncate(b(e),r,i)}catch(e){return i(e)}},S.prototype.truncateSync=function(e,t){if(void 0===t&&(t=0),t<0)throw new p(a.EINVAL);return v(this.root).truncateSync(b(e),t)},S.prototype.unlink=function(e,t){void 0===t&&(t=k);var n=m(t,1);try{return v(this.root).unlink(b(e),n)}catch(e){return n(e)}},S.prototype.unlinkSync=function(e){return v(this.root).unlinkSync(b(e))},S.prototype.open=function(e,t,n,r){var i=this;void 0===r&&(r=k);var o=w(n,420),s=m(r="function"==typeof n?n:r,2);try{v(this.root).open(b(e),y.getFileFlag(t),o,function(e,t){t?s(e,i.getFdForFile(t)):s(e)})}catch(e){s(e)}},S.prototype.openSync=function(e,t,n){return void 0===n&&(n=420),this.getFdForFile(v(this.root).openSync(b(e),y.getFileFlag(t),w(n,420)))},S.prototype.readFile=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=k);var r=E(t,null,"r",null),i=m(n="function"==typeof t?t:n,2);try{var o=y.getFileFlag(r.flag);return o.isReadable()?v(this.root).readFile(b(e),r.encoding,o,i):i(new p(a.EINVAL,"Flag passed to readFile must allow for reading."))}catch(e){return i(e)}},S.prototype.readFileSync=function(e,t){void 0===t&&(t={});var n=E(t,null,"r",null),r=y.getFileFlag(n.flag);if(!r.isReadable())throw new p(a.EINVAL,"Flag passed to readFile must allow for reading.");return v(this.root).readFileSync(b(e),n.encoding,r)},S.prototype.writeFile=function(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r=k);var i=E(n,"utf8","w",420),o=m(r="function"==typeof n?n:r,1);try{var s=y.getFileFlag(i.flag);return s.isWriteable()?v(this.root).writeFile(b(e),t,i.encoding,s,i.mode,o):o(new p(a.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(e){return o(e)}},S.prototype.writeFileSync=function(e,t,n){var r=E(n,"utf8","w",420),i=y.getFileFlag(r.flag);if(!i.isWriteable())throw new p(a.EINVAL,"Flag passed to writeFile must allow for writing.");return v(this.root).writeFileSync(b(e),t,r.encoding,i,r.mode)},S.prototype.appendFile=function(e,t,n,r){void 0===r&&(r=k);var i=E(n,"utf8","a",420),o=m(r="function"==typeof n?n:r,1);try{var s=y.getFileFlag(i.flag);if(!s.isAppendable())return o(new p(a.EINVAL,"Flag passed to appendFile must allow for appending."));v(this.root).appendFile(b(e),t,i.encoding,s,i.mode,o)}catch(e){o(e)}},S.prototype.appendFileSync=function(e,t,n){var r=E(n,"utf8","a",420),i=y.getFileFlag(r.flag);if(!i.isAppendable())throw new p(a.EINVAL,"Flag passed to appendFile must allow for appending.");return v(this.root).appendFileSync(b(e),t,r.encoding,i,r.mode)},S.prototype.fstat=function(e,t){void 0===t&&(t=k);var n=m(t,2);try{this.fd2file(e).stat(n)}catch(e){n(e)}},S.prototype.fstatSync=function(e){return this.fd2file(e).statSync()},S.prototype.close=function(e,t){var n=this;void 0===t&&(t=k);var r=m(t,1);try{this.fd2file(e).close(function(t){t||n.closeFd(e),r(t)})}catch(e){r(e)}},S.prototype.closeSync=function(e){this.fd2file(e).closeSync(),this.closeFd(e)},S.prototype.ftruncate=function(e,t,n){void 0===n&&(n=k);var r="number"==typeof t?t:0,i=m(n="function"==typeof t?t:n,1);try{var o=this.fd2file(e);if(r<0)throw new p(a.EINVAL);o.truncate(r,i)}catch(e){i(e)}},S.prototype.ftruncateSync=function(e,t){void 0===t&&(t=0);var n=this.fd2file(e);if(t<0)throw new p(a.EINVAL);n.truncateSync(t)},S.prototype.fsync=function(e,t){void 0===t&&(t=k);var n=m(t,1);try{this.fd2file(e).sync(n)}catch(e){n(e)}},S.prototype.fsyncSync=function(e){this.fd2file(e).syncSync()},S.prototype.fdatasync=function(e,t){void 0===t&&(t=k);var n=m(t,1);try{this.fd2file(e).datasync(n)}catch(e){n(e)}},S.prototype.fdatasyncSync=function(e){this.fd2file(e).datasyncSync()},S.prototype.write=function(t,n,r,i,o,s){void 0===s&&(s=k);var u,c,l,f=null;if("string"==typeof n){var d="utf8";switch(typeof r){case"function":s=r;break;case"number":f=r,d="string"==typeof i?i:"utf8",s="function"==typeof o?o:s;break;default:return(s="function"==typeof i?i:"function"==typeof o?o:s)(new p(a.EINVAL,"Invalid arguments."))}c=0,l=(u=e.from(n,d)).length}else u=n,c=r,l=i,f="number"==typeof o?o:null,s="function"==typeof o?o:s;var h=m(s,3);try{var y=this.fd2file(t);null==f&&(f=y.getPos()),y.write(u,c,l,f,h)}catch(e){h(e)}},S.prototype.writeSync=function(t,n,r,i,o){var s,a,u,c=0;if("string"==typeof n){u="number"==typeof r?r:null;var l="string"==typeof i?i:"utf8";c=0,a=(s=e.from(n,l)).length}else s=n,c=r,a=i,u="number"==typeof o?o:null;var f=this.fd2file(t);return null==u&&(u=f.getPos()),f.writeSync(s,c,a,u)},S.prototype.read=function(t,n,r,i,o,s){var a,u,c,l,f;if(void 0===s&&(s=k),"number"==typeof n){c=n,a=r;var p=i;s="function"==typeof o?o:s,u=0,l=e.alloc(c),f=m(function(e,t,n){if(e)return s(e);s(e,n.toString(p),t)},3)}else l=n,u=r,c=i,a=o,f=m(s,3);try{var d=this.fd2file(t);null==a&&(a=d.getPos()),d.read(l,u,c,a,f)}catch(e){f(e)}},S.prototype.readSync=function(t,n,r,i,o){var s,a,u,c,l=!1,f="utf8";"number"==typeof n?(u=n,c=r,f=i,a=0,s=e.alloc(u),l=!0):(s=n,a=r,u=i,c=o);var p=this.fd2file(t);null==c&&(c=p.getPos());var d=p.readSync(s,a,u,c);return l?[s.toString(f),d]:d},S.prototype.fchown=function(e,t,n,r){void 0===r&&(r=k);var i=m(r,1);try{this.fd2file(e).chown(t,n,i)}catch(e){i(e)}},S.prototype.fchownSync=function(e,t,n){this.fd2file(e).chownSync(t,n)},S.prototype.fchmod=function(e,t,n){var r=m(n,1);try{var i="string"==typeof t?parseInt(t,8):t;this.fd2file(e).chmod(i,r)}catch(e){r(e)}},S.prototype.fchmodSync=function(e,t){var n="string"==typeof t?parseInt(t,8):t;this.fd2file(e).chmodSync(n)},S.prototype.futimes=function(e,t,n,r){void 0===r&&(r=k);var i=m(r,1);try{var o=this.fd2file(e);"number"==typeof t&&(t=new Date(1e3*t)),"number"==typeof n&&(n=new Date(1e3*n)),o.utimes(t,n,i)}catch(e){i(e)}},S.prototype.futimesSync=function(e,t,n){this.fd2file(e).utimesSync(_(t),_(n))},S.prototype.rmdir=function(e,t){void 0===t&&(t=k);var n=m(t,1);try{e=b(e),v(this.root).rmdir(e,n)}catch(e){n(e)}},S.prototype.rmdirSync=function(e){return e=b(e),v(this.root).rmdirSync(e)},S.prototype.mkdir=function(e,t,n){void 0===n&&(n=k),"function"==typeof t&&(n=t,t=511);var r=m(n,1);try{e=b(e),v(this.root).mkdir(e,t,r)}catch(e){r(e)}},S.prototype.mkdirSync=function(e,t){v(this.root).mkdirSync(b(e),w(t,511))},S.prototype.readdir=function(e,t){void 0===t&&(t=k);var n=m(t,2);try{e=b(e),v(this.root).readdir(e,n)}catch(e){n(e)}},S.prototype.readdirSync=function(e){return e=b(e),v(this.root).readdirSync(e)},S.prototype.link=function(e,t,n){void 0===n&&(n=k);var r=m(n,1);try{e=b(e),t=b(t),v(this.root).link(e,t,r)}catch(e){r(e)}},S.prototype.linkSync=function(e,t){return e=b(e),t=b(t),v(this.root).linkSync(e,t)},S.prototype.symlink=function(e,t,n,r){void 0===r&&(r=k);var i="string"==typeof n?n:"file",o=m(r="function"==typeof n?n:r,1);try{if("file"!==i&&"dir"!==i)return o(new p(a.EINVAL,"Invalid type: "+i));e=b(e),t=b(t),v(this.root).symlink(e,t,i,o)}catch(e){o(e)}},S.prototype.symlinkSync=function(e,t,n){if(n){if("file"!==n&&"dir"!==n)throw new p(a.EINVAL,"Invalid type: "+n)}else n="file";return e=b(e),t=b(t),v(this.root).symlinkSync(e,t,n)},S.prototype.readlink=function(e,t){void 0===t&&(t=k);var n=m(t,2);try{e=b(e),v(this.root).readlink(e,n)}catch(e){n(e)}},S.prototype.readlinkSync=function(e){return e=b(e),v(this.root).readlinkSync(e)},S.prototype.chown=function(e,t,n,r){void 0===r&&(r=k);var i=m(r,1);try{e=b(e),v(this.root).chown(e,!1,t,n,i)}catch(e){i(e)}},S.prototype.chownSync=function(e,t,n){e=b(e),v(this.root).chownSync(e,!1,t,n)},S.prototype.lchown=function(e,t,n,r){void 0===r&&(r=k);var i=m(r,1);try{e=b(e),v(this.root).chown(e,!0,t,n,i)}catch(e){i(e)}},S.prototype.lchownSync=function(e,t,n){e=b(e),v(this.root).chownSync(e,!0,t,n)},S.prototype.chmod=function(e,t,n){void 0===n&&(n=k);var r=m(n,1);try{var i=w(t,-1);if(i<0)throw new p(a.EINVAL,"Invalid mode.");v(this.root).chmod(b(e),!1,i,r)}catch(e){r(e)}},S.prototype.chmodSync=function(e,t){var n=w(t,-1);if(n<0)throw new p(a.EINVAL,"Invalid mode.");e=b(e),v(this.root).chmodSync(e,!1,n)},S.prototype.lchmod=function(e,t,n){void 0===n&&(n=k);var r=m(n,1);try{var i=w(t,-1);if(i<0)throw new p(a.EINVAL,"Invalid mode.");v(this.root).chmod(b(e),!0,i,r)}catch(e){r(e)}},S.prototype.lchmodSync=function(e,t){var n=w(t,-1);if(n<1)throw new p(a.EINVAL,"Invalid mode.");v(this.root).chmodSync(b(e),!0,n)},S.prototype.utimes=function(e,t,n,r){void 0===r&&(r=k);var i=m(r,1);try{v(this.root).utimes(b(e),_(t),_(n),i)}catch(e){i(e)}},S.prototype.utimesSync=function(e,t,n){v(this.root).utimesSync(b(e),_(t),_(n))},S.prototype.realpath=function(e,t,n){void 0===n&&(n=k);var r="object"==typeof t?t:{},i=m(n="function"==typeof t?t:k,2);try{e=b(e),v(this.root).realpath(e,r,i)}catch(e){i(e)}},S.prototype.realpathSync=function(e,t){return void 0===t&&(t={}),e=b(e),v(this.root).realpathSync(e,t)},S.prototype.watchFile=function(e,t,n){throw void 0===n&&(n=k),new p(a.ENOTSUP)},S.prototype.unwatchFile=function(e,t){throw void 0===t&&(t=k),new p(a.ENOTSUP)},S.prototype.watch=function(e,t,n){throw void 0===n&&(n=k),new p(a.ENOTSUP)},S.prototype.access=function(e,t,n){throw void 0===n&&(n=k),new p(a.ENOTSUP)},S.prototype.accessSync=function(e,t){throw new p(a.ENOTSUP)},S.prototype.createReadStream=function(e,t){throw new p(a.ENOTSUP)},S.prototype.createWriteStream=function(e,t){throw new p(a.ENOTSUP)},S.prototype.wrapCallbacks=function(e){m=e},S.prototype.getFdForFile=function(e){var t=this.nextFd++;return this.fdMap[t]=e,t},S.prototype.fd2file=function(e){var t=this.fdMap[e];if(t)return t;throw new p(a.EBADF,"Invalid file descriptor.")},S.prototype.closeFd=function(e){delete this.fdMap[e]},S.Stats=g;var x=new S,T={},O=S.prototype;function C(e,t,n,r,i){return e<t||n<t?e>n?n+1:e+1:r===i?t:t+1}function N(e,t){if(e===t)return 0;if(e.length>t.length){var n=e;e=t,t=n}for(var r=e.length,i=t.length;r>0&&e.charCodeAt(r-1)===t.charCodeAt(i-1);)r--,i--;for(var o=0;o<r&&e.charCodeAt(o)===t.charCodeAt(o);)o++;if(i-=o,0==(r-=o)||1===i)return i;for(var s,a,u,c,l,f=new Array(r<<1),p=0;p<r;)f[r+p]=e.charCodeAt(o+p),f[p]=++p;for(s=0;s+3<i;)for(var d=t.charCodeAt(o+(a=s)),h=t.charCodeAt(o+(u=s+1)),y=t.charCodeAt(o+(c=s+2)),g=t.charCodeAt(o+(l=s+3)),m=s+=4,v=0;v<r;){var w=f[r+v],_=f[v];a=C(_,a,u,d,w),u=C(a,u,c,h,w),c=C(u,c,l,y,w),m=C(c,l,m,g,w),f[v++]=m,l=c,c=u,u=a,a=_}for(var b=0;s<i;){var E=t.charCodeAt(o+(a=s));b=++s;for(var k=0;k<r;k++){var S=f[k];f[k]=b=S<a||b<a?S>b?b+1:S+1:E===f[r+k]?a:a+1,a=S}}return b}function A(e,t,n){e&&console.warn("["+t+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+t+".Create("+JSON.stringify(n)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}Object.keys(O).forEach(function(e){"function"==typeof x[e]?T[e]=function(){return x[e].apply(x,arguments)}:T[e]=x[e]}),T.changeFSModule=function(e){x=e},T.getFSModule=function(){return x},T.FS=S;var I="undefined"!=typeof navigator&&!(!/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())&&-1===navigator.userAgent.indexOf("Trident")),L="undefined"==typeof window;function F(){throw new Error("BFS has reached an impossible code path; please file a bug.")}function R(e,t,n){n.existsSync(e)||(R(c.dirname(e),t,n),n.mkdirSync(e,t))}function D(e){var t=M(e),n=t.byteOffset,r=t.byteLength;return 0===n&&r===t.buffer.byteLength?t.buffer:t.buffer.slice(n,n+r)}function M(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function j(t){return t instanceof e?t:t instanceof Uint8Array?P(t):e.from(t)}function P(t){return t instanceof e?t:0===t.byteOffset&&t.byteLength===t.buffer.byteLength?U(t.buffer):e.from(t.buffer,t.byteOffset,t.byteLength)}function U(t){return e.from(t)}function B(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=e.length),t<0||n<0||n>e.length||t>n)throw new TypeError("Invalid slice bounds on buffer of length "+e.length+": ["+t+", "+n+"]");if(0===e.length)return H();var r=M(e),i=e[0],o=(i+1)%255;return e[0]=o,r[0]===o?(r[0]=i,P(r.slice(t,n))):(e[0]=i,P(r.subarray(t,n)))}var z=null;function H(){return z||(z=e.alloc(0))}function q(t,n){e.isBuffer(t)?n():n(new p(a.EINVAL,"option must be a Buffer."))}function W(e,t,n){var r=e.Options,i=e.Name,o=0,s=!1,u=!1;function c(e){s||(e&&(s=!0,n(e)),0==--o&&u&&n())}var l=function(e){if(r.hasOwnProperty(e)){var u=r[e],l=t[e];if(null==l){if(!u.optional){var f=Object.keys(t).filter(function(e){return!(e in r)}).map(function(t){return{str:t,distance:N(e,t)}}).filter(function(e){return e.distance<5}).sort(function(e,t){return e.distance-t.distance});return s?{}:(s=!0,{v:n(new p(a.EINVAL,"["+i+"] Required option '"+e+"' not provided."+(f.length>0?" You provided unrecognized option '"+f[0].str+"'; perhaps you meant to type '"+e+"'.":"")+"\nOption description: "+u.description))})}}else{if(!(Array.isArray(u.type)?-1!==u.type.indexOf(typeof l):typeof l===u.type))return s?{}:(s=!0,{v:n(new p(a.EINVAL,"["+i+"] Value provided for option "+e+" is not the proper type. Expected "+(Array.isArray(u.type)?"one of {"+u.type.join(", ")+"}":u.type)+", but received "+typeof l+"\nOption description: "+u.description))});u.validator&&(o++,u.validator(l,c))}}};for(var f in r){var d=l(f);if(d)return d.v}u=!0,0!==o||s||n()}var Y=Object.freeze({deprecationMessage:A,isIE:I,isWebWorker:L,fail:F,mkdirpSync:R,buffer2ArrayBuffer:D,buffer2Uint8array:M,arrayish2Buffer:j,uint8Array2Buffer:P,arrayBuffer2Buffer:U,copyingSlice:B,emptyBuffer:H,bufferValidator:q,checkOptions:W}),G=function(e){this.fs=e,this.nodefs=e.getNodeFS(),this.FS=e.getFS(),this.PATH=e.getPATH(),this.ERRNO_CODES=e.getERRNO_CODES()};G.prototype.open=function(e){var t=this.fs.realPath(e.node),n=this.FS;try{n.isFile(e.node.mode)&&(e.nfd=this.nodefs.openSync(t,this.fs.flagsToPermissionString(e.flags)))}catch(e){if(!e.code)throw e;throw new n.ErrnoError(this.ERRNO_CODES[e.code])}},G.prototype.close=function(e){var t=this.FS;try{t.isFile(e.node.mode)&&e.nfd&&this.nodefs.closeSync(e.nfd)}catch(e){if(!e.code)throw e;throw new t.ErrnoError(this.ERRNO_CODES[e.code])}},G.prototype.read=function(e,t,n,r,i){try{return this.nodefs.readSync(e.nfd,P(t),n,r,i)}catch(e){throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},G.prototype.write=function(e,t,n,r,i){try{return this.nodefs.writeSync(e.nfd,P(t),n,r,i)}catch(e){throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},G.prototype.llseek=function(e,t,n){var r=t;if(1===n)r+=e.position;else if(2===n&&this.FS.isFile(e.node.mode))try{r+=this.nodefs.fstatSync(e.nfd).size}catch(e){throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}if(r<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return e.position=r,r};var V=function(e){this.fs=e,this.nodefs=e.getNodeFS(),this.FS=e.getFS(),this.PATH=e.getPATH(),this.ERRNO_CODES=e.getERRNO_CODES()};V.prototype.getattr=function(e){var t,n=this.fs.realPath(e);try{t=this.nodefs.lstatSync(n)}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}return{dev:t.dev,ino:t.ino,mode:t.mode,nlink:t.nlink,uid:t.uid,gid:t.gid,rdev:t.rdev,size:t.size,atime:t.atime,mtime:t.mtime,ctime:t.ctime,blksize:t.blksize,blocks:t.blocks}},V.prototype.setattr=function(e,t){var n=this.fs.realPath(e);try{if(void 0!==t.mode&&(this.nodefs.chmodSync(n,t.mode),e.mode=t.mode),void 0!==t.timestamp){var r=new Date(t.timestamp);this.nodefs.utimesSync(n,r,r)}}catch(e){if(!e.code)throw e;if("ENOTSUP"!==e.code)throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}if(void 0!==t.size)try{this.nodefs.truncateSync(n,t.size)}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},V.prototype.lookup=function(e,t){var n=this.PATH.join2(this.fs.realPath(e),t),r=this.fs.getMode(n);return this.fs.createNode(e,t,r)},V.prototype.mknod=function(e,t,n,r){var i=this.fs.createNode(e,t,n,r),o=this.fs.realPath(i);try{this.FS.isDir(i.mode)?this.nodefs.mkdirSync(o,i.mode):this.nodefs.writeFileSync(o,"",{mode:i.mode})}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}return i},V.prototype.rename=function(e,t,n){var r=this.fs.realPath(e),i=this.PATH.join2(this.fs.realPath(t),n);try{this.nodefs.renameSync(r,i),e.name=n,e.parent=t}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},V.prototype.unlink=function(e,t){var n=this.PATH.join2(this.fs.realPath(e),t);try{this.nodefs.unlinkSync(n)}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},V.prototype.rmdir=function(e,t){var n=this.PATH.join2(this.fs.realPath(e),t);try{this.nodefs.rmdirSync(n)}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},V.prototype.readdir=function(e){var t=this.fs.realPath(e);try{var n=this.nodefs.readdirSync(t);return n.push(".",".."),n}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},V.prototype.symlink=function(e,t,n){var r=this.PATH.join2(this.fs.realPath(e),t);try{this.nodefs.symlinkSync(n,r)}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},V.prototype.readlink=function(e){var t=this.fs.realPath(e);try{return this.nodefs.readlinkSync(t)}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}};var X=function(e,t,n,r){void 0===e&&(e=self.FS),void 0===t&&(t=self.PATH),void 0===n&&(n=self.ERRNO_CODES),void 0===r&&(r=T),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=r,this.FS=e,this.PATH=t,this.ERRNO_CODES=n,this.node_ops=new V(this),this.stream_ops=new G(this)};X.prototype.mount=function(e){return this.createNode(null,"/",this.getMode(e.opts.root),0)},X.prototype.createNode=function(e,t,n,r){var i=this.FS;if(!i.isDir(n)&&!i.isFile(n)&&!i.isLink(n))throw new i.ErrnoError(this.ERRNO_CODES.EINVAL);var o=i.createNode(e,t,n);return o.node_ops=this.node_ops,o.stream_ops=this.stream_ops,o},X.prototype.getMode=function(e){var t;try{t=this.nodefs.lstatSync(e)}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}return t.mode},X.prototype.realPath=function(e){for(var t=[];e.parent!==e;)t.push(e.name),e=e.parent;return t.push(e.mount.opts.root),t.reverse(),this.PATH.join.apply(null,t)},X.prototype.flagsToPermissionString=function(e){var t="string"==typeof e?parseInt(e,10):e;return(t&=8191)in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[t]:e},X.prototype.getNodeFS=function(){return this.nodefs},X.prototype.getFS=function(){return this.FS},X.prototype.getPATH=function(){return this.PATH},X.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES};var $=function(){};$.prototype.supportsLinks=function(){return!1},$.prototype.diskSpace=function(e,t){t(0,0)},$.prototype.openFile=function(e,t,n){throw new p(a.ENOTSUP)},$.prototype.createFile=function(e,t,n,r){throw new p(a.ENOTSUP)},$.prototype.open=function(e,t,n,r){var i=this;this.stat(e,!1,function(o,s){if(o)switch(t.pathNotExistsAction()){case f.CREATE_FILE:return i.stat(c.dirname(e),!1,function(o,s){o?r(o):s&&!s.isDirectory()?r(p.ENOTDIR(c.dirname(e))):i.createFile(e,t,n,r)});case f.THROW_EXCEPTION:return r(p.ENOENT(e));default:return r(new p(a.EINVAL,"Invalid FileFlag object."))}else{if(s&&s.isDirectory())return r(p.EISDIR(e));switch(t.pathExistsAction()){case f.THROW_EXCEPTION:return r(p.EEXIST(e));case f.TRUNCATE_FILE:return i.openFile(e,t,function(e,t){e?r(e):t?t.truncate(0,function(){t.sync(function(){r(null,t)})}):F()});case f.NOP:return i.openFile(e,t,r);default:return r(new p(a.EINVAL,"Invalid FileFlag object."))}}})},$.prototype.rename=function(e,t,n){n(new p(a.ENOTSUP))},$.prototype.renameSync=function(e,t){throw new p(a.ENOTSUP)},$.prototype.stat=function(e,t,n){n(new p(a.ENOTSUP))},$.prototype.statSync=function(e,t){throw new p(a.ENOTSUP)},$.prototype.openFileSync=function(e,t,n){throw new p(a.ENOTSUP)},$.prototype.createFileSync=function(e,t,n){throw new p(a.ENOTSUP)},$.prototype.openSync=function(e,t,n){var r;try{r=this.statSync(e,!1)}catch(r){switch(t.pathNotExistsAction()){case f.CREATE_FILE:if(!this.statSync(c.dirname(e),!1).isDirectory())throw p.ENOTDIR(c.dirname(e));return this.createFileSync(e,t,n);case f.THROW_EXCEPTION:throw p.ENOENT(e);default:throw new p(a.EINVAL,"Invalid FileFlag object.")}}if(r.isDirectory())throw p.EISDIR(e);switch(t.pathExistsAction()){case f.THROW_EXCEPTION:throw p.EEXIST(e);case f.TRUNCATE_FILE:return this.unlinkSync(e),this.createFileSync(e,t,r.mode);case f.NOP:return this.openFileSync(e,t,n);default:throw new p(a.EINVAL,"Invalid FileFlag object.")}},$.prototype.unlink=function(e,t){t(new p(a.ENOTSUP))},$.prototype.unlinkSync=function(e){throw new p(a.ENOTSUP)},$.prototype.rmdir=function(e,t){t(new p(a.ENOTSUP))},$.prototype.rmdirSync=function(e){throw new p(a.ENOTSUP)},$.prototype.mkdir=function(e,t,n){n(new p(a.ENOTSUP))},$.prototype.mkdirSync=function(e,t){throw new p(a.ENOTSUP)},$.prototype.readdir=function(e,t){t(new p(a.ENOTSUP))},$.prototype.readdirSync=function(e){throw new p(a.ENOTSUP)},$.prototype.exists=function(e,t){this.stat(e,null,function(e){t(!e)})},$.prototype.existsSync=function(e){try{return this.statSync(e,!0),!0}catch(e){return!1}},$.prototype.realpath=function(e,t,n){if(this.supportsLinks())for(var r=e.split(c.sep),i=0;i<r.length;i++){var o=r.slice(0,i+1);r[i]=c.join.apply(null,o)}else this.exists(e,function(t){t?n(null,e):n(p.ENOENT(e))})},$.prototype.realpathSync=function(e,t){if(this.supportsLinks()){for(var n=e.split(c.sep),r=0;r<n.length;r++){var i=n.slice(0,r+1);n[r]=c.join.apply(c,i)}return n.join(c.sep)}if(this.existsSync(e))return e;throw p.ENOENT(e)},$.prototype.truncate=function(e,t,n){this.open(e,y.getFileFlag("r+"),420,function(e,r){if(e)return n(e);r.truncate(t,function(e){r.close(function(t){n(e||t)})})})},$.prototype.truncateSync=function(e,t){var n=this.openSync(e,y.getFileFlag("r+"),420);try{n.truncateSync(t)}catch(e){throw e}finally{n.closeSync()}},$.prototype.readFile=function(t,n,r,i){var o=i;this.open(t,r,420,function(t,r){if(t)return i(t);i=function(e,t){r.close(function(n){return e||(e=n),o(e,t)})},r.stat(function(t,o){if(t)return i(t);var s=e.alloc(o.size);r.read(s,0,o.size,0,function(e){if(e)return i(e);if(null===n)return i(e,s);try{i(null,s.toString(n))}catch(e){i(e)}})})})},$.prototype.readFileSync=function(t,n,r){var i=this.openSync(t,r,420);try{var o=i.statSync(),s=e.alloc(o.size);return i.readSync(s,0,o.size,0),i.closeSync(),null===n?s:s.toString(n)}finally{i.closeSync()}},$.prototype.writeFile=function(t,n,r,i,o,s){var a=s;this.open(t,i,420,function(t,i){if(t)return s(t);s=function(e){i.close(function(t){a(e||t)})};try{"string"==typeof n&&(n=e.from(n,r))}catch(e){return s(e)}i.write(n,0,n.length,0,s)})},$.prototype.writeFileSync=function(t,n,r,i,o){var s=this.openSync(t,i,o);try{"string"==typeof n&&(n=e.from(n,r)),s.writeSync(n,0,n.length,0)}finally{s.closeSync()}},$.prototype.appendFile=function(t,n,r,i,o,s){var a=s;this.open(t,i,o,function(t,i){if(t)return s(t);s=function(e){i.close(function(t){a(e||t)})},"string"==typeof n&&(n=e.from(n,r)),i.write(n,0,n.length,null,s)})},$.prototype.appendFileSync=function(t,n,r,i,o){var s=this.openSync(t,i,o);try{"string"==typeof n&&(n=e.from(n,r)),s.writeSync(n,0,n.length,null)}finally{s.closeSync()}},$.prototype.chmod=function(e,t,n,r){r(new p(a.ENOTSUP))},$.prototype.chmodSync=function(e,t,n){throw new p(a.ENOTSUP)},$.prototype.chown=function(e,t,n,r,i){i(new p(a.ENOTSUP))},$.prototype.chownSync=function(e,t,n,r){throw new p(a.ENOTSUP)},$.prototype.utimes=function(e,t,n,r){r(new p(a.ENOTSUP))},$.prototype.utimesSync=function(e,t,n){throw new p(a.ENOTSUP)},$.prototype.link=function(e,t,n){n(new p(a.ENOTSUP))},$.prototype.linkSync=function(e,t){throw new p(a.ENOTSUP)},$.prototype.symlink=function(e,t,n,r){r(new p(a.ENOTSUP))},$.prototype.symlinkSync=function(e,t,n){throw new p(a.ENOTSUP)},$.prototype.readlink=function(e,t){t(new p(a.ENOTSUP))},$.prototype.readlinkSync=function(e){throw new p(a.ENOTSUP)};var Z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.supportsSynch=function(){return!0},t.prototype.rename=function(e,t,n){try{this.renameSync(e,t),n()}catch(e){n(e)}},t.prototype.stat=function(e,t,n){try{n(null,this.statSync(e,t))}catch(e){n(e)}},t.prototype.open=function(e,t,n,r){try{r(null,this.openSync(e,t,n))}catch(e){r(e)}},t.prototype.unlink=function(e,t){try{this.unlinkSync(e),t()}catch(e){t(e)}},t.prototype.rmdir=function(e,t){try{this.rmdirSync(e),t()}catch(e){t(e)}},t.prototype.mkdir=function(e,t,n){try{this.mkdirSync(e,t),n()}catch(e){n(e)}},t.prototype.readdir=function(e,t){try{t(null,this.readdirSync(e))}catch(e){t(e)}},t.prototype.chmod=function(e,t,n,r){try{this.chmodSync(e,t,n),r()}catch(e){r(e)}},t.prototype.chown=function(e,t,n,r,i){try{this.chownSync(e,t,n,r),i()}catch(e){i(e)}},t.prototype.utimes=function(e,t,n,r){try{this.utimesSync(e,t,n),r()}catch(e){r(e)}},t.prototype.link=function(e,t,n){try{this.linkSync(e,t),n()}catch(e){n(e)}},t.prototype.symlink=function(e,t,n,r){try{this.symlinkSync(e,t,n),r()}catch(e){r(e)}},t.prototype.readlink=function(e,t){try{t(null,this.readlinkSync(e))}catch(e){t(e)}},t}($),K=function(){};K.prototype.sync=function(e){e(new p(a.ENOTSUP))},K.prototype.syncSync=function(){throw new p(a.ENOTSUP)},K.prototype.datasync=function(e){this.sync(e)},K.prototype.datasyncSync=function(){return this.syncSync()},K.prototype.chown=function(e,t,n){n(new p(a.ENOTSUP))},K.prototype.chownSync=function(e,t){throw new p(a.ENOTSUP)},K.prototype.chmod=function(e,t){t(new p(a.ENOTSUP))},K.prototype.chmodSync=function(e){throw new p(a.ENOTSUP)},K.prototype.utimes=function(e,t,n){n(new p(a.ENOTSUP))},K.prototype.utimesSync=function(e,t){throw new p(a.ENOTSUP)};var J=function(t){function n(e,n,r,i,o){if(t.call(this),this._pos=0,this._dirty=!1,this._fs=e,this._path=n,this._flag=r,this._stat=i,this._buffer=o||H(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getBuffer=function(){return this._buffer},n.prototype.getStats=function(){return this._stat},n.prototype.getFlag=function(){return this._flag},n.prototype.getPath=function(){return this._path},n.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},n.prototype.advancePos=function(e){return this._pos+=e},n.prototype.setPos=function(e){return this._pos=e},n.prototype.sync=function(e){try{this.syncSync(),e()}catch(t){e(t)}},n.prototype.syncSync=function(){throw new p(a.ENOTSUP)},n.prototype.close=function(e){try{this.closeSync(),e()}catch(t){e(t)}},n.prototype.closeSync=function(){throw new p(a.ENOTSUP)},n.prototype.stat=function(e){try{e(null,this._stat.clone())}catch(t){e(t)}},n.prototype.statSync=function(){return this._stat.clone()},n.prototype.truncate=function(e,t){try{this.truncateSync(e),this._flag.isSynchronous()&&!T.getRootFS().supportsSynch()&&this.sync(t),t()}catch(e){return t(e)}},n.prototype.truncateSync=function(t){if(this._dirty=!0,!this._flag.isWriteable())throw new p(a.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,t>this._buffer.length){var n=e.alloc(t-this._buffer.length,0);return this.writeSync(n,0,n.length,this._buffer.length),void(this._flag.isSynchronous()&&T.getRootFS().supportsSynch()&&this.syncSync())}this._stat.size=t;var r=e.alloc(t);this._buffer.copy(r,0,0,t),this._buffer=r,this._flag.isSynchronous()&&T.getRootFS().supportsSynch()&&this.syncSync()},n.prototype.write=function(e,t,n,r,i){try{i(null,this.writeSync(e,t,n,r),e)}catch(e){i(e)}},n.prototype.writeSync=function(t,n,r,i){if(this._dirty=!0,null==i&&(i=this.getPos()),!this._flag.isWriteable())throw new p(a.EPERM,"File not opened with a writeable mode.");var o=i+r;if(o>this._stat.size&&(this._stat.size=o,o>this._buffer.length)){var s=e.alloc(o);this._buffer.copy(s),this._buffer=s}var u=t.copy(this._buffer,i,n,n+r);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),u):(this.setPos(i+u),u)},n.prototype.read=function(e,t,n,r,i){try{i(null,this.readSync(e,t,n,r),e)}catch(e){i(e)}},n.prototype.readSync=function(e,t,n,r){if(!this._flag.isReadable())throw new p(a.EPERM,"File not opened with a readable mode.");null==r&&(r=this.getPos()),r+n>this._stat.size&&(n=this._stat.size-r);var i=this._buffer.copy(e,t,r,r+n);return this._stat.atime=new Date,this._pos=r+n,i},n.prototype.chmod=function(e,t){try{this.chmodSync(e),t()}catch(e){t(e)}},n.prototype.chmodSync=function(e){if(!this._fs.supportsProps())throw new p(a.ENOTSUP);this._dirty=!0,this._stat.chmod(e),this.syncSync()},n.prototype.isDirty=function(){return this._dirty},n.prototype.resetDirty=function(){this._dirty=!1},n}(K),Q=function(e){function t(t,n,r,i,o){e.call(this,t,n,r,i,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.close=function(e){e()},t.prototype.closeSync=function(){},t}(J),ee=function(e){function t(t,n,r,i,o){e.call(this,t,n,r,i,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(J),te=function(e){function t(n,r,i){if(void 0===i&&(i=!0),e.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=n,this._async=r,!n.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");A(i,t.Name,{sync:"sync file system instance",async:"async file system instance"})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,n){try{var r=new t(e.sync,e.async,!1);r.initialize(function(e){e?n(e):n(null,r)},!1)}catch(e){n(e)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){return t.Name},t.prototype._syncSync=function(e){this._sync.writeFileSync(e.getPath(),e.getBuffer(),null,y.getFileFlag("w"),e.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[e.getPath(),e.getBuffer(),null,e.getFlag(),e.getStats().mode]})},t.prototype.initialize=function(e,t){var n=this;void 0===t&&(t=!0),t&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var r=this._initializeCallbacks;if(this._isInitialized)e();else if(1===r.push(e)){var i=function(e,t,r){"/"!==e&&n._sync.mkdirSync(e,t),n._async.readdir(e,function(t,n){var i=0;t?r(t):function t(s){s?r(s):i<n.length?(o(c.join(e,n[i]),t),i++):r()}()})},o=function(e,t){n._async.stat(e,!1,function(r,o){r?t(r):o.isDirectory()?i(e,o.mode,t):function(e,t,r){n._async.readFile(e,null,y.getFileFlag("r"),function(i,o){if(i)r(i);else try{n._sync.writeFileSync(e,o,null,y.getFileFlag("w"),t)}catch(e){i=e}finally{r(i)}})}(e,o.mode,t)})};i("/",0,function(e){n._isInitialized=!e,n._initializeCallbacks=[],r.forEach(function(t){return t(e)})})}},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},t.prototype.renameSync=function(e,t){this.checkInitialized(),this._sync.renameSync(e,t),this.enqueueOp({apiMethod:"rename",arguments:[e,t]})},t.prototype.statSync=function(e,t){return this.checkInitialized(),this._sync.statSync(e,t)},t.prototype.openSync=function(e,t,n){return this.checkInitialized(),this._sync.openSync(e,t,n).closeSync(),new ee(this,e,t,this._sync.statSync(e,!1),this._sync.readFileSync(e,null,y.getFileFlag("r")))},t.prototype.unlinkSync=function(e){this.checkInitialized(),this._sync.unlinkSync(e),this.enqueueOp({apiMethod:"unlink",arguments:[e]})},t.prototype.rmdirSync=function(e){this.checkInitialized(),this._sync.rmdirSync(e),this.enqueueOp({apiMethod:"rmdir",arguments:[e]})},t.prototype.mkdirSync=function(e,t){this.checkInitialized(),this._sync.mkdirSync(e,t),this.enqueueOp({apiMethod:"mkdir",arguments:[e,t]})},t.prototype.readdirSync=function(e){return this.checkInitialized(),this._sync.readdirSync(e)},t.prototype.existsSync=function(e){return this.checkInitialized(),this._sync.existsSync(e)},t.prototype.chmodSync=function(e,t,n){this.checkInitialized(),this._sync.chmodSync(e,t,n),this.enqueueOp({apiMethod:"chmod",arguments:[e,t,n]})},t.prototype.chownSync=function(e,t,n,r){this.checkInitialized(),this._sync.chownSync(e,t,n,r),this.enqueueOp({apiMethod:"chown",arguments:[e,t,n,r]})},t.prototype.utimesSync=function(e,t,n){this.checkInitialized(),this._sync.utimesSync(e,t,n),this.enqueueOp({apiMethod:"utimes",arguments:[e,t,n]})},t.prototype.checkInitialized=function(){if(!this._isInitialized)throw new p(a.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},t.prototype.enqueueOp=function(e){var t=this;if(this._queue.push(e),!this._queueRunning){this._queueRunning=!0;var n=function(e){if(e&&console.error("WARNING: File system has desynchronized. Received following error: "+e+"\n$"),t._queue.length>0){var r=t._queue.shift(),i=r.arguments;i.push(n),t._async[r.apiMethod].apply(t._async,i)}else t._queueRunning=!1};n()}},t}(Z);function ne(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}te.Name="AsyncMirror",te.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};var re=Math.max;function ie(e){return e}function oe(e,t){return function(e,t,n){return t=re(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=re(r.length-t,0),s=Array(o);++i<o;)s[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(s),ne(e,this,a)}}(e,t,ie)}var se=function(e){return oe(function(t){var n=t.pop();e.call(this,t,n)})};function ae(e){return oe(function(t,n){var r=se(function(n,r){var i=this;return e(t,function(e,t){e.apply(i,n.concat(t))},r)});return n.length?r.apply(this,n):r})}var ue="object"==typeof i&&i&&i.Object===Object&&i,ce="object"==typeof self&&self&&self.Object===Object&&self,le=ue||ce||Function("return this")(),fe=le.Symbol,pe=Object.prototype,de=pe.hasOwnProperty,he=pe.toString,ye=fe?fe.toStringTag:void 0,ge=Object.prototype.toString,me="[object Null]",ve="[object Undefined]",we=fe?fe.toStringTag:void 0;function _e(e){return null==e?void 0===e?ve:me:we&&we in Object(e)?function(e){var t=de.call(e,ye),n=e[ye];try{e[ye]=void 0;var r=!0}catch(e){}var i=he.call(e);return r&&(t?e[ye]=n:delete e[ye]),i}(e):function(e){return ge.call(e)}(e)}var be="[object AsyncFunction]",Ee="[object Function]",ke="[object GeneratorFunction]",Se="[object Proxy]",xe=9007199254740991;function Te(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=xe}function Oe(e){return null!=e&&Te(e.length)&&!function(e){if(!function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}(e))return!1;var t=_e(e);return t==Ee||t==ke||t==be||t==Se}(e)}var Ce={};function Ne(){}function Ae(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}var Ie="function"==typeof Symbol&&Symbol.iterator,Le=function(e){return Ie&&e[Ie]&&e[Ie]()};function Fe(e){return null!=e&&"object"==typeof e}var Re="[object Arguments]";function De(e){return Fe(e)&&_e(e)==Re}var Me=Object.prototype,je=Me.hasOwnProperty,Pe=Me.propertyIsEnumerable,Ue=De(function(){return arguments}())?De:function(e){return Fe(e)&&je.call(e,"callee")&&!Pe.call(e,"callee")},Be=Array.isArray,ze="object"==typeof n&&n&&!n.nodeType&&n,He=ze&&"object"==typeof o&&o&&!o.nodeType&&o,qe=He&&He.exports===ze?le.Buffer:void 0,We=(qe?qe.isBuffer:void 0)||function(){return!1},Ye=9007199254740991,Ge=/^(?:0|[1-9]\d*)$/;function Ve(e,t){return!!(t=null==t?Ye:t)&&("number"==typeof e||Ge.test(e))&&e>-1&&e%1==0&&e<t}var Xe={};Xe["[object Float32Array]"]=Xe["[object Float64Array]"]=Xe["[object Int8Array]"]=Xe["[object Int16Array]"]=Xe["[object Int32Array]"]=Xe["[object Uint8Array]"]=Xe["[object Uint8ClampedArray]"]=Xe["[object Uint16Array]"]=Xe["[object Uint32Array]"]=!0,Xe["[object Arguments]"]=Xe["[object Array]"]=Xe["[object ArrayBuffer]"]=Xe["[object Boolean]"]=Xe["[object DataView]"]=Xe["[object Date]"]=Xe["[object Error]"]=Xe["[object Function]"]=Xe["[object Map]"]=Xe["[object Number]"]=Xe["[object Object]"]=Xe["[object RegExp]"]=Xe["[object Set]"]=Xe["[object String]"]=Xe["[object WeakMap]"]=!1;var $e,Ze="object"==typeof n&&n&&!n.nodeType&&n,Ke=Ze&&"object"==typeof o&&o&&!o.nodeType&&o,Je=Ke&&Ke.exports===Ze&&ue.process,Qe=function(){try{return Je&&Je.binding&&Je.binding("util")}catch(e){}}(),et=Qe&&Qe.isTypedArray,tt=et?($e=et,function(e){return $e(e)}):function(e){return Fe(e)&&Te(e.length)&&!!Xe[_e(e)]},nt=Object.prototype.hasOwnProperty;function rt(e,t){var n=Be(e),r=!n&&Ue(e),i=!n&&!r&&We(e),o=!n&&!r&&!i&&tt(e),s=n||r||i||o,a=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=a.length;for(var c in e)!t&&!nt.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ve(c,u))||a.push(c);return a}var it=Object.prototype,ot=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),st=Object.prototype.hasOwnProperty;function at(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||it))return ot(e);var t,n,r=[];for(var i in Object(e))st.call(e,i)&&"constructor"!=i&&r.push(i);return r}function ut(e){return Oe(e)?rt(e):at(e)}function ct(e){if(Oe(e))return function(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}(e);var t=Le(e);return t?function(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}(t):function(e){var t=ut(e),n=-1,r=t.length;return function(){var i=t[++n];return n<r?{value:e[i],key:i}:null}}(e)}function lt(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function ft(e){return function(t,n,r){if(r=Ae(r||Ne),e<=0||!t)return r(null);var i=ct(t),o=!1,s=0;function a(e,t){if(s-=1,e)o=!0,r(e);else{if(t===Ce||o&&s<=0)return o=!0,r(null);u()}}function u(){for(;s<e&&!o;){var t=i();if(null===t)return o=!0,void(s<=0&&r(null));s+=1,n(t.value,t.key,lt(a))}}u()}}function pt(e,t,n,r){ft(t)(e,n,r)}function dt(e,t){return function(n,r,i){return e(n,t,r,i)}}function ht(e,t,n){n=Ae(n||Ne);var r=0,i=0,o=e.length;function s(e,t){e?n(e):++i!==o&&t!==Ce||n(null)}for(0===o&&n(null);r<o;r++)t(e[r],r,lt(s))}var yt,gt=dt(pt,1/0),mt=function(e,t,n){(Oe(e)?ht:gt)(e,t,n)};function vt(e,t,n,r){r=r||Ne;var i=[],o=0;e(t=t||[],function(e,t,r){var s=o++;n(e,function(e,t){i[s]=t,r(e)})},function(e){r(e,i)})}ae((yt=vt,function(e,t,n){return yt(mt,e,t,n)})),ae(dt(function(e){return function(t,n,r,i){return e(ft(n),t,r,i)}}(vt),1)),oe(function(e,t){return oe(function(n){return e.apply(null,t.concat(n))})});var wt="[\\ud800-\\udfff]",_t="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",bt="[^\\ud800-\\udfff]",Et="(?:\\ud83c[\\udde6-\\uddff]){2}",kt="[\\ud800-\\udbff][\\udc00-\\udfff]",St=([bt,Et,kt].join("|"),[bt+_t+"?",_t,Et,kt,wt].join("|"),"function"==typeof t&&t),xt="object"==typeof s&&"function"==typeof s.nextTick;function Tt(e){setTimeout(e,0)}function Ot(e){return oe(function(t,n){e(function(){t.apply(null,n)})})}Ot(St?t:xt?s.nextTick:Tt);var Ct,Nt=dt(pt,1),At=oe(function(e){return oe(function(t){var n,r,i,o,s=this,a=t[t.length-1];"function"==typeof a?t.pop():a=Ne,n=e,r=t,i=function(e,t,n){t.apply(s,e.concat(oe(function(e,t){n(e,t)})))},o=Ae((o=function(e,t){a.apply(s,[e].concat(t))})||Ne),Nt(n,function(e,t,n){i(r,e,function(e,t){r=t,n(e)})},function(e){o(e,r)})})});function It(e){return oe(function(t,n){t.apply(null,n.concat(oe(function(t,n){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););}(n,function(t){console[e](t)}))})))})}function Lt(e,t,n){mt(e,function(e){return function(t,n,r){return e(t,r)}}(t),n)}oe(function(e){return At.apply(null,e.reverse())}),oe(function(e){var t=[null].concat(e);return se(function(e,n){return n.apply(this,t)})}),It("dir"),It("log"),Ot(xt?s.nextTick:St?t:Tt),Math.ceil,Math.max;var Ft=function(e){this._cache={},this._client=e};Ft.prototype.readdir=function(e,t){var n=this,r=this.getCachedDirInfo(e);this._wrap(function(t){null!==r&&r.contents?n._client.readdir(e,{contentHash:r.stat.contentHash},t):n._client.readdir(e,t)},function(i,o,s,a){i?i.status===Dropbox.ApiError.NO_CONTENT&&null!==r?t(null,r.contents.slice(0)):t(i):(n.updateCachedDirInfo(e,s,o.slice(0)),a.forEach(function(t){n.updateCachedInfo(c.join(e,t.name),t)}),t(null,o))})},Ft.prototype.remove=function(e,t){var n=this;this._wrap(function(t){n._client.remove(e,t)},function(r,i){r||n.updateCachedInfo(e,i),t(r)})},Ft.prototype.move=function(e,t,n){var r=this;this._wrap(function(n){r._client.move(e,t,n)},function(i,o){i||(r.deleteCachedInfo(e),r.updateCachedInfo(t,o)),n(i)})},Ft.prototype.stat=function(e,t){var n=this;this._wrap(function(t){n._client.stat(e,t)},function(r,i){r||n.updateCachedInfo(e,i),t(r,i)})},Ft.prototype.readFile=function(e,t){var n=this,r=this.getCachedFileInfo(e);null!==r&&null!==r.contents?this.stat(e,function(i,o){i?t(i):o.contentHash===r.stat.contentHash?t(i,r.contents.slice(0),r.stat):n.readFile(e,t)}):this._wrap(function(t){n._client.readFile(e,{arrayBuffer:!0},t)},function(r,i,o){r||n.updateCachedInfo(e,o,i.slice(0)),t(r,i,o)})},Ft.prototype.writeFile=function(e,t,n){var r=this;this._wrap(function(n){r._client.writeFile(e,t,n)},function(i,o){i||r.updateCachedInfo(e,o,t.slice(0)),n(i,o)})},Ft.prototype.mkdir=function(e,t){var n=this;this._wrap(function(t){n._client.mkdir(e,t)},function(r,i){r||n.updateCachedInfo(e,i,[]),t(r)})},Ft.prototype._wrap=function(e,t){var n=0,r=function(i){var o=2;if(i&&3>++n)switch(i.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout(function(){e(r)},1e3*o);break;default:t.apply(null,arguments)}else t.apply(null,arguments)};e(r)},Ft.prototype.getCachedInfo=function(e){return this._cache[e.toLowerCase()]},Ft.prototype.putCachedInfo=function(e,t){this._cache[e.toLowerCase()]=t},Ft.prototype.deleteCachedInfo=function(e){delete this._cache[e.toLowerCase()]},Ft.prototype.getCachedDirInfo=function(e){var t,n=this.getCachedInfo(e);return(t=n)&&t.stat.isFolder?n:null},Ft.prototype.getCachedFileInfo=function(e){var t,n=this.getCachedInfo(e);return(t=n)&&t.stat.isFile?n:null},Ft.prototype.updateCachedDirInfo=function(e,t,n){void 0===n&&(n=null);var r=this.getCachedInfo(e);null===t.contentHash||void 0!==r&&r.stat.contentHash===t.contentHash||this.putCachedInfo(e,{stat:t,contents:n})},Ft.prototype.updateCachedFileInfo=function(e,t,n){void 0===n&&(n=null);var r=this.getCachedInfo(e);null===t.versionTag||void 0!==r&&r.stat.versionTag===t.versionTag||this.putCachedInfo(e,{stat:t,contents:n})},Ft.prototype.updateCachedInfo=function(e,t,n){var r;void 0===n&&(n=null),t.isFile&&(null==(r=n)||"object"==typeof r&&"number"==typeof r.byteLength)?this.updateCachedFileInfo(e,t,n):t.isFolder&&Array.isArray(n)&&this.updateCachedDirInfo(e,t,n)};var Rt=function(e){function t(t,n,r,i,o){e.call(this,t,n,r,i,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var t=this;if(this.isDirty()){var n=D(this.getBuffer());this._fs._writeFileStrict(this.getPath(),n,function(n){n||t.resetDirty(),e(n)})}else e()},t.prototype.close=function(e){this.sync(e)},t}(J),Dt=function(e){function t(n,r){void 0===r&&(r=!0),e.call(this),this._client=new Ft(n),A(r,t.Name,{client:"authenticated dropbox client instance"}),Ct||((Ct={})[Dropbox.ApiError.NETWORK_ERROR]=a.EIO,Ct[Dropbox.ApiError.INVALID_PARAM]=a.EINVAL,Ct[Dropbox.ApiError.INVALID_TOKEN]=a.EPERM,Ct[Dropbox.ApiError.OAUTH_ERROR]=a.EPERM,Ct[Dropbox.ApiError.NOT_FOUND]=a.ENOENT,Ct[Dropbox.ApiError.INVALID_METHOD]=a.EINVAL,Ct[Dropbox.ApiError.NOT_ACCEPTABLE]=a.EINVAL,Ct[Dropbox.ApiError.CONFLICT]=a.EINVAL,Ct[Dropbox.ApiError.RATE_LIMITED]=a.EBUSY,Ct[Dropbox.ApiError.SERVER_ERROR]=a.EBUSY,Ct[Dropbox.ApiError.OVER_QUOTA]=a.ENOSPC)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,n){n(null,new t(e.client,!1))},t.isAvailable=function(){return"undefined"!=typeof Dropbox},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var t=this;this._client.readdir("/",function(n,r){n?e(t.convert(n,"/")):Lt(r,function(e,n){var r=c.join("/",e);t._client.remove(r,function(e){n(e?t.convert(e,r):null)})},function(t){t?e(t):e()})})},t.prototype.rename=function(e,t,n){var r=this;this._client.move(e,t,function(i){i?r._client.stat(t,function(o,s){if(o||s.isFolder){var a=i.response.error.indexOf(e)>-1?e:t;n(r.convert(i,a))}else r._client.remove(t,function(i){i?n(r.convert(i,t)):r.rename(e,t,n)})}):n()})},t.prototype.stat=function(e,t,n){var r=this;this._client.stat(e,function(t,i){if(t)n(r.convert(t,e));else{if(!i||!i.isRemoved){var o=new g(r._statType(i),i.size);return n(null,o)}n(p.FileError(a.ENOENT,e))}})},t.prototype.open=function(e,t,n,r){var i=this;this._client.readFile(e,function(n,o,s){if(!n){var a;a=null===o?H():U(o);var u=i._makeFile(e,t,s,a);return r(null,u)}if(t.isReadable())r(i.convert(n,e));else switch(n.status){case Dropbox.ApiError.NOT_FOUND:var c=new ArrayBuffer(0);return i._writeFileStrict(e,c,function(n,o){if(n)r(n);else{var s=i._makeFile(e,t,o,U(c));r(null,s)}});default:return r(i.convert(n,e))}})},t.prototype._writeFileStrict=function(e,t,n){var r=this,i=c.dirname(e);this.stat(i,!1,function(o,s){o?n(p.FileError(a.ENOENT,i)):r._client.writeFile(e,t,function(t,i){t?n(r.convert(t,e)):n(null,i)})})},t.prototype._statType=function(e){return e.isFile?h.FILE:h.DIRECTORY},t.prototype._makeFile=function(e,t,n,r){var i=this._statType(n),o=new g(i,n.size);return new Rt(this,e,t,o,r)},t.prototype._remove=function(e,t,n){var r=this;this._client.stat(e,function(i,o){i?t(r.convert(i,e)):o.isFile&&!n?t(p.FileError(a.ENOTDIR,e)):!o.isFile&&n?t(p.FileError(a.EISDIR,e)):r._client.remove(e,function(n){t(n?r.convert(n,e):null)})})},t.prototype.unlink=function(e,t){this._remove(e,t,!0)},t.prototype.rmdir=function(e,t){this._remove(e,t,!1)},t.prototype.mkdir=function(e,t,n){var r=this,i=c.dirname(e);this._client.stat(i,function(t,o){t?n(r.convert(t,i)):r._client.mkdir(e,function(t){n(t?p.FileError(a.EEXIST,e):null)})})},t.prototype.readdir=function(e,t){var n=this;this._client.readdir(e,function(e,r){return e?t(n.convert(e)):t(null,r)})},t.prototype.convert=function(e,t){void 0===t&&(t=null);var n=Ct[e.status];return void 0===n&&(n=a.EIO),t?p.FileError(n,t):new p(n)},t}($);function Mt(e,t){void 0===t&&(t="");for(var n=e.errno,r=e.node,i=[];r&&(i.unshift(r.name),r!==r.parent);)r=r.parent;return new p(n,l[n],i.length>0?"/"+i.join("/"):t)}Dt.Name="Dropbox",Dt.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(e,t){e.isAuthenticated&&e.isAuthenticated()?t():t(new p(a.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))}}};var jt=function(e){function t(t,n,r,i){e.call(this),this._fs=t,this._FS=n,this._path=r,this._stream=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getPos=function(){},t.prototype.close=function(e){var t=null;try{this.closeSync()}catch(e){t=e}finally{e(t)}},t.prototype.closeSync=function(){try{this._FS.close(this._stream)}catch(e){throw Mt(e,this._path)}},t.prototype.stat=function(e){try{e(null,this.statSync())}catch(t){e(t)}},t.prototype.statSync=function(){try{return this._fs.statSync(this._path,!1)}catch(e){throw Mt(e,this._path)}},t.prototype.truncate=function(e,t){var n=null;try{this.truncateSync(e)}catch(e){n=e}finally{t(n)}},t.prototype.truncateSync=function(e){try{this._FS.ftruncate(this._stream.fd,e)}catch(e){throw Mt(e,this._path)}},t.prototype.write=function(e,t,n,r,i){try{i(null,this.writeSync(e,t,n,r),e)}catch(e){i(e)}},t.prototype.writeSync=function(e,t,n,r){try{var i=M(e),o=null===r?void 0:r;return this._FS.write(this._stream,i,t,n,o)}catch(e){throw Mt(e,this._path)}},t.prototype.read=function(e,t,n,r,i){try{i(null,this.readSync(e,t,n,r),e)}catch(e){i(e)}},t.prototype.readSync=function(e,t,n,r){try{var i=M(e),o=null===r?void 0:r;return this._FS.read(this._stream,i,t,n,o)}catch(e){throw Mt(e,this._path)}},t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.chown=function(e,t,n){var r=null;try{this.chownSync(e,t)}catch(e){r=e}finally{n(r)}},t.prototype.chownSync=function(e,t){try{this._FS.fchown(this._stream.fd,e,t)}catch(e){throw Mt(e,this._path)}},t.prototype.chmod=function(e,t){var n=null;try{this.chmodSync(e)}catch(e){n=e}finally{t(n)}},t.prototype.chmodSync=function(e){try{this._FS.fchmod(this._stream.fd,e)}catch(e){throw Mt(e,this._path)}},t.prototype.utimes=function(e,t,n){var r=null;try{this.utimesSync(e,t)}catch(e){r=e}finally{n(r)}},t.prototype.utimesSync=function(e,t){this._fs.utimesSync(this._path,e,t)},t}(K),Pt=function(t){function n(e){t.call(this),this._FS=e}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.Create=function(e,t){t(null,new n(e.FS))},n.isAvailable=function(){return!0},n.prototype.getName=function(){return this._FS.DB_NAME()},n.prototype.isReadOnly=function(){return!1},n.prototype.supportsLinks=function(){return!0},n.prototype.supportsProps=function(){return!0},n.prototype.supportsSynch=function(){return!0},n.prototype.renameSync=function(e,t){try{this._FS.rename(e,t)}catch(n){throw n.errno===a.ENOENT?Mt(n,this.existsSync(e)?t:e):Mt(n)}},n.prototype.statSync=function(e,t){try{var n=t?this._FS.lstat(e):this._FS.stat(e),r=this.modeToFileType(n.mode);return new g(r,n.size,n.mode,n.atime,n.mtime,n.ctime)}catch(t){throw Mt(t,e)}},n.prototype.openSync=function(e,t,n){try{var r=this._FS.open(e,t.getFlagString(),n);if(this._FS.isDir(r.node.mode))throw this._FS.close(r),p.EISDIR(e);return new jt(this,this._FS,e,r)}catch(t){throw Mt(t,e)}},n.prototype.unlinkSync=function(e){try{this._FS.unlink(e)}catch(t){throw Mt(t,e)}},n.prototype.rmdirSync=function(e){try{this._FS.rmdir(e)}catch(t){throw Mt(t,e)}},n.prototype.mkdirSync=function(e,t){try{this._FS.mkdir(e,t)}catch(t){throw Mt(t,e)}},n.prototype.readdirSync=function(e){try{return this._FS.readdir(e).filter(function(e){return"."!==e&&".."!==e})}catch(t){throw Mt(t,e)}},n.prototype.truncateSync=function(e,t){try{this._FS.truncate(e,t)}catch(t){throw Mt(t,e)}},n.prototype.readFileSync=function(e,t,n){try{var r=P(this._FS.readFile(e,{flags:n.getFlagString()}));return t?r.toString(t):r}catch(t){throw Mt(t,e)}},n.prototype.writeFileSync=function(t,n,r,i,o){try{r&&(n=e.from(n,r));var s=M(n);this._FS.writeFile(t,s,{flags:i.getFlagString(),encoding:"binary"}),this._FS.chmod(t,o)}catch(e){throw Mt(e,t)}},n.prototype.chmodSync=function(e,t,n){try{t?this._FS.lchmod(e,n):this._FS.chmod(e,n)}catch(t){throw Mt(t,e)}},n.prototype.chownSync=function(e,t,n,r){try{t?this._FS.lchown(e,n,r):this._FS.chown(e,n,r)}catch(t){throw Mt(t,e)}},n.prototype.symlinkSync=function(e,t,n){try{this._FS.symlink(e,t)}catch(e){throw Mt(e)}},n.prototype.readlinkSync=function(e){try{return this._FS.readlink(e)}catch(t){throw Mt(t,e)}},n.prototype.utimesSync=function(e,t,n){try{this._FS.utime(e,t.getTime(),n.getTime())}catch(t){throw Mt(t,e)}},n.prototype.modeToFileType=function(e){if(this._FS.isDir(e))return h.DIRECTORY;if(this._FS.isFile(e))return h.FILE;if(this._FS.isLink(e))return h.SYMLINK;throw p.EPERM("Invalid mode: "+e)},n}(Z);Pt.Name="EmscriptenFileSystem",Pt.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var Ut=function(e){function t(t,n){e.call(this),this._folder=t,this._wrapped=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,n){n(null,new t(e.folder,e.wrapped))},t.isAvailable=function(){return!0},t.prototype.initialize=function(e){var t=this;this._wrapped.exists(this._folder,function(n){n?e():t._wrapped.isReadOnly()?e(p.ENOENT(t._folder)):t._wrapped.mkdir(t._folder,511,e)})},t.prototype.getName=function(){return this._wrapped.getName()},t.prototype.isReadOnly=function(){return this._wrapped.isReadOnly()},t.prototype.supportsProps=function(){return this._wrapped.supportsProps()},t.prototype.supportsSynch=function(){return this._wrapped.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t}($);function Bt(e,t){if(null!==t&&"object"==typeof t){var n=t,r=n.path;r&&(r="/"+c.relative(e,r),n.message=n.message.replace(n.path,r),n.path=r)}return t}function zt(e,t){return"function"==typeof t?function(n){arguments.length>0&&(arguments[0]=Bt(e,n)),t.apply(null,arguments)}:t}function Ht(e,t,n){return"Sync"!==e.slice(e.length-4)?function(){return arguments.length>0&&(t&&(arguments[0]=c.join(this._folder,arguments[0])),n&&(arguments[1]=c.join(this._folder,arguments[1])),arguments[arguments.length-1]=zt(this._folder,arguments[arguments.length-1])),this._wrapped[e].apply(this._wrapped,arguments)}:function(){try{return t&&(arguments[0]=c.join(this._folder,arguments[0])),n&&(arguments[1]=c.join(this._folder,arguments[1])),this._wrapped[e].apply(this._wrapped,arguments)}catch(e){throw Bt(this._folder,e)}}}Ut.Name="FolderAdapter",Ut.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}},["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach(function(e){Ut.prototype[e]=Ht(e,!0,!1)}),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach(function(e){Ut.prototype[e]=Ht(e,!0,!0)});var qt="undefined"!=typeof window?window:"undefined"!=typeof self?self:i,Wt=qt.webkitRequestFileSystem||qt.requestFileSystem||null;function Yt(e,t,n){switch(e.name){case"PathExistsError":return p.EEXIST(t);case"QuotaExceededError":return p.FileError(a.ENOSPC,t);case"NotFoundError":return p.ENOENT(t);case"SecurityError":return p.FileError(a.EACCES,t);case"InvalidModificationError":return p.FileError(a.EPERM,t);case"TypeMismatchError":return p.FileError(n?a.ENOTDIR:a.EISDIR,t);case"EncodingError":case"InvalidStateError":case"NoModificationAllowedError":default:return p.FileError(a.EINVAL,t)}}var Gt=function(e){function t(t,n,r,i,o,s){e.call(this,t,r,i,o,s),this._entry=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var t=this;if(!this.isDirty())return e();this._entry.createWriter(function(n){var r=t.getBuffer(),i=new Blob([D(r)]),o=i.size;n.onwriteend=function(r){n.onwriteend=null,n.onerror=null,n.truncate(o),t.resetDirty(),e()},n.onerror=function(n){e(Yt(n,t.getPath(),!1))},n.write(i)})},t.prototype.close=function(e){this.sync(e)},t}(J),Vt=function(e){function t(n,r,i){void 0===n&&(n=5),void 0===r&&(r=qt.PERSISTENT),void 0===i&&(i=!0),e.call(this),this.size=1048576*n,this.type=r,A(i,t.Name,{size:n,type:r})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,n){var r=new t(e.size,e.type,!1);r.allocate(function(e){return e?n(e):n(null,r)},!1)},t.isAvailable=function(){return!!Wt},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.allocate=function(e,t){var n=this;void 0===e&&(e=function(){}),void 0===t&&(t=!0),t&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var r=function(t){n.fs=t,e()},i=function(t){e(Yt(t,"/",!0))};this.type===qt.PERSISTENT?function(e,t,n,r){if(void 0!==navigator.webkitPersistentStorage)switch(e){case qt.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(t,n,r);break;case qt.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(t,n,r);break;default:r(new TypeError("Invalid storage type: "+e))}else qt.webkitStorageInfo.requestQuota(e,t,n,r)}(this.type,this.size,function(e){Wt(n.type,e,r,i)},i):Wt(this.type,this.size,r,i)},t.prototype.empty=function(e){this._readdir("/",function(t,n){t?(console.error("Failed to empty FS"),e(t)):Lt(n,function(e,t){var n=function(){t()},r=function(n){t(Yt(n,e.fullPath,!e.isDirectory))};!function(e){return e.isDirectory}(e)?e.remove(n,r):e.removeRecursively(n,r)},function(n){t?(console.error("Failed to empty FS"),e(t)):e()})})},t.prototype.rename=function(e,t,n){var r=this,i=2,o=0,s=this.fs.root,u=e,l=function(e){--i<=0&&n(Yt(e,u,!1))},f=function(i){return 2==++o?n(new p(a.EINVAL,"Something was identified as both a file and a directory. This should never happen.")):e===t?n():(u=c.dirname(t),void s.getDirectory(u,{},function(o){u=c.basename(t),i.moveTo(o,u,function(e){n()},function(o){i.isDirectory?(u=t,r.unlink(t,function(i){i?l(o):r.rename(e,t,n)})):l(o)})},l))};s.getFile(e,{},f,l),s.getDirectory(e,{},f,l)},t.prototype.stat=function(e,t,n){var r=this,i={create:!1},o=function(e){var t=new g(h.DIRECTORY,4096);n(null,t)},s=function(t){n(Yt(t,e,!1))};this.fs.root.getFile(e,i,function(e){e.file(function(e){var t=new g(h.FILE,e.size);n(null,t)},s)},function(){r.fs.root.getDirectory(e,i,o,s)})},t.prototype.open=function(e,t,n,r){var i=this,o=function(n){"InvalidModificationError"===n.name&&t.isExclusive()?r(p.EEXIST(e)):r(Yt(n,e,!1))};this.fs.root.getFile(e,{create:t.pathNotExistsAction()===f.CREATE_FILE,exclusive:t.isExclusive()},function(n){n.file(function(s){var a=new FileReader;a.onloadend=function(o){var u=i._makeFile(e,n,t,s,a.result);r(null,u)},a.onerror=function(e){o(a.error)},a.readAsArrayBuffer(s)},o)},o)},t.prototype.unlink=function(e,t){this._remove(e,t,!0)},t.prototype.rmdir=function(e,t){var n=this;this.readdir(e,function(r,i){r?t(r):i.length>0?t(p.ENOTEMPTY(e)):n._remove(e,t,!1)})},t.prototype.mkdir=function(e,t,n){this.fs.root.getDirectory(e,{create:!0,exclusive:!0},function(e){n()},function(t){n(Yt(t,e,!0))})},t.prototype.readdir=function(e,t){this._readdir(e,function(e,n){if(!n)return t(e);for(var r=[],i=0,o=n;i<o.length;i+=1){var s=o[i];r.push(s.name)}t(null,r)})},t.prototype._makeFile=function(e,t,n,r,i){void 0===i&&(i=new ArrayBuffer(0));var o=new g(h.FILE,r.size),s=U(i);return new Gt(this,t,e,n,o,s)},t.prototype._readdir=function(e,t){var n=function(n){t(Yt(n,e,!0))};this.fs.root.getDirectory(e,{create:!1},function(e){var r=e.createReader(),i=[],o=function(){r.readEntries(function(e){e.length?(i=i.concat(function(e){return Array.prototype.slice.call(e||[],0)}(e)),o()):t(null,i)},n)};o()},n)},t.prototype._remove=function(e,t,n){var r=function(r){r.remove(function(){t()},function(r){t(Yt(r,e,!n))})},i=function(r){t(Yt(r,e,!n))},o={create:!1};n?this.fs.root.getFile(e,o,r,i):this.fs.root.getDirectory(e,o,r,i)},t}($);Vt.Name="HTML5FS",Vt.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var Xt=function(e,t,n,r,i,o){this.id=e,this.size=t,this.mode=n,this.atime=r,this.mtime=i,this.ctime=o};Xt.fromBuffer=function(e){if(void 0===e)throw new Error("NO");return new Xt(e.toString("ascii",30),e.readUInt32LE(0),e.readUInt16LE(4),e.readDoubleLE(6),e.readDoubleLE(14),e.readDoubleLE(22))},Xt.prototype.toStats=function(){return new g((61440&this.mode)===h.DIRECTORY?h.DIRECTORY:h.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},Xt.prototype.getSize=function(){return 30+this.id.length},Xt.prototype.toBuffer=function(t){return void 0===t&&(t=e.alloc(this.getSize())),t.writeUInt32LE(this.size,0),t.writeUInt16LE(this.mode,4),t.writeDoubleLE(this.atime,6),t.writeDoubleLE(this.mtime,14),t.writeDoubleLE(this.ctime,22),t.write(this.id,30,this.id.length,"ascii"),t},Xt.prototype.update=function(e){var t=!1;this.size!==e.size&&(this.size=e.size,t=!0),this.mode!==e.mode&&(this.mode=e.mode,t=!0);var n=e.atime.getTime();this.atime!==n&&(this.atime=n,t=!0);var r=e.mtime.getTime();this.mtime!==r&&(this.mtime=r,t=!0);var i=e.ctime.getTime();return this.ctime!==i&&(this.ctime=i,t=!0),t},Xt.prototype.isFile=function(){return(61440&this.mode)===h.FILE},Xt.prototype.isDirectory=function(){return(61440&this.mode)===h.DIRECTORY};var $t=null;function Zt(){return $t||($t=e.from("{}"))}function Kt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function Jt(e,t){return!e||(t(e),!1)}function Qt(e,t,n){return!e||(t.abort(function(){n(e)}),!1)}var en=function(e){this.store=e,this.originalData={},this.modifiedKeys=[]};en.prototype.get=function(e){var t=this.store.get(e);return this.stashOldValue(e,t),t},en.prototype.put=function(e,t,n){return this.markModified(e),this.store.put(e,t,n)},en.prototype.del=function(e){this.markModified(e),this.store.del(e)},en.prototype.commit=function(){},en.prototype.abort=function(){for(var e=0,t=this.modifiedKeys;e<t.length;e+=1){var n=t[e],r=this.originalData[n];r?this.store.put(n,r,!0):this.store.del(n)}},en.prototype.stashOldValue=function(e,t){this.originalData.hasOwnProperty(e)||(this.originalData[e]=t)},en.prototype.markModified=function(e){-1===this.modifiedKeys.indexOf(e)&&(this.modifiedKeys.push(e),this.originalData.hasOwnProperty(e)||(this.originalData[e]=this.store.get(e)))};var tn=function(e){function t(t,n,r,i,o){e.call(this,t,n,r,i,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(J),nn=function(t){function n(e){t.call(this),this.store=e.store,this.makeRootDirectory()}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.isAvailable=function(){return!0},n.prototype.getName=function(){return this.store.name()},n.prototype.isReadOnly=function(){return!1},n.prototype.supportsSymlinks=function(){return!1},n.prototype.supportsProps=function(){return!1},n.prototype.supportsSynch=function(){return!0},n.prototype.empty=function(){this.store.clear(),this.makeRootDirectory()},n.prototype.renameSync=function(t,n){var r=this.store.beginTransaction("readwrite"),i=c.dirname(t),o=c.basename(t),s=c.dirname(n),u=c.basename(n),l=this.findINode(r,i),f=this.getDirListing(r,i,l);if(!f[o])throw p.ENOENT(t);var d,h,y=f[o];if(delete f[o],0===(s+"/").indexOf(t+"/"))throw new p(a.EBUSY,i);if(s===i?(d=l,h=f):(d=this.findINode(r,s),h=this.getDirListing(r,s,d)),h[u]){var g=this.getINode(r,n,h[u]);if(!g.isFile())throw p.EPERM(n);try{r.del(g.id),r.del(h[u])}catch(e){throw r.abort(),e}}h[u]=y;try{r.put(l.id,e.from(JSON.stringify(f)),!0),r.put(d.id,e.from(JSON.stringify(h)),!0)}catch(e){throw r.abort(),e}r.commit()},n.prototype.statSync=function(e,t){return this.findINode(this.store.beginTransaction("readonly"),e).toStats()},n.prototype.createFileSync=function(e,t,n){var r=this.store.beginTransaction("readwrite"),i=H(),o=this.commitNewFile(r,e,h.FILE,n,i);return new tn(this,e,t,o.toStats(),i)},n.prototype.openFileSync=function(e,t){var n=this.store.beginTransaction("readonly"),r=this.findINode(n,e),i=n.get(r.id);if(void 0===i)throw p.ENOENT(e);return new tn(this,e,t,r.toStats(),i)},n.prototype.unlinkSync=function(e){this.removeEntry(e,!1)},n.prototype.rmdirSync=function(e){if(this.readdirSync(e).length>0)throw p.ENOTEMPTY(e);this.removeEntry(e,!0)},n.prototype.mkdirSync=function(t,n){var r=this.store.beginTransaction("readwrite"),i=e.from("{}");this.commitNewFile(r,t,h.DIRECTORY,n,i)},n.prototype.readdirSync=function(e){var t=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(t,e,this.findINode(t,e)))},n.prototype._syncSync=function(e,t,n){var r=this.store.beginTransaction("readwrite"),i=this._findINode(r,c.dirname(e),c.basename(e)),o=this.getINode(r,e,i),s=o.update(n);try{r.put(o.id,t,!0),s&&r.put(i,o.toBuffer(),!0)}catch(e){throw r.abort(),e}r.commit()},n.prototype.makeRootDirectory=function(){var e=this.store.beginTransaction("readwrite");if(void 0===e.get("/")){var t=(new Date).getTime(),n=new Xt(Kt(),4096,511|h.DIRECTORY,t,t,t);e.put(n.id,Zt(),!1),e.put("/",n.toBuffer(),!1),e.commit()}},n.prototype._findINode=function(e,t,n){var r=this,i=function(i){var o=r.getDirListing(e,t,i);if(o[n])return o[n];throw p.ENOENT(c.resolve(t,n))};return"/"===t?""===n?"/":i(this.getINode(e,t,"/")):i(this.getINode(e,t+c.sep+n,this._findINode(e,c.dirname(t),c.basename(t))))},n.prototype.findINode=function(e,t){return this.getINode(e,t,this._findINode(e,c.dirname(t),c.basename(t)))},n.prototype.getINode=function(e,t,n){var r=e.get(n);if(void 0===r)throw p.ENOENT(t);return Xt.fromBuffer(r)},n.prototype.getDirListing=function(e,t,n){if(!n.isDirectory())throw p.ENOTDIR(t);var r=e.get(n.id);if(void 0===r)throw p.ENOENT(t);return JSON.parse(r.toString())},n.prototype.addNewNode=function(e,t){for(var n;;)try{return n=Kt(),e.put(n,t,!1),n}catch(e){}throw new p(a.EIO,"Unable to commit data to key-value store.")},n.prototype.commitNewFile=function(t,n,r,i,o){var s,a=c.dirname(n),u=c.basename(n),l=this.findINode(t,a),f=this.getDirListing(t,a,l),d=(new Date).getTime();if("/"===n)throw p.EEXIST(n);if(f[u])throw p.EEXIST(n);try{var h=this.addNewNode(t,o);s=new Xt(h,o.length,i|r,d,d,d);var y=this.addNewNode(t,s.toBuffer());f[u]=y,t.put(l.id,e.from(JSON.stringify(f)),!0)}catch(e){throw t.abort(),e}return t.commit(),s},n.prototype.removeEntry=function(t,n){var r=this.store.beginTransaction("readwrite"),i=c.dirname(t),o=this.findINode(r,i),s=this.getDirListing(r,i,o),a=c.basename(t);if(!s[a])throw p.ENOENT(t);var u=s[a];delete s[a];var l=this.getINode(r,t,u);if(!n&&l.isDirectory())throw p.EISDIR(t);if(n&&!l.isDirectory())throw p.ENOTDIR(t);try{r.del(l.id),r.del(u),r.put(o.id,e.from(JSON.stringify(s)),!0)}catch(e){throw r.abort(),e}r.commit()},n}(Z),rn=function(e){function t(t,n,r,i,o){e.call(this,t,n,r,i,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var t=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(n){n||t.resetDirty(),e(n)}):e()},t.prototype.close=function(e){this.sync(e)},t}(J),on=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.isAvailable=function(){return!0},n.prototype.init=function(e,t){this.store=e,this.makeRootDirectory(t)},n.prototype.getName=function(){return this.store.name()},n.prototype.isReadOnly=function(){return!1},n.prototype.supportsSymlinks=function(){return!1},n.prototype.supportsProps=function(){return!1},n.prototype.supportsSynch=function(){return!1},n.prototype.empty=function(e){var t=this;this.store.clear(function(n){Jt(n,e)&&t.makeRootDirectory(e)})},n.prototype.rename=function(t,n,r){var i=this,o=this.store.beginTransaction("readwrite"),s=c.dirname(t),u=c.basename(t),l=c.dirname(n),f=c.basename(n),d={},h={},y=!1;if(0===(l+"/").indexOf(t+"/"))return r(new p(a.EBUSY,s));var g=function(a){i.findINodeAndDirListing(o,a,function(c,g,m){c?y||(y=!0,o.abort(function(){r(c)})):(d[a]=g,h[a]=m,function(){if(!y&&h.hasOwnProperty(s)&&h.hasOwnProperty(l)){var a=h[s],c=d[s],g=h[l],m=d[l];if(a[u]){var v=a[u];delete a[u];var w=function(){g[f]=v,o.put(c.id,e.from(JSON.stringify(a)),!0,function(t){Qt(t,o,r)&&(s===l?o.commit(r):o.put(m.id,e.from(JSON.stringify(g)),!0,function(e){Qt(e,o,r)&&o.commit(r)}))})};g[f]?i.getINode(o,n,g[f],function(e,t){Qt(e,o,r)&&(t.isFile()?o.del(t.id,function(e){Qt(e,o,r)&&o.del(g[f],function(e){Qt(e,o,r)&&w()})}):o.abort(function(e){r(p.EPERM(n))}))}):w()}else r(p.ENOENT(t))}}())})};g(s),s!==l&&g(l)},n.prototype.stat=function(e,t,n){var r=this.store.beginTransaction("readonly");this.findINode(r,e,function(e,t){Jt(e,n)&&n(null,t.toStats())})},n.prototype.createFile=function(e,t,n,r){var i=this,o=this.store.beginTransaction("readwrite"),s=H();this.commitNewFile(o,e,h.FILE,n,s,function(n,o){Jt(n,r)&&r(null,new rn(i,e,t,o.toStats(),s))})},n.prototype.openFile=function(e,t,n){var r=this,i=this.store.beginTransaction("readonly");this.findINode(i,e,function(o,s){Jt(o,n)&&i.get(s.id,function(i,o){Jt(i,n)&&(void 0===o?n(p.ENOENT(e)):n(null,new rn(r,e,t,s.toStats(),o)))})})},n.prototype.unlink=function(e,t){this.removeEntry(e,!1,t)},n.prototype.rmdir=function(e,t){var n=this;this.readdir(e,function(r,i){r?t(r):i.length>0?t(p.ENOTEMPTY(e)):n.removeEntry(e,!0,t)})},n.prototype.mkdir=function(t,n,r){var i=this.store.beginTransaction("readwrite"),o=e.from("{}");this.commitNewFile(i,t,h.DIRECTORY,n,o,r)},n.prototype.readdir=function(e,t){var n=this,r=this.store.beginTransaction("readonly");this.findINode(r,e,function(i,o){Jt(i,t)&&n.getDirListing(r,e,o,function(e,n){Jt(e,t)&&t(null,Object.keys(n))})})},n.prototype._sync=function(e,t,n,r){var i=this,o=this.store.beginTransaction("readwrite");this._findINode(o,c.dirname(e),c.basename(e),function(s,a){Qt(s,o,r)&&i.getINode(o,e,a,function(e,i){if(Qt(e,o,r)){var s=i.update(n);o.put(i.id,t,!0,function(e){Qt(e,o,r)&&(s?o.put(a,i.toBuffer(),!0,function(e){Qt(e,o,r)&&o.commit(r)}):o.commit(r))})}})})},n.prototype.makeRootDirectory=function(e){var t=this.store.beginTransaction("readwrite");t.get("/",function(n,r){if(n||void 0===r){var i=(new Date).getTime(),o=new Xt(Kt(),4096,511|h.DIRECTORY,i,i,i);t.put(o.id,Zt(),!1,function(n){Qt(n,t,e)&&t.put("/",o.toBuffer(),!1,function(n){n?t.abort(function(){e(n)}):t.commit(e)})})}else t.commit(e)})},n.prototype._findINode=function(e,t,n,r){var i=this,o=function(e,i,o){e?r(e):o[n]?r(null,o[n]):r(p.ENOENT(c.resolve(t,n)))};"/"===t?""===n?r(null,"/"):this.getINode(e,t,"/",function(n,s){Jt(n,r)&&i.getDirListing(e,t,s,function(e,t){o(e,0,t)})}):this.findINodeAndDirListing(e,t,o)},n.prototype.findINode=function(e,t,n){var r=this;this._findINode(e,c.dirname(t),c.basename(t),function(i,o){Jt(i,n)&&r.getINode(e,t,o,n)})},n.prototype.getINode=function(e,t,n,r){e.get(n,function(e,n){Jt(e,r)&&(void 0===n?r(p.ENOENT(t)):r(null,Xt.fromBuffer(n)))})},n.prototype.getDirListing=function(e,t,n,r){n.isDirectory()?e.get(n.id,function(e,n){if(Jt(e,r))try{r(null,JSON.parse(n.toString()))}catch(e){r(p.ENOENT(t))}}):r(p.ENOTDIR(t))},n.prototype.findINodeAndDirListing=function(e,t,n){var r=this;this.findINode(e,t,function(i,o){Jt(i,n)&&r.getDirListing(e,t,o,function(e,t){Jt(e,n)&&n(null,o,t)})})},n.prototype.addNewNode=function(e,t,n){var r,i=0,o=function(){5==++i?n(new p(a.EIO,"Unable to commit data to key-value store.")):(r=Kt(),e.put(r,t,!1,function(e,t){e||!t?o():n(null,r)}))};o()},n.prototype.commitNewFile=function(t,n,r,i,o,s){var a=this,u=c.dirname(n),l=c.basename(n),f=(new Date).getTime();if("/"===n)return s(p.EEXIST(n));this.findINodeAndDirListing(t,u,function(u,c,d){Qt(u,t,s)&&(d[l]?t.abort(function(){s(p.EEXIST(n))}):a.addNewNode(t,o,function(n,u){if(Qt(n,t,s)){var p=new Xt(u,o.length,i|r,f,f,f);a.addNewNode(t,p.toBuffer(),function(n,r){Qt(n,t,s)&&(d[l]=r,t.put(c.id,e.from(JSON.stringify(d)),!0,function(e){Qt(e,t,s)&&t.commit(function(e){Qt(e,t,s)&&s(null,p)})}))})}}))})},n.prototype.removeEntry=function(t,n,r){var i=this,o=this.store.beginTransaction("readwrite"),s=c.dirname(t),a=c.basename(t);this.findINodeAndDirListing(o,s,function(s,u,c){if(Qt(s,o,r))if(c[a]){var l=c[a];delete c[a],i.getINode(o,t,l,function(i,s){Qt(i,o,r)&&(!n&&s.isDirectory()?o.abort(function(){r(p.EISDIR(t))}):n&&!s.isDirectory()?o.abort(function(){r(p.ENOTDIR(t))}):o.del(s.id,function(t){Qt(t,o,r)&&o.del(l,function(t){Qt(t,o,r)&&o.put(u.id,e.from(JSON.stringify(c)),!0,function(e){Qt(e,o,r)&&o.commit(r)})})}))})}else o.abort(function(){r(p.ENOENT(t))})})},n}($),sn=function(){this.store={}};sn.prototype.name=function(){return an.Name},sn.prototype.clear=function(){this.store={}},sn.prototype.beginTransaction=function(e){return new en(this)},sn.prototype.get=function(e){return this.store[e]},sn.prototype.put=function(e,t,n){return!(!n&&this.store.hasOwnProperty(e)||(this.store[e]=t,0))},sn.prototype.del=function(e){delete this.store[e]};var an=function(e){function t(){e.call(this,{store:new sn})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,n){n(null,new t)},t}(nn);an.Name="InMemory",an.Options={};var un=qt.indexedDB||qt.mozIndexedDB||qt.webkitIndexedDB||qt.msIndexedDB;function cn(e,t){switch(void 0===t&&(t=e.toString()),e.name){case"NotFoundError":return new p(a.ENOENT,t);case"QuotaExceededError":return new p(a.ENOSPC,t);default:return new p(a.EIO,t)}}function ln(e,t,n){return void 0===t&&(t=a.EIO),void 0===n&&(n=null),function(r){r.preventDefault(),e(new p(t,null!==n?n:void 0))}}var fn=function(e,t){this.tx=e,this.store=t};fn.prototype.get=function(e,t){try{var n=this.store.get(e);n.onerror=ln(t),n.onsuccess=function(e){var n=e.target.result;t(null,void 0===n?n:U(n))}}catch(e){t(cn(e))}};var pn=function(e){function t(t,n){e.call(this,t,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.put=function(e,t,n,r){try{var i,o=D(t);(i=n?this.store.put(o,e):this.store.add(o,e)).onerror=ln(r),i.onsuccess=function(e){r(null,!0)}}catch(e){r(cn(e))}},t.prototype.del=function(e,t){try{var n=this.store.delete(e);n.onerror=ln(t),n.onsuccess=function(e){t()}}catch(e){t(cn(e))}},t.prototype.commit=function(e){setTimeout(e,0)},t.prototype.abort=function(e){var t=null;try{this.tx.abort()}catch(e){t=cn(e)}finally{e(t)}},t}(fn),dn=function(e,t){var n=this;void 0===t&&(t="browserfs"),this.storeName=t;var r=un.open(this.storeName,1);r.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains(n.storeName)&&t.deleteObjectStore(n.storeName),t.createObjectStore(n.storeName)},r.onsuccess=function(t){n.db=t.target.result,e(null,n)},r.onerror=ln(e,a.EACCES)};dn.prototype.name=function(){return hn.Name+" - "+this.storeName},dn.prototype.clear=function(e){try{var t=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).clear();t.onsuccess=function(t){setTimeout(e,0)},t.onerror=ln(e)}catch(t){e(cn(t))}},dn.prototype.beginTransaction=function(e){void 0===e&&(e="readonly");var t=this.db.transaction(this.storeName,e),n=t.objectStore(this.storeName);if("readwrite"===e)return new pn(t,n);if("readonly"===e)return new fn(t,n);throw new p(a.EINVAL,"Invalid transaction type.")};var hn=function(e){function t(n,r,i){var o=this;void 0===i&&(i=!0),e.call(this),this.store=new dn(function(e){e?n(e):o.init(o.store,function(e){n(e,o)})},r),A(i,t.Name,{storeName:r})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,n){new t(n,e.storeName,!1)},t.isAvailable=function(){try{return void 0!==un&&null!==un.open("__browserfs_test__")}catch(e){return!1}},t}(on);hn.Name="IndexedDB",hn.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var yn,gn=!1;try{qt.localStorage.setItem("__test__",String.fromCharCode(55296)),gn=qt.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch(e){gn=!1}yn=gn?"binary_string":"binary_string_ie",e.isEncoding(yn)||(yn="base64");var mn=function(){};mn.prototype.name=function(){return vn.Name},mn.prototype.clear=function(){qt.localStorage.clear()},mn.prototype.beginTransaction=function(e){return new en(this)},mn.prototype.get=function(t){try{var n=qt.localStorage.getItem(t);if(null!==n)return e.from(n,yn)}catch(e){}},mn.prototype.put=function(e,t,n){try{return!(!n&&null!==qt.localStorage.getItem(e)||(qt.localStorage.setItem(e,t.toString(yn)),0))}catch(e){throw new p(a.ENOSPC,"LocalStorage is full.")}},mn.prototype.del=function(e){try{qt.localStorage.removeItem(e)}catch(t){throw new p(a.EIO,"Unable to delete key "+e+": "+t)}};var vn=function(e){function t(){e.call(this,{store:new mn})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,n){n(null,new t)},t.isAvailable=function(){return void 0!==qt.localStorage},t}(nn);vn.Name="LocalStorage",vn.Options={};var wn=function(e){function t(){e.call(this),this.mountList=[],this.mntMap={},this.rootFs=new an}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,n){var r=new t;Object.keys(e).forEach(function(t){r.mount(t,e[t])}),n(null,r)},t.isAvailable=function(){return!0},t.prototype.mount=function(e,t){if("/"!==e[0]&&(e="/"+e),e=c.resolve(e),this.mntMap[e])throw new p(a.EINVAL,"Mount point "+e+" is already taken.");R(e,511,this.rootFs),this.mntMap[e]=t,this.mountList.push(e),this.mountList=this.mountList.sort(function(e,t){return t.length-e.length})},t.prototype.umount=function(e){if("/"!==e[0]&&(e="/"+e),e=c.resolve(e),!this.mntMap[e])throw new p(a.EINVAL,"Mount point "+e+" is already unmounted.");for(delete this.mntMap[e],this.mountList.splice(this.mountList.indexOf(e),1);"/"!==e&&0===this.rootFs.readdirSync(e).length;)this.rootFs.rmdirSync(e),e=c.dirname(e)},t.prototype._getFs=function(e){for(var t=this.mountList,n=t.length,r=0;r<n;r++){var i=t[r];if(i.length<=e.length&&0===e.indexOf(i))return""===(e=e.substr(i.length>1?i.length:0))&&(e="/"),{fs:this.mntMap[i],path:e}}return{fs:this.rootFs,path:e}},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,t){t(0,0)},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.standardizeError=function(e,t,n){var r=e.message.indexOf(t);return-1!==r&&(e.message=e.message.substr(0,r)+n+e.message.substr(r+t.length),e.path=n),e},t.prototype.rename=function(e,t,n){var r=this,i=this._getFs(e),o=this._getFs(t);return i.fs===o.fs?i.fs.rename(i.path,o.path,function(s){s&&r.standardizeError(r.standardizeError(s,i.path,e),o.path,t),n(s)}):T.readFile(e,function(r,i){if(r)return n(r);T.writeFile(t,i,function(t){if(t)return n(t);T.unlink(e,n)})})},t.prototype.renameSync=function(e,t){var n=this._getFs(e),r=this._getFs(t);if(n.fs===r.fs)try{return n.fs.renameSync(n.path,r.path)}catch(i){throw this.standardizeError(this.standardizeError(i,n.path,e),r.path,t),i}var i=T.readFileSync(e);return T.writeFileSync(t,i),T.unlinkSync(e)},t.prototype.readdirSync=function(e){var t=this._getFs(e),n=null;if(t.fs!==this.rootFs)try{n=this.rootFs.readdirSync(e)}catch(e){}try{var r=t.fs.readdirSync(t.path);return null===n?r:r.concat(n.filter(function(e){return-1===r.indexOf(e)}))}catch(r){if(null===n)throw this.standardizeError(r,t.path,e);return n}},t.prototype.readdir=function(e,t){var n=this,r=this._getFs(e);r.fs.readdir(r.path,function(i,o){if(r.fs!==n.rootFs)try{var s=n.rootFs.readdirSync(e);o=o?o.concat(s.filter(function(e){return-1===o.indexOf(e)})):s}catch(o){if(i)return t(n.standardizeError(i,r.path,e))}else if(i)return t(n.standardizeError(i,r.path,e));t(null,o)})},t.prototype.rmdirSync=function(e){var t=this._getFs(e);if(this._containsMountPt(e))throw p.ENOTEMPTY(e);try{t.fs.rmdirSync(t.path)}catch(n){throw this.standardizeError(n,t.path,e)}},t.prototype.rmdir=function(e,t){var n=this,r=this._getFs(e);this._containsMountPt(e)?t(p.ENOTEMPTY(e)):r.fs.rmdir(r.path,function(i){t(i?n.standardizeError(i,r.path,e):null)})},t.prototype._containsMountPt=function(e){for(var t=this.mountList,n=t.length,r=0;r<n;r++){var i=t[r];if(i.length>=e.length&&i.slice(0,e.length)===e)return!0}return!1},t}($);function _n(e,t,n){return t?function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=t[0],i=this._getFs(r);t[0]=i.path;try{return i.fs[e].apply(i.fs,t)}catch(e){throw this.standardizeError(e,i.path,r),e}}:function(){for(var t=this,n=[],r=arguments.length;r--;)n[r]=arguments[r];var i=n[0],o=this._getFs(i);if(n[0]=o.path,"function"==typeof n[n.length-1]){var s=n[n.length-1];n[n.length-1]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];e.length>0&&e[0]instanceof p&&t.standardizeError(e[0],o.path,i),s.apply(null,e)}}return o.fs[e].apply(o.fs,n)}}wn.Name="MountableFileSystem",wn.Options={};for(var bn,En=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],kn=0;kn<En.length;kn++)for(var Sn=0,xn=En[kn];Sn<xn.length;Sn+=1){var Tn=xn[Sn];wn.prototype[Tn]=_n(Tn,!1),wn.prototype[Tn+"Sync"]=_n(Tn+"Sync",!0)}if(void 0!==t)bn=t;else{var On=qt,Cn=[];if(function(){if(void 0!==On.importScripts||!On.postMessage)return!1;var e=!0,t=On.onmessage;return On.onmessage=function(){e=!1},On.postMessage("","*"),On.onmessage=t,e}()){bn=function(e){Cn.push(e),On.postMessage("zero-timeout-message","*")};var Nn=function(e){if(e.source===self&&"zero-timeout-message"===e.data&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,Cn.length>0))return Cn.shift()()};On.addEventListener?On.addEventListener("message",Nn,!0):On.attachEvent("onmessage",Nn)}else if(On.MessageChannel){var An=new On.MessageChannel;An.port1.onmessage=function(e){if(Cn.length>0)return Cn.shift()()},bn=function(e){Cn.push(e),An.port2.postMessage("")}}else bn=function(e){return setTimeout(e,0)}}var In=bn,Ln=function(){this._locked=!1,this._waiters=[]};Ln.prototype.lock=function(e){this._locked?this._waiters.push(e):(this._locked=!0,e())},Ln.prototype.unlock=function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var e=this._waiters.shift();e?In(e):this._locked=!1},Ln.prototype.tryLock=function(){return!this._locked&&(this._locked=!0,!0)},Ln.prototype.isLocked=function(){return this._locked};var Fn=function(e){this._fs=e,this._mu=new Ln};Fn.prototype.getName=function(){return"LockedFS<"+this._fs.getName()+">"},Fn.prototype.getFSUnlocked=function(){return this._fs},Fn.prototype.initialize=function(e){this._fs.initialize(e)},Fn.prototype.diskSpace=function(e,t){this._fs.diskSpace(e,t)},Fn.prototype.isReadOnly=function(){return this._fs.isReadOnly()},Fn.prototype.supportsLinks=function(){return this._fs.supportsLinks()},Fn.prototype.supportsProps=function(){return this._fs.supportsProps()},Fn.prototype.supportsSynch=function(){return this._fs.supportsSynch()},Fn.prototype.rename=function(e,t,n){var r=this;this._mu.lock(function(){r._fs.rename(e,t,function(e){r._mu.unlock(),n(e)})})},Fn.prototype.renameSync=function(e,t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(e,t)},Fn.prototype.stat=function(e,t,n){var r=this;this._mu.lock(function(){r._fs.stat(e,t,function(e,t){r._mu.unlock(),n(e,t)})})},Fn.prototype.statSync=function(e,t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(e,t)},Fn.prototype.open=function(e,t,n,r){var i=this;this._mu.lock(function(){i._fs.open(e,t,n,function(e,t){i._mu.unlock(),r(e,t)})})},Fn.prototype.openSync=function(e,t,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(e,t,n)},Fn.prototype.unlink=function(e,t){var n=this;this._mu.lock(function(){n._fs.unlink(e,function(e){n._mu.unlock(),t(e)})})},Fn.prototype.unlinkSync=function(e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(e)},Fn.prototype.rmdir=function(e,t){var n=this;this._mu.lock(function(){n._fs.rmdir(e,function(e){n._mu.unlock(),t(e)})})},Fn.prototype.rmdirSync=function(e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(e)},Fn.prototype.mkdir=function(e,t,n){var r=this;this._mu.lock(function(){r._fs.mkdir(e,t,function(e){r._mu.unlock(),n(e)})})},Fn.prototype.mkdirSync=function(e,t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(e,t)},Fn.prototype.readdir=function(e,t){var n=this;this._mu.lock(function(){n._fs.readdir(e,function(e,r){n._mu.unlock(),t(e,r)})})},Fn.prototype.readdirSync=function(e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(e)},Fn.prototype.exists=function(e,t){var n=this;this._mu.lock(function(){n._fs.exists(e,function(e){n._mu.unlock(),t(e)})})},Fn.prototype.existsSync=function(e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(e)},Fn.prototype.realpath=function(e,t,n){var r=this;this._mu.lock(function(){r._fs.realpath(e,t,function(e,t){r._mu.unlock(),n(e,t)})})},Fn.prototype.realpathSync=function(e,t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(e,t)},Fn.prototype.truncate=function(e,t,n){var r=this;this._mu.lock(function(){r._fs.truncate(e,t,function(e){r._mu.unlock(),n(e)})})},Fn.prototype.truncateSync=function(e,t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(e,t)},Fn.prototype.readFile=function(e,t,n,r){var i=this;this._mu.lock(function(){i._fs.readFile(e,t,n,function(e,t){i._mu.unlock(),r(e,t)})})},Fn.prototype.readFileSync=function(e,t,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(e,t,n)},Fn.prototype.writeFile=function(e,t,n,r,i,o){var s=this;this._mu.lock(function(){s._fs.writeFile(e,t,n,r,i,function(e){s._mu.unlock(),o(e)})})},Fn.prototype.writeFileSync=function(e,t,n,r,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(e,t,n,r,i)},Fn.prototype.appendFile=function(e,t,n,r,i,o){var s=this;this._mu.lock(function(){s._fs.appendFile(e,t,n,r,i,function(e){s._mu.unlock(),o(e)})})},Fn.prototype.appendFileSync=function(e,t,n,r,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(e,t,n,r,i)},Fn.prototype.chmod=function(e,t,n,r){var i=this;this._mu.lock(function(){i._fs.chmod(e,t,n,function(e){i._mu.unlock(),r(e)})})},Fn.prototype.chmodSync=function(e,t,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(e,t,n)},Fn.prototype.chown=function(e,t,n,r,i){var o=this;this._mu.lock(function(){o._fs.chown(e,t,n,r,function(e){o._mu.unlock(),i(e)})})},Fn.prototype.chownSync=function(e,t,n,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(e,t,n,r)},Fn.prototype.utimes=function(e,t,n,r){var i=this;this._mu.lock(function(){i._fs.utimes(e,t,n,function(e){i._mu.unlock(),r(e)})})},Fn.prototype.utimesSync=function(e,t,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(e,t,n)},Fn.prototype.link=function(e,t,n){var r=this;this._mu.lock(function(){r._fs.link(e,t,function(e){r._mu.unlock(),n(e)})})},Fn.prototype.linkSync=function(e,t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(e,t)},Fn.prototype.symlink=function(e,t,n,r){var i=this;this._mu.lock(function(){i._fs.symlink(e,t,n,function(e){i._mu.unlock(),r(e)})})},Fn.prototype.symlinkSync=function(e,t,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(e,t,n)},Fn.prototype.readlink=function(e,t){var n=this;this._mu.lock(function(){n._fs.readlink(e,function(e,r){n._mu.unlock(),t(e,r)})})},Fn.prototype.readlinkSync=function(e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(e)};var Rn="/.deletedFiles.log";function Dn(e){return 146|e}function Mn(e){return y.getFileFlag(e)}var jn,Pn=function(e){function t(t,n,r,i,o){e.call(this,t,n,r,i,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var t=this;this.isDirty()?this._fs._syncAsync(this,function(n){t.resetDirty(),e(n)}):e(null)},t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.close=function(e){this.sync(e)},t.prototype.closeSync=function(){this.syncSync()},t}(J),Un=function(e){function t(t,n){if(e.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=t,this._readable=n,this._writable.isReadOnly())throw new p(a.EINVAL,"Writable file system must be writable.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},t.prototype._syncAsync=function(e,t){var n=this;this.createParentDirectoriesAsync(e.getPath(),function(r){if(r)return t(r);n._writable.writeFile(e.getPath(),e.getBuffer(),null,Mn("w"),e.getStats().mode,t)})},t.prototype._syncSync=function(e){this.createParentDirectories(e.getPath()),this._writable.writeFileSync(e.getPath(),e.getBuffer(),null,Mn("w"),e.getStats().mode)},t.prototype.getName=function(){return Bn.Name},t.prototype.initialize=function(e){var t=this,n=this._initializeCallbacks,r=function(e){t._isInitialized=!e,t._initializeCallbacks=[],n.forEach(function(t){return t(e)})};if(this._isInitialized)return e();n.push(e),1===n.length&&this._writable.readFile(Rn,"utf8",Mn("r"),function(e,n){if(e){if(e.errno!==a.ENOENT)return r(e)}else t._deleteLog=n;t._reparseDeletionLog(),r()})},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},t.prototype.getDeletionLog=function(){return this._deleteLog},t.prototype.restoreDeletionLog=function(e){this._deleteLog=e,this._reparseDeletionLog(),this.updateLog("")},t.prototype.rename=function(e,t,n){var r=this;if(this.checkInitAsync(n)&&!this.checkPathAsync(e,n)&&!this.checkPathAsync(t,n))return e===Rn||t===Rn?n(p.EPERM("Cannot rename deletion log.")):e===t?n():void this.stat(e,!1,function(i,o){return i?n(i):r.stat(t,!1,function(i,s){var u=r;function l(r){var i=r.shift();if(!i)return n();var o=c.resolve(e,i),s=c.resolve(t,i);u.rename(o,s,function(e){if(e)return n(e);l(r)})}var f=511;if(o.isDirectory()){if(i)return i.errno!==a.ENOENT?n(i):r._writable.exists(e,function(i){if(i)return r._writable.rename(e,t,n);r._writable.mkdir(t,f,function(t){if(t)return n(t);r._readable.readdir(e,function(e,t){if(e)return n();l(t)})})});if(f=s.mode,!s.isDirectory())return n(p.ENOTDIR(t));r.readdir(t,function(i,o){if(o&&o.length)return n(p.ENOTEMPTY(t));r._readable.readdir(e,function(e,t){if(e)return n();l(t)})})}if(s&&s.isDirectory())return n(p.EISDIR(t));r.readFile(e,null,Mn("r"),function(i,s){return i?n(i):r.writeFile(t,s,null,Mn("w"),o.mode,function(t){return t?n(t):r.unlink(e,n)})})})})},t.prototype.renameSync=function(e,t){var n=this;if(this.checkInitialized(),this.checkPath(e),this.checkPath(t),e===Rn||t===Rn)throw p.EPERM("Cannot rename deletion log.");var r=this.statSync(e,!1);if(r.isDirectory()){if(e===t)return;var i=511;if(this.existsSync(t)){var o=this.statSync(t,!1);if(i=o.mode,!o.isDirectory())throw p.ENOTDIR(t);if(this.readdirSync(t).length>0)throw p.ENOTEMPTY(t)}this._writable.existsSync(e)?this._writable.renameSync(e,t):this._writable.existsSync(t)||this._writable.mkdirSync(t,i),this._readable.existsSync(e)&&this._readable.readdirSync(e).forEach(function(r){n.renameSync(c.resolve(e,r),c.resolve(t,r))})}else{if(this.existsSync(t)&&this.statSync(t,!1).isDirectory())throw p.EISDIR(t);this.writeFileSync(t,this.readFileSync(e,null,Mn("r")),null,Mn("w"),r.mode)}e!==t&&this.existsSync(e)&&this.unlinkSync(e)},t.prototype.stat=function(e,t,n){var r=this;this.checkInitAsync(n)&&this._writable.stat(e,t,function(i,o){i&&i.errno===a.ENOENT?(r._deletedFiles[e]&&n(p.ENOENT(e)),r._readable.stat(e,t,function(e,t){t&&((t=t.clone()).mode=Dn(t.mode)),n(e,t)})):n(i,o)})},t.prototype.statSync=function(e,t){this.checkInitialized();try{return this._writable.statSync(e,t)}catch(r){if(this._deletedFiles[e])throw p.ENOENT(e);var n=this._readable.statSync(e,t).clone();return n.mode=Dn(n.mode),n}},t.prototype.open=function(e,t,n,r){var i=this;this.checkInitAsync(r)&&!this.checkPathAsync(e,r)&&this.stat(e,!1,function(o,s){if(s)switch(t.pathExistsAction()){case f.TRUNCATE_FILE:return i.createParentDirectoriesAsync(e,function(o){if(o)return r(o);i._writable.open(e,t,n,r)});case f.NOP:return i._writable.exists(e,function(o){o?i._writable.open(e,t,n,r):((s=s.clone()).mode=n,i._readable.readFile(e,null,Mn("r"),function(n,o){if(n)return r(n);-1===s.size&&(s.size=o.length);var a=new Pn(i,e,t,s,o);r(null,a)}))});default:return r(p.EEXIST(e))}else switch(t.pathNotExistsAction()){case f.CREATE_FILE:return i.createParentDirectoriesAsync(e,function(o){return o?r(o):i._writable.open(e,t,n,r)});default:return r(p.ENOENT(e))}})},t.prototype.openSync=function(e,t,n){if(this.checkInitialized(),this.checkPath(e),e===Rn)throw p.EPERM("Cannot open deletion log.");if(this.existsSync(e))switch(t.pathExistsAction()){case f.TRUNCATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,t,n);case f.NOP:if(this._writable.existsSync(e))return this._writable.openSync(e,t,n);var r=this._readable.readFileSync(e,null,Mn("r")),i=this._readable.statSync(e,!1).clone();return i.mode=n,new Pn(this,e,t,i,r);default:throw p.EEXIST(e)}else switch(t.pathNotExistsAction()){case f.CREATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,t,n);default:throw p.ENOENT(e)}},t.prototype.unlink=function(e,t){var n=this;this.checkInitAsync(t)&&!this.checkPathAsync(e,t)&&this.exists(e,function(r){if(!r)return t(p.ENOENT(e));n._writable.exists(e,function(r){if(r)return n._writable.unlink(e,function(r){if(r)return t(r);n.exists(e,function(r){r&&n.deletePath(e),t(null)})});n.deletePath(e),t(null)})})},t.prototype.unlinkSync=function(e){if(this.checkInitialized(),this.checkPath(e),!this.existsSync(e))throw p.ENOENT(e);this._writable.existsSync(e)&&this._writable.unlinkSync(e),this.existsSync(e)&&this.deletePath(e)},t.prototype.rmdir=function(e,t){var n=this;if(this.checkInitAsync(t)){var r=function(){n.readdir(e,function(r,i){return r?t(r):i.length?t(p.ENOTEMPTY(e)):(n.deletePath(e),void t(null))})};this.exists(e,function(i){if(!i)return t(p.ENOENT(e));n._writable.exists(e,function(i){i?n._writable.rmdir(e,function(i){if(i)return t(i);n._readable.exists(e,function(e){e?r():t()})}):r()})})}},t.prototype.rmdirSync=function(e){if(this.checkInitialized(),!this.existsSync(e))throw p.ENOENT(e);if(this._writable.existsSync(e)&&this._writable.rmdirSync(e),this.existsSync(e)){if(this.readdirSync(e).length>0)throw p.ENOTEMPTY(e);this.deletePath(e)}},t.prototype.mkdir=function(e,t,n){var r=this;this.checkInitAsync(n)&&this.exists(e,function(i){if(i)return n(p.EEXIST(e));r.createParentDirectoriesAsync(e,function(i){if(i)return n(i);r._writable.mkdir(e,t,n)})})},t.prototype.mkdirSync=function(e,t){if(this.checkInitialized(),this.existsSync(e))throw p.EEXIST(e);this.createParentDirectories(e),this._writable.mkdirSync(e,t)},t.prototype.readdir=function(e,t){var n=this;this.checkInitAsync(t)&&this.stat(e,!1,function(r,i){return r?t(r):i.isDirectory()?void n._writable.readdir(e,function(r,i){if(r&&"ENOENT"!==r.code)return t(r);!r&&i||(i=[]),n._readable.readdir(e,function(r,o){!r&&o||(o=[]);var s={},a=i.concat(o.filter(function(t){return!n._deletedFiles[e+"/"+t]})).filter(function(e){var t=!s[e];return s[e]=!0,t});t(null,a)})}):t(p.ENOTDIR(e))})},t.prototype.readdirSync=function(e){var t=this;if(this.checkInitialized(),!this.statSync(e,!1).isDirectory())throw p.ENOTDIR(e);var n=[];try{n=n.concat(this._writable.readdirSync(e))}catch(e){}try{n=n.concat(this._readable.readdirSync(e).filter(function(n){return!t._deletedFiles[e+"/"+n]}))}catch(e){}var r={};return n.filter(function(e){var t=!r[e];return r[e]=!0,t})},t.prototype.exists=function(e,t){var n=this;this.checkInitialized(),this._writable.exists(e,function(r){if(r)return t(!0);n._readable.exists(e,function(r){t(r&&!0!==n._deletedFiles[e])})})},t.prototype.existsSync=function(e){return this.checkInitialized(),this._writable.existsSync(e)||this._readable.existsSync(e)&&!0!==this._deletedFiles[e]},t.prototype.chmod=function(e,t,n,r){var i=this;this.checkInitAsync(r)&&this.operateOnWritableAsync(e,function(o){if(o)return r(o);i._writable.chmod(e,t,n,r)})},t.prototype.chmodSync=function(e,t,n){var r=this;this.checkInitialized(),this.operateOnWritable(e,function(){r._writable.chmodSync(e,t,n)})},t.prototype.chown=function(e,t,n,r,i){var o=this;this.checkInitAsync(i)&&this.operateOnWritableAsync(e,function(s){if(s)return i(s);o._writable.chown(e,t,n,r,i)})},t.prototype.chownSync=function(e,t,n,r){var i=this;this.checkInitialized(),this.operateOnWritable(e,function(){i._writable.chownSync(e,t,n,r)})},t.prototype.utimes=function(e,t,n,r){var i=this;this.checkInitAsync(r)&&this.operateOnWritableAsync(e,function(o){if(o)return r(o);i._writable.utimes(e,t,n,r)})},t.prototype.utimesSync=function(e,t,n){var r=this;this.checkInitialized(),this.operateOnWritable(e,function(){r._writable.utimesSync(e,t,n)})},t.prototype.deletePath=function(e){this._deletedFiles[e]=!0,this.updateLog("d"+e+"\n")},t.prototype.updateLog=function(e){var t=this;this._deleteLog+=e,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(Rn,this._deleteLog,"utf8",y.getFileFlag("w"),420,function(e){t._deleteLogUpdatePending=!1,e?t._deleteLogError=e:t._deleteLogUpdateNeeded&&(t._deleteLogUpdateNeeded=!1,t.updateLog(""))}))},t.prototype._reparseDeletionLog=function(){var e=this;this._deletedFiles={},this._deleteLog.split("\n").forEach(function(t){e._deletedFiles[t.slice(1)]="d"===t.slice(0,1)})},t.prototype.checkInitialized=function(){if(!this._isInitialized)throw new p(a.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.");if(null!==this._deleteLogError){var e=this._deleteLogError;throw this._deleteLogError=null,e}},t.prototype.checkInitAsync=function(e){if(!this._isInitialized)return e(new p(a.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;if(null!==this._deleteLogError){var t=this._deleteLogError;return this._deleteLogError=null,e(t),!1}return!0},t.prototype.checkPath=function(e){if(e===Rn)throw p.EPERM(e)},t.prototype.checkPathAsync=function(e,t){return e===Rn&&(t(p.EPERM(e)),!0)},t.prototype.createParentDirectoriesAsync=function(e,t){var n=c.dirname(e),r=[],i=this;this._writable.stat(n,!1,function e(o,s){o?(r.push(n),n=c.dirname(n),i._writable.stat(n,!1,e)):function e(){if(!r.length)return t();var n=r.pop();i._readable.stat(n,!1,function(r,o){if(!o)return t();i._writable.mkdir(n,o.mode,function(n){if(n)return t(n);e()})})}()})},t.prototype.createParentDirectories=function(e){for(var t=this,n=c.dirname(e),r=[];!this._writable.existsSync(n);)r.push(n),n=c.dirname(n);(r=r.reverse()).forEach(function(e){t._writable.mkdirSync(e,t.statSync(e,!1).mode)})},t.prototype.operateOnWritable=function(e,t){if(!this.existsSync(e))throw p.ENOENT(e);this._writable.existsSync(e)||this.copyToWritable(e),t()},t.prototype.operateOnWritableAsync=function(e,t){var n=this;this.exists(e,function(r){if(!r)return t(p.ENOENT(e));n._writable.exists(e,function(r){if(!r)return n.copyToWritableAsync(e,t);t()})})},t.prototype.copyToWritable=function(e){var t=this.statSync(e,!1);t.isDirectory()?this._writable.mkdirSync(e,t.mode):this.writeFileSync(e,this._readable.readFileSync(e,null,Mn("r")),null,Mn("w"),this.statSync(e,!1).mode)},t.prototype.copyToWritableAsync=function(e,t){var n=this;this.stat(e,!1,function(r,i){return r?t(r):i.isDirectory()?n._writable.mkdir(e,i.mode,t):void n._readable.readFile(e,null,Mn("r"),function(r,o){if(r)return t(r);n.writeFile(e,o,null,Mn("w"),i.mode,t)})})},t}($),Bn=function(e){function t(n,r,i){void 0===i&&(i=!0),e.call(this,new Un(n,r)),A(i,t.Name,{readable:"readable file system",writable:"writable file system"})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,n){try{var r=new t(e.writable,e.readable,!1);r.initialize(function(e){n(e,r)},!1)}catch(e){n(e)}},t.isAvailable=function(){return Un.isAvailable()},t.prototype.initialize=function(t,n){void 0===n&&(n=!0),n&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),e.prototype.initialize.call(this,t)},t.prototype.getOverlayedFileSystems=function(){return e.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},t.prototype.unwrap=function(){return e.prototype.getFSUnlocked.call(this)},t}(Fn);Bn.Name="OverlayFS",Bn.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}},function(e){e[e.CB=0]="CB",e[e.FD=1]="FD",e[e.API_ERROR=2]="API_ERROR",e[e.STATS=3]="STATS",e[e.PROBE=4]="PROBE",e[e.FILEFLAG=5]="FILEFLAG",e[e.BUFFER=6]="BUFFER",e[e.ERROR=7]="ERROR"}(jn||(jn={}));var zn=function(){this._callbacks={},this._nextId=0};zn.prototype.toRemoteArg=function(e){var t=this._nextId++;return this._callbacks[t]=e,{type:jn.CB,id:t}},zn.prototype.toLocalArg=function(e){var t=this._callbacks[e];return delete this._callbacks[e],t};var Hn=function(){this._fileDescriptors={},this._nextId=0};function qn(e){return{type:jn.API_ERROR,errorData:Kn(e.writeToBuffer())}}function Wn(e){return p.fromBuffer(Jn(e.errorData))}function Yn(e){return{type:jn.ERROR,name:e.name,message:e.message,stack:e.stack}}function Gn(e){var t=qt[e.name];"function"!=typeof t&&(t=Error);var n=new t(e.message);return n.stack=e.stack,n}function Vn(e){return{type:jn.STATS,statsData:Kn(e.toBuffer())}}function Xn(e){return g.fromBuffer(Jn(e.statsData))}function $n(e){return{type:jn.FILEFLAG,flagStr:e.getFlagString()}}function Zn(e){return y.getFileFlag(e.flagStr)}function Kn(e){return D(e)}function Jn(e){return U(e)}function Qn(e){return{type:jn.BUFFER,data:Kn(e)}}function er(e){return Jn(e.data)}Hn.prototype.toRemoteArg=function(t,n,r,i){var o,s,a=this._nextId++;this._fileDescriptors[a]=t,t.stat(function(u,c){u?i(u):(s=Kn(c.toBuffer()),r.isReadable()?t.read(e.alloc(c.size),0,c.size,0,function(e,t,u){e?i(e):(o=Kn(u),i(null,{type:jn.FD,id:a,data:o,stat:s,path:n,flag:r.getFlagString()}))}):i(null,{type:jn.FD,id:a,data:new ArrayBuffer(0),stat:s,path:n,flag:r.getFlagString()}))})},Hn.prototype.applyFdAPIRequest=function(e,t){var n=this,r=e.args[0];this._applyFdChanges(r,function(i,o){i?t(i):o[e.method](function(i){"close"===e.method&&delete n._fileDescriptors[r.id],t(i)})})},Hn.prototype._applyFdChanges=function(e,t){var n=this._fileDescriptors[e.id],r=Jn(e.data),i=g.fromBuffer(Jn(e.stat)),o=y.getFileFlag(e.flag);o.isWriteable()?n.write(r,0,r.length,o.isAppendable()?n.getPos():0,function(e){function s(){n.stat(function(e,r){e?t(e):r.mode!==i.mode?n.chmod(i.mode,function(e){t(e,n)}):t(e,n)})}e?t(e):o.isAppendable()?s():n.truncate(r.length,function(){s()})}):t(null,n)};var tr=function(e){function t(t,n,r,i,o,s){e.call(this,t,n,r,i,s),this._remoteFdId=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getRemoteFdId=function(){return this._remoteFdId},t.prototype.toRemoteArg=function(){return{type:jn.FD,id:this._remoteFdId,data:Kn(this.getBuffer()),stat:Kn(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},t.prototype.sync=function(e){this._syncClose("sync",e)},t.prototype.close=function(e){this._syncClose("close",e)},t.prototype._syncClose=function(e,t){var n=this;this.isDirty()?this._fs.syncClose(e,this,function(e){e||n.resetDirty(),t(e)}):t()},t}(J),nr=function(t){function n(e,r){var i=this;void 0===r&&(r=!0),t.call(this),this._callbackConverter=new zn,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=e,A(r,n.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",function(e){var t,n=e.data;if((t=n)&&"object"==typeof t&&t.hasOwnProperty("browserfsMessage")&&t.browserfsMessage){var r,o=n.args,s=new Array(o.length);for(r=0;r<s.length;r++)s[r]=i._argRemote2Local(o[r]);i._callbackConverter.toLocalArg(n.cbId).apply(null,s)}})}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.Create=function(e,t){var r=new n(e.worker,!1);r.initialize(function(){t(null,r)})},n.isAvailable=function(){return"undefined"!=typeof importScripts||"undefined"!=typeof Worker},n.attachRemoteListener=function(t){var n=new Hn;function r(t,r,i){switch(typeof t){case"object":t instanceof g?i(null,Vn(t)):t instanceof p?i(null,qn(t)):t instanceof K?i(null,n.toRemoteArg(t,r[0],r[1],i)):t instanceof y?i(null,$n(t)):t instanceof e?i(null,Qn(t)):t instanceof Error?i(null,Yn(t)):i(null,t);break;default:i(null,t)}}function i(e,n){if(!e)return e;switch(typeof e){case"object":if("number"!=typeof e.type)return e;var i=e;switch(i.type){case jn.CB:var o=e.id;return function(){var e,i,s=arguments,a=new Array(arguments.length),u=arguments.length;function c(e){u>0&&(u=-1,i={browserfsMessage:!0,cbId:o,args:[qn(e)]},t.postMessage(i))}for(e=0;e<arguments.length;e++)!function(e,s){r(s,n,function(n,r){a[e]=r,n?c(n):0==--u&&(i={browserfsMessage:!0,cbId:o,args:a},t.postMessage(i))})}(e,s[e]);0===arguments.length&&(i={browserfsMessage:!0,cbId:o,args:a},t.postMessage(i))};case jn.API_ERROR:return Wn(i);case jn.STATS:return Xn(i);case jn.FILEFLAG:return Zn(i);case jn.BUFFER:return er(i);case jn.ERROR:return Gn(i);default:return e}default:return e}}t.addEventListener("message",function(e){var r,o,s=e.data;if((o=s)&&"object"==typeof o&&o.hasOwnProperty("browserfsMessage")&&o.browserfsMessage){var a=s.args,u=new Array(a.length);switch(s.method){case"close":case"sync":r=a[1],n.applyFdAPIRequest(s,function(e){var n={browserfsMessage:!0,cbId:r.id,args:e?[qn(e)]:[]};t.postMessage(n)});break;case"probe":!function(){var e=T.getRootFS(),n=a[1],r={type:jn.PROBE,isReadOnly:e.isReadOnly(),supportsLinks:e.supportsLinks(),supportsProps:e.supportsProps()},i={browserfsMessage:!0,cbId:n.id,args:[r]};t.postMessage(i)}();break;default:for(var c=0;c<a.length;c++)u[c]=i(a[c],u);var l=T.getRootFS();l[s.method].apply(l,u)}}})},n.prototype.getName=function(){return n.Name},n.prototype.initialize=function(e){var t=this;if(this._isInitialized)e();else{var n={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(H()),this._callbackConverter.toRemoteArg(function(n){t._isInitialized=!0,t._isReadOnly=n.isReadOnly,t._supportLinks=n.supportsLinks,t._supportProps=n.supportsProps,e()})]};this._worker.postMessage(n)}},n.prototype.isReadOnly=function(){return this._isReadOnly},n.prototype.supportsSynch=function(){return!1},n.prototype.supportsLinks=function(){return this._supportLinks},n.prototype.supportsProps=function(){return this._supportProps},n.prototype.rename=function(e,t,n){this._rpc("rename",arguments)},n.prototype.stat=function(e,t,n){this._rpc("stat",arguments)},n.prototype.open=function(e,t,n,r){this._rpc("open",arguments)},n.prototype.unlink=function(e,t){this._rpc("unlink",arguments)},n.prototype.rmdir=function(e,t){this._rpc("rmdir",arguments)},n.prototype.mkdir=function(e,t,n){this._rpc("mkdir",arguments)},n.prototype.readdir=function(e,t){this._rpc("readdir",arguments)},n.prototype.exists=function(e,t){this._rpc("exists",arguments)},n.prototype.realpath=function(e,t,n){this._rpc("realpath",arguments)},n.prototype.truncate=function(e,t,n){this._rpc("truncate",arguments)},n.prototype.readFile=function(e,t,n,r){this._rpc("readFile",arguments)},n.prototype.writeFile=function(e,t,n,r,i,o){this._rpc("writeFile",arguments)},n.prototype.appendFile=function(e,t,n,r,i,o){this._rpc("appendFile",arguments)},n.prototype.chmod=function(e,t,n,r){this._rpc("chmod",arguments)},n.prototype.chown=function(e,t,n,r,i){this._rpc("chown",arguments)},n.prototype.utimes=function(e,t,n,r){this._rpc("utimes",arguments)},n.prototype.link=function(e,t,n){this._rpc("link",arguments)},n.prototype.symlink=function(e,t,n,r){this._rpc("symlink",arguments)},n.prototype.readlink=function(e,t){this._rpc("readlink",arguments)},n.prototype.syncClose=function(e,t,n){this._worker.postMessage({browserfsMessage:!0,method:e,args:[t.toRemoteArg(),this._callbackConverter.toRemoteArg(n)]})},n.prototype._argRemote2Local=function(e){if(!e)return e;switch(typeof e){case"object":if("number"!=typeof e.type)return e;var t=e;switch(t.type){case jn.API_ERROR:return Wn(t);case jn.FD:var n=t;return new tr(this,n.path,y.getFileFlag(n.flag),g.fromBuffer(Jn(n.stat)),n.id,Jn(n.data));case jn.STATS:return Xn(t);case jn.FILEFLAG:return Zn(t);case jn.BUFFER:return er(t);case jn.ERROR:return Gn(t);default:return e}default:return e}},n.prototype._rpc=function(e,t){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=this._argLocal2Remote(t[r]);var i={browserfsMessage:!0,method:e,args:n};this._worker.postMessage(i)},n.prototype._argLocal2Remote=function(t){if(!t)return t;switch(typeof t){case"object":return t instanceof g?Vn(t):t instanceof p?qn(t):t instanceof tr?t.toRemoteArg():t instanceof y?$n(t):t instanceof e?Qn(t):t instanceof Error?Yn(t):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(t);default:return t}},n}($);function rr(e,t,n){var r=new XMLHttpRequest;r.open("HEAD",t,e),r.onreadystatechange=function(e){if(4===r.readyState){if(200!==r.status)return n(new p(r.status,"XHR HEAD error."));try{return n(null,parseInt(r.getResponseHeader("Content-Length")||"-1",10))}catch(e){return n(new p(a.EIO,"XHR HEAD error: Could not read content-length."))}}},r.send()}nr.Name="WorkerFS",nr.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(e,t){e.postMessage?t():t(new p(a.EINVAL,"option must be a Web Worker instance."))}}};var ir=function(t,n,r){var i=new XMLHttpRequest;i.open("GET",t,!0);var o=!0;switch(n){case"buffer":i.responseType="arraybuffer";break;case"json":try{i.responseType="json",o="json"===i.responseType}catch(e){o=!1}break;default:return r(new p(a.EINVAL,"Invalid download type: "+n))}i.onreadystatechange=function(t){if(4===i.readyState){if(200!==i.status)return r(new p(i.status,"XHR error."));switch(n){case"buffer":return r(null,i.response?e.from(i.response):H());case"json":return r(null,o?i.response:JSON.parse(i.responseText))}}},i.send()},or=I&&"undefined"!=typeof Blob?function(t,n){var r,i,o=new XMLHttpRequest;switch(o.open("GET",t,!1),n){case"buffer":o.responseType="arraybuffer";break;case"json":break;default:throw new p(a.EINVAL,"Invalid download type: "+n)}if(o.onreadystatechange=function(t){if(4===o.readyState)if(200===o.status)switch(n){case"buffer":r=e.from(o.response);break;case"json":r=JSON.parse(o.response)}else i=new p(o.status,"XHR error.")},o.send(),i)throw i;return r}:function(t,n){var r=new XMLHttpRequest;r.open("GET",t,!1);var i=null,o=null;if(r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(t){if(4===r.readyState){if(200!==r.status)return void(o=new p(r.status,"XHR error."));switch(n){case"buffer":var s=r.responseText;i=e.alloc(s.length);for(var a=0;a<s.length;a++)i[a]=s.charCodeAt(a);return;case"json":return void(i=JSON.parse(r.responseText))}}},r.send(),o)throw o;return i},sr=function(){this._index={},this.addPath("/",new ur)};sr.fromListing=function(e){var t=new sr,n=new ur;t._index["/"]=n;for(var r=[["",e,n]];r.length>0;){var i=void 0,o=r.pop(),s=o[0],a=o[1],u=o[2];for(var c in a)if(a.hasOwnProperty(c)){var l=a[c],f=s+"/"+c;l?(t._index[f]=i=new ur,r.push([f,l,i])):i=new ar(new g(h.FILE,-1,365)),u&&(u._ls[c]=i)}}return t},sr.prototype.fileIterator=function(e){for(var t in this._index)if(this._index.hasOwnProperty(t))for(var n=this._index[t],r=0,i=n.getListing();r<i.length;r+=1){var o=i[r],s=n.getItem(o);cr(s)&&e(s.getData())}},sr.prototype.addPath=function(e,t){if(!t)throw new Error("Inode must be specified");if("/"!==e[0])throw new Error("Path must be absolute, got: "+e);if(this._index.hasOwnProperty(e))return this._index[e]===t;var n=this._split_path(e),r=n[0],i=n[1],o=this._index[r];return!(void 0===o&&"/"!==e&&(o=new ur,!this.addPath(r,o))||"/"!==e&&!o.addItem(i,t)||(lr(t)&&(this._index[e]=t),0))},sr.prototype.addPathFast=function(e,t){var n=e.lastIndexOf("/"),r=0===n?"/":e.substring(0,n),i=e.substring(n+1),o=this._index[r];return void 0===o&&(o=new ur,this.addPathFast(r,o)),!!o.addItem(i,t)&&(t.isDir()&&(this._index[e]=t),!0)},sr.prototype.removePath=function(e){var t=this._split_path(e),n=t[0],r=t[1],i=this._index[n];if(void 0===i)return null;var o=i.remItem(r);if(null===o)return null;if(lr(o)){for(var s=0,a=o.getListing();s<a.length;s+=1){var u=a[s];this.removePath(e+"/"+u)}"/"!==e&&delete this._index[e]}return o},sr.prototype.ls=function(e){var t=this._index[e];return void 0===t?null:t.getListing()},sr.prototype.getInode=function(e){var t=this._split_path(e),n=t[0],r=t[1],i=this._index[n];return void 0===i?null:n===e?i:i.getItem(r)},sr.prototype._split_path=function(e){var t=c.dirname(e);return[t,e.substr(t.length+("/"===t?0:1))]};var ar=function(e){this.data=e};ar.prototype.isFile=function(){return!0},ar.prototype.isDir=function(){return!1},ar.prototype.getData=function(){return this.data},ar.prototype.setData=function(e){this.data=e};var ur=function(e){void 0===e&&(e=null),this.data=e,this._ls={}};function cr(e){return!!e&&e.isFile()}function lr(e){return!!e&&e.isDir()}ur.prototype.isFile=function(){return!1},ur.prototype.isDir=function(){return!0},ur.prototype.getData=function(){return this.data},ur.prototype.getStats=function(){return new g(h.DIRECTORY,4096,365)},ur.prototype.getListing=function(){return Object.keys(this._ls)},ur.prototype.getItem=function(e){var t=this._ls[e];return t||null},ur.prototype.addItem=function(e,t){return!(e in this._ls||(this._ls[e]=t,0))},ur.prototype.remItem=function(e){var t=this._ls[e];return void 0===t?null:(delete this._ls[e],t)};var fr=function(e){function t(n,r,i){void 0===r&&(r=""),void 0===i&&(i=!0),e.call(this),n||(n="index.json"),r.length>0&&"/"!==r.charAt(r.length-1)&&(r+="/"),this.prefixUrl=r;var o=null;if("string"==typeof n){if(!(o=this._requestFileSync(n,"json")))throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else o=n;A(i,t.Name,{index:"string"==typeof n?n:"file index as an object",baseUrl:r}),this._index=sr.fromListing(o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,n){void 0===e.index&&(e.index="index.json"),"string"==typeof e.index?t.FromURL(e.index,n,e.baseUrl,!1):n(null,new t(e.index,e.baseUrl,!1))},t.isAvailable=function(){return"undefined"!=typeof XMLHttpRequest&&null!==XMLHttpRequest},t.FromURL=function(e,n,r,i){void 0===r&&(r=e.slice(0,e.lastIndexOf("/")+1)),void 0===i&&(i=!0),i&&console.warn("[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: \""+e+'", baseUrl: "'+r+"\" }, cb)' instead."),ir(e,"json",function(e,i){e?n(e):n(null,new t(i,r,!1))})},t.prototype.empty=function(){this._index.fileIterator(function(e){e.fileData=null})},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,t){t(0,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.preloadFile=function(e,t){var n=this._index.getInode(e);if(!cr(n))throw p.EISDIR(e);if(null===n)throw p.ENOENT(e);var r=n.getData();r.size=t.length,r.fileData=t},t.prototype.stat=function(e,t,n){var r,i=this._index.getInode(e);if(null===i)return n(p.ENOENT(e));cr(i)?(r=i.getData()).size<0?this._requestFileSizeAsync(e,function(e,t){if(e)return n(e);r.size=t,n(null,r.clone())}):n(null,r.clone()):lr(i)?(r=i.getStats(),n(null,r)):n(p.FileError(a.EINVAL,e))},t.prototype.statSync=function(e,t){var n,r=this._index.getInode(e);if(null===r)throw p.ENOENT(e);if(cr(r))(n=r.getData()).size<0&&(n.size=this._requestFileSizeSync(e));else{if(!lr(r))throw p.FileError(a.EINVAL,e);n=r.getStats()}return n},t.prototype.open=function(e,t,n,r){if(t.isWriteable())return r(new p(a.EPERM,e));var i=this,o=this._index.getInode(e);if(null===o)return r(p.ENOENT(e));if(!cr(o))return r(p.EISDIR(e));var s=o.getData();switch(t.pathExistsAction()){case f.THROW_EXCEPTION:case f.TRUNCATE_FILE:return r(p.EEXIST(e));case f.NOP:if(s.fileData)return r(null,new Q(i,e,t,s.clone(),s.fileData));this._requestFileAsync(e,"buffer",function(n,o){return n?r(n):(s.size=o.length,s.fileData=o,r(null,new Q(i,e,t,s.clone(),o)))});break;default:return r(new p(a.EINVAL,"Invalid FileMode object."))}},t.prototype.openSync=function(e,t,n){if(t.isWriteable())throw new p(a.EPERM,e);var r=this._index.getInode(e);if(null===r)throw p.ENOENT(e);if(!cr(r))throw p.EISDIR(e);var i=r.getData();switch(t.pathExistsAction()){case f.THROW_EXCEPTION:case f.TRUNCATE_FILE:throw p.EEXIST(e);case f.NOP:if(i.fileData)return new Q(this,e,t,i.clone(),i.fileData);var o=this._requestFileSync(e,"buffer");return i.size=o.length,i.fileData=o,new Q(this,e,t,i.clone(),o);default:throw new p(a.EINVAL,"Invalid FileMode object.")}},t.prototype.readdir=function(e,t){try{t(null,this.readdirSync(e))}catch(e){t(e)}},t.prototype.readdirSync=function(e){var t=this._index.getInode(e);if(null===t)throw p.ENOENT(e);if(lr(t))return t.getListing();throw p.ENOTDIR(e)},t.prototype.readFile=function(e,t,n,r){var i=r;this.open(e,n,420,function(e,n){if(e)return r(e);r=function(e,t){n.close(function(n){return e||(e=n),i(e,t)})};var o=n.getBuffer();null===t?r(e,B(o)):function(e,t,n){try{n(null,e.toString(t))}catch(e){n(e)}}(o,t,r)})},t.prototype.readFileSync=function(e,t,n){var r=this.openSync(e,n,420);try{var i=r.getBuffer();return null===t?B(i):i.toString(t)}finally{r.closeSync()}},t.prototype.getXhrPath=function(e){return"/"===e.charAt(0)&&(e=e.slice(1)),this.prefixUrl+e},t.prototype._requestFileAsync=function(e,t,n){ir(this.getXhrPath(e),t,n)},t.prototype._requestFileSync=function(e,t){return or(this.getXhrPath(e),t)},t.prototype._requestFileSizeAsync=function(e,t){!function(e,t){rr(!0,e,t)}(this.getXhrPath(e),t)},t.prototype._requestFileSizeSync=function(e){return t=this.getXhrPath(e),n=-1,rr(!1,t,function(e,t){if(e)throw e;n=t}),n;var t,n},t}($);fr.Name="XmlHttpRequest",fr.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var pr=function(){};pr.str2byte=function(e,t){for(var n=e.length>t.length?t.length:e.length,r=0;r<n;r++){var i=e.charCodeAt(r);if(i>127){var o=pr.extendedChars.indexOf(e.charAt(r));o>-1&&(i=o+128)}t[i]=r}return n},pr.byte2str=function(e){for(var t=new Array(e.length),n=0;n<e.length;n++){var r=e[n];t[n]=r>127?pr.extendedChars[r-128]:String.fromCharCode(r)}return t.join("")},pr.byteLength=function(e){return e.length},pr.extendedChars=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","ø","£","Ø","×","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","®","¬","½","¼","¡","«","»","_","_","_","¦","¦","Á","Â","À","©","¦","¦","+","+","¢","¥","+","+","-","-","+","-","+","ã","Ã","+","+","-","-","¦","-","+","¤","ð","Ð","Ê","Ë","È","i","Í","Î","Ï","+","+","_","_","¦","Ì","_","Ó","ß","Ô","Ò","õ","Õ","µ","þ","Þ","Ú","Û","Ù","ý","Ý","¯","´","­","±","_","¾","¶","§","÷","¸","°","¨","·","¹","³","²","_"," "];var dr,hr,yr=r(31).inflateRaw,gr={};function mr(e,t){return new Date(1980+(t>>9),(t>>5&15)-1,31&t,e>>11,e>>5&63,31&e)}function vr(e,t,n,r){return 0===r?"":t?e.toString("utf8",n,n+r):pr.byte2str(e.slice(n,n+r))}!function(e){e[e.MSDOS=0]="MSDOS",e[e.AMIGA=1]="AMIGA",e[e.OPENVMS=2]="OPENVMS",e[e.UNIX=3]="UNIX",e[e.VM_CMS=4]="VM_CMS",e[e.ATARI_ST=5]="ATARI_ST",e[e.OS2_HPFS=6]="OS2_HPFS",e[e.MAC=7]="MAC",e[e.Z_SYSTEM=8]="Z_SYSTEM",e[e.CP_M=9]="CP_M",e[e.NTFS=10]="NTFS",e[e.MVS=11]="MVS",e[e.VSE=12]="VSE",e[e.ACORN_RISC=13]="ACORN_RISC",e[e.VFAT=14]="VFAT",e[e.ALT_MVS=15]="ALT_MVS",e[e.BEOS=16]="BEOS",e[e.TANDEM=17]="TANDEM",e[e.OS_400=18]="OS_400",e[e.OSX=19]="OSX"}(dr||(dr={})),function(e){e[e.STORED=0]="STORED",e[e.SHRUNK=1]="SHRUNK",e[e.REDUCED_1=2]="REDUCED_1",e[e.REDUCED_2=3]="REDUCED_2",e[e.REDUCED_3=4]="REDUCED_3",e[e.REDUCED_4=5]="REDUCED_4",e[e.IMPLODE=6]="IMPLODE",e[e.DEFLATE=8]="DEFLATE",e[e.DEFLATE64=9]="DEFLATE64",e[e.TERSE_OLD=10]="TERSE_OLD",e[e.BZIP2=12]="BZIP2",e[e.LZMA=14]="LZMA",e[e.TERSE_NEW=18]="TERSE_NEW",e[e.LZ77=19]="LZ77",e[e.WAVPACK=97]="WAVPACK",e[e.PPMD=98]="PPMD"}(hr||(hr={}));var wr=function(e){if(this.data=e,67324752!==e.readUInt32LE(0))throw new p(a.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))};wr.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},wr.prototype.flags=function(){return this.data.readUInt16LE(6)},wr.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},wr.prototype.lastModFileTime=function(){return mr(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},wr.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(10)},wr.prototype.crc32=function(){return this.data.readUInt32LE(14)},wr.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},wr.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},wr.prototype.fileName=function(){return vr(this.data,this.useUTF8(),30,this.fileNameLength())},wr.prototype.extraField=function(){var e=30+this.fileNameLength();return this.data.slice(e,e+this.extraFieldLength())},wr.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},wr.prototype.useUTF8=function(){return 2048==(2048&this.flags())};var _r=function(e,t,n){this.header=e,this.record=t,this.data=n};_r.prototype.decompress=function(){var e=this.header.compressionMethod(),t=gr[e];if(t)return t(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var n=hr[e];throw n||(n="Unknown: "+e),new p(a.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+n)},_r.prototype.getHeader=function(){return this.header},_r.prototype.getRecord=function(){return this.record},_r.prototype.getRawData=function(){return this.data};var br=function(e){this.data=e};br.prototype.crc32=function(){return this.data.readUInt32LE(0)},br.prototype.compressedSize=function(){return this.data.readUInt32LE(4)},br.prototype.uncompressedSize=function(){return this.data.readUInt32LE(8)};var Er=function(e){if(this.data=e,134630224!==this.data.readUInt32LE(0))throw new p(a.EINVAL,"Invalid archive extra data record signature: "+this.data.readUInt32LE(0))};Er.prototype.length=function(){return this.data.readUInt32LE(4)},Er.prototype.extraFieldData=function(){return this.data.slice(8,8+this.length())};var kr=function(e){if(this.data=e,84233040!==this.data.readUInt32LE(0))throw new p(a.EINVAL,"Invalid digital signature signature: "+this.data.readUInt32LE(0))};kr.prototype.size=function(){return this.data.readUInt16LE(4)},kr.prototype.signatureData=function(){return this.data.slice(6,6+this.size())};var Sr=function(e,t){if(this.zipData=e,this.data=t,33639248!==this.data.readUInt32LE(0))throw new p(a.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()};Sr.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},Sr.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},Sr.prototype.flag=function(){return this.data.readUInt16LE(8)},Sr.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},Sr.prototype.lastModFileTime=function(){return mr(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},Sr.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(12)},Sr.prototype.crc32=function(){return this.data.readUInt32LE(16)},Sr.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},Sr.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},Sr.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},Sr.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},Sr.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},Sr.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},Sr.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},Sr.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},Sr.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},Sr.prototype.produceFilename=function(){return vr(this.data,this.useUTF8(),46,this.fileNameLength()).replace(/\\/g,"/")},Sr.prototype.fileName=function(){return this._filename},Sr.prototype.rawFileName=function(){return this.data.slice(46,46+this.fileNameLength())},Sr.prototype.extraField=function(){var e=44+this.fileNameLength();return this.data.slice(e,e+this.extraFieldLength())},Sr.prototype.fileComment=function(){var e=46+this.fileNameLength()+this.extraFieldLength();return vr(this.data,this.useUTF8(),e,this.fileCommentLength())},Sr.prototype.rawFileComment=function(){var e=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(e,e+this.fileCommentLength())},Sr.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},Sr.prototype.isDirectory=function(){var e=this.fileName();return!!(16&this.externalAttributes())||"/"===e.charAt(e.length-1)},Sr.prototype.isFile=function(){return!this.isDirectory()},Sr.prototype.useUTF8=function(){return 2048==(2048&this.flag())},Sr.prototype.isEncrypted=function(){return 1==(1&this.flag())},Sr.prototype.getFileData=function(){var e=this.headerRelativeOffset(),t=new wr(this.zipData.slice(e));return new _r(t,this,this.zipData.slice(e+t.totalSize()))},Sr.prototype.getData=function(){return this.getFileData().decompress()},Sr.prototype.getRawData=function(){return this.getFileData().getRawData()},Sr.prototype.getStats=function(){return new g(h.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())};var xr=function(e){if(this.data=e,101010256!==this.data.readUInt32LE(0))throw new p(a.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))};xr.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},xr.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},xr.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},xr.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},xr.prototype.cdSize=function(){return this.data.readUInt32LE(12)},xr.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},xr.prototype.cdZipCommentLength=function(){return this.data.readUInt16LE(20)},xr.prototype.cdZipComment=function(){return vr(this.data,!0,22,this.cdZipCommentLength())},xr.prototype.rawCdZipComment=function(){return this.data.slice(22,22+this.cdZipCommentLength())};var Tr=function(e,t,n,r){this.index=e,this.directoryEntries=t,this.eocd=n,this.data=r},Or=function(e){function t(n,r,i){void 0===r&&(r=""),void 0===i&&(i=!0),e.call(this),this.name=r,this._index=new sr,this._directoryEntries=[],this._eocd=null,A(i,t.Name,{zipData:"zip data as a Buffer",name:r}),n instanceof Tr?(this._index=n.index,this._directoryEntries=n.directoryEntries,this._eocd=n.eocd,this.data=n.data):(this.data=n,this.populateIndex())}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,n){try{t.computeIndex(e.zipData,function(r){var i=new t(r,e.name,!1);n(null,i)},!1)}catch(e){n(e)}},t.isAvailable=function(){return!0},t.RegisterDecompressionMethod=function(e,t){gr[e]=t},t.computeIndex=function(e,n,r){void 0===r&&(r=!0),r&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var i=new sr,o=t.getEOCD(e);if(o.diskNumber()!==o.cdDiskNumber())throw new p(a.EINVAL,"ZipFS does not support spanned zip files.");var s=o.cdOffset();if(4294967295===s)throw new p(a.EINVAL,"ZipFS does not support Zip64.");var u=s+o.cdSize();t.computeIndexResponsive(e,i,s,u,n,[],o)},t.getEOCD=function(e){for(var t=Math.min(65557,e.length-1),n=22;n<t;n++)if(101010256===e.readUInt32LE(e.length-n))return new xr(e.slice(e.length-n));throw new p(a.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},t.addToIndex=function(e,t){var n=e.fileName();if("/"===n.charAt(0))throw new Error("WHY IS THIS ABSOLUTE");"/"===n.charAt(n.length-1)&&(n=n.substr(0,n.length-1)),e.isDirectory()?t.addPathFast("/"+n,new ur(e)):t.addPathFast("/"+n,new ar(e))},t.computeIndexResponsive=function(e,n,r,i,o,s,a){if(r<i){for(var u=0;u++<200&&r<i;){var c=new Sr(e,e.slice(r));t.addToIndex(c,n),r+=c.totalSize(),s.push(c)}In(function(){t.computeIndexResponsive(e,n,r,i,o,s,a)})}else o(new Tr(n,s,a,e))},t.prototype.getName=function(){return t.Name+(""!==this.name?" "+this.name:"")},t.prototype.getCentralDirectoryEntry=function(e){var t=this._index.getInode(e);if(null===t)throw p.ENOENT(e);if(cr(t))return t.getData();if(lr(t))return t.getData();throw p.EPERM("Invalid inode: "+t)},t.prototype.getCentralDirectoryEntryAt=function(e){var t=this._directoryEntries[e];if(!t)throw new RangeError("Invalid directory index: "+e+".");return t},t.prototype.getNumberOfCentralDirectoryEntries=function(){return this._directoryEntries.length},t.prototype.getEndOfCentralDirectory=function(){return this._eocd},t.prototype.diskSpace=function(e,t){t(this.data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,t){var n,r=this._index.getInode(e);if(null===r)throw p.ENOENT(e);if(cr(r))n=r.getData().getStats();else{if(!lr(r))throw new p(a.EINVAL,"Invalid inode.");n=r.getStats()}return n},t.prototype.openSync=function(e,t,n){if(t.isWriteable())throw new p(a.EPERM,e);var r=this._index.getInode(e);if(!r)throw p.ENOENT(e);if(!cr(r))throw p.EISDIR(e);var i=r.getData(),o=i.getStats();switch(t.pathExistsAction()){case f.THROW_EXCEPTION:case f.TRUNCATE_FILE:throw p.EEXIST(e);case f.NOP:return new Q(this,e,t,o,i.getData());default:throw new p(a.EINVAL,"Invalid FileMode object.")}},t.prototype.readdirSync=function(e){var t=this._index.getInode(e);if(t){if(lr(t))return t.getListing();throw p.ENOTDIR(e)}throw p.ENOENT(e)},t.prototype.readFileSync=function(e,t,n){var r=this.openSync(e,n,420);try{var i=r.getBuffer();return null===t?B(i):i.toString(t)}finally{r.closeSync()}},t.prototype.populateIndex=function(){var e=this._eocd=t.getEOCD(this.data);if(e.diskNumber()!==e.cdDiskNumber())throw new p(a.EINVAL,"ZipFS does not support spanned zip files.");var n=e.cdOffset();if(4294967295===n)throw new p(a.EINVAL,"ZipFS does not support Zip64.");for(var r=n+e.cdSize();n<r;){var i=new Sr(this.data,this.data.slice(n));n+=i.totalSize(),t.addToIndex(i,this._index),this._directoryEntries.push(i)}},t}(Z);function Cr(e,t,n){return e.toString("ascii",t,t+n).trim()}function Nr(e,t,n){if(1===n)return String.fromCharCode(e[t]);for(var r=Math.floor(n/2),i=new Array(r),o=0;o<r;o++){var s=t+(o<<1);i[o]=String.fromCharCode(e[s+1]|e[s]<<8)}return i.join("")}function Ar(e,t){var n=parseInt(Cr(e,t,4),10),r=parseInt(Cr(e,t+4,2),10),i=parseInt(Cr(e,t+6,2),10),o=parseInt(Cr(e,t+8,2),10),s=parseInt(Cr(e,t+10,2),10),a=parseInt(Cr(e,t+12,2),10),u=parseInt(Cr(e,t+14,2),10);return new Date(n,r,i,o,s,a,100*u)}function Ir(e,t){var n=e[t],r=e[t+1],i=e[t+2],o=e[t+3],s=e[t+4],a=e[t+5];return new Date(n,r-1,i,o,s,a)}function Lr(e,t){var n=e.slice(t),r=new zr(n);switch(r.signatureWord()){case 17221:return new Hr(n);case 20548:return new qr(n);case 21328:return new Wr(n);case 21332:return new Yr(n);case 17746:return new Gr(n);case 17747:return new Vr(n);case 20568:return new $r(n);case 20558:return new Zr(n);case 21324:return new Kr(n);case 20045:return new Qr(n);case 17228:return new ei(n);case 20556:return new ti(n);case 21061:return new ni(n);case 21574:return new ri(n);case 21318:return new ii(n);case 21074:return new Xr(n);default:return r}}function Fr(e,t,n,r){n-=4;for(var i=new Array;t<n;){var o=Lr(e,t),s=o.length();if(0===s)return i;if(t+=s,o instanceof Yr)break;o instanceof Hr?i=i.concat(o.getEntries(r)):i.push(o)}return i}Or.Name="ZipFS",Or.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:q},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},Or.CompressionMethod=hr,Or.RegisterDecompressionMethod(hr.DEFLATE,function(e,t,n){return j(yr(e.slice(0,t),{chunkSize:n}))}),Or.RegisterDecompressionMethod(hr.STORED,function(e,t,n){return B(e,0,n)});var Rr=function(e){this._data=e};Rr.prototype.type=function(){return this._data[0]},Rr.prototype.standardIdentifier=function(){return Cr(this._data,1,5)},Rr.prototype.version=function(){return this._data[6]},Rr.prototype.data=function(){return this._data.slice(7,2048)};var Dr=function(e){function t(t){e.call(this,t),this._root=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.systemIdentifier=function(){return this._getString32(8)},t.prototype.volumeIdentifier=function(){return this._getString32(40)},t.prototype.volumeSpaceSize=function(){return this._data.readUInt32LE(80)},t.prototype.volumeSetSize=function(){return this._data.readUInt16LE(120)},t.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(124)},t.prototype.logicalBlockSize=function(){return this._data.readUInt16LE(128)},t.prototype.pathTableSize=function(){return this._data.readUInt32LE(132)},t.prototype.locationOfTypeLPathTable=function(){return this._data.readUInt32LE(140)},t.prototype.locationOfOptionalTypeLPathTable=function(){return this._data.readUInt32LE(144)},t.prototype.locationOfTypeMPathTable=function(){return this._data.readUInt32BE(148)},t.prototype.locationOfOptionalTypeMPathTable=function(){return this._data.readUInt32BE(152)},t.prototype.rootDirectoryEntry=function(e){return null===this._root&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(e)),this._root},t.prototype.volumeSetIdentifier=function(){return this._getString(190,128)},t.prototype.publisherIdentifier=function(){return this._getString(318,128)},t.prototype.dataPreparerIdentifier=function(){return this._getString(446,128)},t.prototype.applicationIdentifier=function(){return this._getString(574,128)},t.prototype.copyrightFileIdentifier=function(){return this._getString(702,38)},t.prototype.abstractFileIdentifier=function(){return this._getString(740,36)},t.prototype.bibliographicFileIdentifier=function(){return this._getString(776,37)},t.prototype.volumeCreationDate=function(){return Ar(this._data,813)},t.prototype.volumeModificationDate=function(){return Ar(this._data,830)},t.prototype.volumeExpirationDate=function(){return Ar(this._data,847)},t.prototype.volumeEffectiveDate=function(){return Ar(this._data,864)},t.prototype.fileStructureVersion=function(){return this._data[881]},t.prototype.applicationUsed=function(){return this._data.slice(883,1395)},t.prototype.reserved=function(){return this._data.slice(1395,2048)},t.prototype._getString32=function(e){return this._getString(e,32)},t}(Rr),Mr=function(e){function t(t){if(e.call(this,t),1!==this.type())throw new p(a.EIO,"Invalid primary volume descriptor.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"ISO9660"},t.prototype._constructRootDirectoryRecord=function(e){return new Ur(e,-1)},t.prototype._getString=function(e,t){return this._getString(e,t)},t}(Dr),jr=function(e){function t(t){if(e.call(this,t),2!==this.type())throw new p(a.EIO,"Invalid supplementary volume descriptor.");var n=this.escapeSequence(),r=n[2];if(37!==n[0]||47!==n[1]||64!==r&&67!==r&&69!==r)throw new p(a.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+n.toString())}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"Joliet"},t.prototype.escapeSequence=function(){return this._data.slice(88,120)},t.prototype._constructRootDirectoryRecord=function(e){return new Br(e,-1)},t.prototype._getString=function(e,t){return Nr(this._data,e,t)},t}(Dr),Pr=function(e,t){this._suEntries=null,this._fileOrDir=null,this._data=e,this._rockRidgeOffset=t};Pr.prototype.hasRockRidge=function(){return this._rockRidgeOffset>-1},Pr.prototype.getRockRidgeOffset=function(){return this._rockRidgeOffset},Pr.prototype.rootCheckForRockRidge=function(e){var t=this.getDirectory(e);this._rockRidgeOffset=t.getDotEntry(e)._getRockRidgeOffset(e),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},Pr.prototype.length=function(){return this._data[0]},Pr.prototype.extendedAttributeRecordLength=function(){return this._data[1]},Pr.prototype.lba=function(){return 2048*this._data.readUInt32LE(2)},Pr.prototype.dataLength=function(){return this._data.readUInt32LE(10)},Pr.prototype.recordingDate=function(){return Ir(this._data,18)},Pr.prototype.fileFlags=function(){return this._data[25]},Pr.prototype.fileUnitSize=function(){return this._data[26]},Pr.prototype.interleaveGapSize=function(){return this._data[27]},Pr.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(28)},Pr.prototype.identifier=function(){return this._getString(33,this._data[32])},Pr.prototype.fileName=function(e){if(this.hasRockRidge()){var t=this._rockRidgeFilename(e);if(null!==t)return t}var n=this.identifier();if(this.isDirectory(e))return n;var r=n.indexOf(";");return-1===r?n:"."===n[r-1]?n.slice(0,r-1):n.slice(0,r)},Pr.prototype.isDirectory=function(e){var t=!!(2&this.fileFlags());return!t&&this.hasRockRidge()&&(t=this.getSUEntries(e).filter(function(e){return e instanceof ei}).length>0),t},Pr.prototype.isSymlink=function(e){return this.hasRockRidge()&&this.getSUEntries(e).filter(function(e){return e instanceof Kr}).length>0},Pr.prototype.getSymlinkPath=function(e){for(var t="",n=this.getSUEntries(e),r=this._getGetString(),i=0,o=n;i<o.length;i+=1){var s=o[i];if(s instanceof Kr){for(var a=0,u=s.componentRecords();a<u.length;a+=1){var c=u[a],l=c.flags();2&l?t+="./":4&l?t+="../":8&l?t+="/":(t+=c.content(r),1&l||(t+="/"))}if(!s.continueFlag())break}}return t.length>1&&"/"===t[t.length-1]?t.slice(0,t.length-1):t},Pr.prototype.getFile=function(e){if(this.isDirectory(e))throw new Error("Tried to get a File from a directory.");return null===this._fileOrDir&&(this._fileOrDir=e.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},Pr.prototype.getDirectory=function(e){if(!this.isDirectory(e))throw new Error("Tried to get a Directory from a file.");return null===this._fileOrDir&&(this._fileOrDir=this._constructDirectory(e)),this._fileOrDir},Pr.prototype.getSUEntries=function(e){return this._suEntries||this._constructSUEntries(e),this._suEntries},Pr.prototype._rockRidgeFilename=function(e){var t=this.getSUEntries(e).filter(function(e){return e instanceof Qr});if(0===t.length||6&t[0].flags())return null;for(var n="",r=this._getGetString(),i=0,o=t;i<o.length;i+=1){var s=o[i];if(n+=s.name(r),!(1&s.flags()))break}return n},Pr.prototype._constructSUEntries=function(e){var t=33+this._data[32];t%2==1&&t++,t+=this._rockRidgeOffset,this._suEntries=Fr(this._data,t,this.length(),e)},Pr.prototype._getRockRidgeOffset=function(e){this._rockRidgeOffset=0;var t=this.getSUEntries(e);if(t.length>0){var n=t[0];if(n instanceof Wr&&n.checkBytesPass())for(var r=1;r<t.length;r++){var i=t[r];if(i instanceof Xr||i instanceof Gr&&"IEEE_P1282"===i.extensionIdentifier())return n.bytesSkipped()}}return this._rockRidgeOffset=-1,-1};var Ur=function(e){function t(t,n){e.call(this,t,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,t){return Cr(this._data,e,t)},t.prototype._constructDirectory=function(e){return new si(this,e)},t.prototype._getGetString=function(){return Cr},t}(Pr),Br=function(e){function t(t,n){e.call(this,t,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,t){return Nr(this._data,e,t)},t.prototype._constructDirectory=function(e){return new ai(this,e)},t.prototype._getGetString=function(){return Nr},t}(Pr),zr=function(e){this._data=e};zr.prototype.signatureWord=function(){return this._data.readUInt16BE(0)},zr.prototype.signatureWordString=function(){return Cr(this._data,0,2)},zr.prototype.length=function(){return this._data[2]},zr.prototype.suVersion=function(){return this._data[3]};var Hr=function(e){function t(t){e.call(this,t),this._entries=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.continuationLba=function(){return this._data.readUInt32LE(4)},t.prototype.continuationLbaOffset=function(){return this._data.readUInt32LE(12)},t.prototype.continuationLength=function(){return this._data.readUInt32LE(20)},t.prototype.getEntries=function(e){if(!this._entries){var t=2048*this.continuationLba()+this.continuationLbaOffset();this._entries=Fr(e,t,this.continuationLength(),e)}return this._entries},t}(zr),qr=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(zr),Wr=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.checkBytesPass=function(){return 190===this._data[4]&&239===this._data[5]},t.prototype.bytesSkipped=function(){return this._data[6]},t}(zr),Yr=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(zr),Gr=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.identifierLength=function(){return this._data[4]},t.prototype.descriptorLength=function(){return this._data[5]},t.prototype.sourceLength=function(){return this._data[6]},t.prototype.extensionVersion=function(){return this._data[7]},t.prototype.extensionIdentifier=function(){return Cr(this._data,8,this.identifierLength())},t.prototype.extensionDescriptor=function(){return Cr(this._data,8+this.identifierLength(),this.descriptorLength())},t.prototype.extensionSource=function(){return Cr(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},t}(zr),Vr=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.extensionSequence=function(){return this._data[4]},t}(zr),Xr=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(zr),$r=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.mode=function(){return this._data.readUInt32LE(4)},t.prototype.fileLinks=function(){return this._data.readUInt32LE(12)},t.prototype.uid=function(){return this._data.readUInt32LE(20)},t.prototype.gid=function(){return this._data.readUInt32LE(28)},t.prototype.inode=function(){return this._data.readUInt32LE(36)},t}(zr),Zr=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.devTHigh=function(){return this._data.readUInt32LE(4)},t.prototype.devTLow=function(){return this._data.readUInt32LE(12)},t}(zr),Kr=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.continueFlag=function(){return 1&this.flags()},t.prototype.componentRecords=function(){for(var e=new Array,t=5;t<this.length();){var n=new Jr(this._data.slice(t));e.push(n),t+=n.length()}return e},t}(zr),Jr=function(e){this._data=e};Jr.prototype.flags=function(){return this._data[0]},Jr.prototype.length=function(){return 2+this.componentLength()},Jr.prototype.componentLength=function(){return this._data[1]},Jr.prototype.content=function(e){return e(this._data,2,this.componentLength())};var Qr=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.name=function(e){return e(this._data,5,this.length()-5)},t}(zr),ei=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.childDirectoryLba=function(){return this._data.readUInt32LE(4)},t}(zr),ti=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parentDirectoryLba=function(){return this._data.readUInt32LE(4)},t}(zr),ni=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(zr),ri=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.creation=function(){return 1&this.flags()?this._longFormDates()?Ar(this._data,5):Ir(this._data,5):null},t.prototype.modify=function(){if(2&this.flags()){var e=1&this.flags()?1:0;return this._longFormDates?Ar(this._data,5+17*e):Ir(this._data,5+7*e)}return null},t.prototype.access=function(){if(4&this.flags()){var e=1&this.flags()?1:0;return e+=2&this.flags()?1:0,this._longFormDates?Ar(this._data,5+17*e):Ir(this._data,5+7*e)}return null},t.prototype.backup=function(){if(16&this.flags()){var e=1&this.flags()?1:0;return e+=2&this.flags()?1:0,e+=4&this.flags()?1:0,this._longFormDates?Ar(this._data,5+17*e):Ir(this._data,5+7*e)}return null},t.prototype.expiration=function(){if(32&this.flags()){var e=1&this.flags()?1:0;return e+=2&this.flags()?1:0,e+=4&this.flags()?1:0,e+=16&this.flags()?1:0,this._longFormDates?Ar(this._data,5+17*e):Ir(this._data,5+7*e)}return null},t.prototype.effective=function(){if(64&this.flags()){var e=1&this.flags()?1:0;return e+=2&this.flags()?1:0,e+=4&this.flags()?1:0,e+=16&this.flags()?1:0,e+=32&this.flags()?1:0,this._longFormDates?Ar(this._data,5+17*e):Ir(this._data,5+7*e)}return null},t.prototype._longFormDates=function(){return!!this.flags()},t}(zr),ii=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.virtualSizeHigh=function(){return this._data.readUInt32LE(4)},t.prototype.virtualSizeLow=function(){return this._data.readUInt32LE(12)},t.prototype.tableDepth=function(){return this._data[20]},t}(zr),oi=function(e,t){this._fileList=[],this._fileMap={},this._record=e;var n=e.lba(),r=n+e.dataLength();for(2&e.fileFlags()||(n=2048*e.getSUEntries(t).filter(function(e){return e instanceof ei})[0].childDirectoryLba(),r=1/0);n<r;)if(0!==t[n]){var i=this._constructDirectoryRecord(t.slice(n)),o=i.fileName(t);"\0"!==o&&""!==o?i.hasRockRidge()&&0!==i.getSUEntries(t).filter(function(e){return e instanceof ni}).length||(this._fileMap[o]=i,this._fileList.push(o)):r===1/0&&(r=n+i.dataLength()),n+=i.length()}else n++};oi.prototype.getRecord=function(e){return this._fileMap[e]},oi.prototype.getFileList=function(){return this._fileList},oi.prototype.getDotEntry=function(e){return this._constructDirectoryRecord(e.slice(this._record.lba()))};var si=function(e){function t(t,n){e.call(this,t,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new Ur(e,this._record.getRockRidgeOffset())},t}(oi),ai=function(e){function t(t,n){e.call(this,t,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new Br(e,this._record.getRockRidgeOffset())},t}(oi),ui=function(e){function t(n,r,i){var o=this;void 0===r&&(r=""),void 0===i&&(i=!0),e.call(this),this._data=n,A(i,t.Name,{data:"ISO data as a Buffer",name:r});for(var s=!1,u=32768,c=new Array;!s;){var l=n.slice(u);switch(new Rr(l).type()){case 1:c.push(new Mr(l));break;case 2:c.push(new jr(l));break;case 255:s=!0}u+=2048}if(0===c.length)throw new p(a.EIO,"Unable to find a suitable volume descriptor.");c.forEach(function(e){o._pvd&&2===o._pvd.type()||(o._pvd=e)}),this._root=this._pvd.rootDirectoryEntry(n),this._name=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,n){var r,i;try{r=new t(e.data,e.name,!1)}catch(i){i=i}finally{n(void 0,r)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){var e="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(e+="-RockRidge"),e},t.prototype.diskSpace=function(e,t){t(this._data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,t){var n=this._getDirectoryRecord(e);if(null===n)throw p.ENOENT(e);return this._getStats(e,n)},t.prototype.openSync=function(e,t,n){if(t.isWriteable())throw new p(a.EPERM,e);var r=this._getDirectoryRecord(e);if(!r)throw p.ENOENT(e);if(r.isSymlink(this._data))return this.openSync(c.resolve(e,r.getSymlinkPath(this._data)),t,n);if(r.isDirectory(this._data))throw p.EISDIR(e);var i=r.getFile(this._data),o=this._getStats(e,r);switch(t.pathExistsAction()){case f.THROW_EXCEPTION:case f.TRUNCATE_FILE:throw p.EEXIST(e);case f.NOP:return new Q(this,e,t,o,i);default:throw new p(a.EINVAL,"Invalid FileMode object.")}},t.prototype.readdirSync=function(e){var t=this._getDirectoryRecord(e);if(t){if(t.isDirectory(this._data))return t.getDirectory(this._data).getFileList().slice(0);throw p.ENOTDIR(e)}throw p.ENOENT(e)},t.prototype.readFileSync=function(e,t,n){var r=this.openSync(e,n,420);try{var i=r.getBuffer();return null===t?B(i):i.toString(t)}finally{r.closeSync()}},t.prototype._getDirectoryRecord=function(e){if("/"===e)return this._root;for(var t=e.split("/").slice(1),n=this._root,r=0,i=t;r<i.length;r+=1){var o=i[r];if(!n.isDirectory(this._data))return null;if(!(n=n.getDirectory(this._data).getRecord(o)))return null}return n},t.prototype._getStats=function(e,t){if(t.isSymlink(this._data)){var n=c.resolve(e,t.getSymlinkPath(this._data)),r=this._getDirectoryRecord(n);return r?this._getStats(n,r):null}var i=t.dataLength(),o=365,s=t.recordingDate(),a=s,u=s,l=s;if(t.hasRockRidge())for(var f=0,p=t.getSUEntries(this._data);f<p.length;f+=1){var d=p[f];if(d instanceof $r)o=d.mode();else if(d instanceof ri){var y=d.flags();4&y&&(a=d.access()),2&y&&(u=d.modify()),1&y&&(l=d.creation())}}return o&=365,new g(t.isDirectory(this._data)?h.DIRECTORY:h.FILE,i,o,a,u,l)},t}(Z);ui.Name="IsoFS",ui.Options={data:{type:"object",description:"The ISO file in a buffer",validator:q}},[te,Dt,Pt,Ut,Vt,an,hn,ui,vn,wn,Bn,nr,fr,Or].forEach(function(e){var t=e.Create;e.Create=function(n,r){var i="function"==typeof n,o=i?n:r,s=i?{}:n;W(e,s,function(n){n?o(n):t.call(e,s,o)})}});var ci,li={AsyncMirror:te,Dropbox:Dt,Emscripten:Pt,FolderAdapter:Ut,HTML5FS:Vt,InMemory:an,IndexedDB:hn,IsoFS:ui,LocalStorage:vn,MountableFileSystem:wn,OverlayFS:Bn,WorkerFS:nr,XmlHttpRequest:fr,ZipFS:Or};function fi(e){switch(e){case"fs":return T;case"path":return c;case"buffer":return u;case"process":return s;case"bfs_utils":return Y;default:return li[e]}}function pi(e){return T.initialize(e)}function di(e,t){var n=e.fs;if(!n)return t(new p(a.EPERM,'Missing "fs" property on configuration object.'));var r=e.options,i=0,o=!1;function s(){if(!o){o=!0;var e=li[n];e?e.Create(r,t):t(new p(a.EPERM,"File system "+n+" is not available in BrowserFS."))}}if(null!==r&&"object"==typeof r){var u=!1;Object.keys(r).filter(function(e){return"fs"!==e}).forEach(function(e){var n=r[e];null!==n&&"object"==typeof n&&n.fs&&(i++,di(n,function(n,a){if(i--,n){if(o)return;o=!0,t(n)}else r[e]=a,0===i&&u&&s()}))}),u=!0}0===i&&s()}s.initializeTTYs&&s.initializeTTYs(),"b"!=="ab".substr(-1)&&(String.prototype.substr=(ci=String.prototype.substr,function(e,t){return e<0&&(e=this.length+e),ci.call(this,e,t)})),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e<0&&(e=this.length+e)<0&&(e=0),t<0&&(t=this.length+t)<0&&(t=0),t<e&&(t=e),new Uint8Array(this.buffer,this.byteOffset+e,t-e)})),n.install=function(t){t.Buffer=e,t.process=s;var n=t.require?t.require:null;t.require=function(e){var t=fi(e);return t||n.apply(null,Array.prototype.slice.call(arguments,0))}},n.registerFileSystem=function(e,t){li[e]=t},n.BFSRequire=fi,n.initialize=pi,n.configure=function(e,t){di(e,function(e,n){n?(pi(n),t()):t(e)})},n.getFileSystem=di,n.EmscriptenFS=X,n.FileSystem=li,n.Errors=d,n.setImmediate=In}).call(n,r(1),function(){return this}(),r(5)(e),r(6))},function(e,t,n){e.exports=n(2).Buffer},function(e,t,n){(function(e){
/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";var r=n(3),i=n(4);t.Buffer=e,t.SlowBuffer=function(t){return+t!=t&&(t=0),e.alloc(+t)},t.INSPECT_MAX_BYTES=50;var o=2147483647;function s(t){if(t>o)throw new RangeError("Invalid typed array length");var n=new Uint8Array(t);return n.__proto__=e.prototype,n}function e(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(e)}return a(e,t,n)}function a(t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return U(t)?function(t,n,r){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");var i;return(i=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r)).__proto__=e.prototype,i}(t,n,r):"string"==typeof t?function(t,n){if("string"==typeof n&&""!==n||(n="utf8"),!e.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=s(r),o=i.write(t,n);return o!==r&&(i=i.slice(0,o)),i}(t,n):function(t){if(e.isBuffer(t)){var n=0|f(t.length),r=s(n);return 0===r.length?r:(t.copy(r,0,0,n),r)}if(t){if(B(t)||"length"in t)return"number"!=typeof t.length||z(t.length)?s(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e){return u(e),s(e<0?0:0|f(e))}function l(e){for(var t=e.length<0?0:0|f(e.length),n=s(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function p(t,n){if(e.isBuffer(t))return t.length;if(B(t)||U(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var i=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(t).length;default:if(i)return M(t).length;n=(""+n).toLowerCase(),i=!0}}function d(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(t,n,r,i,o){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),z(r=+r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof n&&(n=e.from(n,i)),e.isBuffer(n))return 0===n.length?-1:g(t,n,r,i,o);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,n,r):Uint8Array.prototype.lastIndexOf.call(t,n,r):g(t,[n],r,i,o);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var o,s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var f=!0,p=0;p<u;p++)if(c(e,o+p)!==c(t,p)){f=!1;break}if(f)return o}return-1}function m(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(z(a))return s;e[n+s]=a}return s}function v(e,t,n,r){return P(M(t,e.length-n),e,n,r)}function w(e,t,n,r){return P(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return w(e,t,n,r)}function b(e,t,n,r){return P(j(t),e,n,r)}function E(e,t,n,r){return P(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(e){var t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=x));return n}(r)}t.kMaxLength=o,e.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),e.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(e,t,n){return a(e,t,n)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},e.allocUnsafe=function(e){return c(e)},e.allocUnsafeSlow=function(e){return c(e)},e.isBuffer=function(e){return null!=e&&!0===e._isBuffer},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var r=t.length,i=n.length,o=0,s=Math.min(r,i);o<s;++o)if(t[o]!==n[o]){r=t[o],i=n[o];break}return r<i?-1:i<r?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<t.length;++r)n+=t[r].length;var i=e.allocUnsafe(n),o=0;for(r=0;r<t.length;++r){var s=t[r];if(!e.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i},e.byteLength=p,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},e.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):d.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,n,r,i,o){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),n<0||r>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&n>=r)return 0;if(i>=o)return-1;if(n>=r)return 1;if(this===t)return 0;for(var s=(o>>>=0)-(i>>>=0),a=(r>>>=0)-(n>>>=0),u=Math.min(s,a),c=this.slice(i,o),l=t.slice(n,r),f=0;f<u;++f)if(c[f]!==l[f]){s=c[f],a=l[f];break}return s<a?-1:a<s?1:0},e.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},e.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},e.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},e.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return _(this,e,t,n);case"base64":return b(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function C(e,t,n){var r,i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var o="",s=t;s<n;++s)o+=(r=e[s])<16?"0"+r.toString(16):r.toString(16);return o}function N(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function A(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,n,r,i,o,s){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<s)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function L(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,o){return t=+t,n>>>=0,o||L(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function R(e,t,n,r,o){return t=+t,n>>>=0,o||L(e,0,n,8),i.write(e,t,n,r,52,8),n+8}e.prototype.slice=function(t,n){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):n>r&&(n=r),n<t&&(n=t);var i=this.subarray(t,n);return i.__proto__=e.prototype,i},e.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},e.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},e.prototype.readUInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},e.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},e.prototype.readInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},e.prototype.readInt16LE=function(e,t){e>>>=0,t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){e>>>=0,t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return e>>>=0,t||A(e,4,this.length),i.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return e>>>=0,t||A(e,4,this.length),i.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return e>>>=0,t||A(e,8,this.length),i.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return e>>>=0,t||A(e,8,this.length),i.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||I(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||I(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},e.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,255,0),this[t]=255&e,t+1},e.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},e.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},e.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},e.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},e.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},e.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},e.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},e.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},e.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},e.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},e.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},e.prototype.fill=function(t,n,r,i){if("string"==typeof t){if("string"==typeof n?(i=n,n=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!e.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;var s;if(n>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=n;s<r;++s)this[s]=t;else{var a=e.isBuffer(t)?t:new e(t,i),u=a.length;for(s=0;s<r-n;++s)this[s+n]=a[s%u]}return this};var D=/[^+/0-9A-Za-z-_]/g;function M(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(e){return r.toByteArray(function(e){if((e=e.trim().replace(D,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function P(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function U(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function B(e){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}function z(e){return e!=e}}).call(t,n(1))},function(e,t){"use strict";t.byteLength=function(e){return 3*e.length/4-u(e)},t.toByteArray=function(e){var t,n,o,s,a,c,l=e.length;a=u(e),c=new i(3*l/4-a),o=a>0?l-4:l;var f=0;for(t=0,n=0;t<o;t+=4,n+=3)s=r[e.charCodeAt(t)]<<18|r[e.charCodeAt(t+1)]<<12|r[e.charCodeAt(t+2)]<<6|r[e.charCodeAt(t+3)],c[f++]=s>>16&255,c[f++]=s>>8&255,c[f++]=255&s;return 2===a?(s=r[e.charCodeAt(t)]<<2|r[e.charCodeAt(t+1)]>>4,c[f++]=255&s):1===a&&(s=r[e.charCodeAt(t)]<<10|r[e.charCodeAt(t+1)]<<4|r[e.charCodeAt(t+2)]>>2,c[f++]=s>>8&255,c[f++]=255&s),c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o="",s=[],a=0,u=r-i;a<u;a+=16383)s.push(c(e,a,a+16383>u?u:a+16383));return 1===i?(t=e[r-1],o+=n[t>>2],o+=n[t<<4&63],o+="=="):2===i&&(t=(e[r-2]<<8)+e[r-1],o+=n[t>>10],o+=n[t>>4&63],o+=n[t<<2&63],o+="="),s.push(o),s.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function c(e,t,r){for(var i,o,s=[],a=t;a<r;a+=3)i=(e[a]<<16)+(e[a+1]<<8)+e[a+2],s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,p=n?-1:1,d=e[t+f];for(f+=p,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=p,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+f],f+=p,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=c}return(d?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,h=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+f>=1?p/u:p*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+d]=255&a,d+=h,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+d]=255&s,d+=h,s/=256,c-=8);e[n+d-h]|=128*y}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r=new(n(7)),i={};function o(e){i[e]||("function"==typeof r[e]?i[e]=function(){return r[e].apply(r,arguments)}:i[e]=r[e])}for(var s in r)o(s);i.initializeTTYs=function(){null===r.stdin&&(r.initializeTTYs(),i.stdin=r.stdin,i.stdout=r.stdout,i.stderr=r.stderr)},r.nextTick(function(){i.initializeTTYs()}),e.exports=i},function(e,t,n){(function(t){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(8),o=null,s=function(){function e(e,t){this.fun=e,this.array=t}return e.prototype.run=function(){this.fun.apply(null,this.array)},e}(),a=function(){function e(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return e.prototype.push=function(e){var t=this;1!==this._queue.push(e)||this._draining||setTimeout(function(){return t._drainQueue()},0)},e.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},e.prototype._drainQueue=function(){var e=this;if(!this._draining){var t=setTimeout(function(){return e._cleanUpNextTick()});this._draining=!0;for(var n=this._queue.length;n;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<n;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,n=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(t)}},e}(),u=function(e){function i(){e.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new a,this.execPath=t,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=1e3*Math.random()|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return r(i,e),i.prototype.chdir=function(e){null===o&&(o=n(9)),this._cwd=o.resolve(e)},i.prototype.cwd=function(){return this._cwd},i.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},i.prototype.nextTick=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._queue.push(new s(e,t))},i.prototype.abort=function(){this.emit("abort")},i.prototype.exit=function(e){this.exitCode=e,this.emit("exit",[e])},i.prototype.getgid=function(){return this._gid},i.prototype.setgid=function(e){this._gid="number"==typeof e?e:1},i.prototype.getuid=function(){return this._uid},i.prototype.setuid=function(e){this._uid="number"==typeof e?e:1},i.prototype.kill=function(e,t){this.emit("kill",[e,t])},i.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},i.prototype.umask=function(e){void 0===e&&(e=this._mask);var t=this._mask;return this._mask=e,this.emit("umask",[e]),t},i.prototype.hrtime=function(){var e,t=(e="undefined"!=typeof performance?performance.now():Date.now?Date.now():(new Date).getTime())/1e3|0;return[t,e=1e6*(e-=1e3*t)|0]},i.prototype.initializeTTYs=function(){if(null===this.stdout){var e=n(10);this.stdout=new e,this.stderr=new e,this.stdin=new e}},i.prototype.disconnect=function(){},i}(i.EventEmitter);e.exports=u}).call(t,"/")},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,s,a,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(o(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),s=(c=n.slice()).length,u=0;u<s;u++)c[u].apply(this,a);return!0},n.prototype.addListener=function(e,t){var s;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(s=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,o,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(n=this._events[e]).length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){(function(t){"use strict";var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(){function e(){}return e.normalize=function(t){""===t&&(t=".");for(var n=t.charAt(0)===e.sep,r=(t=e._removeDuplicateSeps(t)).split(e.sep),i=[],o=0;o<r.length;o++){var s=r[o];"."!==s&&(".."===s&&(n||!n&&i.length>0&&".."!==i[0])?i.pop():i.push(s))}if(!n&&i.length<2)switch(i.length){case 1:""===i[0]&&i.unshift(".");break;default:i.push(".")}return t=i.join(e.sep),n&&t.charAt(0)!==e.sep&&(t=e.sep+t),t},e.join=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];for(var r=[],i=0;i<t.length;i++){var o=t[i];if("string"!=typeof o)throw new TypeError("Invalid argument type to path.join: "+typeof o);""!==o&&r.push(o)}return e.normalize(r.join(e.sep))},e.resolve=function(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];for(var i=[],o=0;o<n.length;o++){var s=n[o];if("string"!=typeof s)throw new TypeError("Invalid argument type to path.join: "+typeof s);""!==s&&(s.charAt(0)===e.sep&&(i=[]),i.push(s))}var a=e.normalize(i.join(e.sep));if(a.length>1&&a.charAt(a.length-1)===e.sep)return a.substr(0,a.length-1);if(a.charAt(0)!==e.sep){"."!==a.charAt(0)||1!==a.length&&a.charAt(1)!==e.sep||(a=1===a.length?"":a.substr(2));var u=t.cwd();a=""!==a?this.normalize(u+("/"!==u?e.sep:"")+a):u}return a},e.relative=function(t,n){var r;t=e.resolve(t),n=e.resolve(n);var i=t.split(e.sep),o=n.split(e.sep);o.shift(),i.shift();var s=0,a=[];for(r=0;r<i.length;r++)if(i[r]!==o[r]){s=i.length-r;break}a=o.slice(r),1===i.length&&""===i[0]&&(s=0),s>i.length&&(s=i.length);var u="";for(r=0;r<s;r++)u+="../";return(u+=a.join(e.sep)).length>1&&u.charAt(u.length-1)===e.sep&&(u=u.substr(0,u.length-1)),u},e.dirname=function(t){var n=(t=e._removeDuplicateSeps(t)).charAt(0)===e.sep,r=t.split(e.sep);return""===r.pop()&&r.length>0&&r.pop(),r.length>1||1===r.length&&!n?r.join(e.sep):n?e.sep:"."},e.basename=function(t,n){if(void 0===n&&(n=""),""===t)return t;var r=(t=e.normalize(t)).split(e.sep),i=r[r.length-1];return""===i&&r.length>1?r[r.length-2]:n.length>0&&i.substr(i.length-n.length)===n?i.substr(0,i.length-n.length):i},e.extname=function(t){var n=(t=e.normalize(t)).split(e.sep);if(""===(t=n.pop())&&n.length>0&&(t=n.pop()),".."===t)return"";var r=t.lastIndexOf(".");return-1===r||0===r?"":t.substr(r)},e.isAbsolute=function(t){return t.length>0&&t.charAt(0)===e.sep},e._makeLong=function(e){return e},e.parse=function(e){var t,r,i=(t=e,(r=n.exec(t)).shift(),r);return{root:i[0],dir:i[0]+i[1].slice(0,-1),base:i[2],ext:i[3],name:i[2].slice(0,i[2].length-i[3].length)}},e.format=function(t){if(null===t||"object"!=typeof t)throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);if("string"!=typeof(t.root||""))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);return(t.dir?t.dir+e.sep:"")+(t.base||"")},e._removeDuplicateSeps=function(e){return e=e.replace(this._replaceRegex,this.sep)},e.sep="/",e._replaceRegex=new RegExp("//+","g"),e.delimiter=":",e.posix=e,e.win32=e,e}();e.exports=r}).call(t,n(6))},function(e,t,n){(function(t){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function n(){e.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return r(n,e),n.prototype.setRawMode=function(e){this.isRaw!==e&&(this.isRaw=e,this.emit("modeChange"))},n.prototype.changeColumns=function(e){e!==this.columns&&(this.columns=e,this.emit("resize"))},n.prototype.changeRows=function(e){e!==this.rows&&(this.rows=e,this.emit("resize"))},n.isatty=function(e){return e&&e instanceof n},n.prototype._write=function(e,n,r){var i;try{var o;o="string"==typeof e?new t(e,n):e,this._bufferedWrites.push(o),this._waitingForWrites&&this._read(1024)}catch(e){i=e}finally{r(i)}},n.prototype._read=function(e){if(0===this._bufferedWrites.length)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),this._waitingForWrites););},n}(n(11).Duplex);e.exports=i}).call(t,n(1))},function(e,t,n){e.exports=i;var r=n(8).EventEmitter;function i(){r.call(this)}n(12)(i,r),i.Readable=n(13),i.Writable=n(27),i.Duplex=n(28),i.Transform=n(29),i.PassThrough=n(30),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",u));var s=!1;function a(){s||(s=!0,e.end())}function u(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(l(),0===r.listenerCount(this,"error"))throw e}function l(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",a),n.removeListener("close",u),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",l),n.removeListener("close",l),e.removeListener("close",l)}return n.on("error",c),e.on("error",c),n.on("end",l),n.on("close",l),e.on("close",l),e.emit("pipe",n),e}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(r){var i=function(){try{return n(11)}catch(e){}}();(t=e.exports=n(14)).Stream=i||t,t.Readable=t,t.Writable=n(22),t.Duplex=n(21),t.Transform=n(25),t.PassThrough=n(26),!r.browser&&"disable"===r.env.READABLE_STREAM&&i&&(e.exports=i)}).call(t,n(6))},function(e,t,n){(function(t){"use strict";e.exports=g;var r,i=n(15),o=n(16);g.ReadableState=y,n(8).EventEmitter;var s,a=function(e,t){return e.listeners(t).length};!function(){try{s=n(11)}catch(e){}finally{s||(s=n(8).EventEmitter)}}();var u=n(2).Buffer,c=n(17),l=n(18);l.inherits=n(12);var f=n(19),p=void 0;p=f&&f.debuglog?f.debuglog("stream"):function(){};var d,h=n(20);function y(e,t){r=r||n(21),e=e||{},this.objectMode=!!e.objectMode,t instanceof r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(24).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function g(e){if(r=r||n(21),!(this instanceof g))return new g(e);this._readableState=new y(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),s.call(this)}function m(e,t,n,r,o){var s=function(e,t){var n=null;return u.isBuffer(t)||"string"==typeof t||null==t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(t,n);if(s)e.emit("error",s);else if(null===n)t.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,_(e)}}(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!o){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&o){var c=new Error("stream.unshift() after end event");e.emit("error",c)}else{var l;!t.decoder||o||r||(n=t.decoder.write(n),l=!t.objectMode&&0===n.length),o||(t.reading=!1),l||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,o?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&_(e))),function(e,t){t.readingMore||(t.readingMore=!0,i(E,e,t))}(e,t)}else o||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}l.inherits(g,s),g.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding)!==n.encoding&&(e=c.from(e,t),t=""),m(this,n,e,t,!1)},g.prototype.unshift=function(e){return m(this,this._readableState,e,"",!0)},g.prototype.isPaused=function(){return!1===this._readableState.flowing},g.prototype.setEncoding=function(e){return d||(d=n(24).StringDecoder),this._readableState.decoder=new d(e),this._readableState.encoding=e,this};var v=8388608;function w(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=v?e=v:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function _(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(p("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i(b,e):b(e))}function b(e){p("emit readable"),e.emit("readable"),x(e)}function E(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(p("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function k(e){p("readable nexttick read 0"),e.read(0)}function S(e,t){t.reading||(p("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),x(e),t.flowing&&!t.reading&&e.read(0)}function x(e){var t=e._readableState;for(p("flow",t.flowing);t.flowing&&null!==e.read(););}function T(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0==(e-=s)){s===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=c.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),0==(e-=s)){s===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++i}return t.length-=i,n}(e,t),r}(e,t.buffer,t.decoder),n);var n}function O(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i(C,t,e))}function C(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function N(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}g.prototype.read=function(e){p("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return p("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):_(this),null;if(0===(e=w(e,t))&&t.ended)return 0===t.length&&O(this),null;var r,i=t.needReadable;return p("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&p("length less than watermark",i=!0),t.ended||t.reading?p("reading or ended",i=!1):i&&(p("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=w(n,t))),null===(r=e>0?T(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&O(this)),null!==r&&this.emit("data",r),r},g.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},g.prototype.pipe=function(e,n){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,p("pipe count=%d opts=%j",s.pipesCount,n);var u=n&&!1===n.end||e===t.stdout||e===t.stderr?h:l;function c(e){p("onunpipe"),e===r&&h()}function l(){p("onend"),e.end()}s.endEmitted?i(u):r.once("end",u),e.on("unpipe",c);var f=function(e){return function(){var t=e._readableState;p("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,x(e))}}(r);e.on("drain",f);var d=!1;function h(){p("cleanup"),e.removeListener("close",v),e.removeListener("finish",w),e.removeListener("drain",f),e.removeListener("error",m),e.removeListener("unpipe",c),r.removeListener("end",l),r.removeListener("end",h),r.removeListener("data",g),d=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||f()}var y=!1;function g(t){p("ondata"),y=!1,!1!==e.write(t)||y||((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==N(s.pipes,e))&&!d&&(p("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,y=!0),r.pause())}function m(t){p("onerror",t),_(),e.removeListener("error",m),0===a(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",w),_()}function w(){p("onfinish"),e.removeListener("close",v),_()}function _(){p("unpipe"),r.unpipe(e)}return r.on("data",g),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",m),e.once("close",v),e.once("finish",w),e.emit("pipe",r),s.flowing||(p("pipe resume"),r.resume()),e},g.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var o=N(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},g.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&_(this):i(k,this))}return n},g.prototype.addListener=g.prototype.on,g.prototype.resume=function(){var e=this._readableState;return e.flowing||(p("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i(S,e,t))}(this,e)),this},g.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},g.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;for(var i in e.on("end",function(){if(p("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){p("wrapped data"),t.decoder&&(i=t.decoder.write(i)),t.objectMode&&null==i||(t.objectMode||i&&i.length)&&(r.push(i)||(n=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}(["error","close","destroy","pause","resume"],function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){p("wrapped _read",t),n&&(n=!1,e.resume())},r},g._fromList=T}).call(t,n(6))},function(e,t,n){(function(t){"use strict";!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick(function(){e.apply(null,o)})}}:e.exports=t.nextTick}).call(t,n(6))},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(e){"use strict";var r=n(2),i=r.Buffer,o=r.SlowBuffer,s=r.kMaxLength||2147483647;t.alloc=function(e,t,n){if("function"==typeof i.alloc)return i.alloc(e,t,n);if("number"==typeof n)throw new TypeError("encoding must not be number");if("number"!=typeof e)throw new TypeError("size must be a number");if(e>s)throw new RangeError("size is too large");var r=n,o=t;void 0===o&&(r=void 0,o=0);var a=new i(e);if("string"==typeof o)for(var u=new i(o,r),c=u.length,l=-1;++l<e;)a[l]=u[l%c];else a.fill(o);return a},t.allocUnsafe=function(e){if("function"==typeof i.allocUnsafe)return i.allocUnsafe(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>s)throw new RangeError("size is too large");return new i(e)},t.from=function(t,n,r){if("function"==typeof i.from&&(!e.Uint8Array||Uint8Array.from!==i.from))return i.from(t,n,r);if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("string"==typeof t)return new i(t,n);if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var o=n;if(1===arguments.length)return new i(t);void 0===o&&(o=0);var s=r;if(void 0===s&&(s=t.byteLength-o),o>=t.byteLength)throw new RangeError("'offset' is out of bounds");if(s>t.byteLength-o)throw new RangeError("'length' is out of bounds");return new i(t.slice(o,o+s))}if(i.isBuffer(t)){var a=new i(t.length);return t.copy(a,0,0,t.length),a}if(t){if(Array.isArray(t)||"undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return new i(t);if("Buffer"===t.type&&Array.isArray(t.data))return new i(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},t.allocUnsafeSlow=function(e){if("function"==typeof i.allocUnsafeSlow)return i.allocUnsafeSlow(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>=s)throw new RangeError("size is too large");return new o(e)}}).call(t,function(){return this}())},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(t,n(1))},function(e,t){},function(e,t,n){"use strict";n(2).Buffer;var r=n(17);function i(){this.head=null,this.tail=null,this.length=0}e.exports=i,i.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},i.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},i.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},i.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t=r.allocUnsafe(e>>>0),n=this.head,i=0;n;)n.data.copy(t,i),i+=n.data.length,n=n.next;return t}},function(e,t,n){"use strict";var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=f;var i=n(15),o=n(18);o.inherits=n(12);var s=n(14),a=n(22);o.inherits(f,s);for(var u=r(a.prototype),c=0;c<u.length;c++){var l=u[c];f.prototype[l]||(f.prototype[l]=a.prototype[l])}function f(e){if(!(this instanceof f))return new f(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||i(d,this)}function d(e){e.end()}},function(e,n,r){(function(n){"use strict";e.exports=g;var i,o=r(15),s=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?t:o;g.WritableState=y;var a=r(18);a.inherits=r(12);var u,c={deprecate:r(23)};!function(){try{u=r(11)}catch(e){}finally{u||(u=r(8).EventEmitter)}}();var l,f=r(2).Buffer,p=r(17);function d(){}function h(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function y(e,t){i=i||r(21),e=e||{},this.objectMode=!!e.objectMode,t instanceof i&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,a=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:a,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?o(i,r):i(r),e._writableState.errorEmitted=!0,e.emit("error",r)}(e,n,r,t,i);else{var a=_(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?s(v,e,n,a,i):v(e,n,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new k(this)}function g(e){if(i=i||r(21),!(l.call(g,this)||this instanceof i))return new g(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),u.call(this)}function m(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function v(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),E(e,t)}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var s=0;n;)i[s]=n,n=n.next,s+=1;m(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new k(t)}else{for(;n;){var a=n.chunk,u=n.encoding,c=n.callback;if(m(e,t,!1,t.objectMode?1:a.length,a,u,c),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function _(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function E(e,t){var n=_(t);return n&&(0===t.pendingcb?(b(e,t),t.finished=!0,e.emit("finish")):b(e,t)),n}function k(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}a.inherits(g,u),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||e&&e._writableState instanceof y}})):l=function(e){return e instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(e,t,n){var r=this._writableState,i=!1,s=f.isBuffer(e);return"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=d),r.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),o(t,n)}(this,n):(s||function(e,t,n,r){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),o(r,s),i=!1),i}(this,r,e,n))&&(r.pendingcb++,i=function(e,t,n,r,i,o){n||(r=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=p.from(t,n)),t}(t,r,i),f.isBuffer(r)&&(i="buffer"));var s=t.objectMode?1:r.length;t.length+=s;var a=t.length<t.highWaterMark;if(a||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new h(r,i,o),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else m(e,t,!1,s,r,i,o);return a}(this,r,s,e,t,n)),i},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},g.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},g.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,E(e,t),n&&(t.finished?o(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n)}}).call(n,r(6))},function(e,t){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(t,function(){return this}())},function(e,t,n){var r=n(2).Buffer,i=r.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},o=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!i(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=a;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:return void(this.write=s)}this.charBuffer=new r(6),this.charReceived=0,this.charLength=0};function s(e){return e.toString(this.encoding)}function a(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function u(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}o.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((r=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r,i=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),i=(t+=e.toString(this.encoding,0,i)).length-1,(r=t.charCodeAt(i))>=55296&&r<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},o.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},o.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},function(e,t,n){"use strict";e.exports=s;var r=n(21),i=n(18);function o(e){this.afterTransform=function(t,n){return function(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!=n&&e.push(n),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function s(e){if(!(this instanceof s))return new s(e);r.call(this,e),this._transformState=new o(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){a(t,e,n)}):a(t)})}function a(e,t,n){if(t)return e.emit("error",t);null!=n&&e.push(n);var r=e._writableState,i=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n(12),i.inherits(s,r),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},function(e,t,n){"use strict";e.exports=o;var r=n(25),i=n(18);function o(e){if(!(this instanceof o))return new o(e);r.call(this,e)}i.inherits=n(12),i.inherits(o,r),o.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(22)},function(e,t,n){e.exports=n(21)},function(e,t,n){e.exports=n(25)},function(e,t,n){e.exports=n(26)},function(e,t,n){"use strict";var r=n(32),i=n(33),o=n(38),s=n(39),a=n(40),u=n(41),c=n(42),l=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==s.Z_OK)throw new Error(a[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function p(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}f.prototype.push=function(e,t){var n,a,u,c,f,p,d=this.strm,h=this.options.chunkSize,y=this.options.dictionary,g=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?d.input=o.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(h),d.next_out=0,d.avail_out=h),(n=r.inflate(d,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&y&&(p="string"==typeof y?o.string2buf(y):"[object ArrayBuffer]"===l.call(y)?new Uint8Array(y):y,n=r.inflateSetDictionary(this.strm,p)),n===s.Z_BUF_ERROR&&!0===g&&(n=s.Z_OK,g=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&n!==s.Z_STREAM_END&&(0!==d.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(d.output,d.next_out),c=d.next_out-u,f=o.buf2string(d.output,u),d.next_out=c,d.avail_out=h-c,c&&i.arraySet(d.output,d.output,u,c,0),this.onData(f)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(g=!0)}while((d.avail_in>0||0===d.avail_out)&&n!==s.Z_STREAM_END);return n===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),d.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=f,t.inflate=p,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},t.ungzip=p},function(e,t,n){"use strict";var r=n(33),i=n(34),o=n(35),s=n(36),a=n(37),u=0,c=1,l=2,f=4,p=5,d=6,h=0,y=1,g=2,m=-2,v=-3,w=-4,_=-5,b=8,E=1,k=2,S=3,x=4,T=5,O=6,C=7,N=8,A=9,I=10,L=11,F=12,R=13,D=14,M=15,j=16,P=17,U=18,B=19,z=20,H=21,q=22,W=23,Y=24,G=25,V=26,X=27,$=28,Z=29,K=30,J=31,Q=32,ee=852,te=592,ne=15;function re(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function ie(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function oe(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=E,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(ee),t.distcode=t.distdyn=new r.Buf32(te),t.sane=1,t.back=-1,h):m}function se(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,oe(e)):m}function ae(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?m:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,se(e))):m}function ue(e,t){var n,r;return e?(r=new ie,e.state=r,r.window=null,(n=ae(e,t))!==h&&(e.state=null),n):m}var ce,le,fe=!0;function pe(e){if(fe){var t;for(ce=new r.Buf32(512),le=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(c,e.lens,0,288,ce,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(l,e.lens,0,32,le,0,e.work,{bits:5}),fe=!1}e.lencode=ce,e.lenbits=9,e.distcode=le,e.distbits=5}function de(e,t,n,i){var o,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new r.Buf8(s.wsize)),i>=s.wsize?(r.arraySet(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((o=s.wsize-s.wnext)>i&&(o=i),r.arraySet(s.window,t,n-i,o,s.wnext),(i-=o)?(r.arraySet(s.window,t,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}t.inflateReset=se,t.inflateReset2=ae,t.inflateResetKeep=oe,t.inflateInit=function(e){return ue(e,ne)},t.inflateInit2=ue,t.inflate=function(e,t){var n,ee,te,ne,ie,oe,se,ae,ue,ce,le,fe,he,ye,ge,me,ve,we,_e,be,Ee,ke,Se,xe,Te=0,Oe=new r.Buf8(4),Ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return m;(n=e.state).mode===F&&(n.mode=R),ie=e.next_out,te=e.output,se=e.avail_out,ne=e.next_in,ee=e.input,oe=e.avail_in,ae=n.hold,ue=n.bits,ce=oe,le=se,ke=h;e:for(;;)switch(n.mode){case E:if(0===n.wrap){n.mode=R;break}for(;ue<16;){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}if(2&n.wrap&&35615===ae){n.check=0,Oe[0]=255&ae,Oe[1]=ae>>>8&255,n.check=o(n.check,Oe,2,0),ae=0,ue=0,n.mode=k;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&ae)<<8)+(ae>>8))%31){e.msg="incorrect header check",n.mode=K;break}if((15&ae)!==b){e.msg="unknown compression method",n.mode=K;break}if(ue-=4,Ee=8+(15&(ae>>>=4)),0===n.wbits)n.wbits=Ee;else if(Ee>n.wbits){e.msg="invalid window size",n.mode=K;break}n.dmax=1<<Ee,e.adler=n.check=1,n.mode=512&ae?I:F,ae=0,ue=0;break;case k:for(;ue<16;){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}if(n.flags=ae,(255&n.flags)!==b){e.msg="unknown compression method",n.mode=K;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=K;break}n.head&&(n.head.text=ae>>8&1),512&n.flags&&(Oe[0]=255&ae,Oe[1]=ae>>>8&255,n.check=o(n.check,Oe,2,0)),ae=0,ue=0,n.mode=S;case S:for(;ue<32;){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}n.head&&(n.head.time=ae),512&n.flags&&(Oe[0]=255&ae,Oe[1]=ae>>>8&255,Oe[2]=ae>>>16&255,Oe[3]=ae>>>24&255,n.check=o(n.check,Oe,4,0)),ae=0,ue=0,n.mode=x;case x:for(;ue<16;){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}n.head&&(n.head.xflags=255&ae,n.head.os=ae>>8),512&n.flags&&(Oe[0]=255&ae,Oe[1]=ae>>>8&255,n.check=o(n.check,Oe,2,0)),ae=0,ue=0,n.mode=T;case T:if(1024&n.flags){for(;ue<16;){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}n.length=ae,n.head&&(n.head.extra_len=ae),512&n.flags&&(Oe[0]=255&ae,Oe[1]=ae>>>8&255,n.check=o(n.check,Oe,2,0)),ae=0,ue=0}else n.head&&(n.head.extra=null);n.mode=O;case O:if(1024&n.flags&&((fe=n.length)>oe&&(fe=oe),fe&&(n.head&&(Ee=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,ee,ne,fe,Ee)),512&n.flags&&(n.check=o(n.check,ee,fe,ne)),oe-=fe,ne+=fe,n.length-=fe),n.length))break e;n.length=0,n.mode=C;case C:if(2048&n.flags){if(0===oe)break e;fe=0;do{Ee=ee[ne+fe++],n.head&&Ee&&n.length<65536&&(n.head.name+=String.fromCharCode(Ee))}while(Ee&&fe<oe);if(512&n.flags&&(n.check=o(n.check,ee,fe,ne)),oe-=fe,ne+=fe,Ee)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=N;case N:if(4096&n.flags){if(0===oe)break e;fe=0;do{Ee=ee[ne+fe++],n.head&&Ee&&n.length<65536&&(n.head.comment+=String.fromCharCode(Ee))}while(Ee&&fe<oe);if(512&n.flags&&(n.check=o(n.check,ee,fe,ne)),oe-=fe,ne+=fe,Ee)break e}else n.head&&(n.head.comment=null);n.mode=A;case A:if(512&n.flags){for(;ue<16;){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}if(ae!==(65535&n.check)){e.msg="header crc mismatch",n.mode=K;break}ae=0,ue=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=F;break;case I:for(;ue<32;){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}e.adler=n.check=re(ae),ae=0,ue=0,n.mode=L;case L:if(0===n.havedict)return e.next_out=ie,e.avail_out=se,e.next_in=ne,e.avail_in=oe,n.hold=ae,n.bits=ue,g;e.adler=n.check=1,n.mode=F;case F:if(t===p||t===d)break e;case R:if(n.last){ae>>>=7&ue,ue-=7&ue,n.mode=X;break}for(;ue<3;){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}switch(n.last=1&ae,ue-=1,3&(ae>>>=1)){case 0:n.mode=D;break;case 1:if(pe(n),n.mode=z,t===d){ae>>>=2,ue-=2;break e}break;case 2:n.mode=P;break;case 3:e.msg="invalid block type",n.mode=K}ae>>>=2,ue-=2;break;case D:for(ae>>>=7&ue,ue-=7&ue;ue<32;){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}if((65535&ae)!=(ae>>>16^65535)){e.msg="invalid stored block lengths",n.mode=K;break}if(n.length=65535&ae,ae=0,ue=0,n.mode=M,t===d)break e;case M:n.mode=j;case j:if(fe=n.length){if(fe>oe&&(fe=oe),fe>se&&(fe=se),0===fe)break e;r.arraySet(te,ee,ne,fe,ie),oe-=fe,ne+=fe,se-=fe,ie+=fe,n.length-=fe;break}n.mode=F;break;case P:for(;ue<14;){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}if(n.nlen=257+(31&ae),ae>>>=5,ue-=5,n.ndist=1+(31&ae),ae>>>=5,ue-=5,n.ncode=4+(15&ae),ae>>>=4,ue-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=K;break}n.have=0,n.mode=U;case U:for(;n.have<n.ncode;){for(;ue<3;){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}n.lens[Ce[n.have++]]=7&ae,ae>>>=3,ue-=3}for(;n.have<19;)n.lens[Ce[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Se={bits:n.lenbits},ke=a(u,n.lens,0,19,n.lencode,0,n.work,Se),n.lenbits=Se.bits,ke){e.msg="invalid code lengths set",n.mode=K;break}n.have=0,n.mode=B;case B:for(;n.have<n.nlen+n.ndist;){for(;me=(Te=n.lencode[ae&(1<<n.lenbits)-1])>>>16&255,ve=65535&Te,!((ge=Te>>>24)<=ue);){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}if(ve<16)ae>>>=ge,ue-=ge,n.lens[n.have++]=ve;else{if(16===ve){for(xe=ge+2;ue<xe;){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}if(ae>>>=ge,ue-=ge,0===n.have){e.msg="invalid bit length repeat",n.mode=K;break}Ee=n.lens[n.have-1],fe=3+(3&ae),ae>>>=2,ue-=2}else if(17===ve){for(xe=ge+3;ue<xe;){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}ue-=ge,Ee=0,fe=3+(7&(ae>>>=ge)),ae>>>=3,ue-=3}else{for(xe=ge+7;ue<xe;){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}ue-=ge,Ee=0,fe=11+(127&(ae>>>=ge)),ae>>>=7,ue-=7}if(n.have+fe>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=K;break}for(;fe--;)n.lens[n.have++]=Ee}}if(n.mode===K)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=K;break}if(n.lenbits=9,Se={bits:n.lenbits},ke=a(c,n.lens,0,n.nlen,n.lencode,0,n.work,Se),n.lenbits=Se.bits,ke){e.msg="invalid literal/lengths set",n.mode=K;break}if(n.distbits=6,n.distcode=n.distdyn,Se={bits:n.distbits},ke=a(l,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Se),n.distbits=Se.bits,ke){e.msg="invalid distances set",n.mode=K;break}if(n.mode=z,t===d)break e;case z:n.mode=H;case H:if(oe>=6&&se>=258){e.next_out=ie,e.avail_out=se,e.next_in=ne,e.avail_in=oe,n.hold=ae,n.bits=ue,s(e,le),ie=e.next_out,te=e.output,se=e.avail_out,ne=e.next_in,ee=e.input,oe=e.avail_in,ae=n.hold,ue=n.bits,n.mode===F&&(n.back=-1);break}for(n.back=0;me=(Te=n.lencode[ae&(1<<n.lenbits)-1])>>>16&255,ve=65535&Te,!((ge=Te>>>24)<=ue);){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}if(me&&0==(240&me)){for(we=ge,_e=me,be=ve;me=(Te=n.lencode[be+((ae&(1<<we+_e)-1)>>we)])>>>16&255,ve=65535&Te,!(we+(ge=Te>>>24)<=ue);){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}ae>>>=we,ue-=we,n.back+=we}if(ae>>>=ge,ue-=ge,n.back+=ge,n.length=ve,0===me){n.mode=V;break}if(32&me){n.back=-1,n.mode=F;break}if(64&me){e.msg="invalid literal/length code",n.mode=K;break}n.extra=15&me,n.mode=q;case q:if(n.extra){for(xe=n.extra;ue<xe;){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}n.length+=ae&(1<<n.extra)-1,ae>>>=n.extra,ue-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=W;case W:for(;me=(Te=n.distcode[ae&(1<<n.distbits)-1])>>>16&255,ve=65535&Te,!((ge=Te>>>24)<=ue);){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}if(0==(240&me)){for(we=ge,_e=me,be=ve;me=(Te=n.distcode[be+((ae&(1<<we+_e)-1)>>we)])>>>16&255,ve=65535&Te,!(we+(ge=Te>>>24)<=ue);){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}ae>>>=we,ue-=we,n.back+=we}if(ae>>>=ge,ue-=ge,n.back+=ge,64&me){e.msg="invalid distance code",n.mode=K;break}n.offset=ve,n.extra=15&me,n.mode=Y;case Y:if(n.extra){for(xe=n.extra;ue<xe;){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}n.offset+=ae&(1<<n.extra)-1,ae>>>=n.extra,ue-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=K;break}n.mode=G;case G:if(0===se)break e;if(fe=le-se,n.offset>fe){if((fe=n.offset-fe)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=K;break}fe>n.wnext?(fe-=n.wnext,he=n.wsize-fe):he=n.wnext-fe,fe>n.length&&(fe=n.length),ye=n.window}else ye=te,he=ie-n.offset,fe=n.length;fe>se&&(fe=se),se-=fe,n.length-=fe;do{te[ie++]=ye[he++]}while(--fe);0===n.length&&(n.mode=H);break;case V:if(0===se)break e;te[ie++]=n.length,se--,n.mode=H;break;case X:if(n.wrap){for(;ue<32;){if(0===oe)break e;oe--,ae|=ee[ne++]<<ue,ue+=8}if(le-=se,e.total_out+=le,n.total+=le,le&&(e.adler=n.check=n.flags?o(n.check,te,le,ie-le):i(n.check,te,le,ie-le)),le=se,(n.flags?ae:re(ae))!==n.check){e.msg="incorrect data check",n.mode=K;break}ae=0,ue=0}n.mode=$;case $:if(n.wrap&&n.flags){for(;ue<32;){if(0===oe)break e;oe--,ae+=ee[ne++]<<ue,ue+=8}if(ae!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=K;break}ae=0,ue=0}n.mode=Z;case Z:ke=y;break e;case K:ke=v;break e;case J:return w;case Q:default:return m}return e.next_out=ie,e.avail_out=se,e.next_in=ne,e.avail_in=oe,n.hold=ae,n.bits=ue,(n.wsize||le!==e.avail_out&&n.mode<K&&(n.mode<X||t!==f))&&de(e,e.output,e.next_out,le-e.avail_out)?(n.mode=J,w):(ce-=e.avail_in,le-=e.avail_out,e.total_in+=ce,e.total_out+=le,n.total+=le,n.wrap&&le&&(e.adler=n.check=n.flags?o(n.check,te,le,e.next_out-le):i(n.check,te,le,e.next_out-le)),e.data_type=n.bits+(n.last?64:0)+(n.mode===F?128:0)+(n.mode===z||n.mode===M?256:0),(0===ce&&0===le||t===f)&&ke===h&&(ke=_),ke)},t.inflateEnd=function(e){if(!e||!e.state)return m;var t=e.state;return t.window&&(t.window=null),e.state=null,h},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?m:(n.head=t,t.done=!1,h):m},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&n.mode!==L?m:n.mode===L&&i(1,t,r,0)!==n.check?v:de(e,t,r,r)?(n.mode=J,w):(n.havedict=1,h):m},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,s;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(s=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],s.set(o,i),i+=o.length;return s}},i={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(n)},function(e,t){"use strict";e.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--s);i%=65521,o%=65521}return i|o<<16|0}},function(e,t){"use strict";var n=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,r,i){var o=n,s=i+r;e^=-1;for(var a=i;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}},function(e,t){"use strict";e.exports=function(e,t){var n,r,i,o,s,a,u,c,l,f,p,d,h,y,g,m,v,w,_,b,E,k,S,x,T;n=e.state,r=e.next_in,x=e.input,i=r+(e.avail_in-5),o=e.next_out,T=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),u=n.dmax,c=n.wsize,l=n.whave,f=n.wnext,p=n.window,d=n.hold,h=n.bits,y=n.lencode,g=n.distcode,m=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{h<15&&(d+=x[r++]<<h,h+=8,d+=x[r++]<<h,h+=8),w=y[d&m];t:for(;;){if(d>>>=_=w>>>24,h-=_,0==(_=w>>>16&255))T[o++]=65535&w;else{if(!(16&_)){if(0==(64&_)){w=y[(65535&w)+(d&(1<<_)-1)];continue t}if(32&_){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}b=65535&w,(_&=15)&&(h<_&&(d+=x[r++]<<h,h+=8),b+=d&(1<<_)-1,d>>>=_,h-=_),h<15&&(d+=x[r++]<<h,h+=8,d+=x[r++]<<h,h+=8),w=g[d&v];n:for(;;){if(d>>>=_=w>>>24,h-=_,!(16&(_=w>>>16&255))){if(0==(64&_)){w=g[(65535&w)+(d&(1<<_)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(E=65535&w,h<(_&=15)&&(d+=x[r++]<<h,(h+=8)<_&&(d+=x[r++]<<h,h+=8)),(E+=d&(1<<_)-1)>u){e.msg="invalid distance too far back",n.mode=30;break e}if(d>>>=_,h-=_,E>(_=o-s)){if((_=E-_)>l&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(k=0,S=p,0===f){if(k+=c-_,_<b){b-=_;do{T[o++]=p[k++]}while(--_);k=o-E,S=T}}else if(f<_){if(k+=c+f-_,(_-=f)<b){b-=_;do{T[o++]=p[k++]}while(--_);if(k=0,f<b){b-=_=f;do{T[o++]=p[k++]}while(--_);k=o-E,S=T}}}else if(k+=f-_,_<b){b-=_;do{T[o++]=p[k++]}while(--_);k=o-E,S=T}for(;b>2;)T[o++]=S[k++],T[o++]=S[k++],T[o++]=S[k++],b-=3;b&&(T[o++]=S[k++],b>1&&(T[o++]=S[k++]))}else{k=o-E;do{T[o++]=T[k++],T[o++]=T[k++],T[o++]=T[k++],b-=3}while(b>2);b&&(T[o++]=T[k++],b>1&&(T[o++]=T[k++]))}break}}break}}while(r<i&&o<a);r-=b=h>>3,d&=(1<<(h-=b<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<a?a-o+257:257-(o-a),n.hold=d,n.bits=h}},function(e,t,n){"use strict";var r=n(33),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,u,c,l,f,p){var d,h,y,g,m,v,w,_,b,E=p.bits,k=0,S=0,x=0,T=0,O=0,C=0,N=0,A=0,I=0,L=0,F=null,R=0,D=new r.Buf16(16),M=new r.Buf16(16),j=null,P=0;for(k=0;k<=15;k++)D[k]=0;for(S=0;S<u;S++)D[t[n+S]]++;for(O=E,T=15;T>=1&&0===D[T];T--);if(O>T&&(O=T),0===T)return c[l++]=20971520,c[l++]=20971520,p.bits=1,0;for(x=1;x<T&&0===D[x];x++);for(O<x&&(O=x),A=1,k=1;k<=15;k++)if(A<<=1,(A-=D[k])<0)return-1;if(A>0&&(0===e||1!==T))return-1;for(M[1]=0,k=1;k<15;k++)M[k+1]=M[k]+D[k];for(S=0;S<u;S++)0!==t[n+S]&&(f[M[t[n+S]]++]=S);if(0===e?(F=j=f,v=19):1===e?(F=i,R-=257,j=o,P-=257,v=256):(F=s,j=a,v=-1),L=0,S=0,k=x,m=l,C=O,N=0,y=-1,g=(I=1<<O)-1,1===e&&I>852||2===e&&I>592)return 1;for(;;){w=k-N,f[S]<v?(_=0,b=f[S]):f[S]>v?(_=j[P+f[S]],b=F[R+f[S]]):(_=96,b=0),d=1<<k-N,x=h=1<<C;do{c[m+(L>>N)+(h-=d)]=w<<24|_<<16|b|0}while(0!==h);for(d=1<<k-1;L&d;)d>>=1;if(0!==d?(L&=d-1,L+=d):L=0,S++,0==--D[k]){if(k===T)break;k=t[n+f[S]]}if(k>O&&(L&g)!==y){for(0===N&&(N=O),m+=x,A=1<<(C=k-N);C+N<T&&!((A-=D[C+N])<=0);)C++,A<<=1;if(I+=1<<C,1===e&&I>852||2===e&&I>592)return 1;c[y=L&g]=O<<24|C<<16|m-l|0}}return 0!==L&&(c[m+L]=k-N<<24|64<<16|0),p.bits=O,0}},function(e,t,n){"use strict";var r=n(33),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function u(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",s=0;s<t;s++)n+=String.fromCharCode(e[s]);return n}s[254]=s[254]=1,t.string2buf=function(e){var t,n,i,o,s,a=e.length,u=0;for(o=0;o<a;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(u),s=0,o=0;s<u;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},t.buf2binstring=function(e){return u(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,i,o,a=t||e.length,c=new Array(2*a);for(r=0,n=0;n<a;)if((i=e[n++])<128)c[r++]=i;else if((o=s[i])>4)c[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<a;)i=i<<6|63&e[n++],o--;o>1?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return u(c,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+s[e[n]]>t?n:t}},function(e,t){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}}])},e.exports=n()}).call(this,n(140).setImmediate)},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(141),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(57))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,s,a,u=1,c={},l=!1,f=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){h(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&h(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(s+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[u]=i,r(u),u++},p.clearImmediate=d}function d(e){delete c[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{d(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(57),n(91))},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,i="/"===s.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),function(e){return!!e}),!i).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),s="/"===i(e,-1);return(e=n(r(e.split("/"),function(e){return!!e}),!o).join("/"))||o||(e="."),e&&s&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,u=0;u<s;u++)if(i[u]!==o[u]){a=u;break}var c=[];for(u=a;u<i.length;u++)c.push("..");return(c=c.concat(o.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(91))},function(e,t,n){"use strict";n.r(t),n.d(t,"defaults",function(){return a}),n.d(t,"clearPlaylist",function(){return c}),n.d(t,"currentMusicPlaying",function(){return l}),n.d(t,"fadeOut",function(){return f}),n.d(t,"isAudioPlaying",function(){return p}),n.d(t,"isEffectPlaying",function(){return d}),n.d(t,"isElementPlaying",function(){return h}),n.d(t,"isMusicPlaying",function(){return y}),n.d(t,"playMusic",function(){return g}),n.d(t,"playSound",function(){return m}),n.d(t,"setPlaylist",function(){return v}),n.d(t,"stopMusic",function(){return w});var r=n(2);let i,o=[],s=[];const a={fadeDuration:1e3,pauseBetweenTracks:1e3};function u(){clearTimeout(i),0===o.length&&s.length>0&&(o=s.slice()),0!==o.length&&($(".vorple-music").data("stopping",!0),i=setTimeout(function(){const e=o.shift();e&&g(e.url,e.looping)},a.pauseBetweenTracks))}function c(){s=[],o=[]}function l(){const e=$(".vorple-music");return 0===e.length?null:e.data("stopping")||!y()?o.length>0?o[0].url:s.length>0?s[0].url:null:e.data("resourceurl")||e.attr("src")}function f(e,t,n){const r=50,i=$(e),o=i.get(0),s=e=>{e&&i.remove(),"function"==typeof n&&n()};if("number"!=typeof t&&(t=a.fadeDuration),!o||"AUDIO"!==o.tagName)return s(!1),!1;if(t<=0)return s(!0),!0;t=Math.min(t,6e4);const u=r/t;return clearTimeout(i.data("fadeouttimer")),i.data("stopping",!0),function e(t){if(o.volume=Math.max(t,0),t>0){const n=setTimeout(function(){e(t-u)},r);i.data("fadeouttimer",n)}else i.remove(),s(!0)}(o.volume-u),!0}function p(){return d()||y()}function d(){let e=!1;return $(".vorple-sound-effect").each(function(){if(h(this))return e=!0,!1}),e}function h(e){const t=$(e).get(0);return!(!t||"AUDIO"!==t.tagName||t.paused)}function y(){const e=$(".vorple-music");return 0!==e.length&&(o.length>0||(s.length>0||!e.data("stopping")&&h(e)))}function g(e,t={}){const n=$(".vorple-music"),{looping:s,restart:a}=t;clearTimeout(i),!a&&(n.length>0&&(n.attr("src")===e||n.data("resourceurl")===e)||0===n.length&&o.length>0&&o[0].url===e)?(clearTimeout(n.data("fadeOutTimer")),n.prop("volume",1).data("stopping",!1).prop("loop",!!s).get(0).play()):a&&h(".vorple-music")?(o.unshift({url:e,looping:!!s}),f(n,null,u)):(n.remove(),$('<audio class="vorple-audio vorple-music">').attr("src",Object(r.resourceUrl)(e)).data("resourceurl",e).prop("loop",!!s).appendTo("body").on("ended",u).get(0).play())}function m(e,t={}){const n=!!t.looping,i=$('<audio class="vorple-audio vorple-sound-effect">').attr("src",Object(r.resourceUrl)(e)).data("resourceurl",e).prop("loop",n).appendTo("body");t.id&&i.attr("id",t.id);const o=i.get(0);return o.play(),n||i.on("ended",function(){this.remove()}),o}function v(e,t={}){if(0===e.length)return o=[],void(s=[]);const{looping:n,restart:r,shuffled:i}=t,a=l(),u=e.map(e=>"string"==typeof e?{url:e,looping:!1}:e);i&&function(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}(u);const c=r?-1:u.findIndex(e=>e.url===a),f=c<1?0:c;o=u.slice(f+1),n&&(s=u.slice()),a!==u[f].url&&g(u[f].url)}function w(e){const t=$(".vorple-music");o=[],s=[],t.length>0&&f(t,e,u)}},function(e,t,n){var r;e.exports=function e(t,n,i){function o(a,u){if(!n[a]){if(!t[a]){if(!u&&"function"==typeof r&&r)return r(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n||e)},l,l.exports,e,t,n,i)}return n[a].exports}for(var s="function"==typeof r&&r,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){"use strict";t.exports=function e(t){if(!t||"object"!=typeof t)return t;if("[object Date]"==Object.prototype.toString.call(t))return new Date(t.getTime());if(Array.isArray(t))return t.map(e);var n={};return Object.keys(t).forEach(function(r){n[r]=e(t[r])}),n}},{}],2:[function(e,t,n){t.exports=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r)return(i=t.createElement("html")).innerHTML=e,i.removeChild(i.lastChild);var i,s=o[r]||o._default,a=s[0],u=s[1],c=s[2];for((i=t.createElement("div")).innerHTML=u+e+c;a--;)i=i.lastChild;if(i.firstChild==i.lastChild)return i.removeChild(i.firstChild);for(var l=t.createDocumentFragment();i.firstChild;)l.appendChild(i.removeChild(i.firstChild));return l};var r,i=!1;"undefined"!=typeof document&&((r=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',i=!r.getElementsByTagName("link").length,r=void 0);var o={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:i?[1,"X<div>","</div>"]:[0,"",""]};o.td=o.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],o.option=o.optgroup=[1,'<select multiple="multiple">',"</select>"],o.thead=o.tbody=o.colgroup=o.caption=o.tfoot=[1,"<table>","</table>"],o.polyline=o.ellipse=o.polygon=o.circle=o.text=o.line=o.path=o.rect=o.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],3:[function(e,t,n){var r=/^(?:submit|button|image|reset|file)$/i,i=/^(?:input|select|textarea|keygen)/i,o=/(\[[^\[\]]*\])/g;function s(e,t,n){if(t.match(o))!function e(t,n,r){if(0===n.length)return t=r;var i=n.shift(),o=i.match(/^\[(.+?)\]$/);if("[]"===i)return t=t||[],Array.isArray(t)?t.push(e(null,n,r)):(t._values=t._values||[],t._values.push(e(null,n,r))),t;if(o){var s=o[1],a=+s;isNaN(a)?(t=t||{})[s]=e(t[s],n,r):(t=t||[])[a]=e(t[a],n,r)}else t[i]=e(t[i],n,r);return t}(e,function(e){var t=[],n=new RegExp(o),r=/^([^\[\]]*)/.exec(e);for(r[1]&&t.push(r[1]);null!==(r=n.exec(e));)t.push(r[1]);return t}(t),n);else{var r=e[t];r?(Array.isArray(r)||(e[t]=[r]),e[t].push(n)):e[t]=n}return e}function a(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=(n=encodeURIComponent(n)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}t.exports=function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var n=t.hash?{}:"",o=t.serializer||(t.hash?s:a),u=e&&e.elements?e.elements:[],c=Object.create(null),l=0;l<u.length;++l){var f=u[l];if((t.disabled||!f.disabled)&&f.name&&i.test(f.nodeName)&&!r.test(f.type)){var p=f.name,d=f.value;if("checkbox"!==f.type&&"radio"!==f.type||f.checked||(d=void 0),t.empty){if("checkbox"!==f.type||f.checked||(d=""),"radio"===f.type&&(c[f.name]||f.checked?f.checked&&(c[f.name]=!0):c[f.name]=!1),!d&&"radio"==f.type)continue}else if(!d)continue;if("select-multiple"!==f.type)n=o(n,p,d);else{d=[];for(var h=f.options,y=!1,g=0;g<h.length;++g){var m=h[g],v=t.empty&&!m.value,w=m.value||v;m.selected&&w&&(y=!0,n=t.hash&&"[]"!==p.slice(p.length-2)?o(n,p+"[]",m.value):o(n,p,m.value))}!y&&t.empty&&(n=o(n,p,""))}}}if(t.empty)for(var p in c)c[p]||(n=o(n,p,""));return n}},{}],4:[function(e,t,n){var r=e("domify"),i=e("form-serialize"),o=e("deep-clone-simple");t.exports=function(e){var t={name:"dialog",open:function(t){var n=Object.assign({},o(this.defaultOptions),t);n.unsafeMessage&&!n.message?n.message=n.unsafeMessage:n.message&&(n.message=e._escapeHtml(n.message));var i=n.unsafeContent=function(e){var t=document.createElement("form");t.classList.add("vex-dialog-form");var n=document.createElement("div");n.classList.add("vex-dialog-message"),n.appendChild(e.message instanceof window.Node?e.message:r(e.message));var i=document.createElement("div");return i.classList.add("vex-dialog-input"),i.appendChild(e.input instanceof window.Node?e.input:r(e.input)),t.appendChild(n),t.appendChild(i),t}(n),s=e.open(n);""!==n.yesText&&(n.buttons[0].text=n.yesText),""!==n.noText&&(n.buttons[1].text=n.noText);var a=n.beforeClose&&n.beforeClose.bind(s);if(s.options.beforeClose=function(){var e=!a||a();return e&&n.callback(this.value||!1),e}.bind(s),i.appendChild(function(e){var t=document.createElement("div");t.classList.add("vex-dialog-buttons");for(var n=0;n<e.length;n++){var r=e[n],i=document.createElement("button");i.type=r.type,i.textContent=r.text,i.className=r.className,i.classList.add("vex-dialog-button"),0===n?i.classList.add("vex-first"):n===e.length-1&&i.classList.add("vex-last"),function(e){i.addEventListener("click",function(t){e.click&&e.click.call(this,t)}.bind(this))}.bind(this)(r),t.appendChild(i)}return t}.call(s,n.buttons)),s.form=i,i.addEventListener("submit",n.onSubmit.bind(s)),n.focusFirstInput){var u=s.contentEl.querySelector("button, input, select, textarea");u&&u.focus()}return s},alert:function(e){return"string"==typeof e&&(e={message:e}),e=Object.assign({},o(this.defaultOptions),o(this.defaultAlertOptions),e),this.open(e)},confirm:function(e){if("object"!=typeof e||"function"!=typeof e.callback)throw new Error("dialog.confirm(options) requires options.callback.");return e=Object.assign({},o(this.defaultOptions),o(this.defaultConfirmOptions),e),this.open(e)},prompt:function(t){if("object"!=typeof t||"function"!=typeof t.callback)throw new Error("dialog.prompt(options) requires options.callback.");var n=Object.assign({},o(this.defaultOptions),o(this.defaultPromptOptions)),r={unsafeMessage:'<label for="vex">'+e._escapeHtml(t.label||n.label)+"</label>",input:'<input name="vex" type="text" class="vex-dialog-prompt-input" placeholder="'+e._escapeHtml(t.placeholder||n.placeholder)+'" value="'+e._escapeHtml(t.value||n.value)+'" />'},i=(t=Object.assign(n,r,t)).callback;return t.callback=function(e){if("object"==typeof e){var t=Object.keys(e);e=t.length?e[t[0]]:""}i(e)},this.open(t)},buttons:{YES:{text:"OK",type:"submit",className:"vex-dialog-button-primary",click:function(){this.value=!0}},NO:{text:"Cancel",type:"button",className:"vex-dialog-button-secondary",click:function(){this.value=!1,this.close()}}}};return t.defaultOptions={callback:function(){},afterOpen:function(){},message:"",input:"",yesText:"",noText:"",buttons:[t.buttons.YES,t.buttons.NO],showCloseButton:!1,onSubmit:function(e){return e.preventDefault(),this.options.input&&(this.value=i(this.form,{hash:!0})),this.close()},focusFirstInput:!0},t.defaultAlertOptions={buttons:[t.buttons.YES]},t.defaultPromptOptions={label:"Prompt:",placeholder:"",value:""},t.defaultConfirmOptions={},t}},{"deep-clone-simple":1,domify:2,"form-serialize":3}]},{},[4])(4)},function(e,t,n){var r,i,o;
/*!
 PowerTip v1.3.1 (2018-04-15)
 https://stevenbenner.github.io/jquery-powertip/
 Copyright (c) 2018 Steven Benner (http://stevenbenner.com/).
 Released under MIT license.
 https://raw.github.com/stevenbenner/jquery-powertip/master/LICENSE.txt
*/i=[n(19)],void 0===(o="function"==typeof(r=function(e){var t=e(document),n=e(window),r=e("body"),i="displayController",o="hasActiveHover",s="forcedOpen",a="hasMouseMove",u="mouseOnToPopup",c="powertip",l="powertipjq",f="powertiptarget",p=".powertip",d=180/Math.PI,h=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","contextmenu"],y={elements:null,tooltips:null,isTipOpen:!1,isFixedTipOpen:!1,isClosing:!1,tipOpenImminent:!1,activeHover:null,currentX:0,currentY:0,previousX:0,previousY:0,desyncTimeout:null,closeDelayTimeout:null,mouseTrackingActive:!1,delayInProgress:!1,windowWidth:0,windowHeight:0,scrollTop:0,scrollLeft:0},g={none:0,top:1,bottom:2,left:4,right:8};function m(){var t=this;t.top="auto",t.left="auto",t.right="auto",t.bottom="auto",t.set=function(n,r){e.isNumeric(r)&&(t[n]=Math.round(r))}}function v(e,t,n){var r=null,a=null;function u(i,a){c(),e.data(o)?l():i?(a&&e.data(s,!0),f(),n.showTip(e)):(y.tipOpenImminent=!0,r=setTimeout(function(){var i,o;r=null,i=Math.abs(y.previousX-y.currentX),o=Math.abs(y.previousY-y.currentY),i+o<t.intentSensitivity?(l(),f(),n.showTip(e)):(y.previousX=y.currentX,y.previousY=y.currentY,u())},t.intentPollInterval))}function c(e){r=clearTimeout(r),(y.closeDelayTimeout&&a===y.closeDelayTimeout||e)&&l()}function l(){y.closeDelayTimeout=clearTimeout(y.closeDelayTimeout),y.delayInProgress=!1}function f(){y.delayInProgress&&y.activeHover&&!y.activeHover.is(e)&&y.activeHover.data(i).hide(!0)}this.show=u,this.hide=function(r){a&&(a=y.closeDelayTimeout=clearTimeout(a),y.delayInProgress=!1),c(),y.tipOpenImminent=!1,e.data(o)&&(e.data(s,!1),r?n.hideTip(e):(y.delayInProgress=!0,y.closeDelayTimeout=setTimeout(function(){y.closeDelayTimeout=null,n.hideTip(e),y.delayInProgress=!1,a=null},t.closeDelay),a=y.closeDelayTimeout))},this.cancel=c,this.resetPosition=function(){n.resetPosition(e)}}function w(){this.compute=function(e,t,n,r,i){var o,s=t.split("-")[0],a=new m;switch(o=function(e){return Boolean(window.SVGElement&&e[0]instanceof SVGElement)}(e)?function(e,t){var n,r,i,o,s=e.closest("svg")[0],a=e[0],u=s.createSVGPoint(),c=a.getBBox(),l=a.getScreenCTM(),f=c.width/2,p=c.height/2,h=[],g=["nw","n","ne","e","se","s","sw","w"];function m(){h.push(u.matrixTransform(l))}if(u.x=c.x,u.y=c.y,m(),u.x+=f,m(),u.x+=f,m(),u.y+=p,m(),u.y+=p,m(),u.x-=f,m(),u.x-=f,m(),u.y-=p,m(),h[0].y!==h[1].y||h[0].x!==h[7].x)for(r=Math.atan2(l.b,l.a)*d,(i=Math.ceil((r%360-22.5)/45))<1&&(i+=8);i--;)g.push(g.shift());for(o=0;o<h.length;o++)if(g[o]===t){n=h[o];break}return{top:n.y+y.scrollTop,left:n.x+y.scrollLeft}}(e,s):function(e,t){var n,r,i=e.offset(),o=e.outerWidth(),s=e.outerHeight();switch(t){case"n":n=i.left+o/2,r=i.top;break;case"e":n=i.left+o,r=i.top+s/2;break;case"s":n=i.left+o/2,r=i.top+s;break;case"w":n=i.left,r=i.top+s/2;break;case"nw":n=i.left,r=i.top;break;case"ne":n=i.left+o,r=i.top;break;case"sw":n=i.left,r=i.top+s;break;case"se":n=i.left+o,r=i.top+s}return{top:r,left:n}}(e,s),t){case"n":a.set("left",o.left-n/2),a.set("bottom",y.windowHeight-o.top+i);break;case"e":a.set("left",o.left+i),a.set("top",o.top-r/2);break;case"s":a.set("left",o.left-n/2),a.set("top",o.top+i);break;case"w":a.set("top",o.top-r/2),a.set("right",y.windowWidth-o.left+i);break;case"nw":a.set("bottom",y.windowHeight-o.top+i),a.set("right",y.windowWidth-o.left-20);break;case"nw-alt":a.set("left",o.left),a.set("bottom",y.windowHeight-o.top+i);break;case"ne":a.set("left",o.left-20),a.set("bottom",y.windowHeight-o.top+i);break;case"ne-alt":a.set("bottom",y.windowHeight-o.top+i),a.set("right",y.windowWidth-o.left);break;case"sw":a.set("top",o.top+i),a.set("right",y.windowWidth-o.left-20);break;case"sw-alt":a.set("left",o.left),a.set("top",o.top+i);break;case"se":a.set("left",o.left-20),a.set("top",o.top+i);break;case"se-alt":a.set("top",o.top+i),a.set("right",y.windowWidth-o.left)}return a}}function _(d){var h=new w,v=e("#"+d.popupId);function _(e){y.isClosing=!0,y.isTipOpen=!1,y.desyncTimeout=clearInterval(y.desyncTimeout),e.data(o,!1),e.data(s,!1),t.off("click"+p),v.off(p),v.fadeOut(d.fadeOutTime,function(){var t=new m;y.activeHover=null,y.isClosing=!1,y.isFixedTipOpen=!1,v.removeClass(),t.set("top",y.currentY+d.offset),t.set("left",y.currentX+d.offset),v.css(t),e.trigger("powerTipClose")})}function b(){var e,t,n,r;!y.isFixedTipOpen&&(y.isTipOpen||y.tipOpenImminent&&v.data(a))&&(e=v.outerWidth(),t=v.outerHeight(),(n=new m).set("top",y.currentY+d.offset),n.set("left",y.currentX+d.offset),(r=O(n,e,t))!==g.none&&(1===function(e){for(var t=0;e;)e&=e-1,t++;return t}(r)?r===g.right?n.set("left",y.scrollLeft+y.windowWidth-e):r===g.bottom&&n.set("top",y.scrollTop+y.windowHeight-t):(n.set("left",y.currentX-e-d.offset),n.set("top",y.currentY-t-d.offset))),v.css(n))}function E(t){var n,r;d.smartPlacement||d.followMouse&&t.data(s)?(n=e.fn.powerTip.smartPlacementLists[d.placement],e.each(n,function(e,n){var i=O(k(t,n),v.outerWidth(),v.outerHeight());return r=n,i!==g.none})):(k(t,d.placement),r=d.placement),v.removeClass("w nw sw e ne se n s w se-alt sw-alt ne-alt nw-alt"),v.addClass(r)}function k(e,t){var n,r,i=0,o=new m;o.set("top",0),o.set("left",0),v.css(o);do{n=v.outerWidth(),r=v.outerHeight(),o=h.compute(e,t,n,r,d.offset),v.css(o)}while(++i<=5&&(n!==v.outerWidth()||r!==v.outerHeight()));return o}function S(){var t=!1,n=e.grep(["mouseleave","mouseout","blur","focusout"],function(t){return-1!==e.inArray(t,d.closeEvents)}).length>0;y.isTipOpen&&!y.isClosing&&!y.delayInProgress&&n&&(!1===y.activeHover.data(o)||y.activeHover.is(":disabled")?t=!0:T(y.activeHover)||y.activeHover.is(":focus")||y.activeHover.data(s)||v.data(u)&&T(v)||(t=!0),t&&_(y.activeHover))}0===v.length&&(v=e("<div/>",{id:d.popupId}),0===r.length&&(r=e("body")),r.append(v),y.tooltips=y.tooltips?y.tooltips.add(v):v),d.followMouse&&(v.data(a)||(t.on("mousemove"+p,b),n.on("scroll"+p,b),v.data(a,!0))),this.showTip=function(n){n.data(o,!0),v.queue(function(r){!function n(r){var a;if(r.data(o)){if(y.isTipOpen)return y.isClosing||_(y.activeHover),void v.delay(100).queue(function(e){n(r),e()});r.trigger("powerTipPreRender"),(a=function(t){var n,r,i=t.data(c),o=t.data(l),s=t.data(f);return i?(e.isFunction(i)&&(i=i.call(t[0])),r=i):o?(e.isFunction(o)&&(o=o.call(t[0])),o.length>0&&(r=o.clone(!0,!0))):s&&(n=e("#"+s)).length>0&&(r=n.html()),r}(r))&&(v.empty().append(a),r.trigger("powerTipRender"),y.activeHover=r,y.isTipOpen=!0,v.data(u,d.mouseOnToPopup),v.addClass(d.popupClass),!d.followMouse||r.data(s)?(E(r),y.isFixedTipOpen=!0):b(),r.data(s)||d.followMouse||t.on("click"+p,function(t){var n=t.target;n!==r[0]&&(d.mouseOnToPopup&&(n===v[0]||e.contains(v[0],n))||e.powerTip.hide())}),d.mouseOnToPopup&&!d.manual&&(v.on("mouseenter"+p,function(){y.activeHover&&y.activeHover.data(i).cancel()}),v.on("mouseleave"+p,function(){y.activeHover&&y.activeHover.data(i).hide()})),v.fadeIn(d.fadeInTime,function(){y.desyncTimeout||(y.desyncTimeout=setInterval(S,500)),r.trigger("powerTipOpen")}))}}(n),r()})},this.hideTip=_,this.resetPosition=E}function b(t){return Boolean(t&&e.inArray(t.type,h)>-1&&"number"==typeof t.pageX)}function E(){y.scrollLeft=n.scrollLeft(),y.scrollTop=n.scrollTop(),y.windowWidth=n.width(),y.windowHeight=n.height()}function k(){y.windowWidth=n.width(),y.windowHeight=n.height()}function S(){var e=n.scrollLeft(),t=n.scrollTop();e!==y.scrollLeft&&(y.currentX+=e-y.scrollLeft,y.scrollLeft=e),t!==y.scrollTop&&(y.currentY+=t-y.scrollTop,y.scrollTop=t)}function x(e){y.currentX=e.pageX,y.currentY=e.pageY}function T(e){var t=e.offset(),n=e[0].getBoundingClientRect(),r=n.right-n.left,i=n.bottom-n.top;return y.currentX>=t.left&&y.currentX<=t.left+r&&y.currentY>=t.top&&y.currentY<=t.top+i}function O(e,t,n){var r=y.scrollTop,i=y.scrollLeft,o=r+y.windowHeight,s=i+y.windowWidth,a=g.none;return(e.top<r||Math.abs(e.bottom-y.windowHeight)-n<r)&&(a|=g.top),(e.top+n>o||Math.abs(e.bottom-y.windowHeight)>o)&&(a|=g.bottom),(e.left<i||e.right+t>s)&&(a|=g.left),(e.left+t>s||e.right<i)&&(a|=g.right),a}return e.fn.powerTip=function(r,o){var s,a,u=this;return u.length?"string"===e.type(r)&&e.powerTip[r]?e.powerTip[r].call(u,u,o):(s=e.extend({},e.fn.powerTip.defaults,r),e.powerTip.destroy(u),a=new _(s),y.mouseTrackingActive||(y.mouseTrackingActive=!0,E(),e(E),t.on("mousemove"+p,x),n.on("resize"+p,k),n.on("scroll"+p,S)),u.each(function(){var t=e(this),n=t.data(c),r=t.data(l),o=t.data(f),u=t.attr("title");n||o||r||!u||(t.data(c,u),t.data("originalTitle",u),t.removeAttr("title")),t.data(i,new v(t,s,a))}),s.manual||(e.each(s.openEvents,function(t,n){e.inArray(n,s.closeEvents)>-1?u.on(n+p,function(t){e.powerTip.toggle(this,t)}):u.on(n+p,function(t){e.powerTip.show(this,t)})}),e.each(s.closeEvents,function(t,n){e.inArray(n,s.openEvents)<0&&u.on(n+p,function(t){e.powerTip.hide(this,!b(t))})}),u.on("keydown"+p,function(t){27===t.keyCode&&e.powerTip.hide(this,!0)})),y.elements=y.elements?y.elements.add(u):u,u):u},e.fn.powerTip.defaults={fadeInTime:200,fadeOutTime:100,followMouse:!1,popupId:"powerTip",popupClass:null,intentSensitivity:7,intentPollInterval:100,closeDelay:100,placement:"n",smartPlacement:!1,offset:10,mouseOnToPopup:!1,manual:!1,openEvents:["mouseenter","focus"],closeEvents:["mouseleave","blur"]},e.fn.powerTip.smartPlacementLists={n:["n","ne","nw","s"],e:["e","ne","se","w","nw","sw","n","s","e"],s:["s","se","sw","n"],w:["w","nw","sw","e","ne","se","n","s","w"],nw:["nw","w","sw","n","s","se","nw"],ne:["ne","e","se","n","s","sw","ne"],sw:["sw","w","nw","s","n","ne","sw"],se:["se","e","ne","s","n","nw","se"],"nw-alt":["nw-alt","n","ne-alt","sw-alt","s","se-alt","w","e"],"ne-alt":["ne-alt","n","nw-alt","se-alt","s","sw-alt","e","w"],"sw-alt":["sw-alt","s","se-alt","nw-alt","n","ne-alt","w","e"],"se-alt":["se-alt","s","sw-alt","ne-alt","n","nw-alt","e","w"]},e.powerTip={show:function(t,n){return b(n)?(x(n),y.previousX=n.pageX,y.previousY=n.pageY,e(t).data(i).show()):e(t).first().data(i).show(!0,!0),t},reposition:function(t){return e(t).first().data(i).resetPosition(),t},hide:function(t,n){var r;return n=!t||n,t?r=e(t).first().data(i):y.activeHover&&(r=y.activeHover.data(i)),r&&r.hide(n),t},toggle:function(t,n){return y.activeHover&&y.activeHover.is(t)?e.powerTip.hide(t,!b(n)):e.powerTip.show(t,n),t},destroy:function(r){var a=r?e(r):y.elements;return y.elements&&0!==y.elements.length?(y.isTipOpen&&!y.isClosing&&a.filter(y.activeHover).length>0&&(y.delayInProgress&&y.activeHover.data(i).cancel(),e.powerTip.hide(y.activeHover,!0)),a.off(p).each(function(){var t=e(this),n=["originalTitle",i,o,s];t.data("originalTitle")&&(t.attr("title",t.data("originalTitle")),n.push(c)),t.removeData(n)}),y.elements=y.elements.not(a),0===y.elements.length&&(n.off(p),t.off(p),y.mouseTrackingActive=!1,y.tooltips.remove(),y.tooltips=null),r):r}},e.powerTip.showTip=e.powerTip.show,e.powerTip.closeTip=e.powerTip.hide,e.powerTip})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i;n(147),r=[n(19)],void 0===(i=function(e){return function(){var t,n,r,i=0,o={error:"error",info:"info",success:"success",warning:"warning"},s={clear:function(n,r){var i=f();t||a(i),u(n,i,r)||function(n){for(var r=t.children(),i=r.length-1;i>=0;i--)u(e(r[i]),n)}(i)},remove:function(n){var r=f();t||a(r),n&&0===e(":focus",n).length?p(n):t.children().length&&t.remove()},error:function(e,t,n){return l({type:o.error,iconClass:f().iconClasses.error,message:e,optionsOverride:n,title:t})},getContainer:a,info:function(e,t,n){return l({type:o.info,iconClass:f().iconClasses.info,message:e,optionsOverride:n,title:t})},options:{},subscribe:function(e){n=e},success:function(e,t,n){return l({type:o.success,iconClass:f().iconClasses.success,message:e,optionsOverride:n,title:t})},version:"2.1.4",warning:function(e,t,n){return l({type:o.warning,iconClass:f().iconClasses.warning,message:e,optionsOverride:n,title:t})}};return s;function a(n,r){return n||(n=f()),(t=e("#"+n.containerId)).length?t:(r&&(t=function(n){return(t=e("<div/>").attr("id",n.containerId).addClass(n.positionClass)).appendTo(e(n.target)),t}(n)),t)}function u(t,n,r){var i=!(!r||!r.force)&&r.force;return!(!t||!i&&0!==e(":focus",t).length||(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){p(t)}}),0))}function c(e){n&&n(e)}function l(n){var o=f(),s=n.iconClass||o.iconClass;if(void 0!==n.optionsOverride&&(o=e.extend(o,n.optionsOverride),s=n.optionsOverride.iconClass||s),!function(e,t){if(e.preventDuplicates){if(t.message===r)return!0;r=t.message}return!1}(o,n)){i++,t=a(o,!0);var u=null,l=e("<div/>"),d=e("<div/>"),h=e("<div/>"),y=e("<div/>"),g=e(o.closeHtml),m={intervalId:null,hideEta:null,maxHideTime:null},v={toastId:i,state:"visible",startTime:new Date,options:o,map:n};return n.iconClass&&l.addClass(o.toastClass).addClass(s),function(){if(n.title){var e=n.title;o.escapeHtml&&(e=w(n.title)),d.append(e).addClass(o.titleClass),l.append(d)}}(),function(){if(n.message){var e=n.message;o.escapeHtml&&(e=w(n.message)),h.append(e).addClass(o.messageClass),l.append(h)}}(),o.closeButton&&(g.addClass(o.closeClass).attr("role","button"),l.prepend(g)),o.progressBar&&(y.addClass(o.progressClass),l.prepend(y)),o.rtl&&l.addClass("rtl"),o.newestOnTop?t.prepend(l):t.append(l),function(){var e="";switch(n.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}l.attr("aria-live",e)}(),l.hide(),l[o.showMethod]({duration:o.showDuration,easing:o.showEasing,complete:o.onShown}),o.timeOut>0&&(u=setTimeout(_,o.timeOut),m.maxHideTime=parseFloat(o.timeOut),m.hideEta=(new Date).getTime()+m.maxHideTime,o.progressBar&&(m.intervalId=setInterval(k,10))),o.closeOnHover&&l.hover(E,b),!o.onclick&&o.tapToDismiss&&l.click(_),o.closeButton&&g&&g.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),o.onCloseClick&&o.onCloseClick(e),_(!0)}),o.onclick&&l.click(function(e){o.onclick(e),_()}),c(v),o.debug&&console&&console.log(v),l}function w(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function _(t){var n=t&&!1!==o.closeMethod?o.closeMethod:o.hideMethod,r=t&&!1!==o.closeDuration?o.closeDuration:o.hideDuration,i=t&&!1!==o.closeEasing?o.closeEasing:o.hideEasing;if(!e(":focus",l).length||t)return clearTimeout(m.intervalId),l[n]({duration:r,easing:i,complete:function(){p(l),clearTimeout(u),o.onHidden&&"hidden"!==v.state&&o.onHidden(),v.state="hidden",v.endTime=new Date,c(v)}})}function b(){(o.timeOut>0||o.extendedTimeOut>0)&&(u=setTimeout(_,o.extendedTimeOut),m.maxHideTime=parseFloat(o.extendedTimeOut),m.hideEta=(new Date).getTime()+m.maxHideTime)}function E(){clearTimeout(u),m.hideEta=0,l.stop(!0,!0)[o.showMethod]({duration:o.showDuration,easing:o.showEasing})}function k(){var e=(m.hideEta-(new Date).getTime())/m.maxHideTime*100;y.width(e+"%")}}function f(){return e.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1},s.options)}function p(e){t||(t=a()),e.is(":visible")||(e.remove(),e=null,0===t.children().length&&(t.remove(),r=void 0))}}()}.apply(t,r))||(e.exports=i)},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}}]);
//# sourceMappingURL=vorple.min.js.map